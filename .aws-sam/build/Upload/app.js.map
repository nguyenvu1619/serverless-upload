{"version":3,"sources":["webpack://serverless-upload/./node_modules/aws-sdk/clients/cognitoidentity.js","webpack://serverless-upload/./node_modules/aws-sdk/clients/s3.js","webpack://serverless-upload/./node_modules/aws-sdk/clients/sts.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/api_loader.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/config.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/config_regional_endpoint.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/core.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/chainable_temporary_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/cognito_identity_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/credential_provider_chain.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/ec2_metadata_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/ecs_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/environment_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/file_system_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/process_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/remote_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/saml_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/shared_ini_file_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/temporary_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/token_file_web_identity_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/web_identity_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/discover_endpoint.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/buffered-create-event-stream.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/event-message-chunker-stream.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/event-message-chunker.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/event-message-unmarshaller-stream.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/int64.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/parse-event.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/parse-message.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/split-message.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/streaming-create-event-stream.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event_listeners.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/http.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/http/node.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/json/builder.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/json/parser.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/metadata_service.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/model/api.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/model/collection.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/model/operation.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/model/paginator.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/model/resource_waiter.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/model/shape.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/node_loader.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/param_validator.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/protocol/helpers.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/protocol/json.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/protocol/query.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/protocol/rest.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/protocol/rest_json.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/protocol/rest_xml.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/publisher/configuration.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/publisher/index.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/query/query_param_serializer.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/realclock/nodeClock.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/region_config.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/request.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/resource_waiter.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/response.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/s3/managed_upload.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/sequential_executor.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/service.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/services/s3.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/services/s3util.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/services/sts.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/shared-ini/index.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/shared-ini/ini-loader.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/signers/presign.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/signers/request_signer.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/signers/s3.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/signers/v2.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/signers/v3.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/signers/v3https.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/signers/v4.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/signers/v4_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/state_machine.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/util.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/xml/builder.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/xml/escape-attribute.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/xml/escape-element.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/xml/node_parser.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/xml/xml-node.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/xml/xml-text.js","webpack://serverless-upload/./node_modules/aws-sdk/vendor/endpoint-cache/index.js","webpack://serverless-upload/./node_modules/aws-sdk/vendor/endpoint-cache/utils/LRU.js","webpack://serverless-upload/./node_modules/jmespath/jmespath.js","webpack://serverless-upload/./node_modules/sax/lib/sax.js","webpack://serverless-upload/./functions/upload/app.ts","webpack://serverless-upload/./node_modules/uuid/index.js","webpack://serverless-upload/./node_modules/uuid/lib/bytesToUuid.js","webpack://serverless-upload/./node_modules/uuid/lib/rng.js","webpack://serverless-upload/./node_modules/uuid/v1.js","webpack://serverless-upload/./node_modules/uuid/v4.js","webpack://serverless-upload/./node_modules/xml2js/lib/bom.js","webpack://serverless-upload/./node_modules/xml2js/lib/builder.js","webpack://serverless-upload/./node_modules/xml2js/lib/defaults.js","webpack://serverless-upload/./node_modules/xml2js/lib/parser.js","webpack://serverless-upload/./node_modules/xml2js/lib/processors.js","webpack://serverless-upload/./node_modules/xml2js/lib/xml2js.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/Utility.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLAttribute.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLCData.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLComment.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLDTDAttList.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLDTDElement.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLDTDEntity.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLDTDNotation.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLDeclaration.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLDocType.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLDocument.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLDocumentCB.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLElement.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLNode.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLProcessingInstruction.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLRaw.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLStreamWriter.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLStringWriter.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLStringifier.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLText.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLWriterBase.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/index.js","webpack://serverless-upload/external \"buffer\"","webpack://serverless-upload/external \"child_process\"","webpack://serverless-upload/external \"crypto\"","webpack://serverless-upload/external \"dgram\"","webpack://serverless-upload/external \"domain\"","webpack://serverless-upload/external \"events\"","webpack://serverless-upload/external \"fs\"","webpack://serverless-upload/external \"http\"","webpack://serverless-upload/external \"https\"","webpack://serverless-upload/external \"os\"","webpack://serverless-upload/external \"path\"","webpack://serverless-upload/external \"querystring\"","webpack://serverless-upload/external \"stream\"","webpack://serverless-upload/external \"string_decoder\"","webpack://serverless-upload/external \"timers\"","webpack://serverless-upload/external \"url\"","webpack://serverless-upload/external \"util\"","webpack://serverless-upload/webpack/bootstrap","webpack://serverless-upload/webpack/startup"],"names":["AWS","Service","apiLoader","services","CognitoIdentity","defineService","Object","defineProperty","get","model","paginators","enumerable","configurable","module","exports","S3","waiters","STS","svc","version","hasOwnProperty","Error","PromisesDependency","Config","util","inherit","constructor","options","undefined","this","extractCredentials","each","call","keys","key","value","set","getCredentials","callback","err","self","finish","credentials","credError","msg","error","code","message","name","accessKeyId","secretAccessKey","credentialProvider","resolve","creds","update","allowUnknownKeys","prototype","hasService","loadFromPath","path","clear","JSON","parse","readFileSync","fileSystemCreds","FileSystemCredentials","chain","CredentialProviderChain","providers","unshift","property","defaultValue","merge","region","logger","apiVersions","apiVersion","endpoint","httpOptions","timeout","maxRetries","maxRedirects","paramValidation","sslEnabled","s3ForcePathStyle","s3BucketEndpoint","s3DisableBodySigning","s3UsEast1RegionalEndpoint","s3UseArnRegion","computeChecksums","convertResponseTypes","correctClockSkew","customUserAgent","dynamoDbCrc32","systemClockOffset","signatureVersion","signatureCache","retryDelayOptions","useAccelerateEndpoint","clientSideMonitoring","endpointDiscoveryEnabled","endpointCacheSize","hostPrefixEnabled","stsRegionalEndpoints","copy","Credentials","setPromisesDependency","dep","Promise","constructors","Request","push","ManagedUpload","addPromises","getPromisesDependency","config","validateRegionalEndpointsFlagValue","configValue","errorOptions","indexOf","toLowerCase","originalConfig","resolved","clientConfig","isNode","process","env","profile","getProfilesFromSharedConfig","iniLoader","AWS_PROFILE","defaultProfile","e","sharedConfig","toString","VERSION","Signers","Protocol","Json","Query","Rest","RestJson","RestXml","XML","Builder","Parser","Model","Api","Operation","Shape","Paginator","ResourceWaiter","EndpointCache","events","SequentialExecutor","memoizedProperty","hideProperties","expired","expireTime","refreshCallbacks","arguments","length","sessionToken","expiryWindow","needsRefresh","currentTime","date","getDate","getTime","adjustedTime","Date","refresh","coalesceRefresh","sync","load","arrayEach","defer","addPromisesToClass","PromiseDependency","getPromise","promisifyMethod","refreshPromise","deletePromisesFromClass","ChainableTemporaryCredentials","errorCode","tokenCodeFn","params","RoleArn","RoleSessionName","SerialNumber","masterCredentials","stsConfig","service","fn","operation","getTokenCode","tokenCode","TokenCode","data","credentialsFrom","token","CognitoIdentityCredentials","localStorageKey","id","_identityId","_clientConfig","loadCachedId","IdentityId","identityId","createClients","getId","clearIdOnNotAuthorized","getCredentialsFromSTS","getCredentialsForIdentity","clearCachedId","poolId","IdentityPoolId","loginId","LoginId","storage","cognito","loadCredentials","AccessKeyId","SecretKey","SessionToken","Expiration","cacheId","getOpenIdToken","WebIdentityToken","Token","webIdentityCredentials","webErr","sts","isBrowser","getStorage","Logins","actualProviders","split","filter","n","WebIdentityCredentials","cognitoConfig","setStorage","join","val","_","window","localStorage","defaultProviders","slice","resolveCallbacks","index","resolveNext","provider","getErr","resolvePromise","EC2MetadataCredentials","defaultMaxRetries","defaultTimeout","connectTimeout","defaultConnectTimeout","metadataService","MetadataService","metadata","SecretAccessKey","ECSCredentials","RemoteCredentials","EnvironmentCredentials","envPrefix","values","i","prefix","apply","filename","proc","ProcessCredentials","noop","loadViaCredentialProcess","exec","stdOut","stdErr","credData","Version","clearCachedFiles","ENV_RELATIVE_URI","ENV_FULL_URI","FULL_URI_UNRESTRICTED_PROTOCOLS","FULL_URI_ALLOWED_PROTOCOLS","FULL_URI_ALLOWED_HOSTNAMES","isConfiguredForEcsCredentials","Boolean","getECSFullUri","relative","full","parsed","urlParse","protocol","hostname","getECSAuthToken","credsFormatIsValid","formatCreds","expiration","request","url","httpRequest","HttpRequest","method","headers","Accept","Authorization","handleRequestWithRetries","fullUri","dataError","SAMLCredentials","assumeRoleWithSAML","SharedIniFileCredentials","disableAssumeRole","preferStaticCredentials","profiles","preferStaticCredentialsToRoleArn","loadRoleProfile","roleProfile","roleArn","roleSessionName","externalId","mfaSerial","sourceProfileName","profileRegion","sourceCredentials","roleParams","now","ExternalId","assumeRole","TemporaryCredentials","loadMasterCredentials","getSessionToken","fs","TokenFileWebIdentityCredentials","getParamsFromEnv","ENV_TOKEN_FILE","envTokenFile","getParamsFromSharedConfig","profileName","paramsArray","assumeRoleChaining","shift","oidcToken","encoding","assumeRoleWithWebIdentity","retryableError","endpointDiscoveryEnabledEnvs","getCacheKey","api","identifiers","operations","serviceId","marshallCustomIdentifiersHelper","result","shape","type","required","memberShape","members","endpointDiscoveryId","locationName","isLocationName","String","marshallCustomIdentifiers","optionalDiscoverEndpoint","operationModel","input","cacheKey","endpoints","endpointCache","Address","updateEndpoint","endpointRequest","makeRequest","endpointOperation","Identifiers","addApiVersionHeader","removeListener","EventListeners","Core","VALIDATE_PARAMETERS","RETRY_CHECK","put","CachePeriodInMinutes","send","Endpoints","requestQueue","requiredDiscoverEndpoint","done","inputShape","cacheKeyStr","getKeyString","response","retryable","remove","pendingRequests","requestContext","invalidateCachedEndpoints","httpResponse","statusCode","isFalsy","discoverEndpoint","client","_originalConfig","svcConfig","serviceIdentifier","hasCustomEndpoint","isPresigned","isEndpointDiscoveryRequired","endpointDiscoveryRequired","isEnabled","configFile","loadFrom","isConfig","sharedConfigFileEnv","sharedFileConfig","endpoint_discovery_enabled","resolveEndpointDiscoveryConfig","hasRequiredEndpointDiscovery","appendToUserAgent","addNamedListener","className","invalidateCachedEndpoint","eventMessageChunker","parseEvent","createEventStream","body","parser","eventMessages","Transform","allocBuffer","buffer","alloc","EventMessageChunkerStream","currentMessageTotalLength","currentMessagePendingLength","currentMessage","messageLengthBuffer","create","_transform","chunk","chunkLength","currentOffset","bytesRemaining","numBytesForTotal","Math","min","allocateMessage","readUInt32BE","numBytesToWrite","_flush","size","writeUInt32BE","messages","offset","totalLength","readInt32BE","EventUnmarshallerStream","readableObjectMode","_readableState","objectMode","eventStreamModel","event","toBuffer","Int64","bytes","Buffer","isBuffer","negate","fromNumber","number","Uint8Array","remaining","abs","round","valueOf","negative","parseInt","parseMessage","parsedMessage","messageType","errorMessage","parseError","eventType","eventModel","eventPayloadMemberName","payloadShape","eventHeaderNames","eventHeaderMemberNames","toType","output","splitMessage","BOOLEAN_TAG","parseHeaders","out","position","nameLength","readUInt8","readInt8","readInt16BE","binaryLength","readUInt16BE","stringLength","uuidChars","substr","PRELUDE_LENGTH","expectedPreludeChecksum","PRELUDE_MEMBER_LENGTH","crypto","crc32","expectedMessageChecksum","headersEnd","stream","eventStream","pipe","on","emit","DISCOVER_ENDPOINT","addNamedListeners","add","addAsync","req","isGlobalEndpoint","dnsHostRegex","RegExp","test","idempotentMembers","iLen","uuid","v4","rules","validation","ParamValidator","validate","haltHandlersOnError","authtype","getSignerClass","V4","computeSha256","sha","getOperationAuthtype","payloadMember","getRequestPayloadShape","string","byteLength","isStreaming","requiresLength","host","retryCount","getSkewCorrectedDate","signer","getSigningName","setServiceClientId","_clientId","addAuthorization","signedAt","resp","successfulResponse","httpResp","operationName","statusMessage","streaming","HttpClient","streamsApiVersion","hasEventOutput","read","didCallback","errCode","executeSend","http","getInstance","handleRequest","_abortCallback","buffers","numBytes","dateHeader","serverTime","isClockSkewed","applyClockOffset","total","progress","loaded","concat","match","clockSkewError","Endpoint","redirect","redirectCount","retryDelay","retryDelays","delay","willRetry","setTimeout","CorePost","extractRequestId","errno","getSystemErrorName","isDNSError","originalError","Logger","line","delta","startTime","ansi","isTTY","status","censoredParams","filterSensitiveLog","lowerFirst","buildMessage","log","write","isSensitive","struct","subShapeName","subShape","list","member","map","buildRequest","extractData","extractError","port","_userAgent","setUserAgent","getUserAgentHeaderName","userAgent","agentPartial","getUserAgent","pathname","search","query","queryStringParse","queryParamsToString","endpointStr","newEndpoint","HttpResponse","createUnbufferedStream","singleton","Stream","TransformStream","ReadableStream","Readable","NodeHttpClient","errCallback","pathPrefix","proxy","useSSL","agent","getAgent","keepAlive","connectTimeoutId","socket","connecting","abort","clearTimeout","Expect","expect","writeBody","totalBytes","progressStream","once","end","agentOptions","sslAgent","Agent","rejectUnauthorized","NODE_TLS_REJECT_UNAUTHORIZED","setMaxListeners","globalAgent","maxSockets","Infinity","loadedBytes","reporter","emitter","JsonBuilder","translate","structure","location","translateStructure","translateMap","translateList","toWireFormat","translateScalar","build","stringify","JsonParser","shapeMembers","disableFetchToken","imdsDisabledEnv","loadCredentialsCallbacks","fetchMetadataToken","fetchCredentials","cb","basePath","roleName","credErr","callbacks","tokenError","Collection","endpointPrefix","signingName","globalEndpoint","jsonVersion","targetPrefix","timestampFormat","xmlNamespace","serviceAbbreviation","serviceFullName","xmlNoDefaultLists","replace","endpointoperation","endpointdiscovery","shapes","paginator","waiter","documentation","documentationUrl","memoize","factory","nameTr","iterable","requestUri","errors","isIdempotent","topLevelShape","payload","isEventStream","hasEventStream","input_token","limit_key","more_results","output_token","result_key","forEach","obj","memberName","enum","max","pattern","xmlName","queryName","isComposite","idempotencyToken","jsonvalue","sensitive","eventstream","eventpayload","eventheader","isTimestampFormatSet","endpointdiscoveryid","hostLabel","xmlAttribute","CompositeShape","flattened","StructureShape","requiredMap","firstInit","isShape","xmlOrder","memberNames","isEventPayload","isEventHeader","resultWrapper","uri","ListShape","oldName","MapShape","StringShape","nullLessProtocols","isJsonValue","BinaryShape","buf","base64","decode","secureBuf","fill","encode","Base64Shape","BooleanShape","normalizedTypes","character","double","long","short","biginteger","bigdecimal","blob","types","toUTCString","parseTimestamp","format","parseFloat","refShape","filteredKeys","InlineShape","origType","lib","domain","querystring","environment","realClock","Publisher","configProvider","AWSJS_DEBUG","console","AWS_REGION","AMAZON_REGION","configOptInEnv","toCheck","sharedCredentialsFileEnv","context","validateMember","fail","validateStructure","paramName","validateType","paramValue","memberContext","param","validateList","validateMap","validateScalar","Array","validateRange","mapCount","validateString","validatePayload","validateNumber","validTypes","validateEnum","validatePattern","validateUri","descriptor","acceptedTypes","foundInvalidType","isType","typeName","acceptedType","vowel","castedValue","Blob","populateHostPrefix","labels","hostPattern","hostPrefixNotation","isEndpointOperation","hasEndpointDiscover","hostPrefix","regex","label","target","builder","__type","Code","pop","Message","QueryParamSerializer","Action","serialize","requestId","Errors","origRules","tmp","_XAMZRequestId","requestIdShape","generateURI","endpointPath","operationPath","queryString","queryStringSet","plus","uriEscapePath","uriEscape","isArray","parts","sort","httpMethod","populateMethod","httpPath","populateURI","memberValue","populateHeaders","r","k","v","header","applyContentTypeHeader","isBinary","populateBody","rootElement","toXML","upperFirst","clientId","enabled","AWS_CSM_PORT","AWS_CSM_ENABLED","AWS_CSM_CLIENT_ID","AWS_CSM_HOST","fromEnvironment","csm_port","csm_enabled","csm_client_id","csm_host","fromConfigFile","toJSType","dgram","stringToBuffer","address","messagesInFlight","fieldsToTrim","UserAgent","SdkException","SdkExceptionMessage","AwsException","AwsExceptionMessage","FinalSdkException","FinalSdkExceptionMessage","FinalAwsException","FinalAwsExceptionMessage","trimFields","trimmableFields","field","maxLength","eventHandler","ClientId","publishDatagram","getClient","destroyClient","createSocket","close","ucfirst","isQueryName","toUpperCase","serializeStructure","serializeMember","memberRules","suffix","serializeList","keyName","valueName","serializeMap","second","hrtime","regionConfig","applyConfig","configureEndpoint","regionPrefix","generateRegionPrefix","item","derivedKeys","patterns","useDualstack","isDualstackAvailable","signingRegion","getEndpointSuffix","regionRegexes","regexes","regionPattern","dnsSuffix","AcceptorStateMachine","jmespath","hardErrorStates","success","complete","fsm","setupStates","transition","_haltHandlersOnError","_asm","currentState","machine","Domain","domainEmitter","domainThrown","addState","active","Response","states","emitEvent","runTo","state","removeAllListeners","eachPage","makeAsync","wrappedCallback","hasNextPage","nextPage","eachItem","resultKey","paginationConfig","items","continueIteration","isPageable","createReadStream","streams","PassThrough","nextTick","readable","sent","HTTP_DATA","HTTP_ERROR","expectedLen","shouldCheckContentLength","isNaN","receivedLen","checkContentLengthAndEmit","httpStream","lengthAccumulator","_write","unpipe","arg","eventName","args","eventParameters","presign","expires","Presign","sign","toGet","toUnauthenticated","_unAuthenticated","VALIDATE_CREDENTIALS","SIGN","buildAsGet","addListener","promise","reject","mixin","CHECK_ACCEPTORS","_waiter","acceptors","acceptorMatched","acceptor","matcher","matchers","expected","argument","setSuccess","setError","loadWaiterConfig","strictDeepEqual","pathAll","results","numResults","ind","pathAny","listeners","wait","$waiter","maxAttempts","addListeners","numRetries","nextPageTokens","inputTokens","inputToken","cacheNextPageTokens","moreResults","exprs","outputToken","expr","sliceFn","completeInfo","fillQueue","configure","partSize","minPartSize","queueSize","leavePartsOnError","tags","bindServiceObject","validateBody","adjustTotalBytes","maxTotalParts","failed","runFill","fillBuffer","fillStream","partBuffers","cleanup","isDoneChunking","numParts","totalPartNumbers","doneParts","finishMultiPart","singlePart","Body","arraySliceFn","getSignatureVersion","__super__","newPartSize","ceil","partPos","totalChunkedBytes","totalUploadedBytes","activeParts","multipartReq","partBufferLength","bodyLen","nextChunk","endPos","pbuf","rest","isDoneSending","partNumber","Tagging","getTaggingHeader","putObject","_managedUpload","finishSinglePart","ContentMD5","ETag","UploadId","uploadPart","queueChunks","createMultipartUpload","kvPairStrings","Key","Value","partParams","ContentLength","PartNumber","partInfo","_lastUploadedBytes","resume","abortMultipartUpload","part","completeParams","MultipartUpload","Parts","completeMultipartUpload","Location","putObjectTagging","TagSet","d","upload","httpReq","Bucket","info","_events","listener","toHead","onAsync","_isAsync","splice","eventArgs","doneCallback","count","callListeners","prevError","callNextListener","addNamedAsyncListener","clientCount","loadServiceClass","ServiceClass","initialize","validateService","endpointFromTemplate","setEndpoint","addDefaultMonitoringListeners","_clientSideMonitoring","publisher","serviceConfig","isEmpty","apiConfig","defineServiceApi","getLatestServiceClass","getLatestServiceVersion","iso8601","selectedVersion","defaultRetryCount","customizeRequests","customRequestHandler","addAllRequestListeners","attachMonitoringEmitter","makeUnauthenticatedRequest","waitFor","serviceInterface","setupRequestListeners","apiCallEvent","monitoringEvent","Type","Region","MaxRetriesExceeded","FinalHttpStatusCode","apiAttemptEvent","Fqdn","HttpStatusCode","AccessKey","XAmznRequestId","XAmzRequestId","XAmzId2","attemptFailEvent","attemptTimestamp","attemptStartRealTime","attemptLatency","callStartRealTime","callTimestamp","attemptCount","Timestamp","AttemptLatency","AttemptCount","latency","Latency","RequestSigner","getVersion","calculateRetryDelay","timeoutError","networkingError","expiredCredentialsError","throttledError","newServerTime","throwException","defineMethods","versions","features","_serviceMap","addVersions","identifier","publisherConfig","superclass","setApi","isApi","attachOn","baseClass","getPrototypeOf","v4Credentials","resolveRegionalEndpointsFlag","s3util","regionUtil","operationsWith200StatusCodeError","regionRedirectErrorCodes","defaultApiVersion","userDefinedVersion","regionDefinedVersion","_super","_parsedArn","shouldDisableBodySigning","signerClass","validateScheme","validateBucketName","optInUsEast1RegionalEndpoint","VALIDATE_REGION","addContentType","computeContentMd5","computeSseCustomerKeyMd5","addExpect100Continue","hoistPayloadMember","extractErrorFrom200Response","prepareSignedUrl","COMPUTE_SHA256","disableBodySigning","isArnInParam","ARN","validateS3AccessPointArn","validateArnResourceType","validateOutpostsAccessPointArn","validateOutpostsArn","validateArnRegion","validateArnAccount","validateArnService","populateUriFromAccessPointArn","validatePopulateUriFromArn","validateBucketEndpoint","correctBucketRegionFromCache","requestBucketRegion","reqRegionForNetworkingError","scheme","SSECustomerKey","CopySourceSSECustomerKey","resource","bucket","slashIndex","isValidAccelerateOperation","insertPoint","regionalEndpoint","substring","b","pathStyleBucketName","virtualHostedBucket","removeVirtualHostedBucketFromPath","encodedS3Key","accessPointArn","isOutpostArn","outpostsSuffix","outpostId","serviceName","dualStackSuffix","useArnRegion","accessPoint","accountId","encodedArn","len","contentType","charsetName","computableChecksumOperations","putBucketCors","putBucketLifecycle","putBucketLifecycleConfiguration","putBucketTagging","deleteObjects","putBucketReplication","putObjectLegalHold","putObjectRetention","putObjectLockConfiguration","willComputeChecksums","md5","bucketName","dnsCompatibleBucketName","_requestRegionForBucket","bucketRegionCache","updateReqBucketRegion","s3Config","newConfig","Host","LocationConstraint","createBucketConfiguration","CreateBucketConfiguration","clearBucketRegionCache","extractRequestIds","cachedRegion","codes","304","403","400","404","reqOperation","reqParams","MaxKeys","regionReq","getRegionReq","listObjects","buckets","requestRegion","extendedRequestId","cfId","getSignedUrl","Expires","createPresignedPost","boundParams","finalizePost","urlFormat","fields","preparePostFields","Fields","Conditions","conditions","expiresInSeconds","signingDate","shortDate","scope","createScope","credential","condition","Policy","preparePostPolicy","hmac","getSigningKey","noPresignedContentLength","createBucket","copiedParams","uploader","getSignedUrlPromise","inputMembers","parsedArn","delimiter","accessPointPrefix","loadUseArnRegionConfig","regionFromArn","clientRegion","envName","configName","trim","ipAddress","dots","optInRegionalEndpoint","IniLoader","os","parseFile","content","ini","tmpContent","profileContent","resolvedProfiles","getDefaultFilePath","fileContent","getHomeDir","home","HOME","USERPROFILE","HOMEPATH","HOMEDRIVE","homedir","expiresHeader","signedUrlBuilder","unixTimestamp","signedUrlSigner","parsedUrl","queryParams","auth","signature","SET_CONTENT_LENGTH","serviceClientId","getServiceClientId","V2","V3","V3Https","subResources","responseHeaders","rfc822","stringToSign","canonicalizedAmzHeaders","canonicalizedResource","amzHeaders","a","resources","subresource","decodeURIComponent","res","secret","SignatureVersion","SignatureMethod","AWSAccessKeyId","SecurityToken","Signature","datetime","authorization","signedHeaders","headersToSign","h","canonicalHeaders","sha256","algorithm","updateForPresigned","addHeaders","credString","credentialString","qs","isSignableHeader","lowerKey","sep","signingKey","hexEncodedHash","canonicalString","hexEncodedBodyHash","canonicalHeaderValues","unsignableHeaders","cachedSecret","cacheQueue","v4Identifier","shouldCache","kDate","kRegion","kService","emptyCache","finalState","bindObject","inputError","accept","acceptState","failState","engine","navigator","platform","AWS_EXECUTION_ENV","encodeURIComponent","escape","ch","charCodeAt","sortedKeys","ename","vals","from","toStream","pos","_read","object","currentSection","section","expectedArgs","toISOString","formatter","crc32Table","tbl","crc","digest","createHmac","hash","createHash","ArrayBuffer","FileReader","reader","onerror","onload","_continueReading","back","readAsArrayBuffer","toHex","iterFunction","array","idx","obj1","obj2","dupe","prop","webkitSlice","mozSlice","str","stack","writable","time","klass","newObject","ctor","props","isValue","opts","cachedValue","responsePayload","settings","start","ResponseMetadata","RequestId","deletePromises","methodName","dualstackAvailable","customBackoff","base","random","pow","sendRequest","retryAfter","convertPayloadToString","setImmediate","profilesFromConfig","profilesFromCreds","profileNames","objectAssign","source","arn","matched","partition","arnObject","XmlNode","XmlText","XmlBuilder","xml","isXmlAttribute","addAttribute","element","addChildNode","applyNamespaces","xmlKey","xmlValue","entry","entryKey","entryValue","serializeScalar","isRoot","xmlNamespaceUri","xmlNamespacePrefix","noEmpty","children","escapeAttribute","escapeElement","xml2js","explicitCharkey","normalize","explicitRoot","emptyTag","explicitArray","ignoreAttrs","mergeAttrs","validator","NodeXmlParser","parseXml","xmlChild","$","parseScalar","parseStructure","child","parseMap","parseList","arr","parseUnknown","text","parseString","attributes","removeAttribute","hasChildren","xmlText","attributeNames","attributeName","attribute","c","LRU_1","maxSize","cache","LRUCache","keyString","endpointRecord","populateValue","records","Expire","identifierNames","identifierName","empty","LinkedListNode","nodeMap","sizeLimit","prependToList","node","headerNode","prev","next","tailNode","removeFromTail","prevNode","detachFromList","key_1","newNode","isObject","first","keysSeen","key2","isFalse","trimLeft","TYPE_NUMBER","TYPE_STRING","TOK_UNQUOTEDIDENTIFIER","TOK_QUOTEDIDENTIFIER","TOK_RBRACKET","TOK_RPAREN","TOK_COMMA","TOK_COLON","TOK_RBRACE","TOK_NUMBER","TOK_CURRENT","TOK_EXPREF","TOK_PIPE","TOK_EQ","TOK_GT","TOK_LT","TOK_GTE","TOK_LTE","TOK_NE","TOK_FLATTEN","TOK_STAR","TOK_FILTER","TOK_DOT","TOK_LBRACE","TOK_LBRACKET","TOK_LPAREN","TOK_LITERAL","basicTokens","operatorStartToken","skipChars","isNum","Lexer","tokenize","tokens","_current","_consumeUnquotedIdentifier","_consumeNumber","_consumeLBracket","_consumeQuotedIdentifier","_consumeRawStringLiteral","literal","_consumeLiteral","_consumeOperator","current","startingChar","literalString","_looksLikeJSON","ex","bindingPower","TreeInterpreter","runtime","Runtime","interpreter","_interpreter","functionTable","_func","_functionAbs","_signature","avg","_functionAvg","_functionCeil","contains","_functionContains","_functionEndsWith","floor","_functionFloor","_functionLength","_functionMap","_functionMax","_functionMerge","variadic","_functionMaxBy","sum","_functionSum","_functionStartsWith","_functionMin","_functionMinBy","_functionType","_functionKeys","_functionValues","_functionSort","_functionSortBy","_functionJoin","reverse","_functionReverse","_functionToArray","_functionToString","_functionToNumber","_functionNotNull","expression","_loadTokens","ast","_lookahead","t","_lookaheadToken","rbp","leftToken","_advance","left","nud","currentToken","led","right","Not","_parseProjectionRHS","Star","_parseMultiselectHash","Flatten","_parseIndexExpression","_projectIfSlice","_parseMultiselectList","Expref","_match","_errorToken","tokenName","Dot","_parseDotRHS","Pipe","Or","And","Filter","_parseComparator","tokenType","_parseSliceExpression","indexExpr","comparator","lookahead","expressions","keyToken","pairs","identifierTypes","visit","collected","sliceParams","computed","computeSliceParams","stop","step","objValues","filtered","finalResults","j","original","merged","resolvedArgs","callFunction","refNode","jmespathType","arrayLength","stepValueNegative","capSliceRange","actualValue","functionEntry","_validateArgs","pluralized","currentSpec","actualType","typeMatched","_getTypeName","_typeMatches","actual","argValue","subtype","lastIndexOf","searchStr","originalStr","reversedStr","reversedArray","inputArray","mapped","exprefNode","elements","maxElement","localeCompare","minElement","listToSum","joinChar","convertedValue","sortedArray","requiredType","that","decorated","exprA","exprB","maxRecord","resolvedArray","keyFunction","createKeyFunction","maxNumber","minRecord","minNumber","allowedTypes","x","compile","sax","strict","opt","SAXParser","SAXStream","createStream","MAX_BUFFER_LENGTH","l","clearBuffers","q","bufferCheckPosition","lowercase","lowercasetags","looseCase","closed","closedRoot","sawRoot","tag","noscript","S","BEGIN","strictEntities","ENTITIES","XML_ENTITIES","attribList","xmlns","ns","rootNS","trackPosition","column","EVENTS","o","F","charAt","BEGIN_WHITESPACE","beginWhiteSpace","TEXT","starti","textNode","not","whitespace","strictFail","TEXT_ENTITY","OPEN_WAKA","startTagPosition","SCRIPT","SCRIPT_ENDING","script","CLOSE_TAG","SGML_DECL","sgmlDecl","is","nameStart","OPEN_TAG","tagName","PROC_INST","procInstName","procInstBody","pad","emitNode","CDATA","cdata","COMMENT","comment","DOCTYPE","doctype","quote","SGML_DECL_QUOTED","DOCTYPE_DTD","DOCTYPE_QUOTED","DOCTYPE_DTD_QUOTED","COMMENT_ENDING","COMMENT_ENDED","textopts","CDATA_ENDING","CDATA_ENDING_2","PROC_INST_ENDING","PROC_INST_BODY","nameBody","newTag","openTag","OPEN_TAG_SLASH","ATTRIB","closeTag","attribName","attribValue","ATTRIB_NAME","ATTRIB_VALUE","attrib","ATTRIB_NAME_SAW_WHITE","ATTRIB_VALUE_QUOTED","ATTRIB_VALUE_UNQUOTED","ATTRIB_VALUE_ENTITY_Q","ATTRIB_VALUE_CLOSED","attribEnd","ATTRIB_VALUE_ENTITY_U","CLOSE_TAG_SAW_WHITE","returnState","parseEntity","entity","entityBody","entityStart","maxAllowed","maxActual","closeText","m","checkBufferLength","flush","streamWraps","ev","_parser","me","onend","er","_decoder","SD","handler","letter","XML_NAMESPACE","XMLNS_NAMESPACE","charClass","reduce","s","charclass","isRegExp","stringFromCharCode","fromCodePoint","STATE","COMMENT_STARTING","fromCharCode","nodeType","parent","qname","qualName","local","qn","selfClosing","p","nv","isSelfClosing","closeTo","num","entityLC","numStr","highSurrogate","lowSurrogate","MAX_SIZE","codeUnits","codePoint","Number","isFinite","RangeError","s3","__dirname","v1","byteToHex","bth","randomBytes","_nodeId","_clockseq","rng","bytesToUuid","_lastMSecs","_lastNSecs","clockseq","seedBytes","msecs","nsecs","dt","tl","tmh","rnds","ii","stripBOM","defaults","escapeCDATA","requiresCDATA","wrapCDATA","hasProp","ref","buildObject","rootObj","attrkey","charkey","render","rootName","_this","attr","raw","txt","ele","up","att","xmldec","headless","allowSurrogateChars","renderOpts","normalizeTags","explicitChildren","childkey","charsAsChildren","includeWhiteChars","async","attrNameProcessors","attrValueProcessors","tagNameProcessors","valueProcessors","preserveChildrenOrder","chunkSize","bom","processItem","processors","bind","thing","superClass","reset","assignOrPush","processAsync","xmlnskey","extend","saxParser","error1","errThrown","newValue","ontext","ended","resultObject","EXPLICIT_CHARKEY","onopentag","processedKey","onclosetag","emptyStr","nodeName","objClone","old","xpath","getOwnPropertyNames","charChild","oncdata","EventEmitter","prefixMatch","firstCharLowerCase","stripPrefix","parseNumbers","parseBooleans","ValidationError","assign","isFunction","isPlainObject","sources","proto","Function","XMLAttribute","attName","attValue","clone","writer","XMLNode","XMLCData","XMLComment","XMLDTDAttList","elementName","attributeType","defaultValueType","eleName","dtdAttType","dtdAttDefault","dtdAttList","XMLDTDElement","dtdElementValue","dtdElement","XMLDTDEntity","pe","pubID","sysID","dtdPubID","dtdSysID","nData","dtdNData","dtdEntityValue","dtdEntity","XMLDTDNotation","dtdNotation","XMLDeclaration","standalone","xmlVersion","xmlEncoding","xmlStandalone","declaration","XMLDocType","ref1","documentObject","attList","pEntity","notation","docType","ent","pent","root","XMLStringWriter","XMLStringifier","XMLDocument","isDocument","writerOptions","document","XMLElement","XMLProcessingInstruction","XMLRaw","XMLText","XMLDocumentCB","onData","onEnd","onDataCallback","onEndCallback","currentNode","currentLevel","openTags","documentStarted","documentCompleted","openCurrent","skipNullAttributes","instruction","insTarget","insValue","processingInstruction","rootNodeName","closeNode","openNode","isOpen","isClosed","nod","dat","com","ins","dec","dtd","rootObject","clonedSelf","clonedChild","childNode","lastChild","len1","ignoreDecorators","convertAttKey","separateArrayItems","convertTextKey","convertCDataKey","convertCommentKey","convertRawKey","convertPIKey","insertBefore","removed","insertAfter","commentBefore","commentAfter","instructionBefore","instructionAfter","doc","ref2","importDocument","clonedRoot","u","importXMLBuilder","XMLWriterBase","XMLStreamWriter","isLastRootNode","level","space","endline","spacebeforeslash","every","allowEmpty","pretty","newline","textispresent","textispresentwasset","newlinedefault","prettydefault","dontprettytextnodes","assertLegalChar","noDoubleEncoding","eleText","elEscape","attEscape","ampregex","ref3","ref4","ref5","ref6","indent","begin","stringWriter","streamWriter","require","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__"],"mappings":"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","file":"Upload/app.js","sourcesContent":["require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['cognitoidentity'] = {};\nAWS.CognitoIdentity = Service.defineService('cognitoidentity', ['2014-06-30']);\nObject.defineProperty(apiLoader.services['cognitoidentity'], '2014-06-30', {\n  get: function get() {\n    var model = require('../apis/cognito-identity-2014-06-30.min.json');\n    model.paginators = require('../apis/cognito-identity-2014-06-30.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CognitoIdentity;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['s3'] = {};\nAWS.S3 = Service.defineService('s3', ['2006-03-01']);\nrequire('../lib/services/s3');\nObject.defineProperty(apiLoader.services['s3'], '2006-03-01', {\n  get: function get() {\n    var model = require('../apis/s3-2006-03-01.min.json');\n    model.paginators = require('../apis/s3-2006-03-01.paginators.json').pagination;\n    model.waiters = require('../apis/s3-2006-03-01.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.S3;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['sts'] = {};\nAWS.STS = Service.defineService('sts', ['2011-06-15']);\nrequire('../lib/services/sts');\nObject.defineProperty(apiLoader.services['sts'], '2011-06-15', {\n  get: function get() {\n    var model = require('../apis/sts-2011-06-15.min.json');\n    model.paginators = require('../apis/sts-2011-06-15.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.STS;\n","function apiLoader(svc, version) {\n  if (!apiLoader.services.hasOwnProperty(svc)) {\n    throw new Error('InvalidService: Failed to load api for ' + svc);\n  }\n  return apiLoader.services[svc][version];\n}\n\n/**\n * @api private\n *\n * This member of AWS.apiLoader is private, but changing it will necessitate a\n * change to ../scripts/services-table-generator.ts\n */\napiLoader.services = {};\n\n/**\n * @api private\n */\nmodule.exports = apiLoader;\n","var AWS = require('./core');\nrequire('./credentials');\nrequire('./credentials/credential_provider_chain');\nvar PromisesDependency;\n\n/**\n * The main configuration class used by all service objects to set\n * the region, credentials, and other options for requests.\n *\n * By default, credentials and region settings are left unconfigured.\n * This should be configured by the application before using any\n * AWS service APIs.\n *\n * In order to set global configuration options, properties should\n * be assigned to the global {AWS.config} object.\n *\n * @see AWS.config\n *\n * @!group General Configuration Options\n *\n * @!attribute credentials\n *   @return [AWS.Credentials] the AWS credentials to sign requests with.\n *\n * @!attribute region\n *   @example Set the global region setting to us-west-2\n *     AWS.config.update({region: 'us-west-2'});\n *   @return [AWS.Credentials] The region to send service requests to.\n *   @see http://docs.amazonwebservices.com/general/latest/gr/rande.html\n *     A list of available endpoints for each AWS service\n *\n * @!attribute maxRetries\n *   @return [Integer] the maximum amount of retries to perform for a\n *     service request. By default this value is calculated by the specific\n *     service object that the request is being made to.\n *\n * @!attribute maxRedirects\n *   @return [Integer] the maximum amount of redirects to follow for a\n *     service request. Defaults to 10.\n *\n * @!attribute paramValidation\n *   @return [Boolean|map] whether input parameters should be validated against\n *     the operation description before sending the request. Defaults to true.\n *     Pass a map to enable any of the following specific validation features:\n *\n *     * **min** [Boolean] &mdash; Validates that a value meets the min\n *       constraint. This is enabled by default when paramValidation is set\n *       to `true`.\n *     * **max** [Boolean] &mdash; Validates that a value meets the max\n *       constraint.\n *     * **pattern** [Boolean] &mdash; Validates that a string value matches a\n *       regular expression.\n *     * **enum** [Boolean] &mdash; Validates that a string value matches one\n *       of the allowable enum values.\n *\n * @!attribute computeChecksums\n *   @return [Boolean] whether to compute checksums for payload bodies when\n *     the service accepts it (currently supported in S3 only).\n *\n * @!attribute convertResponseTypes\n *   @return [Boolean] whether types are converted when parsing response data.\n *     Currently only supported for JSON based services. Turning this off may\n *     improve performance on large response payloads. Defaults to `true`.\n *\n * @!attribute correctClockSkew\n *   @return [Boolean] whether to apply a clock skew correction and retry\n *     requests that fail because of an skewed client clock. Defaults to\n *     `false`.\n *\n * @!attribute sslEnabled\n *   @return [Boolean] whether SSL is enabled for requests\n *\n * @!attribute s3ForcePathStyle\n *   @return [Boolean] whether to force path style URLs for S3 objects\n *\n * @!attribute s3BucketEndpoint\n *   @note Setting this configuration option requires an `endpoint` to be\n *     provided explicitly to the service constructor.\n *   @return [Boolean] whether the provided endpoint addresses an individual\n *     bucket (false if it addresses the root API endpoint).\n *\n * @!attribute s3DisableBodySigning\n *   @return [Boolean] whether to disable S3 body signing when using signature version `v4`.\n *     Body signing can only be disabled when using https. Defaults to `true`.\n *\n * @!attribute s3UsEast1RegionalEndpoint\n *   @return ['legacy'|'regional'] when region is set to 'us-east-1', whether to send s3\n *     request to global endpoints or 'us-east-1' regional endpoints. This config is only\n *     applicable to S3 client;\n *     Defaults to 'legacy'\n * @!attribute s3UseArnRegion\n *   @return [Boolean] whether to override the request region with the region inferred\n *     from requested resource's ARN. Only available for S3 buckets\n *     Defaults to `true`\n *\n * @!attribute useAccelerateEndpoint\n *   @note This configuration option is only compatible with S3 while accessing\n *     dns-compatible buckets.\n *   @return [Boolean] Whether to use the Accelerate endpoint with the S3 service.\n *     Defaults to `false`.\n *\n * @!attribute retryDelayOptions\n *   @example Set the base retry delay for all services to 300 ms\n *     AWS.config.update({retryDelayOptions: {base: 300}});\n *     // Delays with maxRetries = 3: 300, 600, 1200\n *   @example Set a custom backoff function to provide delay values on retries\n *     AWS.config.update({retryDelayOptions: {customBackoff: function(retryCount, err) {\n *       // returns delay in ms\n *     }}});\n *   @return [map] A set of options to configure the retry delay on retryable errors.\n *     Currently supported options are:\n *\n *     * **base** [Integer] &mdash; The base number of milliseconds to use in the\n *       exponential backoff for operation retries. Defaults to 100 ms for all services except\n *       DynamoDB, where it defaults to 50ms.\n *\n *     * **customBackoff ** [function] &mdash; A custom function that accepts a\n *       retry count and error and returns the amount of time to delay in\n *       milliseconds. If the result is a non-zero negative value, no further\n *       retry attempts will be made. The `base` option will be ignored if this\n *       option is supplied. The function is only called for retryable errors.\n *\n * @!attribute httpOptions\n *   @return [map] A set of options to pass to the low-level HTTP request.\n *     Currently supported options are:\n *\n *     * **proxy** [String] &mdash; the URL to proxy requests through\n *     * **agent** [http.Agent, https.Agent] &mdash; the Agent object to perform\n *       HTTP requests with. Used for connection pooling. Note that for\n *       SSL connections, a special Agent object is used in order to enable\n *       peer certificate verification. This feature is only supported in the\n *       Node.js environment.\n *     * **connectTimeout** [Integer] &mdash; Sets the socket to timeout after\n *       failing to establish a connection with the server after\n *       `connectTimeout` milliseconds. This timeout has no effect once a socket\n *       connection has been established.\n *     * **timeout** [Integer] &mdash; The number of milliseconds a request can\n *       take before automatically being terminated.\n *       Defaults to two minutes (120000).\n *     * **xhrAsync** [Boolean] &mdash; Whether the SDK will send asynchronous\n *       HTTP requests. Used in the browser environment only. Set to false to\n *       send requests synchronously. Defaults to true (async on).\n *     * **xhrWithCredentials** [Boolean] &mdash; Sets the \"withCredentials\"\n *       property of an XMLHttpRequest object. Used in the browser environment\n *       only. Defaults to false.\n * @!attribute logger\n *   @return [#write,#log] an object that responds to .write() (like a stream)\n *     or .log() (like the console object) in order to log information about\n *     requests\n *\n * @!attribute systemClockOffset\n *   @return [Number] an offset value in milliseconds to apply to all signing\n *     times. Use this to compensate for clock skew when your system may be\n *     out of sync with the service time. Note that this configuration option\n *     can only be applied to the global `AWS.config` object and cannot be\n *     overridden in service-specific configuration. Defaults to 0 milliseconds.\n *\n * @!attribute signatureVersion\n *   @return [String] the signature version to sign requests with (overriding\n *     the API configuration). Possible values are: 'v2', 'v3', 'v4'.\n *\n * @!attribute signatureCache\n *   @return [Boolean] whether the signature to sign requests with (overriding\n *     the API configuration) is cached. Only applies to the signature version 'v4'.\n *     Defaults to `true`.\n *\n * @!attribute endpointDiscoveryEnabled\n *   @return [Boolean|undefined] whether to call operations with endpoints\n *     given by service dynamically. Setting this config to `true` will enable\n *     endpoint discovery for all applicable operations. Setting it to `false`\n *     will explicitly disable endpoint discovery even though operations that\n *     require endpoint discovery will presumably fail. Leaving it to\n *     `undefined` means SDK only do endpoint discovery when it's required.\n *     Defaults to `undefined`\n *\n * @!attribute endpointCacheSize\n *   @return [Number] the size of the global cache storing endpoints from endpoint\n *     discovery operations. Once endpoint cache is created, updating this setting\n *     cannot change existing cache size.\n *     Defaults to 1000\n *\n * @!attribute hostPrefixEnabled\n *   @return [Boolean] whether to marshal request parameters to the prefix of\n *     hostname. Defaults to `true`.\n *\n * @!attribute stsRegionalEndpoints\n *   @return ['legacy'|'regional'] whether to send sts request to global endpoints or\n *     regional endpoints.\n *     Defaults to 'legacy'\n */\nAWS.Config = AWS.util.inherit({\n  /**\n   * @!endgroup\n   */\n\n  /**\n   * Creates a new configuration object. This is the object that passes\n   * option data along to service requests, including credentials, security,\n   * region information, and some service specific settings.\n   *\n   * @example Creating a new configuration object with credentials and region\n   *   var config = new AWS.Config({\n   *     accessKeyId: 'AKID', secretAccessKey: 'SECRET', region: 'us-west-2'\n   *   });\n   * @option options accessKeyId [String] your AWS access key ID.\n   * @option options secretAccessKey [String] your AWS secret access key.\n   * @option options sessionToken [AWS.Credentials] the optional AWS\n   *   session token to sign requests with.\n   * @option options credentials [AWS.Credentials] the AWS credentials\n   *   to sign requests with. You can either specify this object, or\n   *   specify the accessKeyId and secretAccessKey options directly.\n   * @option options credentialProvider [AWS.CredentialProviderChain] the\n   *   provider chain used to resolve credentials if no static `credentials`\n   *   property is set.\n   * @option options region [String] the region to send service requests to.\n   *   See {region} for more information.\n   * @option options maxRetries [Integer] the maximum amount of retries to\n   *   attempt with a request. See {maxRetries} for more information.\n   * @option options maxRedirects [Integer] the maximum amount of redirects to\n   *   follow with a request. See {maxRedirects} for more information.\n   * @option options sslEnabled [Boolean] whether to enable SSL for\n   *   requests.\n   * @option options paramValidation [Boolean|map] whether input parameters\n   *   should be validated against the operation description before sending\n   *   the request. Defaults to true. Pass a map to enable any of the\n   *   following specific validation features:\n   *\n   *   * **min** [Boolean] &mdash; Validates that a value meets the min\n   *     constraint. This is enabled by default when paramValidation is set\n   *     to `true`.\n   *   * **max** [Boolean] &mdash; Validates that a value meets the max\n   *     constraint.\n   *   * **pattern** [Boolean] &mdash; Validates that a string value matches a\n   *     regular expression.\n   *   * **enum** [Boolean] &mdash; Validates that a string value matches one\n   *     of the allowable enum values.\n   * @option options computeChecksums [Boolean] whether to compute checksums\n   *   for payload bodies when the service accepts it (currently supported\n   *   in S3 only)\n   * @option options convertResponseTypes [Boolean] whether types are converted\n   *     when parsing response data. Currently only supported for JSON based\n   *     services. Turning this off may improve performance on large response\n   *     payloads. Defaults to `true`.\n   * @option options correctClockSkew [Boolean] whether to apply a clock skew\n   *     correction and retry requests that fail because of an skewed client\n   *     clock. Defaults to `false`.\n   * @option options s3ForcePathStyle [Boolean] whether to force path\n   *   style URLs for S3 objects.\n   * @option options s3BucketEndpoint [Boolean] whether the provided endpoint\n   *   addresses an individual bucket (false if it addresses the root API\n   *   endpoint). Note that setting this configuration option requires an\n   *   `endpoint` to be provided explicitly to the service constructor.\n   * @option options s3DisableBodySigning [Boolean] whether S3 body signing\n   *   should be disabled when using signature version `v4`. Body signing\n   *   can only be disabled when using https. Defaults to `true`.\n   * @option options s3UsEast1RegionalEndpoint ['legacy'|'regional'] when region\n   *   is set to 'us-east-1', whether to send s3 request to global endpoints or\n   *   'us-east-1' regional endpoints. This config is only applicable to S3 client.\n   *   Defaults to `legacy`\n   * @option options s3UseArnRegion [Boolean] whether to override the request region\n   *   with the region inferred from requested resource's ARN. Only available for S3 buckets\n   *   Defaults to `true`\n   *\n   * @option options retryDelayOptions [map] A set of options to configure\n   *   the retry delay on retryable errors. Currently supported options are:\n   *\n   *   * **base** [Integer] &mdash; The base number of milliseconds to use in the\n   *     exponential backoff for operation retries. Defaults to 100 ms for all\n   *     services except DynamoDB, where it defaults to 50ms.\n   *   * **customBackoff ** [function] &mdash; A custom function that accepts a\n   *     retry count and error and returns the amount of time to delay in\n   *     milliseconds. If the result is a non-zero negative value, no further\n   *     retry attempts will be made. The `base` option will be ignored if this\n   *     option is supplied. The function is only called for retryable errors.\n   * @option options httpOptions [map] A set of options to pass to the low-level\n   *   HTTP request. Currently supported options are:\n   *\n   *   * **proxy** [String] &mdash; the URL to proxy requests through\n   *   * **agent** [http.Agent, https.Agent] &mdash; the Agent object to perform\n   *     HTTP requests with. Used for connection pooling. Defaults to the global\n   *     agent (`http.globalAgent`) for non-SSL connections. Note that for\n   *     SSL connections, a special Agent object is used in order to enable\n   *     peer certificate verification. This feature is only available in the\n   *     Node.js environment.\n   *   * **connectTimeout** [Integer] &mdash; Sets the socket to timeout after\n   *     failing to establish a connection with the server after\n   *     `connectTimeout` milliseconds. This timeout has no effect once a socket\n   *     connection has been established.\n   *   * **timeout** [Integer] &mdash; Sets the socket to timeout after timeout\n   *     milliseconds of inactivity on the socket. Defaults to two minutes\n   *     (120000).\n   *   * **xhrAsync** [Boolean] &mdash; Whether the SDK will send asynchronous\n   *     HTTP requests. Used in the browser environment only. Set to false to\n   *     send requests synchronously. Defaults to true (async on).\n   *   * **xhrWithCredentials** [Boolean] &mdash; Sets the \"withCredentials\"\n   *     property of an XMLHttpRequest object. Used in the browser environment\n   *     only. Defaults to false.\n   * @option options apiVersion [String, Date] a String in YYYY-MM-DD format\n   *   (or a date) that represents the latest possible API version that can be\n   *   used in all services (unless overridden by `apiVersions`). Specify\n   *   'latest' to use the latest possible version.\n   * @option options apiVersions [map<String, String|Date>] a map of service\n   *   identifiers (the lowercase service class name) with the API version to\n   *   use when instantiating a service. Specify 'latest' for each individual\n   *   that can use the latest available version.\n   * @option options logger [#write,#log] an object that responds to .write()\n   *   (like a stream) or .log() (like the console object) in order to log\n   *   information about requests\n   * @option options systemClockOffset [Number] an offset value in milliseconds\n   *   to apply to all signing times. Use this to compensate for clock skew\n   *   when your system may be out of sync with the service time. Note that\n   *   this configuration option can only be applied to the global `AWS.config`\n   *   object and cannot be overridden in service-specific configuration.\n   *   Defaults to 0 milliseconds.\n   * @option options signatureVersion [String] the signature version to sign\n   *   requests with (overriding the API configuration). Possible values are:\n   *   'v2', 'v3', 'v4'.\n   * @option options signatureCache [Boolean] whether the signature to sign\n   *   requests with (overriding the API configuration) is cached. Only applies\n   *   to the signature version 'v4'. Defaults to `true`.\n   * @option options dynamoDbCrc32 [Boolean] whether to validate the CRC32\n   *   checksum of HTTP response bodies returned by DynamoDB. Default: `true`.\n   * @option options useAccelerateEndpoint [Boolean] Whether to use the\n   *   S3 Transfer Acceleration endpoint with the S3 service. Default: `false`.\n   * @option options clientSideMonitoring [Boolean] whether to collect and\n   *   publish this client's performance metrics of all its API requests.\n   * @option options endpointDiscoveryEnabled [Boolean|undefined] whether to\n   *   call operations with endpoints given by service dynamically. Setting this\n   * config to `true` will enable endpoint discovery for all applicable operations.\n   *   Setting it to `false` will explicitly disable endpoint discovery even though\n   *   operations that require endpoint discovery will presumably fail. Leaving it\n   *   to `undefined` means SDK will only do endpoint discovery when it's required.\n   *   Defaults to `undefined`\n   * @option options endpointCacheSize [Number] the size of the global cache storing\n   *   endpoints from endpoint discovery operations. Once endpoint cache is created,\n   *   updating this setting cannot change existing cache size.\n   *   Defaults to 1000\n   * @option options hostPrefixEnabled [Boolean] whether to marshal request\n   *   parameters to the prefix of hostname.\n   *   Defaults to `true`.\n   * @option options stsRegionalEndpoints ['legacy'|'regional'] whether to send sts request\n   *   to global endpoints or regional endpoints.\n   *   Defaults to 'legacy'.\n   */\n  constructor: function Config(options) {\n    if (options === undefined) options = {};\n    options = this.extractCredentials(options);\n\n    AWS.util.each.call(this, this.keys, function (key, value) {\n      this.set(key, options[key], value);\n    });\n  },\n\n  /**\n   * @!group Managing Credentials\n   */\n\n  /**\n   * Loads credentials from the configuration object. This is used internally\n   * by the SDK to ensure that refreshable {Credentials} objects are properly\n   * refreshed and loaded when sending a request. If you want to ensure that\n   * your credentials are loaded prior to a request, you can use this method\n   * directly to provide accurate credential data stored in the object.\n   *\n   * @note If you configure the SDK with static or environment credentials,\n   *   the credential data should already be present in {credentials} attribute.\n   *   This method is primarily necessary to load credentials from asynchronous\n   *   sources, or sources that can refresh credentials periodically.\n   * @example Getting your access key\n   *   AWS.config.getCredentials(function(err) {\n   *     if (err) console.log(err.stack); // credentials not loaded\n   *     else console.log(\"Access Key:\", AWS.config.credentials.accessKeyId);\n   *   })\n   * @callback callback function(err)\n   *   Called when the {credentials} have been properly set on the configuration\n   *   object.\n   *\n   *   @param err [Error] if this is set, credentials were not successfully\n   *     loaded and this error provides information why.\n   * @see credentials\n   * @see Credentials\n   */\n  getCredentials: function getCredentials(callback) {\n    var self = this;\n\n    function finish(err) {\n      callback(err, err ? null : self.credentials);\n    }\n\n    function credError(msg, err) {\n      return new AWS.util.error(err || new Error(), {\n        code: 'CredentialsError',\n        message: msg,\n        name: 'CredentialsError'\n      });\n    }\n\n    function getAsyncCredentials() {\n      self.credentials.get(function(err) {\n        if (err) {\n          var msg = 'Could not load credentials from ' +\n            self.credentials.constructor.name;\n          err = credError(msg, err);\n        }\n        finish(err);\n      });\n    }\n\n    function getStaticCredentials() {\n      var err = null;\n      if (!self.credentials.accessKeyId || !self.credentials.secretAccessKey) {\n        err = credError('Missing credentials');\n      }\n      finish(err);\n    }\n\n    if (self.credentials) {\n      if (typeof self.credentials.get === 'function') {\n        getAsyncCredentials();\n      } else { // static credentials\n        getStaticCredentials();\n      }\n    } else if (self.credentialProvider) {\n      self.credentialProvider.resolve(function(err, creds) {\n        if (err) {\n          err = credError('Could not load credentials from any providers', err);\n        }\n        self.credentials = creds;\n        finish(err);\n      });\n    } else {\n      finish(credError('No credentials to load'));\n    }\n  },\n\n  /**\n   * @!group Loading and Setting Configuration Options\n   */\n\n  /**\n   * @overload update(options, allowUnknownKeys = false)\n   *   Updates the current configuration object with new options.\n   *\n   *   @example Update maxRetries property of a configuration object\n   *     config.update({maxRetries: 10});\n   *   @param [Object] options a map of option keys and values.\n   *   @param [Boolean] allowUnknownKeys whether unknown keys can be set on\n   *     the configuration object. Defaults to `false`.\n   *   @see constructor\n   */\n  update: function update(options, allowUnknownKeys) {\n    allowUnknownKeys = allowUnknownKeys || false;\n    options = this.extractCredentials(options);\n    AWS.util.each.call(this, options, function (key, value) {\n      if (allowUnknownKeys || Object.prototype.hasOwnProperty.call(this.keys, key) ||\n          AWS.Service.hasService(key)) {\n        this.set(key, value);\n      }\n    });\n  },\n\n  /**\n   * Loads configuration data from a JSON file into this config object.\n   * @note Loading configuration will reset all existing configuration\n   *   on the object.\n   * @!macro nobrowser\n   * @param path [String] the path relative to your process's current\n   *    working directory to load configuration from.\n   * @return [AWS.Config] the same configuration object\n   */\n  loadFromPath: function loadFromPath(path) {\n    this.clear();\n\n    var options = JSON.parse(AWS.util.readFileSync(path));\n    var fileSystemCreds = new AWS.FileSystemCredentials(path);\n    var chain = new AWS.CredentialProviderChain();\n    chain.providers.unshift(fileSystemCreds);\n    chain.resolve(function (err, creds) {\n      if (err) throw err;\n      else options.credentials = creds;\n    });\n\n    this.constructor(options);\n\n    return this;\n  },\n\n  /**\n   * Clears configuration data on this object\n   *\n   * @api private\n   */\n  clear: function clear() {\n    /*jshint forin:false */\n    AWS.util.each.call(this, this.keys, function (key) {\n      delete this[key];\n    });\n\n    // reset credential provider\n    this.set('credentials', undefined);\n    this.set('credentialProvider', undefined);\n  },\n\n  /**\n   * Sets a property on the configuration object, allowing for a\n   * default value\n   * @api private\n   */\n  set: function set(property, value, defaultValue) {\n    if (value === undefined) {\n      if (defaultValue === undefined) {\n        defaultValue = this.keys[property];\n      }\n      if (typeof defaultValue === 'function') {\n        this[property] = defaultValue.call(this);\n      } else {\n        this[property] = defaultValue;\n      }\n    } else if (property === 'httpOptions' && this[property]) {\n      // deep merge httpOptions\n      this[property] = AWS.util.merge(this[property], value);\n    } else {\n      this[property] = value;\n    }\n  },\n\n  /**\n   * All of the keys with their default values.\n   *\n   * @constant\n   * @api private\n   */\n  keys: {\n    credentials: null,\n    credentialProvider: null,\n    region: null,\n    logger: null,\n    apiVersions: {},\n    apiVersion: null,\n    endpoint: undefined,\n    httpOptions: {\n      timeout: 120000\n    },\n    maxRetries: undefined,\n    maxRedirects: 10,\n    paramValidation: true,\n    sslEnabled: true,\n    s3ForcePathStyle: false,\n    s3BucketEndpoint: false,\n    s3DisableBodySigning: true,\n    s3UsEast1RegionalEndpoint: 'legacy',\n    s3UseArnRegion: undefined,\n    computeChecksums: true,\n    convertResponseTypes: true,\n    correctClockSkew: false,\n    customUserAgent: null,\n    dynamoDbCrc32: true,\n    systemClockOffset: 0,\n    signatureVersion: null,\n    signatureCache: true,\n    retryDelayOptions: {},\n    useAccelerateEndpoint: false,\n    clientSideMonitoring: false,\n    endpointDiscoveryEnabled: undefined,\n    endpointCacheSize: 1000,\n    hostPrefixEnabled: true,\n    stsRegionalEndpoints: 'legacy'\n  },\n\n  /**\n   * Extracts accessKeyId, secretAccessKey and sessionToken\n   * from a configuration hash.\n   *\n   * @api private\n   */\n  extractCredentials: function extractCredentials(options) {\n    if (options.accessKeyId && options.secretAccessKey) {\n      options = AWS.util.copy(options);\n      options.credentials = new AWS.Credentials(options);\n    }\n    return options;\n  },\n\n  /**\n   * Sets the promise dependency the SDK will use wherever Promises are returned.\n   * Passing `null` will force the SDK to use native Promises if they are available.\n   * If native Promises are not available, passing `null` will have no effect.\n   * @param [Constructor] dep A reference to a Promise constructor\n   */\n  setPromisesDependency: function setPromisesDependency(dep) {\n    PromisesDependency = dep;\n    // if null was passed in, we should try to use native promises\n    if (dep === null && typeof Promise === 'function') {\n      PromisesDependency = Promise;\n    }\n    var constructors = [AWS.Request, AWS.Credentials, AWS.CredentialProviderChain];\n    if (AWS.S3) {\n      constructors.push(AWS.S3);\n      if (AWS.S3.ManagedUpload) {\n        constructors.push(AWS.S3.ManagedUpload);\n      }\n    }\n    AWS.util.addPromises(constructors, PromisesDependency);\n  },\n\n  /**\n   * Gets the promise dependency set by `AWS.config.setPromisesDependency`.\n   */\n  getPromisesDependency: function getPromisesDependency() {\n    return PromisesDependency;\n  }\n});\n\n/**\n * @return [AWS.Config] The global configuration object singleton instance\n * @readonly\n * @see AWS.Config\n */\nAWS.config = new AWS.Config();\n","var AWS = require('./core');\n/**\n * @api private\n */\nfunction validateRegionalEndpointsFlagValue(configValue, errorOptions) {\n  if (typeof configValue !== 'string') return undefined;\n  else if (['legacy', 'regional'].indexOf(configValue.toLowerCase()) >= 0) {\n    return configValue.toLowerCase();\n  } else {\n    throw AWS.util.error(new Error(), errorOptions);\n  }\n}\n\n/**\n * Resolve the configuration value for regional endpoint from difference sources: client\n * config, environmental variable, shared config file. Value can be case-insensitive\n * 'legacy' or 'reginal'.\n * @param originalConfig user-supplied config object to resolve\n * @param options a map of config property names from individual configuration source\n *  - env: name of environmental variable that refers to the config\n *  - sharedConfig: name of shared configuration file property that refers to the config\n *  - clientConfig: name of client configuration property that refers to the config\n *\n * @api private\n */\nfunction resolveRegionalEndpointsFlag(originalConfig, options) {\n  originalConfig = originalConfig || {};\n  //validate config value\n  var resolved;\n  if (originalConfig[options.clientConfig]) {\n    resolved = validateRegionalEndpointsFlagValue(originalConfig[options.clientConfig], {\n      code: 'InvalidConfiguration',\n      message: 'invalid \"' + options.clientConfig + '\" configuration. Expect \"legacy\" ' +\n      ' or \"regional\". Got \"' + originalConfig[options.clientConfig] + '\".'\n    });\n    if (resolved) return resolved;\n  }\n  if (!AWS.util.isNode()) return resolved;\n  //validate environmental variable\n  if (Object.prototype.hasOwnProperty.call(process.env, options.env)) {\n    var envFlag = process.env[options.env];\n    resolved = validateRegionalEndpointsFlagValue(envFlag, {\n      code: 'InvalidEnvironmentalVariable',\n      message: 'invalid ' + options.env + ' environmental variable. Expect \"legacy\" ' +\n      ' or \"regional\". Got \"' + process.env[options.env] + '\".'\n    });\n    if (resolved) return resolved;\n  }\n  //validate shared config file\n  var profile = {};\n  try {\n    var profiles = AWS.util.getProfilesFromSharedConfig(AWS.util.iniLoader);\n    profile = profiles[process.env.AWS_PROFILE || AWS.util.defaultProfile];\n  } catch (e) {};\n  if (profile && Object.prototype.hasOwnProperty.call(profile, options.sharedConfig)) {\n    var fileFlag = profile[options.sharedConfig];\n    resolved = validateRegionalEndpointsFlagValue(fileFlag, {\n      code: 'InvalidConfiguration',\n      message: 'invalid ' + options.sharedConfig + ' profile config. Expect \"legacy\" ' +\n      ' or \"regional\". Got \"' + profile[options.sharedConfig] + '\".'\n    });\n    if (resolved) return resolved;\n  }\n  return resolved;\n}\n\nmodule.exports = resolveRegionalEndpointsFlag;\n","/**\n * The main AWS namespace\n */\nvar AWS = { util: require('./util') };\n\n/**\n * @api private\n * @!macro [new] nobrowser\n *   @note This feature is not supported in the browser environment of the SDK.\n */\nvar _hidden = {}; _hidden.toString(); // hack to parse macro\n\n/**\n * @api private\n */\nmodule.exports = AWS;\n\nAWS.util.update(AWS, {\n\n  /**\n   * @constant\n   */\n  VERSION: '2.814.0',\n\n  /**\n   * @api private\n   */\n  Signers: {},\n\n  /**\n   * @api private\n   */\n  Protocol: {\n    Json: require('./protocol/json'),\n    Query: require('./protocol/query'),\n    Rest: require('./protocol/rest'),\n    RestJson: require('./protocol/rest_json'),\n    RestXml: require('./protocol/rest_xml')\n  },\n\n  /**\n   * @api private\n   */\n  XML: {\n    Builder: require('./xml/builder'),\n    Parser: null // conditionally set based on environment\n  },\n\n  /**\n   * @api private\n   */\n  JSON: {\n    Builder: require('./json/builder'),\n    Parser: require('./json/parser')\n  },\n\n  /**\n   * @api private\n   */\n  Model: {\n    Api: require('./model/api'),\n    Operation: require('./model/operation'),\n    Shape: require('./model/shape'),\n    Paginator: require('./model/paginator'),\n    ResourceWaiter: require('./model/resource_waiter')\n  },\n\n  /**\n   * @api private\n   */\n  apiLoader: require('./api_loader'),\n\n  /**\n   * @api private\n   */\n  EndpointCache: require('../vendor/endpoint-cache').EndpointCache\n});\nrequire('./sequential_executor');\nrequire('./service');\nrequire('./config');\nrequire('./http');\nrequire('./event_listeners');\nrequire('./request');\nrequire('./response');\nrequire('./resource_waiter');\nrequire('./signers/request_signer');\nrequire('./param_validator');\n\n/**\n * @readonly\n * @return [AWS.SequentialExecutor] a collection of global event listeners that\n *   are attached to every sent request.\n * @see AWS.Request AWS.Request for a list of events to listen for\n * @example Logging the time taken to send a request\n *   AWS.events.on('send', function startSend(resp) {\n *     resp.startTime = new Date().getTime();\n *   }).on('complete', function calculateTime(resp) {\n *     var time = (new Date().getTime() - resp.startTime) / 1000;\n *     console.log('Request took ' + time + ' seconds');\n *   });\n *\n *   new AWS.S3().listBuckets(); // prints 'Request took 0.285 seconds'\n */\nAWS.events = new AWS.SequentialExecutor();\n\n//create endpoint cache lazily\nAWS.util.memoizedProperty(AWS, 'endpointCache', function() {\n  return new AWS.EndpointCache(AWS.config.endpointCacheSize);\n}, true);\n","var AWS = require('./core');\n\n/**\n * Represents your AWS security credentials, specifically the\n * {accessKeyId}, {secretAccessKey}, and optional {sessionToken}.\n * Creating a `Credentials` object allows you to pass around your\n * security information to configuration and service objects.\n *\n * Note that this class typically does not need to be constructed manually,\n * as the {AWS.Config} and {AWS.Service} classes both accept simple\n * options hashes with the three keys. These structures will be converted\n * into Credentials objects automatically.\n *\n * ## Expiring and Refreshing Credentials\n *\n * Occasionally credentials can expire in the middle of a long-running\n * application. In this case, the SDK will automatically attempt to\n * refresh the credentials from the storage location if the Credentials\n * class implements the {refresh} method.\n *\n * If you are implementing a credential storage location, you\n * will want to create a subclass of the `Credentials` class and\n * override the {refresh} method. This method allows credentials to be\n * retrieved from the backing store, be it a file system, database, or\n * some network storage. The method should reset the credential attributes\n * on the object.\n *\n * @!attribute expired\n *   @return [Boolean] whether the credentials have been expired and\n *     require a refresh. Used in conjunction with {expireTime}.\n * @!attribute expireTime\n *   @return [Date] a time when credentials should be considered expired. Used\n *     in conjunction with {expired}.\n * @!attribute accessKeyId\n *   @return [String] the AWS access key ID\n * @!attribute secretAccessKey\n *   @return [String] the AWS secret access key\n * @!attribute sessionToken\n *   @return [String] an optional AWS session token\n */\nAWS.Credentials = AWS.util.inherit({\n  /**\n   * A credentials object can be created using positional arguments or an options\n   * hash.\n   *\n   * @overload AWS.Credentials(accessKeyId, secretAccessKey, sessionToken=null)\n   *   Creates a Credentials object with a given set of credential information\n   *   as positional arguments.\n   *   @param accessKeyId [String] the AWS access key ID\n   *   @param secretAccessKey [String] the AWS secret access key\n   *   @param sessionToken [String] the optional AWS session token\n   *   @example Create a credentials object with AWS credentials\n   *     var creds = new AWS.Credentials('akid', 'secret', 'session');\n   * @overload AWS.Credentials(options)\n   *   Creates a Credentials object with a given set of credential information\n   *   as an options hash.\n   *   @option options accessKeyId [String] the AWS access key ID\n   *   @option options secretAccessKey [String] the AWS secret access key\n   *   @option options sessionToken [String] the optional AWS session token\n   *   @example Create a credentials object with AWS credentials\n   *     var creds = new AWS.Credentials({\n   *       accessKeyId: 'akid', secretAccessKey: 'secret', sessionToken: 'session'\n   *     });\n   */\n  constructor: function Credentials() {\n    // hide secretAccessKey from being displayed with util.inspect\n    AWS.util.hideProperties(this, ['secretAccessKey']);\n\n    this.expired = false;\n    this.expireTime = null;\n    this.refreshCallbacks = [];\n    if (arguments.length === 1 && typeof arguments[0] === 'object') {\n      var creds = arguments[0].credentials || arguments[0];\n      this.accessKeyId = creds.accessKeyId;\n      this.secretAccessKey = creds.secretAccessKey;\n      this.sessionToken = creds.sessionToken;\n    } else {\n      this.accessKeyId = arguments[0];\n      this.secretAccessKey = arguments[1];\n      this.sessionToken = arguments[2];\n    }\n  },\n\n  /**\n   * @return [Integer] the number of seconds before {expireTime} during which\n   *   the credentials will be considered expired.\n   */\n  expiryWindow: 15,\n\n  /**\n   * @return [Boolean] whether the credentials object should call {refresh}\n   * @note Subclasses should override this method to provide custom refresh\n   *   logic.\n   */\n  needsRefresh: function needsRefresh() {\n    var currentTime = AWS.util.date.getDate().getTime();\n    var adjustedTime = new Date(currentTime + this.expiryWindow * 1000);\n\n    if (this.expireTime && adjustedTime > this.expireTime) {\n      return true;\n    } else {\n      return this.expired || !this.accessKeyId || !this.secretAccessKey;\n    }\n  },\n\n  /**\n   * Gets the existing credentials, refreshing them if they are not yet loaded\n   * or have expired. Users should call this method before using {refresh},\n   * as this will not attempt to reload credentials when they are already\n   * loaded into the object.\n   *\n   * @callback callback function(err)\n   *   When this callback is called with no error, it means either credentials\n   *   do not need to be refreshed or refreshed credentials information has\n   *   been loaded into the object (as the `accessKeyId`, `secretAccessKey`,\n   *   and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   */\n  get: function get(callback) {\n    var self = this;\n    if (this.needsRefresh()) {\n      this.refresh(function(err) {\n        if (!err) self.expired = false; // reset expired flag\n        if (callback) callback(err);\n      });\n    } else if (callback) {\n      callback();\n    }\n  },\n\n  /**\n   * @!method  getPromise()\n   *   Returns a 'thenable' promise.\n   *   Gets the existing credentials, refreshing them if they are not yet loaded\n   *   or have expired. Users should call this method before using {refresh},\n   *   as this will not attempt to reload credentials when they are already\n   *   loaded into the object.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @callback fulfilledCallback function()\n   *     Called if the promise is fulfilled. When this callback is called, it\n   *     means either credentials do not need to be refreshed or refreshed\n   *     credentials information has been loaded into the object (as the\n   *     `accessKeyId`, `secretAccessKey`, and `sessionToken` properties).\n   *   @callback rejectedCallback function(err)\n   *     Called if the promise is rejected.\n   *     @param err [Error] if an error occurred, this value will be filled\n   *   @return [Promise] A promise that represents the state of the `get` call.\n   *   @example Calling the `getPromise` method.\n   *     var promise = credProvider.getPromise();\n   *     promise.then(function() { ... }, function(err) { ... });\n   */\n\n  /**\n   * @!method  refreshPromise()\n   *   Returns a 'thenable' promise.\n   *   Refreshes the credentials. Users should call {get} before attempting\n   *   to forcibly refresh credentials.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @callback fulfilledCallback function()\n   *     Called if the promise is fulfilled. When this callback is called, it\n   *     means refreshed credentials information has been loaded into the object\n   *     (as the `accessKeyId`, `secretAccessKey`, and `sessionToken` properties).\n   *   @callback rejectedCallback function(err)\n   *     Called if the promise is rejected.\n   *     @param err [Error] if an error occurred, this value will be filled\n   *   @return [Promise] A promise that represents the state of the `refresh` call.\n   *   @example Calling the `refreshPromise` method.\n   *     var promise = credProvider.refreshPromise();\n   *     promise.then(function() { ... }, function(err) { ... });\n   */\n\n  /**\n   * Refreshes the credentials. Users should call {get} before attempting\n   * to forcibly refresh credentials.\n   *\n   * @callback callback function(err)\n   *   When this callback is called with no error, it means refreshed\n   *   credentials information has been loaded into the object (as the\n   *   `accessKeyId`, `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @note Subclasses should override this class to reset the\n   *   {accessKeyId}, {secretAccessKey} and optional {sessionToken}\n   *   on the credentials object and then call the callback with\n   *   any error information.\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    this.expired = false;\n    callback();\n  },\n\n  /**\n   * @api private\n   * @param callback\n   */\n  coalesceRefresh: function coalesceRefresh(callback, sync) {\n    var self = this;\n    if (self.refreshCallbacks.push(callback) === 1) {\n      self.load(function onLoad(err) {\n        AWS.util.arrayEach(self.refreshCallbacks, function(callback) {\n          if (sync) {\n            callback(err);\n          } else {\n            // callback could throw, so defer to ensure all callbacks are notified\n            AWS.util.defer(function () {\n              callback(err);\n            });\n          }\n        });\n        self.refreshCallbacks.length = 0;\n      });\n    }\n  },\n\n  /**\n   * @api private\n   * @param callback\n   */\n  load: function load(callback) {\n    callback();\n  }\n});\n\n/**\n * @api private\n */\nAWS.Credentials.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n  this.prototype.getPromise = AWS.util.promisifyMethod('get', PromiseDependency);\n  this.prototype.refreshPromise = AWS.util.promisifyMethod('refresh', PromiseDependency);\n};\n\n/**\n * @api private\n */\nAWS.Credentials.deletePromisesFromClass = function deletePromisesFromClass() {\n  delete this.prototype.getPromise;\n  delete this.prototype.refreshPromise;\n};\n\nAWS.util.addPromises(AWS.Credentials);\n","var AWS = require('../core');\nvar STS = require('../../clients/sts');\n\n/**\n * Represents temporary credentials retrieved from {AWS.STS}. Without any\n * extra parameters, credentials will be fetched from the\n * {AWS.STS.getSessionToken} operation. If an IAM role is provided, the\n * {AWS.STS.assumeRole} operation will be used to fetch credentials for the\n * role instead.\n *\n * AWS.ChainableTemporaryCredentials differs from AWS.TemporaryCredentials in\n * the way masterCredentials and refreshes are handled.\n * AWS.ChainableTemporaryCredentials refreshes expired credentials using the\n * masterCredentials passed by the user to support chaining of STS credentials.\n * However, AWS.TemporaryCredentials recursively collapses the masterCredentials\n * during instantiation, precluding the ability to refresh credentials which\n * require intermediate, temporary credentials.\n *\n * For example, if the application should use RoleA, which must be assumed from\n * RoleB, and the environment provides credentials which can assume RoleB, then\n * AWS.ChainableTemporaryCredentials must be used to support refreshing the\n * temporary credentials for RoleA:\n *\n * ```javascript\n * var roleACreds = new AWS.ChainableTemporaryCredentials({\n *   params: {RoleArn: 'RoleA'},\n *   masterCredentials: new AWS.ChainableTemporaryCredentials({\n *     params: {RoleArn: 'RoleB'},\n *     masterCredentials: new AWS.EnvironmentCredentials('AWS')\n *   })\n * });\n * ```\n *\n * If AWS.TemporaryCredentials had been used in the previous example,\n * `roleACreds` would fail to refresh because `roleACreds` would\n * use the environment credentials for the AssumeRole request.\n *\n * Another difference is that AWS.ChainableTemporaryCredentials creates the STS\n * service instance during instantiation while AWS.TemporaryCredentials creates\n * the STS service instance during the first refresh. Creating the service\n * instance during instantiation effectively captures the master credentials\n * from the global config, so that subsequent changes to the global config do\n * not affect the master credentials used to refresh the temporary credentials.\n *\n * This allows an instance of AWS.ChainableTemporaryCredentials to be assigned\n * to AWS.config.credentials:\n *\n * ```javascript\n * var envCreds = new AWS.EnvironmentCredentials('AWS');\n * AWS.config.credentials = envCreds;\n * // masterCredentials will be envCreds\n * AWS.config.credentials = new AWS.ChainableTemporaryCredentials({\n *   params: {RoleArn: '...'}\n * });\n * ```\n *\n * Similarly, to use the CredentialProviderChain's default providers as the\n * master credentials, simply create a new instance of\n * AWS.ChainableTemporaryCredentials:\n *\n * ```javascript\n * AWS.config.credentials = new ChainableTemporaryCredentials({\n *   params: {RoleArn: '...'}\n * });\n * ```\n *\n * @!attribute service\n *   @return [AWS.STS] the STS service instance used to\n *     get and refresh temporary credentials from AWS STS.\n * @note (see constructor)\n */\nAWS.ChainableTemporaryCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * Creates a new temporary credentials object.\n   *\n   * @param options [map] a set of options\n   * @option options params [map] ({}) a map of options that are passed to the\n   *   {AWS.STS.assumeRole} or {AWS.STS.getSessionToken} operations.\n   *   If a `RoleArn` parameter is passed in, credentials will be based on the\n   *   IAM role. If a `SerialNumber` parameter is passed in, {tokenCodeFn} must\n   *   also be passed in or an error will be thrown.\n   * @option options masterCredentials [AWS.Credentials] the master credentials\n   *   used to get and refresh temporary credentials from AWS STS. By default,\n   *   AWS.config.credentials or AWS.config.credentialProvider will be used.\n   * @option options tokenCodeFn [Function] (null) Function to provide\n   *   `TokenCode`, if `SerialNumber` is provided for profile in {params}. Function\n   *   is called with value of `SerialNumber` and `callback`, and should provide\n   *   the `TokenCode` or an error to the callback in the format\n   *   `callback(err, token)`.\n   * @example Creating a new credentials object for generic temporary credentials\n   *   AWS.config.credentials = new AWS.ChainableTemporaryCredentials();\n   * @example Creating a new credentials object for an IAM role\n   *   AWS.config.credentials = new AWS.ChainableTemporaryCredentials({\n   *     params: {\n   *       RoleArn: 'arn:aws:iam::1234567890:role/TemporaryCredentials'\n   *     }\n   *   });\n   * @see AWS.STS.assumeRole\n   * @see AWS.STS.getSessionToken\n   */\n  constructor: function ChainableTemporaryCredentials(options) {\n    AWS.Credentials.call(this);\n    options = options || {};\n    this.errorCode = 'ChainableTemporaryCredentialsProviderFailure';\n    this.expired = true;\n    this.tokenCodeFn = null;\n\n    var params = AWS.util.copy(options.params) || {};\n    if (params.RoleArn) {\n      params.RoleSessionName = params.RoleSessionName || 'temporary-credentials';\n    }\n    if (params.SerialNumber) {\n      if (!options.tokenCodeFn || (typeof options.tokenCodeFn !== 'function')) {\n        throw new AWS.util.error(\n          new Error('tokenCodeFn must be a function when params.SerialNumber is given'),\n          {code: this.errorCode}\n        );\n      } else {\n        this.tokenCodeFn = options.tokenCodeFn;\n      }\n    }\n    var config = AWS.util.merge(\n      {\n        params: params,\n        credentials: options.masterCredentials || AWS.config.credentials\n      },\n      options.stsConfig || {}\n    );\n    this.service = new STS(config);\n  },\n\n  /**\n   * Refreshes credentials using {AWS.STS.assumeRole} or\n   * {AWS.STS.getSessionToken}, depending on whether an IAM role ARN was passed\n   * to the credentials {constructor}.\n   *\n   * @callback callback function(err)\n   *   Called when the STS service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see AWS.Credentials.get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   * @param callback\n   */\n  load: function load(callback) {\n    var self = this;\n    var operation = self.service.config.params.RoleArn ? 'assumeRole' : 'getSessionToken';\n    this.getTokenCode(function (err, tokenCode) {\n      var params = {};\n      if (err) {\n        callback(err);\n        return;\n      }\n      if (tokenCode) {\n        params.TokenCode = tokenCode;\n      }\n      self.service[operation](params, function (err, data) {\n        if (!err) {\n          self.service.credentialsFrom(data, self);\n        }\n        callback(err);\n      });\n    });\n  },\n\n  /**\n   * @api private\n   */\n  getTokenCode: function getTokenCode(callback) {\n    var self = this;\n    if (this.tokenCodeFn) {\n      this.tokenCodeFn(this.service.config.params.SerialNumber, function (err, token) {\n        if (err) {\n          var message = err;\n          if (err instanceof Error) {\n            message = err.message;\n          }\n          callback(\n            AWS.util.error(\n              new Error('Error fetching MFA token: ' + message),\n              { code: self.errorCode}\n            )\n          );\n          return;\n        }\n        callback(null, token);\n      });\n    } else {\n      callback(null);\n    }\n  }\n});\n","var AWS = require('../core');\nvar CognitoIdentity = require('../../clients/cognitoidentity');\nvar STS = require('../../clients/sts');\n\n/**\n * Represents credentials retrieved from STS Web Identity Federation using\n * the Amazon Cognito Identity service.\n *\n * By default this provider gets credentials using the\n * {AWS.CognitoIdentity.getCredentialsForIdentity} service operation, which\n * requires either an `IdentityId` or an `IdentityPoolId` (Amazon Cognito\n * Identity Pool ID), which is used to call {AWS.CognitoIdentity.getId} to\n * obtain an `IdentityId`. If the identity or identity pool is not configured in\n * the Amazon Cognito Console to use IAM roles with the appropriate permissions,\n * then additionally a `RoleArn` is required containing the ARN of the IAM trust\n * policy for the Amazon Cognito role that the user will log into. If a `RoleArn`\n * is provided, then this provider gets credentials using the\n * {AWS.STS.assumeRoleWithWebIdentity} service operation, after first getting an\n * Open ID token from {AWS.CognitoIdentity.getOpenIdToken}.\n *\n * In addition, if this credential provider is used to provide authenticated\n * login, the `Logins` map may be set to the tokens provided by the respective\n * identity providers. See {constructor} for an example on creating a credentials\n * object with proper property values.\n *\n * ## Refreshing Credentials from Identity Service\n *\n * In addition to AWS credentials expiring after a given amount of time, the\n * login token from the identity provider will also expire. Once this token\n * expires, it will not be usable to refresh AWS credentials, and another\n * token will be needed. The SDK does not manage refreshing of the token value,\n * but this can be done through a \"refresh token\" supported by most identity\n * providers. Consult the documentation for the identity provider for refreshing\n * tokens. Once the refreshed token is acquired, you should make sure to update\n * this new token in the credentials object's {params} property. The following\n * code will update the WebIdentityToken, assuming you have retrieved an updated\n * token from the identity provider:\n *\n * ```javascript\n * AWS.config.credentials.params.Logins['graph.facebook.com'] = updatedToken;\n * ```\n *\n * Future calls to `credentials.refresh()` will now use the new token.\n *\n * @!attribute params\n *   @return [map] the map of params passed to\n *     {AWS.CognitoIdentity.getId},\n *     {AWS.CognitoIdentity.getOpenIdToken}, and\n *     {AWS.STS.assumeRoleWithWebIdentity}. To update the token, set the\n *     `params.WebIdentityToken` property.\n * @!attribute data\n *   @return [map] the raw data response from the call to\n *     {AWS.CognitoIdentity.getCredentialsForIdentity}, or\n *     {AWS.STS.assumeRoleWithWebIdentity}. Use this if you want to get\n *     access to other properties from the response.\n * @!attribute identityId\n *   @return [String] the Cognito ID returned by the last call to\n *     {AWS.CognitoIdentity.getOpenIdToken}. This ID represents the actual\n *     final resolved identity ID from Amazon Cognito.\n */\nAWS.CognitoIdentityCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * @api private\n   */\n  localStorageKey: {\n    id: 'aws.cognito.identity-id.',\n    providers: 'aws.cognito.identity-providers.'\n  },\n\n  /**\n   * Creates a new credentials object.\n   * @example Creating a new credentials object\n   *   AWS.config.credentials = new AWS.CognitoIdentityCredentials({\n   *\n   *     // either IdentityPoolId or IdentityId is required\n   *     // See the IdentityPoolId param for AWS.CognitoIdentity.getID (linked below)\n   *     // See the IdentityId param for AWS.CognitoIdentity.getCredentialsForIdentity\n   *     // or AWS.CognitoIdentity.getOpenIdToken (linked below)\n   *     IdentityPoolId: 'us-east-1:1699ebc0-7900-4099-b910-2df94f52a030',\n   *     IdentityId: 'us-east-1:128d0a74-c82f-4553-916d-90053e4a8b0f'\n   *\n   *     // optional, only necessary when the identity pool is not configured\n   *     // to use IAM roles in the Amazon Cognito Console\n   *     // See the RoleArn param for AWS.STS.assumeRoleWithWebIdentity (linked below)\n   *     RoleArn: 'arn:aws:iam::1234567890:role/MYAPP-CognitoIdentity',\n   *\n   *     // optional tokens, used for authenticated login\n   *     // See the Logins param for AWS.CognitoIdentity.getID (linked below)\n   *     Logins: {\n   *       'graph.facebook.com': 'FBTOKEN',\n   *       'www.amazon.com': 'AMAZONTOKEN',\n   *       'accounts.google.com': 'GOOGLETOKEN',\n   *       'api.twitter.com': 'TWITTERTOKEN',\n   *       'www.digits.com': 'DIGITSTOKEN'\n   *     },\n   *\n   *     // optional name, defaults to web-identity\n   *     // See the RoleSessionName param for AWS.STS.assumeRoleWithWebIdentity (linked below)\n   *     RoleSessionName: 'web',\n   *\n   *     // optional, only necessary when application runs in a browser\n   *     // and multiple users are signed in at once, used for caching\n   *     LoginId: 'example@gmail.com'\n   *\n   *   }, {\n   *      // optionally provide configuration to apply to the underlying service clients\n   *      // if configuration is not provided, then configuration will be pulled from AWS.config\n   *\n   *      // region should match the region your identity pool is located in\n   *      region: 'us-east-1',\n   *\n   *      // specify timeout options\n   *      httpOptions: {\n   *        timeout: 100\n   *      }\n   *   });\n   * @see AWS.CognitoIdentity.getId\n   * @see AWS.CognitoIdentity.getCredentialsForIdentity\n   * @see AWS.STS.assumeRoleWithWebIdentity\n   * @see AWS.CognitoIdentity.getOpenIdToken\n   * @see AWS.Config\n   * @note If a region is not provided in the global AWS.config, or\n   *   specified in the `clientConfig` to the CognitoIdentityCredentials\n   *   constructor, you may encounter a 'Missing credentials in config' error\n   *   when calling making a service call.\n   */\n  constructor: function CognitoIdentityCredentials(params, clientConfig) {\n    AWS.Credentials.call(this);\n    this.expired = true;\n    this.params = params;\n    this.data = null;\n    this._identityId = null;\n    this._clientConfig = AWS.util.copy(clientConfig || {});\n    this.loadCachedId();\n    var self = this;\n    Object.defineProperty(this, 'identityId', {\n      get: function() {\n        self.loadCachedId();\n        return self._identityId || self.params.IdentityId;\n      },\n      set: function(identityId) {\n        self._identityId = identityId;\n      }\n    });\n  },\n\n  /**\n   * Refreshes credentials using {AWS.CognitoIdentity.getCredentialsForIdentity},\n   * or {AWS.STS.assumeRoleWithWebIdentity}.\n   *\n   * @callback callback function(err)\n   *   Called when the STS service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see AWS.Credentials.get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   * @param callback\n   */\n  load: function load(callback) {\n    var self = this;\n    self.createClients();\n    self.data = null;\n    self._identityId = null;\n    self.getId(function(err) {\n      if (!err) {\n        if (!self.params.RoleArn) {\n          self.getCredentialsForIdentity(callback);\n        } else {\n          self.getCredentialsFromSTS(callback);\n        }\n      } else {\n        self.clearIdOnNotAuthorized(err);\n        callback(err);\n      }\n    });\n  },\n\n  /**\n   * Clears the cached Cognito ID associated with the currently configured\n   * identity pool ID. Use this to manually invalidate your cache if\n   * the identity pool ID was deleted.\n   */\n  clearCachedId: function clearCache() {\n    this._identityId = null;\n    delete this.params.IdentityId;\n\n    var poolId = this.params.IdentityPoolId;\n    var loginId = this.params.LoginId || '';\n    delete this.storage[this.localStorageKey.id + poolId + loginId];\n    delete this.storage[this.localStorageKey.providers + poolId + loginId];\n  },\n\n  /**\n   * @api private\n   */\n  clearIdOnNotAuthorized: function clearIdOnNotAuthorized(err) {\n    var self = this;\n    if (err.code == 'NotAuthorizedException') {\n      self.clearCachedId();\n    }\n  },\n\n  /**\n   * Retrieves a Cognito ID, loading from cache if it was already retrieved\n   * on this device.\n   *\n   * @callback callback function(err, identityId)\n   *   @param err [Error, null] an error object if the call failed or null if\n   *     it succeeded.\n   *   @param identityId [String, null] if successful, the callback will return\n   *     the Cognito ID.\n   * @note If not loaded explicitly, the Cognito ID is loaded and stored in\n   *   localStorage in the browser environment of a device.\n   * @api private\n   */\n  getId: function getId(callback) {\n    var self = this;\n    if (typeof self.params.IdentityId === 'string') {\n      return callback(null, self.params.IdentityId);\n    }\n\n    self.cognito.getId(function(err, data) {\n      if (!err && data.IdentityId) {\n        self.params.IdentityId = data.IdentityId;\n        callback(null, data.IdentityId);\n      } else {\n        callback(err);\n      }\n    });\n  },\n\n\n  /**\n   * @api private\n   */\n  loadCredentials: function loadCredentials(data, credentials) {\n    if (!data || !credentials) return;\n    credentials.expired = false;\n    credentials.accessKeyId = data.Credentials.AccessKeyId;\n    credentials.secretAccessKey = data.Credentials.SecretKey;\n    credentials.sessionToken = data.Credentials.SessionToken;\n    credentials.expireTime = data.Credentials.Expiration;\n  },\n\n  /**\n   * @api private\n   */\n  getCredentialsForIdentity: function getCredentialsForIdentity(callback) {\n    var self = this;\n    self.cognito.getCredentialsForIdentity(function(err, data) {\n      if (!err) {\n        self.cacheId(data);\n        self.data = data;\n        self.loadCredentials(self.data, self);\n      } else {\n        self.clearIdOnNotAuthorized(err);\n      }\n      callback(err);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  getCredentialsFromSTS: function getCredentialsFromSTS(callback) {\n    var self = this;\n    self.cognito.getOpenIdToken(function(err, data) {\n      if (!err) {\n        self.cacheId(data);\n        self.params.WebIdentityToken = data.Token;\n        self.webIdentityCredentials.refresh(function(webErr) {\n          if (!webErr) {\n            self.data = self.webIdentityCredentials.data;\n            self.sts.credentialsFrom(self.data, self);\n          }\n          callback(webErr);\n        });\n      } else {\n        self.clearIdOnNotAuthorized(err);\n        callback(err);\n      }\n    });\n  },\n\n  /**\n   * @api private\n   */\n  loadCachedId: function loadCachedId() {\n    var self = this;\n\n    // in the browser we source default IdentityId from localStorage\n    if (AWS.util.isBrowser() && !self.params.IdentityId) {\n      var id = self.getStorage('id');\n      if (id && self.params.Logins) {\n        var actualProviders = Object.keys(self.params.Logins);\n        var cachedProviders =\n          (self.getStorage('providers') || '').split(',');\n\n        // only load ID if at least one provider used this ID before\n        var intersect = cachedProviders.filter(function(n) {\n          return actualProviders.indexOf(n) !== -1;\n        });\n        if (intersect.length !== 0) {\n          self.params.IdentityId = id;\n        }\n      } else if (id) {\n        self.params.IdentityId = id;\n      }\n    }\n  },\n\n  /**\n   * @api private\n   */\n  createClients: function() {\n    var clientConfig = this._clientConfig;\n    this.webIdentityCredentials = this.webIdentityCredentials ||\n      new AWS.WebIdentityCredentials(this.params, clientConfig);\n    if (!this.cognito) {\n      var cognitoConfig = AWS.util.merge({}, clientConfig);\n      cognitoConfig.params = this.params;\n      this.cognito = new CognitoIdentity(cognitoConfig);\n    }\n    this.sts = this.sts || new STS(clientConfig);\n  },\n\n  /**\n   * @api private\n   */\n  cacheId: function cacheId(data) {\n    this._identityId = data.IdentityId;\n    this.params.IdentityId = this._identityId;\n\n    // cache this IdentityId in browser localStorage if possible\n    if (AWS.util.isBrowser()) {\n      this.setStorage('id', data.IdentityId);\n\n      if (this.params.Logins) {\n        this.setStorage('providers', Object.keys(this.params.Logins).join(','));\n      }\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getStorage: function getStorage(key) {\n    return this.storage[this.localStorageKey[key] + this.params.IdentityPoolId + (this.params.LoginId || '')];\n  },\n\n  /**\n   * @api private\n   */\n  setStorage: function setStorage(key, val) {\n    try {\n      this.storage[this.localStorageKey[key] + this.params.IdentityPoolId + (this.params.LoginId || '')] = val;\n    } catch (_) {}\n  },\n\n  /**\n   * @api private\n   */\n  storage: (function() {\n    try {\n      var storage = AWS.util.isBrowser() && window.localStorage !== null && typeof window.localStorage === 'object' ?\n          window.localStorage : {};\n\n      // Test set/remove which would throw an error in Safari's private browsing\n      storage['aws.test-storage'] = 'foobar';\n      delete storage['aws.test-storage'];\n\n      return storage;\n    } catch (_) {\n      return {};\n    }\n  })()\n});\n","var AWS = require('../core');\n\n/**\n * Creates a credential provider chain that searches for AWS credentials\n * in a list of credential providers specified by the {providers} property.\n *\n * By default, the chain will use the {defaultProviders} to resolve credentials.\n * These providers will look in the environment using the\n * {AWS.EnvironmentCredentials} class with the 'AWS' and 'AMAZON' prefixes.\n *\n * ## Setting Providers\n *\n * Each provider in the {providers} list should be a function that returns\n * a {AWS.Credentials} object, or a hardcoded credentials object. The function\n * form allows for delayed execution of the credential construction.\n *\n * ## Resolving Credentials from a Chain\n *\n * Call {resolve} to return the first valid credential object that can be\n * loaded by the provider chain.\n *\n * For example, to resolve a chain with a custom provider that checks a file\n * on disk after the set of {defaultProviders}:\n *\n * ```javascript\n * var diskProvider = new AWS.FileSystemCredentials('./creds.json');\n * var chain = new AWS.CredentialProviderChain();\n * chain.providers.push(diskProvider);\n * chain.resolve();\n * ```\n *\n * The above code will return the `diskProvider` object if the\n * file contains credentials and the `defaultProviders` do not contain\n * any credential settings.\n *\n * @!attribute providers\n *   @return [Array<AWS.Credentials, Function>]\n *     a list of credentials objects or functions that return credentials\n *     objects. If the provider is a function, the function will be\n *     executed lazily when the provider needs to be checked for valid\n *     credentials. By default, this object will be set to the\n *     {defaultProviders}.\n *   @see defaultProviders\n */\nAWS.CredentialProviderChain = AWS.util.inherit(AWS.Credentials, {\n\n  /**\n   * Creates a new CredentialProviderChain with a default set of providers\n   * specified by {defaultProviders}.\n   */\n  constructor: function CredentialProviderChain(providers) {\n    if (providers) {\n      this.providers = providers;\n    } else {\n      this.providers = AWS.CredentialProviderChain.defaultProviders.slice(0);\n    }\n    this.resolveCallbacks = [];\n  },\n\n  /**\n   * @!method  resolvePromise()\n   *   Returns a 'thenable' promise.\n   *   Resolves the provider chain by searching for the first set of\n   *   credentials in {providers}.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @callback fulfilledCallback function(credentials)\n   *     Called if the promise is fulfilled and the provider resolves the chain\n   *     to a credentials object\n   *     @param credentials [AWS.Credentials] the credentials object resolved\n   *       by the provider chain.\n   *   @callback rejectedCallback function(error)\n   *     Called if the promise is rejected.\n   *     @param err [Error] the error object returned if no credentials are found.\n   *   @return [Promise] A promise that represents the state of the `resolve` method call.\n   *   @example Calling the `resolvePromise` method.\n   *     var promise = chain.resolvePromise();\n   *     promise.then(function(credentials) { ... }, function(err) { ... });\n   */\n\n  /**\n   * Resolves the provider chain by searching for the first set of\n   * credentials in {providers}.\n   *\n   * @callback callback function(err, credentials)\n   *   Called when the provider resolves the chain to a credentials object\n   *   or null if no credentials can be found.\n   *\n   *   @param err [Error] the error object returned if no credentials are\n   *     found.\n   *   @param credentials [AWS.Credentials] the credentials object resolved\n   *     by the provider chain.\n   * @return [AWS.CredentialProviderChain] the provider, for chaining.\n   */\n  resolve: function resolve(callback) {\n    var self = this;\n    if (self.providers.length === 0) {\n      callback(new Error('No providers'));\n      return self;\n    }\n\n    if (self.resolveCallbacks.push(callback) === 1) {\n      var index = 0;\n      var providers = self.providers.slice(0);\n\n      function resolveNext(err, creds) {\n        if ((!err && creds) || index === providers.length) {\n          AWS.util.arrayEach(self.resolveCallbacks, function (callback) {\n            callback(err, creds);\n          });\n          self.resolveCallbacks.length = 0;\n          return;\n        }\n\n        var provider = providers[index++];\n        if (typeof provider === 'function') {\n          creds = provider.call();\n        } else {\n          creds = provider;\n        }\n\n        if (creds.get) {\n          creds.get(function (getErr) {\n            resolveNext(getErr, getErr ? null : creds);\n          });\n        } else {\n          resolveNext(null, creds);\n        }\n      }\n\n      resolveNext();\n    }\n\n    return self;\n  }\n});\n\n/**\n * The default set of providers used by a vanilla CredentialProviderChain.\n *\n * In the browser:\n *\n * ```javascript\n * AWS.CredentialProviderChain.defaultProviders = []\n * ```\n *\n * In Node.js:\n *\n * ```javascript\n * AWS.CredentialProviderChain.defaultProviders = [\n *   function () { return new AWS.EnvironmentCredentials('AWS'); },\n *   function () { return new AWS.EnvironmentCredentials('AMAZON'); },\n *   function () { return new AWS.SharedIniFileCredentials(); },\n *   function () { return new AWS.ECSCredentials(); },\n *   function () { return new AWS.ProcessCredentials(); },\n *   function () { return new AWS.TokenFileWebIdentityCredentials(); },\n *   function () { return new AWS.EC2MetadataCredentials() }\n * ]\n * ```\n */\nAWS.CredentialProviderChain.defaultProviders = [];\n\n/**\n * @api private\n */\nAWS.CredentialProviderChain.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n  this.prototype.resolvePromise = AWS.util.promisifyMethod('resolve', PromiseDependency);\n};\n\n/**\n * @api private\n */\nAWS.CredentialProviderChain.deletePromisesFromClass = function deletePromisesFromClass() {\n  delete this.prototype.resolvePromise;\n};\n\nAWS.util.addPromises(AWS.CredentialProviderChain);\n","var AWS = require('../core');\nrequire('../metadata_service');\n\n/**\n * Represents credentials received from the metadata service on an EC2 instance.\n *\n * By default, this class will connect to the metadata service using\n * {AWS.MetadataService} and attempt to load any available credentials. If it\n * can connect, and credentials are available, these will be used with zero\n * configuration.\n *\n * This credentials class will by default timeout after 1 second of inactivity\n * and retry 3 times.\n * If your requests to the EC2 metadata service are timing out, you can increase\n * these values by configuring them directly:\n *\n * ```javascript\n * AWS.config.credentials = new AWS.EC2MetadataCredentials({\n *   httpOptions: { timeout: 5000 }, // 5 second timeout\n *   maxRetries: 10, // retry 10 times\n *   retryDelayOptions: { base: 200 } // see AWS.Config for information\n * });\n *\n * If your requests are timing out in connecting to the metadata service, such\n * as when testing on a development machine, you can use the connectTimeout\n * option, specified in milliseconds, which also defaults to 1 second.\n * ```\n *\n * @see AWS.Config.retryDelayOptions\n *\n * @!macro nobrowser\n */\nAWS.EC2MetadataCredentials = AWS.util.inherit(AWS.Credentials, {\n  constructor: function EC2MetadataCredentials(options) {\n    AWS.Credentials.call(this);\n\n    options = options ? AWS.util.copy(options) : {};\n    options = AWS.util.merge(\n      {maxRetries: this.defaultMaxRetries}, options);\n    if (!options.httpOptions) options.httpOptions = {};\n    options.httpOptions = AWS.util.merge(\n      {timeout: this.defaultTimeout,\n        connectTimeout: this.defaultConnectTimeout},\n       options.httpOptions);\n\n    this.metadataService = new AWS.MetadataService(options);\n    this.metadata = {};\n  },\n\n  /**\n   * @api private\n   */\n  defaultTimeout: 1000,\n\n   /**\n   * @api private\n   */\n  defaultConnectTimeout: 1000,\n\n  /**\n   * @api private\n   */\n  defaultMaxRetries: 3,\n\n  /**\n   * Loads the credentials from the instance metadata service\n   *\n   * @callback callback function(err)\n   *   Called when the instance metadata service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   * @param callback\n   */\n  load: function load(callback) {\n    var self = this;\n    self.metadataService.loadCredentials(function(err, creds) {\n      if (!err) {\n        var currentTime = AWS.util.date.getDate();\n        var expireTime = new Date(creds.Expiration);\n        if (expireTime < currentTime) {\n          err = AWS.util.error(\n            new Error('EC2 Instance Metadata Serivce provided expired credentials'),\n            { code: 'EC2MetadataCredentialsProviderFailure' }\n          );\n        } else {\n          self.expired = false;\n          self.metadata = creds;\n          self.accessKeyId = creds.AccessKeyId;\n          self.secretAccessKey = creds.SecretAccessKey;\n          self.sessionToken = creds.Token;\n          self.expireTime = expireTime;\n        }\n      }\n      callback(err);\n    });\n  }\n});\n","var AWS = require('../core');\n\n/**\n * Represents credentials received from relative URI specified in the ECS container.\n *\n * This class will request refreshable credentials from the relative URI\n * specified by the AWS_CONTAINER_CREDENTIALS_RELATIVE_URI or the\n * AWS_CONTAINER_CREDENTIALS_FULL_URI environment variable. If valid credentials\n * are returned in the response, these will be used with zero configuration.\n *\n * This credentials class will by default timeout after 1 second of inactivity\n * and retry 3 times.\n * If your requests to the relative URI are timing out, you can increase\n * the value by configuring them directly:\n *\n * ```javascript\n * AWS.config.credentials = new AWS.ECSCredentials({\n *   httpOptions: { timeout: 5000 }, // 5 second timeout\n *   maxRetries: 10, // retry 10 times\n *   retryDelayOptions: { base: 200 } // see AWS.Config for information\n * });\n * ```\n *\n * @see AWS.Config.retryDelayOptions\n *\n * @!macro nobrowser\n */\nAWS.ECSCredentials = AWS.RemoteCredentials;\n","var AWS = require('../core');\n\n/**\n * Represents credentials from the environment.\n *\n * By default, this class will look for the matching environment variables\n * prefixed by a given {envPrefix}. The un-prefixed environment variable names\n * for each credential value is listed below:\n *\n * ```javascript\n * accessKeyId: ACCESS_KEY_ID\n * secretAccessKey: SECRET_ACCESS_KEY\n * sessionToken: SESSION_TOKEN\n * ```\n *\n * With the default prefix of 'AWS', the environment variables would be:\n *\n *     AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY, AWS_SESSION_TOKEN\n *\n * @!attribute envPrefix\n *   @readonly\n *   @return [String] the prefix for the environment variable names excluding\n *     the separating underscore ('_').\n */\nAWS.EnvironmentCredentials = AWS.util.inherit(AWS.Credentials, {\n\n  /**\n   * Creates a new EnvironmentCredentials class with a given variable\n   * prefix {envPrefix}. For example, to load credentials using the 'AWS'\n   * prefix:\n   *\n   * ```javascript\n   * var creds = new AWS.EnvironmentCredentials('AWS');\n   * creds.accessKeyId == 'AKID' // from AWS_ACCESS_KEY_ID env var\n   * ```\n   *\n   * @param envPrefix [String] the prefix to use (e.g., 'AWS') for environment\n   *   variables. Do not include the separating underscore.\n   */\n  constructor: function EnvironmentCredentials(envPrefix) {\n    AWS.Credentials.call(this);\n    this.envPrefix = envPrefix;\n    this.get(function() {});\n  },\n\n  /**\n   * Loads credentials from the environment using the prefixed\n   * environment variables.\n   *\n   * @callback callback function(err)\n   *   Called after the (prefixed) ACCESS_KEY_ID, SECRET_ACCESS_KEY, and\n   *   SESSION_TOKEN environment variables are read. When this callback is\n   *   called with no error, it means that the credentials information has\n   *   been loaded into the object (as the `accessKeyId`, `secretAccessKey`,\n   *   and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    if (!callback) callback = AWS.util.fn.callback;\n\n    if (!process || !process.env) {\n      callback(AWS.util.error(\n        new Error('No process info or environment variables available'),\n        { code: 'EnvironmentCredentialsProviderFailure' }\n      ));\n      return;\n    }\n\n    var keys = ['ACCESS_KEY_ID', 'SECRET_ACCESS_KEY', 'SESSION_TOKEN'];\n    var values = [];\n\n    for (var i = 0; i < keys.length; i++) {\n      var prefix = '';\n      if (this.envPrefix) prefix = this.envPrefix + '_';\n      values[i] = process.env[prefix + keys[i]];\n      if (!values[i] && keys[i] !== 'SESSION_TOKEN') {\n        callback(AWS.util.error(\n          new Error('Variable ' + prefix + keys[i] + ' not set.'),\n        { code: 'EnvironmentCredentialsProviderFailure' }\n        ));\n        return;\n      }\n    }\n\n    this.expired = false;\n    AWS.Credentials.apply(this, values);\n    callback();\n  }\n\n});\n","var AWS = require('../core');\n\n/**\n * Represents credentials from a JSON file on disk.\n * If the credentials expire, the SDK can {refresh} the credentials\n * from the file.\n *\n * The format of the file should be similar to the options passed to\n * {AWS.Config}:\n *\n * ```javascript\n * {accessKeyId: 'akid', secretAccessKey: 'secret', sessionToken: 'optional'}\n * ```\n *\n * @example Loading credentials from disk\n *   var creds = new AWS.FileSystemCredentials('./configuration.json');\n *   creds.accessKeyId == 'AKID'\n *\n * @!attribute filename\n *   @readonly\n *   @return [String] the path to the JSON file on disk containing the\n *     credentials.\n * @!macro nobrowser\n */\nAWS.FileSystemCredentials = AWS.util.inherit(AWS.Credentials, {\n\n  /**\n   * @overload AWS.FileSystemCredentials(filename)\n   *   Creates a new FileSystemCredentials object from a filename\n   *\n   *   @param filename [String] the path on disk to the JSON file to load.\n   */\n  constructor: function FileSystemCredentials(filename) {\n    AWS.Credentials.call(this);\n    this.filename = filename;\n    this.get(function() {});\n  },\n\n  /**\n   * Loads the credentials from the {filename} on disk.\n   *\n   * @callback callback function(err)\n   *   Called after the JSON file on disk is read and parsed. When this callback\n   *   is called with no error, it means that the credentials information\n   *   has been loaded into the object (as the `accessKeyId`, `secretAccessKey`,\n   *   and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    if (!callback) callback = AWS.util.fn.callback;\n    try {\n      var creds = JSON.parse(AWS.util.readFileSync(this.filename));\n      AWS.Credentials.call(this, creds);\n      if (!this.accessKeyId || !this.secretAccessKey) {\n        throw AWS.util.error(\n          new Error('Credentials not set in ' + this.filename),\n        { code: 'FileSystemCredentialsProviderFailure' }\n        );\n      }\n      this.expired = false;\n      callback();\n    } catch (err) {\n      callback(err);\n    }\n  }\n\n});\n","var AWS = require('../core');\nvar proc = require('child_process');\nvar iniLoader = AWS.util.iniLoader;\n\n/**\n * Represents credentials loaded from shared credentials file\n * (defaulting to ~/.aws/credentials or defined by the\n * `AWS_SHARED_CREDENTIALS_FILE` environment variable).\n *\n * ## Using process credentials\n *\n * The credentials file can specify a credential provider that executes\n * a given process and attempts to read its stdout to recieve a JSON payload\n * containing the credentials:\n *\n *     [default]\n *     credential_process = /usr/bin/credential_proc\n *\n * Automatically handles refreshing credentials if an Expiration time is\n * provided in the credentials payload. Credentials supplied in the same profile\n * will take precedence over the credential_process.\n *\n * Sourcing credentials from an external process can potentially be dangerous,\n * so proceed with caution. Other credential providers should be preferred if\n * at all possible. If using this option, you should make sure that the shared\n * credentials file is as locked down as possible using security best practices\n * for your operating system.\n *\n * ## Using custom profiles\n *\n * The SDK supports loading credentials for separate profiles. This can be done\n * in two ways:\n *\n * 1. Set the `AWS_PROFILE` environment variable in your process prior to\n *    loading the SDK.\n * 2. Directly load the AWS.ProcessCredentials provider:\n *\n * ```javascript\n * var creds = new AWS.ProcessCredentials({profile: 'myprofile'});\n * AWS.config.credentials = creds;\n * ```\n *\n * @!macro nobrowser\n */\nAWS.ProcessCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * Creates a new ProcessCredentials object.\n   *\n   * @param options [map] a set of options\n   * @option options profile [String] (AWS_PROFILE env var or 'default')\n   *   the name of the profile to load.\n   * @option options filename [String] ('~/.aws/credentials' or defined by\n   *   AWS_SHARED_CREDENTIALS_FILE process env var)\n   *   the filename to use when loading credentials.\n   * @option options callback [Function] (err) Credentials are eagerly loaded\n   *   by the constructor. When the callback is called with no error, the\n   *   credentials have been loaded successfully.\n   */\n  constructor: function ProcessCredentials(options) {\n    AWS.Credentials.call(this);\n\n    options = options || {};\n\n    this.filename = options.filename;\n    this.profile = options.profile || process.env.AWS_PROFILE || AWS.util.defaultProfile;\n    this.get(options.callback || AWS.util.fn.noop);\n  },\n\n  /**\n   * @api private\n   */\n  load: function load(callback) {\n    var self = this;\n    try {\n      var profiles = AWS.util.getProfilesFromSharedConfig(iniLoader, this.filename);\n      var profile = profiles[this.profile] || {};\n\n      if (Object.keys(profile).length === 0) {\n        throw AWS.util.error(\n          new Error('Profile ' + this.profile + ' not found'),\n          { code: 'ProcessCredentialsProviderFailure' }\n        );\n      }\n\n      if (profile['credential_process']) {\n        this.loadViaCredentialProcess(profile, function(err, data) {\n          if (err) {\n            callback(err, null);\n          } else {\n            self.expired = false;\n            self.accessKeyId = data.AccessKeyId;\n            self.secretAccessKey = data.SecretAccessKey;\n            self.sessionToken = data.SessionToken;\n            if (data.Expiration) {\n              self.expireTime = new Date(data.Expiration);\n            }\n            callback(null);\n          }\n        });\n      } else {\n        throw AWS.util.error(\n          new Error('Profile ' + this.profile + ' did not include credential process'),\n          { code: 'ProcessCredentialsProviderFailure' }\n        );\n      }\n    } catch (err) {\n      callback(err);\n    }\n  },\n\n  /**\n  * Executes the credential_process and retrieves\n  * credentials from the output\n  * @api private\n  * @param profile [map] credentials profile\n  * @throws ProcessCredentialsProviderFailure\n  */\n  loadViaCredentialProcess: function loadViaCredentialProcess(profile, callback) {\n    proc.exec(profile['credential_process'], function(err, stdOut, stdErr) {\n      if (err) {\n        callback(AWS.util.error(\n          new Error('credential_process returned error'),\n          { code: 'ProcessCredentialsProviderFailure'}\n        ), null);\n      } else {\n        try {\n          var credData = JSON.parse(stdOut);\n          if (credData.Expiration) {\n            var currentTime = AWS.util.date.getDate();\n            var expireTime = new Date(credData.Expiration);\n            if (expireTime < currentTime) {\n              throw Error('credential_process returned expired credentials');\n            }\n          }\n\n          if (credData.Version !== 1) {\n            throw Error('credential_process does not return Version == 1');\n          }\n          callback(null, credData);\n        } catch (err) {\n          callback(AWS.util.error(\n            new Error(err.message),\n            { code: 'ProcessCredentialsProviderFailure'}\n          ), null);\n        }\n      }\n    });\n  },\n\n  /**\n   * Loads the credentials from the credential process\n   *\n   * @callback callback function(err)\n   *   Called after the credential process has been executed. When this\n   *   callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    iniLoader.clearCachedFiles();\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  }\n});\n","var AWS = require('../core'),\n  ENV_RELATIVE_URI = 'AWS_CONTAINER_CREDENTIALS_RELATIVE_URI',\n  ENV_FULL_URI = 'AWS_CONTAINER_CREDENTIALS_FULL_URI',\n  ENV_AUTH_TOKEN = 'AWS_CONTAINER_AUTHORIZATION_TOKEN',\n  FULL_URI_UNRESTRICTED_PROTOCOLS = ['https:'],\n  FULL_URI_ALLOWED_PROTOCOLS = ['http:', 'https:'],\n  FULL_URI_ALLOWED_HOSTNAMES = ['localhost', '127.0.0.1'],\n  RELATIVE_URI_HOST = '169.254.170.2';\n\n/**\n * Represents credentials received from specified URI.\n *\n * This class will request refreshable credentials from the relative URI\n * specified by the AWS_CONTAINER_CREDENTIALS_RELATIVE_URI or the\n * AWS_CONTAINER_CREDENTIALS_FULL_URI environment variable. If valid credentials\n * are returned in the response, these will be used with zero configuration.\n *\n * This credentials class will by default timeout after 1 second of inactivity\n * and retry 3 times.\n * If your requests to the relative URI are timing out, you can increase\n * the value by configuring them directly:\n *\n * ```javascript\n * AWS.config.credentials = new AWS.RemoteCredentials({\n *   httpOptions: { timeout: 5000 }, // 5 second timeout\n *   maxRetries: 10, // retry 10 times\n *   retryDelayOptions: { base: 200 } // see AWS.Config for information\n * });\n * ```\n *\n * @see AWS.Config.retryDelayOptions\n *\n * @!macro nobrowser\n */\nAWS.RemoteCredentials = AWS.util.inherit(AWS.Credentials, {\n  constructor: function RemoteCredentials(options) {\n    AWS.Credentials.call(this);\n    options = options ? AWS.util.copy(options) : {};\n    if (!options.httpOptions) options.httpOptions = {};\n    options.httpOptions = AWS.util.merge(\n      this.httpOptions, options.httpOptions);\n    AWS.util.update(this, options);\n  },\n\n  /**\n   * @api private\n   */\n  httpOptions: { timeout: 1000 },\n\n  /**\n   * @api private\n   */\n  maxRetries: 3,\n\n  /**\n   * @api private\n   */\n  isConfiguredForEcsCredentials: function isConfiguredForEcsCredentials() {\n    return Boolean(\n        process &&\n        process.env &&\n        (process.env[ENV_RELATIVE_URI] || process.env[ENV_FULL_URI])\n    );\n  },\n\n  /**\n   * @api private\n   */\n  getECSFullUri: function getECSFullUri() {\n    if (process && process.env) {\n      var relative = process.env[ENV_RELATIVE_URI],\n          full = process.env[ENV_FULL_URI];\n      if (relative) {\n        return 'http://' + RELATIVE_URI_HOST + relative;\n      } else if (full) {\n        var parsed = AWS.util.urlParse(full);\n        if (FULL_URI_ALLOWED_PROTOCOLS.indexOf(parsed.protocol) < 0) {\n          throw AWS.util.error(\n            new Error('Unsupported protocol:  AWS.RemoteCredentials supports '\n              + FULL_URI_ALLOWED_PROTOCOLS.join(',') + ' only; '\n              + parsed.protocol + ' requested.'),\n            { code: 'ECSCredentialsProviderFailure' }\n          );\n        }\n\n        if (FULL_URI_UNRESTRICTED_PROTOCOLS.indexOf(parsed.protocol) < 0 &&\n            FULL_URI_ALLOWED_HOSTNAMES.indexOf(parsed.hostname) < 0) {\n          throw AWS.util.error(\n            new Error('Unsupported hostname: AWS.RemoteCredentials only supports '\n              + FULL_URI_ALLOWED_HOSTNAMES.join(',') + ' for ' + parsed.protocol + '; '\n              + parsed.protocol + '//' + parsed.hostname + ' requested.'),\n            { code: 'ECSCredentialsProviderFailure' }\n          );\n        }\n\n        return full;\n      } else {\n        throw AWS.util.error(\n          new Error('Variable ' + ENV_RELATIVE_URI + ' or ' + ENV_FULL_URI +\n            ' must be set to use AWS.RemoteCredentials.'),\n          { code: 'ECSCredentialsProviderFailure' }\n        );\n      }\n    } else {\n      throw AWS.util.error(\n        new Error('No process info available'),\n        { code: 'ECSCredentialsProviderFailure' }\n      );\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getECSAuthToken: function getECSAuthToken() {\n    if (process && process.env && process.env[ENV_FULL_URI]) {\n      return process.env[ENV_AUTH_TOKEN];\n    }\n  },\n\n  /**\n   * @api private\n   */\n  credsFormatIsValid: function credsFormatIsValid(credData) {\n    return (!!credData.accessKeyId && !!credData.secretAccessKey &&\n      !!credData.sessionToken && !!credData.expireTime);\n  },\n\n  /**\n   * @api private\n   */\n  formatCreds: function formatCreds(credData) {\n    if (!!credData.credentials) {\n      credData = credData.credentials;\n    }\n\n    return {\n      expired: false,\n      accessKeyId: credData.accessKeyId || credData.AccessKeyId,\n      secretAccessKey: credData.secretAccessKey || credData.SecretAccessKey,\n      sessionToken: credData.sessionToken || credData.Token,\n      expireTime: new Date(credData.expiration || credData.Expiration)\n    };\n  },\n\n  /**\n   * @api private\n   */\n  request: function request(url, callback) {\n    var httpRequest = new AWS.HttpRequest(url);\n    httpRequest.method = 'GET';\n    httpRequest.headers.Accept = 'application/json';\n    var token = this.getECSAuthToken();\n    if (token) {\n      httpRequest.headers.Authorization = token;\n    }\n    AWS.util.handleRequestWithRetries(httpRequest, this, callback);\n  },\n\n  /**\n   * Loads the credentials from the relative URI specified by container\n   *\n   * @callback callback function(err)\n   *   Called when the request to the relative URI responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, `sessionToken`, and `expireTime` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   */\n  load: function load(callback) {\n    var self = this;\n    var fullUri;\n\n    try {\n      fullUri = this.getECSFullUri();\n    } catch (err) {\n      callback(err);\n      return;\n    }\n\n    this.request(fullUri, function(err, data) {\n      if (!err) {\n        try {\n          data = JSON.parse(data);\n          var creds = self.formatCreds(data);\n          if (!self.credsFormatIsValid(creds)) {\n            throw AWS.util.error(\n              new Error('Response data is not in valid format'),\n              { code: 'ECSCredentialsProviderFailure' }\n            );\n          }\n          AWS.util.update(self, creds);\n        } catch (dataError) {\n          err = dataError;\n        }\n      }\n      callback(err, creds);\n    });\n  }\n});\n","var AWS = require('../core');\nvar STS = require('../../clients/sts');\n\n/**\n * Represents credentials retrieved from STS SAML support.\n *\n * By default this provider gets credentials using the\n * {AWS.STS.assumeRoleWithSAML} service operation. This operation\n * requires a `RoleArn` containing the ARN of the IAM trust policy for the\n * application for which credentials will be given, as well as a `PrincipalArn`\n * representing the ARN for the SAML identity provider. In addition, the\n * `SAMLAssertion` must be set to the token provided by the identity\n * provider. See {constructor} for an example on creating a credentials\n * object with proper `RoleArn`, `PrincipalArn`, and `SAMLAssertion` values.\n *\n * ## Refreshing Credentials from Identity Service\n *\n * In addition to AWS credentials expiring after a given amount of time, the\n * login token from the identity provider will also expire. Once this token\n * expires, it will not be usable to refresh AWS credentials, and another\n * token will be needed. The SDK does not manage refreshing of the token value,\n * but this can be done through a \"refresh token\" supported by most identity\n * providers. Consult the documentation for the identity provider for refreshing\n * tokens. Once the refreshed token is acquired, you should make sure to update\n * this new token in the credentials object's {params} property. The following\n * code will update the SAMLAssertion, assuming you have retrieved an updated\n * token from the identity provider:\n *\n * ```javascript\n * AWS.config.credentials.params.SAMLAssertion = updatedToken;\n * ```\n *\n * Future calls to `credentials.refresh()` will now use the new token.\n *\n * @!attribute params\n *   @return [map] the map of params passed to\n *     {AWS.STS.assumeRoleWithSAML}. To update the token, set the\n *     `params.SAMLAssertion` property.\n */\nAWS.SAMLCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * Creates a new credentials object.\n   * @param (see AWS.STS.assumeRoleWithSAML)\n   * @example Creating a new credentials object\n   *   AWS.config.credentials = new AWS.SAMLCredentials({\n   *     RoleArn: 'arn:aws:iam::1234567890:role/SAMLRole',\n   *     PrincipalArn: 'arn:aws:iam::1234567890:role/SAMLPrincipal',\n   *     SAMLAssertion: 'base64-token', // base64-encoded token from IdP\n   *   });\n   * @see AWS.STS.assumeRoleWithSAML\n   */\n  constructor: function SAMLCredentials(params) {\n    AWS.Credentials.call(this);\n    this.expired = true;\n    this.params = params;\n  },\n\n  /**\n   * Refreshes credentials using {AWS.STS.assumeRoleWithSAML}\n   *\n   * @callback callback function(err)\n   *   Called when the STS service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   */\n  load: function load(callback) {\n    var self = this;\n    self.createClients();\n    self.service.assumeRoleWithSAML(function (err, data) {\n      if (!err) {\n        self.service.credentialsFrom(data, self);\n      }\n      callback(err);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  createClients: function() {\n    this.service = this.service || new STS({params: this.params});\n  }\n\n});\n","var AWS = require('../core');\nvar STS = require('../../clients/sts');\nvar iniLoader = AWS.util.iniLoader;\n\nvar ASSUME_ROLE_DEFAULT_REGION = 'us-east-1';\n\n/**\n * Represents credentials loaded from shared credentials file\n * (defaulting to ~/.aws/credentials or defined by the\n * `AWS_SHARED_CREDENTIALS_FILE` environment variable).\n *\n * ## Using the shared credentials file\n *\n * This provider is checked by default in the Node.js environment. To use the\n * credentials file provider, simply add your access and secret keys to the\n * ~/.aws/credentials file in the following format:\n *\n *     [default]\n *     aws_access_key_id = AKID...\n *     aws_secret_access_key = YOUR_SECRET_KEY\n *\n * ## Using custom profiles\n *\n * The SDK supports loading credentials for separate profiles. This can be done\n * in two ways:\n *\n * 1. Set the `AWS_PROFILE` environment variable in your process prior to\n *    loading the SDK.\n * 2. Directly load the AWS.SharedIniFileCredentials provider:\n *\n * ```javascript\n * var creds = new AWS.SharedIniFileCredentials({profile: 'myprofile'});\n * AWS.config.credentials = creds;\n * ```\n *\n * @!macro nobrowser\n */\nAWS.SharedIniFileCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * Creates a new SharedIniFileCredentials object.\n   *\n   * @param options [map] a set of options\n   * @option options profile [String] (AWS_PROFILE env var or 'default')\n   *   the name of the profile to load.\n   * @option options filename [String] ('~/.aws/credentials' or defined by\n   *   AWS_SHARED_CREDENTIALS_FILE process env var)\n   *   the filename to use when loading credentials.\n   * @option options disableAssumeRole [Boolean] (false) True to disable\n   *   support for profiles that assume an IAM role. If true, and an assume\n   *   role profile is selected, an error is raised.\n   * @option options preferStaticCredentials [Boolean] (false) True to\n   *   prefer static credentials to role_arn if both are present.\n   * @option options tokenCodeFn [Function] (null) Function to provide\n   *   STS Assume Role TokenCode, if mfa_serial is provided for profile in ini\n   *   file. Function is called with value of mfa_serial and callback, and\n   *   should provide the TokenCode or an error to the callback in the format\n   *   callback(err, token)\n   * @option options callback [Function] (err) Credentials are eagerly loaded\n   *   by the constructor. When the callback is called with no error, the\n   *   credentials have been loaded successfully.\n   * @option options httpOptions [map] A set of options to pass to the low-level\n   *   HTTP request. Currently supported options are:\n   *   * **proxy** [String] &mdash; the URL to proxy requests through\n   *   * **agent** [http.Agent, https.Agent] &mdash; the Agent object to perform\n   *     HTTP requests with. Used for connection pooling. Defaults to the global\n   *     agent (`http.globalAgent`) for non-SSL connections. Note that for\n   *     SSL connections, a special Agent object is used in order to enable\n   *     peer certificate verification. This feature is only available in the\n   *     Node.js environment.\n   *   * **connectTimeout** [Integer] &mdash; Sets the socket to timeout after\n   *     failing to establish a connection with the server after\n   *     `connectTimeout` milliseconds. This timeout has no effect once a socket\n   *     connection has been established.\n   *   * **timeout** [Integer] &mdash; The number of milliseconds a request can\n   *     take before automatically being terminated.\n   *     Defaults to two minutes (120000).\n   */\n  constructor: function SharedIniFileCredentials(options) {\n    AWS.Credentials.call(this);\n\n    options = options || {};\n\n    this.filename = options.filename;\n    this.profile = options.profile || process.env.AWS_PROFILE || AWS.util.defaultProfile;\n    this.disableAssumeRole = Boolean(options.disableAssumeRole);\n    this.preferStaticCredentials = Boolean(options.preferStaticCredentials);\n    this.tokenCodeFn = options.tokenCodeFn || null;\n    this.httpOptions = options.httpOptions || null;\n    this.get(options.callback || AWS.util.fn.noop);\n  },\n\n  /**\n   * @api private\n   */\n  load: function load(callback) {\n    var self = this;\n    try {\n      var profiles = AWS.util.getProfilesFromSharedConfig(iniLoader, this.filename);\n      var profile = profiles[this.profile] || {};\n\n      if (Object.keys(profile).length === 0) {\n        throw AWS.util.error(\n          new Error('Profile ' + this.profile + ' not found'),\n          { code: 'SharedIniFileCredentialsProviderFailure' }\n        );\n      }\n\n      /*\n      In the CLI, the presence of both a role_arn and static credentials have\n      different meanings depending on how many profiles have been visited. For\n      the first profile processed, role_arn takes precedence over any static\n      credentials, but for all subsequent profiles, static credentials are\n      used if present, and only in their absence will the profile's\n      source_profile and role_arn keys be used to load another set of\n      credentials. This var is intended to yield compatible behaviour in this\n      sdk.\n      */\n      var preferStaticCredentialsToRoleArn = Boolean(\n        this.preferStaticCredentials\n        && profile['aws_access_key_id']\n        && profile['aws_secret_access_key']\n      );\n\n      if (profile['role_arn'] && !preferStaticCredentialsToRoleArn) {\n        this.loadRoleProfile(profiles, profile, function(err, data) {\n          if (err) {\n            callback(err);\n          } else {\n            self.expired = false;\n            self.accessKeyId = data.Credentials.AccessKeyId;\n            self.secretAccessKey = data.Credentials.SecretAccessKey;\n            self.sessionToken = data.Credentials.SessionToken;\n            self.expireTime = data.Credentials.Expiration;\n            callback(null);\n          }\n        });\n        return;\n      }\n\n      this.accessKeyId = profile['aws_access_key_id'];\n      this.secretAccessKey = profile['aws_secret_access_key'];\n      this.sessionToken = profile['aws_session_token'];\n\n      if (!this.accessKeyId || !this.secretAccessKey) {\n        throw AWS.util.error(\n          new Error('Credentials not set for profile ' + this.profile),\n          { code: 'SharedIniFileCredentialsProviderFailure' }\n        );\n      }\n      this.expired = false;\n      callback(null);\n    } catch (err) {\n      callback(err);\n    }\n  },\n\n  /**\n   * Loads the credentials from the shared credentials file\n   *\n   * @callback callback function(err)\n   *   Called after the shared INI file on disk is read and parsed. When this\n   *   callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    iniLoader.clearCachedFiles();\n    this.coalesceRefresh(\n      callback || AWS.util.fn.callback,\n      this.disableAssumeRole\n    );\n  },\n\n  /**\n   * @api private\n   */\n  loadRoleProfile: function loadRoleProfile(creds, roleProfile, callback) {\n    if (this.disableAssumeRole) {\n      throw AWS.util.error(\n        new Error('Role assumption profiles are disabled. ' +\n                  'Failed to load profile ' + this.profile +\n                  ' from ' + creds.filename),\n        { code: 'SharedIniFileCredentialsProviderFailure' }\n      );\n    }\n\n    var self = this;\n    var roleArn = roleProfile['role_arn'];\n    var roleSessionName = roleProfile['role_session_name'];\n    var externalId = roleProfile['external_id'];\n    var mfaSerial = roleProfile['mfa_serial'];\n    var sourceProfileName = roleProfile['source_profile'];\n\n    // From experimentation, the following behavior mimics the AWS CLI:\n    //\n    // 1. Use region from the profile if present.\n    // 2. Otherwise fall back to N. Virginia (global endpoint).\n    //\n    // It is necessary to do the fallback explicitly, because if\n    // 'AWS_STS_REGIONAL_ENDPOINTS=regional', the underlying STS client will\n    // otherwise throw an error if region is left 'undefined'.\n    //\n    // Experimentation shows that the AWS CLI (tested at version 1.18.136)\n    // ignores the following potential sources of a region for the purposes of\n    // this AssumeRole call:\n    //\n    // - The [default] profile\n    // - The AWS_REGION environment variable\n    //\n    // Ignoring the [default] profile for the purposes of AssumeRole is arguably\n    // a bug in the CLI since it does use the [default] region for service\n    // calls... but right now we're matching behavior of the other tool.\n    var profileRegion = roleProfile['region'] || ASSUME_ROLE_DEFAULT_REGION;\n\n    if (!sourceProfileName) {\n      throw AWS.util.error(\n        new Error('source_profile is not set using profile ' + this.profile),\n        { code: 'SharedIniFileCredentialsProviderFailure' }\n      );\n    }\n\n    var sourceProfileExistanceTest = creds[sourceProfileName];\n\n    if (typeof sourceProfileExistanceTest !== 'object') {\n      throw AWS.util.error(\n        new Error('source_profile ' + sourceProfileName + ' using profile '\n          + this.profile + ' does not exist'),\n        { code: 'SharedIniFileCredentialsProviderFailure' }\n      );\n    }\n\n    var sourceCredentials = new AWS.SharedIniFileCredentials(\n      AWS.util.merge(this.options || {}, {\n        profile: sourceProfileName,\n        preferStaticCredentials: true\n      })\n    );\n\n    this.roleArn = roleArn;\n    var sts = new STS({\n      credentials: sourceCredentials,\n      region: profileRegion,\n      httpOptions: this.httpOptions\n    });\n\n    var roleParams = {\n      RoleArn: roleArn,\n      RoleSessionName: roleSessionName || 'aws-sdk-js-' + Date.now()\n    };\n\n    if (externalId) {\n      roleParams.ExternalId = externalId;\n    }\n\n    if (mfaSerial && self.tokenCodeFn) {\n      roleParams.SerialNumber = mfaSerial;\n      self.tokenCodeFn(mfaSerial, function(err, token) {\n        if (err) {\n          var message;\n          if (err instanceof Error) {\n            message = err.message;\n          } else {\n            message = err;\n          }\n          callback(\n            AWS.util.error(\n              new Error('Error fetching MFA token: ' + message),\n              { code: 'SharedIniFileCredentialsProviderFailure' }\n            ));\n          return;\n        }\n\n        roleParams.TokenCode = token;\n        sts.assumeRole(roleParams, callback);\n      });\n      return;\n    }\n    sts.assumeRole(roleParams, callback);\n  }\n});\n","var AWS = require('../core');\nvar STS = require('../../clients/sts');\n\n/**\n * Represents temporary credentials retrieved from {AWS.STS}. Without any\n * extra parameters, credentials will be fetched from the\n * {AWS.STS.getSessionToken} operation. If an IAM role is provided, the\n * {AWS.STS.assumeRole} operation will be used to fetch credentials for the\n * role instead.\n *\n * @note AWS.TemporaryCredentials is deprecated, but remains available for\n *   backwards compatibility. {AWS.ChainableTemporaryCredentials} is the\n *   preferred class for temporary credentials.\n *\n * To setup temporary credentials, configure a set of master credentials\n * using the standard credentials providers (environment, EC2 instance metadata,\n * or from the filesystem), then set the global credentials to a new\n * temporary credentials object:\n *\n * ```javascript\n * // Note that environment credentials are loaded by default,\n * // the following line is shown for clarity:\n * AWS.config.credentials = new AWS.EnvironmentCredentials('AWS');\n *\n * // Now set temporary credentials seeded from the master credentials\n * AWS.config.credentials = new AWS.TemporaryCredentials();\n *\n * // subsequent requests will now use temporary credentials from AWS STS.\n * new AWS.S3().listBucket(function(err, data) { ... });\n * ```\n *\n * @!attribute masterCredentials\n *   @return [AWS.Credentials] the master (non-temporary) credentials used to\n *     get and refresh temporary credentials from AWS STS.\n * @note (see constructor)\n */\nAWS.TemporaryCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * Creates a new temporary credentials object.\n   *\n   * @note In order to create temporary credentials, you first need to have\n   *   \"master\" credentials configured in {AWS.Config.credentials}. These\n   *   master credentials are necessary to retrieve the temporary credentials,\n   *   as well as refresh the credentials when they expire.\n   * @param params [map] a map of options that are passed to the\n   *   {AWS.STS.assumeRole} or {AWS.STS.getSessionToken} operations.\n   *   If a `RoleArn` parameter is passed in, credentials will be based on the\n   *   IAM role.\n   * @param masterCredentials [AWS.Credentials] the master (non-temporary) credentials\n   *  used to get and refresh temporary credentials from AWS STS.\n   * @example Creating a new credentials object for generic temporary credentials\n   *   AWS.config.credentials = new AWS.TemporaryCredentials();\n   * @example Creating a new credentials object for an IAM role\n   *   AWS.config.credentials = new AWS.TemporaryCredentials({\n   *     RoleArn: 'arn:aws:iam::1234567890:role/TemporaryCredentials',\n   *   });\n   * @see AWS.STS.assumeRole\n   * @see AWS.STS.getSessionToken\n   */\n  constructor: function TemporaryCredentials(params, masterCredentials) {\n    AWS.Credentials.call(this);\n    this.loadMasterCredentials(masterCredentials);\n    this.expired = true;\n\n    this.params = params || {};\n    if (this.params.RoleArn) {\n      this.params.RoleSessionName =\n        this.params.RoleSessionName || 'temporary-credentials';\n    }\n  },\n\n  /**\n   * Refreshes credentials using {AWS.STS.assumeRole} or\n   * {AWS.STS.getSessionToken}, depending on whether an IAM role ARN was passed\n   * to the credentials {constructor}.\n   *\n   * @callback callback function(err)\n   *   Called when the STS service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh (callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   */\n  load: function load (callback) {\n    var self = this;\n    self.createClients();\n    self.masterCredentials.get(function () {\n      self.service.config.credentials = self.masterCredentials;\n      var operation = self.params.RoleArn ?\n        self.service.assumeRole : self.service.getSessionToken;\n      operation.call(self.service, function (err, data) {\n        if (!err) {\n          self.service.credentialsFrom(data, self);\n        }\n        callback(err);\n      });\n    });\n  },\n\n  /**\n   * @api private\n   */\n  loadMasterCredentials: function loadMasterCredentials (masterCredentials) {\n    this.masterCredentials = masterCredentials || AWS.config.credentials;\n    while (this.masterCredentials.masterCredentials) {\n      this.masterCredentials = this.masterCredentials.masterCredentials;\n    }\n\n    if (typeof this.masterCredentials.get !== 'function') {\n      this.masterCredentials = new AWS.Credentials(this.masterCredentials);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  createClients: function () {\n    this.service = this.service || new STS({params: this.params});\n  }\n\n});\n","var AWS = require('../core');\nvar fs = require('fs');\nvar STS = require('../../clients/sts');\nvar iniLoader = AWS.util.iniLoader;\n\n/**\n * Represents OIDC credentials from a file on disk\n * If the credentials expire, the SDK can {refresh} the credentials\n * from the file.\n *\n * ## Using the web identity token file\n *\n * This provider is checked by default in the Node.js environment. To use\n * the provider simply add your OIDC token to a file (ASCII encoding) and\n * share the filename in either AWS_WEB_IDENTITY_TOKEN_FILE environment\n * variable or web_identity_token_file shared config variable\n *\n * The file contains encoded OIDC token and the characters are\n * ASCII encoded. OIDC tokens are JSON Web Tokens (JWT).\n * JWT's are 3 base64 encoded strings joined by the '.' character.\n *\n * This class will read filename from AWS_WEB_IDENTITY_TOKEN_FILE\n * environment variable or web_identity_token_file shared config variable,\n * and get the OIDC token from filename.\n * It will also read IAM role to be assumed from AWS_ROLE_ARN\n * environment variable or role_arn shared config variable.\n * This provider gets credetials using the {AWS.STS.assumeRoleWithWebIdentity}\n * service operation\n *\n * @!macro nobrowser\n */\nAWS.TokenFileWebIdentityCredentials = AWS.util.inherit(AWS.Credentials, {\n\n  /**\n   * @example Creating a new credentials object\n   *  AWS.config.credentials = new AWS.TokenFileWebIdentityCredentials(\n   *   // optionally provide configuration to apply to the underlying AWS.STS service client\n   *   // if configuration is not provided, then configuration will be pulled from AWS.config\n   *   {\n   *     // specify timeout options\n   *     httpOptions: {\n   *       timeout: 100\n   *     }\n   *   });\n   * @see AWS.Config\n   */\n  constructor: function TokenFileWebIdentityCredentials(clientConfig) {\n    AWS.Credentials.call(this);\n    this.data = null;\n    this.clientConfig = AWS.util.copy(clientConfig || {});\n  },\n\n  /**\n   * Returns params from environment variables\n   *\n   * @api private\n   */\n  getParamsFromEnv: function getParamsFromEnv() {\n    var ENV_TOKEN_FILE = 'AWS_WEB_IDENTITY_TOKEN_FILE',\n        ENV_ROLE_ARN = 'AWS_ROLE_ARN';\n    if (process.env[ENV_TOKEN_FILE] && process.env[ENV_ROLE_ARN]) {\n      return [{\n        envTokenFile: process.env[ENV_TOKEN_FILE],\n        roleArn: process.env[ENV_ROLE_ARN],\n        roleSessionName: process.env['AWS_ROLE_SESSION_NAME']\n      }];\n    }\n  },\n\n  /**\n   * Returns params from shared config variables\n   *\n   * @api private\n   */\n  getParamsFromSharedConfig: function getParamsFromSharedConfig() {\n    var profiles = AWS.util.getProfilesFromSharedConfig(iniLoader);\n    var profileName = process.env.AWS_PROFILE || AWS.util.defaultProfile;\n    var profile = profiles[profileName] || {};\n\n    if (Object.keys(profile).length === 0) {\n      throw AWS.util.error(\n        new Error('Profile ' + profileName + ' not found'),\n        { code: 'TokenFileWebIdentityCredentialsProviderFailure' }\n      );\n    }\n\n    var paramsArray = [];\n\n    while (!profile['web_identity_token_file'] && profile['source_profile']) {\n      paramsArray.unshift({\n        roleArn: profile['role_arn'],\n        roleSessionName: profile['role_session_name']\n      });\n      var sourceProfile = profile['source_profile'];\n      profile = profiles[sourceProfile];\n    }\n\n    paramsArray.unshift({\n      envTokenFile: profile['web_identity_token_file'],\n      roleArn: profile['role_arn'],\n      roleSessionName: profile['role_session_name']\n    });\n\n    return paramsArray;\n  },\n\n  /**\n   * Refreshes credentials using {AWS.STS.assumeRoleWithWebIdentity}\n   *\n   * @callback callback function(err)\n   *   Called when the STS service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see AWS.Credentials.get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n  */\n  assumeRoleChaining: function assumeRoleChaining(paramsArray, callback) {\n    var self = this;\n    if (paramsArray.length === 0) {\n      self.service.credentialsFrom(self.data, self);\n      callback();\n    } else {\n      var params = paramsArray.shift();\n      self.service.config.credentials = self.service.credentialsFrom(self.data, self);\n      self.service.assumeRole(\n        {\n          RoleArn: params.roleArn,\n          RoleSessionName: params.roleSessionName || 'token-file-web-identity'\n        },\n        function (err, data) {\n          self.data = null;\n          if (err) {\n            callback(err);\n          } else {\n            self.data = data;\n            self.assumeRoleChaining(paramsArray, callback);\n          }\n        }\n      );\n    }\n  },\n\n  /**\n   * @api private\n   */\n  load: function load(callback) {\n    var self = this;\n    try {\n      var paramsArray = self.getParamsFromEnv();\n      if (!paramsArray) {\n        paramsArray = self.getParamsFromSharedConfig();\n      }\n      if (paramsArray) {\n        var params = paramsArray.shift();\n        var oidcToken = fs.readFileSync(params.envTokenFile, {encoding: 'ascii'});\n        if (!self.service) {\n          self.createClients();\n        }\n        self.service.assumeRoleWithWebIdentity(\n          {\n            WebIdentityToken: oidcToken,\n            RoleArn: params.roleArn,\n            RoleSessionName: params.roleSessionName || 'token-file-web-identity'\n          },\n          function (err, data) {\n            self.data = null;\n            if (err) {\n              callback(err);\n            } else {\n              self.data = data;\n              self.assumeRoleChaining(paramsArray, callback);\n            }\n          }\n        );\n      }\n    } catch (err) {\n      callback(err);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  createClients: function() {\n    if (!this.service) {\n      var stsConfig = AWS.util.merge({}, this.clientConfig);\n      this.service = new STS(stsConfig);\n\n      // Retry in case of IDPCommunicationErrorException or InvalidIdentityToken\n      this.service.retryableError = function(error) {\n        if (error.code === 'IDPCommunicationErrorException' || error.code === 'InvalidIdentityToken') {\n          return true;\n        } else {\n          return AWS.Service.prototype.retryableError.call(this, error);\n        }\n      };\n    }\n  }\n});\n","var AWS = require('../core');\nvar STS = require('../../clients/sts');\n\n/**\n * Represents credentials retrieved from STS Web Identity Federation support.\n *\n * By default this provider gets credentials using the\n * {AWS.STS.assumeRoleWithWebIdentity} service operation. This operation\n * requires a `RoleArn` containing the ARN of the IAM trust policy for the\n * application for which credentials will be given. In addition, the\n * `WebIdentityToken` must be set to the token provided by the identity\n * provider. See {constructor} for an example on creating a credentials\n * object with proper `RoleArn` and `WebIdentityToken` values.\n *\n * ## Refreshing Credentials from Identity Service\n *\n * In addition to AWS credentials expiring after a given amount of time, the\n * login token from the identity provider will also expire. Once this token\n * expires, it will not be usable to refresh AWS credentials, and another\n * token will be needed. The SDK does not manage refreshing of the token value,\n * but this can be done through a \"refresh token\" supported by most identity\n * providers. Consult the documentation for the identity provider for refreshing\n * tokens. Once the refreshed token is acquired, you should make sure to update\n * this new token in the credentials object's {params} property. The following\n * code will update the WebIdentityToken, assuming you have retrieved an updated\n * token from the identity provider:\n *\n * ```javascript\n * AWS.config.credentials.params.WebIdentityToken = updatedToken;\n * ```\n *\n * Future calls to `credentials.refresh()` will now use the new token.\n *\n * @!attribute params\n *   @return [map] the map of params passed to\n *     {AWS.STS.assumeRoleWithWebIdentity}. To update the token, set the\n *     `params.WebIdentityToken` property.\n * @!attribute data\n *   @return [map] the raw data response from the call to\n *     {AWS.STS.assumeRoleWithWebIdentity}. Use this if you want to get\n *     access to other properties from the response.\n */\nAWS.WebIdentityCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * Creates a new credentials object.\n   * @param (see AWS.STS.assumeRoleWithWebIdentity)\n   * @example Creating a new credentials object\n   *   AWS.config.credentials = new AWS.WebIdentityCredentials({\n   *     RoleArn: 'arn:aws:iam::1234567890:role/WebIdentity',\n   *     WebIdentityToken: 'ABCDEFGHIJKLMNOP', // token from identity service\n   *     RoleSessionName: 'web' // optional name, defaults to web-identity\n   *   }, {\n   *     // optionally provide configuration to apply to the underlying AWS.STS service client\n   *     // if configuration is not provided, then configuration will be pulled from AWS.config\n   *\n   *     // specify timeout options\n   *     httpOptions: {\n   *       timeout: 100\n   *     }\n   *   });\n   * @see AWS.STS.assumeRoleWithWebIdentity\n   * @see AWS.Config\n   */\n  constructor: function WebIdentityCredentials(params, clientConfig) {\n    AWS.Credentials.call(this);\n    this.expired = true;\n    this.params = params;\n    this.params.RoleSessionName = this.params.RoleSessionName || 'web-identity';\n    this.data = null;\n    this._clientConfig = AWS.util.copy(clientConfig || {});\n  },\n\n  /**\n   * Refreshes credentials using {AWS.STS.assumeRoleWithWebIdentity}\n   *\n   * @callback callback function(err)\n   *   Called when the STS service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   */\n  load: function load(callback) {\n    var self = this;\n    self.createClients();\n    self.service.assumeRoleWithWebIdentity(function (err, data) {\n      self.data = null;\n      if (!err) {\n        self.data = data;\n        self.service.credentialsFrom(data, self);\n      }\n      callback(err);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  createClients: function() {\n    if (!this.service) {\n      var stsConfig = AWS.util.merge({}, this._clientConfig);\n      stsConfig.params = this.params;\n      this.service = new STS(stsConfig);\n    }\n  }\n\n});\n","var AWS = require('./core');\nvar util = require('./util');\nvar endpointDiscoveryEnabledEnvs = ['AWS_ENABLE_ENDPOINT_DISCOVERY', 'AWS_ENDPOINT_DISCOVERY_ENABLED'];\n\n/**\n * Generate key (except resources and operation part) to index the endpoints in the cache\n * If input shape has endpointdiscoveryid trait then use\n *   accessKey + operation + resources + region + service as cache key\n * If input shape doesn't have endpointdiscoveryid trait then use\n *   accessKey + region + service as cache key\n * @return [map<String,String>] object with keys to index endpoints.\n * @api private\n */\nfunction getCacheKey(request) {\n  var service = request.service;\n  var api = service.api || {};\n  var operations = api.operations;\n  var identifiers = {};\n  if (service.config.region) {\n    identifiers.region = service.config.region;\n  }\n  if (api.serviceId) {\n    identifiers.serviceId = api.serviceId;\n  }\n  if (service.config.credentials.accessKeyId) {\n    identifiers.accessKeyId = service.config.credentials.accessKeyId;\n  }\n  return identifiers;\n}\n\n/**\n * Recursive helper for marshallCustomIdentifiers().\n * Looks for required string input members that have 'endpointdiscoveryid' trait.\n * @api private\n */\nfunction marshallCustomIdentifiersHelper(result, params, shape) {\n  if (!shape || params === undefined || params === null) return;\n  if (shape.type === 'structure' && shape.required && shape.required.length > 0) {\n    util.arrayEach(shape.required, function(name) {\n      var memberShape = shape.members[name];\n      if (memberShape.endpointDiscoveryId === true) {\n        var locationName = memberShape.isLocationName ? memberShape.name : name;\n        result[locationName] = String(params[name]);\n      } else {\n        marshallCustomIdentifiersHelper(result, params[name], memberShape);\n      }\n    });\n  }\n}\n\n/**\n * Get custom identifiers for cache key.\n * Identifies custom identifiers by checking each shape's `endpointDiscoveryId` trait.\n * @param [object] request object\n * @param [object] input shape of the given operation's api\n * @api private\n */\nfunction marshallCustomIdentifiers(request, shape) {\n  var identifiers = {};\n  marshallCustomIdentifiersHelper(identifiers, request.params, shape);\n  return identifiers;\n}\n\n/**\n * Call endpoint discovery operation when it's optional.\n * When endpoint is available in cache then use the cached endpoints. If endpoints\n * are unavailable then use regional endpoints and call endpoint discovery operation\n * asynchronously. This is turned off by default.\n * @param [object] request object\n * @api private\n */\nfunction optionalDiscoverEndpoint(request) {\n  var service = request.service;\n  var api = service.api;\n  var operationModel = api.operations ? api.operations[request.operation] : undefined;\n  var inputShape = operationModel ? operationModel.input : undefined;\n\n  var identifiers = marshallCustomIdentifiers(request, inputShape);\n  var cacheKey = getCacheKey(request);\n  if (Object.keys(identifiers).length > 0) {\n    cacheKey = util.update(cacheKey, identifiers);\n    if (operationModel) cacheKey.operation = operationModel.name;\n  }\n  var endpoints = AWS.endpointCache.get(cacheKey);\n  if (endpoints && endpoints.length === 1 && endpoints[0].Address === '') {\n    //endpoint operation is being made but response not yet received\n    //or endpoint operation just failed in 1 minute\n    return;\n  } else if (endpoints && endpoints.length > 0) {\n    //found endpoint record from cache\n    request.httpRequest.updateEndpoint(endpoints[0].Address);\n  } else {\n    //endpoint record not in cache or outdated. make discovery operation\n    var endpointRequest = service.makeRequest(api.endpointOperation, {\n      Operation: operationModel.name,\n      Identifiers: identifiers,\n    });\n    addApiVersionHeader(endpointRequest);\n    endpointRequest.removeListener('validate', AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n    endpointRequest.removeListener('retry', AWS.EventListeners.Core.RETRY_CHECK);\n    //put in a placeholder for endpoints already requested, prevent\n    //too much in-flight calls\n    AWS.endpointCache.put(cacheKey, [{\n      Address: '',\n      CachePeriodInMinutes: 1\n    }]);\n    endpointRequest.send(function(err, data) {\n      if (data && data.Endpoints) {\n        AWS.endpointCache.put(cacheKey, data.Endpoints);\n      } else if (err) {\n        AWS.endpointCache.put(cacheKey, [{\n          Address: '',\n          CachePeriodInMinutes: 1 //not to make more endpoint operation in next 1 minute\n        }]);\n      }\n    });\n  }\n}\n\nvar requestQueue = {};\n\n/**\n * Call endpoint discovery operation when it's required.\n * When endpoint is available in cache then use cached ones. If endpoints are\n * unavailable then SDK should call endpoint operation then use returned new\n * endpoint for the api call. SDK will automatically attempt to do endpoint\n * discovery. This is turned off by default\n * @param [object] request object\n * @api private\n */\nfunction requiredDiscoverEndpoint(request, done) {\n  var service = request.service;\n  var api = service.api;\n  var operationModel = api.operations ? api.operations[request.operation] : undefined;\n  var inputShape = operationModel ? operationModel.input : undefined;\n\n  var identifiers = marshallCustomIdentifiers(request, inputShape);\n  var cacheKey = getCacheKey(request);\n  if (Object.keys(identifiers).length > 0) {\n    cacheKey = util.update(cacheKey, identifiers);\n    if (operationModel) cacheKey.operation = operationModel.name;\n  }\n  var cacheKeyStr = AWS.EndpointCache.getKeyString(cacheKey);\n  var endpoints = AWS.endpointCache.get(cacheKeyStr); //endpoint cache also accepts string keys\n  if (endpoints && endpoints.length === 1 && endpoints[0].Address === '') {\n    //endpoint operation is being made but response not yet received\n    //push request object to a pending queue\n    if (!requestQueue[cacheKeyStr]) requestQueue[cacheKeyStr] = [];\n    requestQueue[cacheKeyStr].push({request: request, callback: done});\n    return;\n  } else if (endpoints && endpoints.length > 0) {\n    request.httpRequest.updateEndpoint(endpoints[0].Address);\n    done();\n  } else {\n    var endpointRequest = service.makeRequest(api.endpointOperation, {\n      Operation: operationModel.name,\n      Identifiers: identifiers,\n    });\n    endpointRequest.removeListener('validate', AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n    addApiVersionHeader(endpointRequest);\n\n    //put in a placeholder for endpoints already requested, prevent\n    //too much in-flight calls\n    AWS.endpointCache.put(cacheKeyStr, [{\n      Address: '',\n      CachePeriodInMinutes: 60 //long-live cache\n    }]);\n    endpointRequest.send(function(err, data) {\n      if (err) {\n        request.response.error = util.error(err, { retryable: false });\n        AWS.endpointCache.remove(cacheKey);\n\n        //fail all the pending requests in batch\n        if (requestQueue[cacheKeyStr]) {\n          var pendingRequests = requestQueue[cacheKeyStr];\n          util.arrayEach(pendingRequests, function(requestContext) {\n            requestContext.request.response.error = util.error(err, { retryable: false });\n            requestContext.callback();\n          });\n          delete requestQueue[cacheKeyStr];\n        }\n      } else if (data) {\n        AWS.endpointCache.put(cacheKeyStr, data.Endpoints);\n        request.httpRequest.updateEndpoint(data.Endpoints[0].Address);\n\n        //update the endpoint for all the pending requests in batch\n        if (requestQueue[cacheKeyStr]) {\n          var pendingRequests = requestQueue[cacheKeyStr];\n          util.arrayEach(pendingRequests, function(requestContext) {\n            requestContext.request.httpRequest.updateEndpoint(data.Endpoints[0].Address);\n            requestContext.callback();\n          });\n          delete requestQueue[cacheKeyStr];\n        }\n      }\n      done();\n    });\n  }\n}\n\n/**\n * add api version header to endpoint operation\n * @api private\n */\nfunction addApiVersionHeader(endpointRequest) {\n  var api = endpointRequest.service.api;\n  var apiVersion = api.apiVersion;\n  if (apiVersion && !endpointRequest.httpRequest.headers['x-amz-api-version']) {\n    endpointRequest.httpRequest.headers['x-amz-api-version'] = apiVersion;\n  }\n}\n\n/**\n * If api call gets invalid endpoint exception, SDK should attempt to remove the invalid\n * endpoint from cache.\n * @api private\n */\nfunction invalidateCachedEndpoints(response) {\n  var error = response.error;\n  var httpResponse = response.httpResponse;\n  if (error &&\n    (error.code === 'InvalidEndpointException' || httpResponse.statusCode === 421)\n  ) {\n    var request = response.request;\n    var operations = request.service.api.operations || {};\n    var inputShape = operations[request.operation] ? operations[request.operation].input : undefined;\n    var identifiers = marshallCustomIdentifiers(request, inputShape);\n    var cacheKey = getCacheKey(request);\n    if (Object.keys(identifiers).length > 0) {\n      cacheKey = util.update(cacheKey, identifiers);\n      if (operations[request.operation]) cacheKey.operation = operations[request.operation].name;\n    }\n    AWS.endpointCache.remove(cacheKey);\n  }\n}\n\n/**\n * If endpoint is explicitly configured, SDK should not do endpoint discovery in anytime.\n * @param [object] client Service client object.\n * @api private\n */\nfunction hasCustomEndpoint(client) {\n  //if set endpoint is set for specific client, enable endpoint discovery will raise an error.\n  if (client._originalConfig && client._originalConfig.endpoint && client._originalConfig.endpointDiscoveryEnabled === true) {\n    throw util.error(new Error(), {\n      code: 'ConfigurationException',\n      message: 'Custom endpoint is supplied; endpointDiscoveryEnabled must not be true.'\n    });\n  };\n  var svcConfig = AWS.config[client.serviceIdentifier] || {};\n  return Boolean(AWS.config.endpoint || svcConfig.endpoint || (client._originalConfig && client._originalConfig.endpoint));\n}\n\n/**\n * @api private\n */\nfunction isFalsy(value) {\n  return ['false', '0'].indexOf(value) >= 0;\n}\n\n/**\n * If endpoint discovery should perform for this request when no operation requires endpoint\n * discovery for the given service.\n * SDK performs config resolution in order like below:\n * 1. If set in client configuration.\n * 2. If set in env AWS_ENABLE_ENDPOINT_DISCOVERY.\n * 3. If set in shared ini config file with key 'endpoint_discovery_enabled'.\n * @param [object] request request object.\n * @returns [boolean|undefined] if endpoint discovery config is not set in any source, this\n *  function returns undefined\n * @api private\n */\nfunction resolveEndpointDiscoveryConfig(request) {\n  var service = request.service || {};\n  if (service.config.endpointDiscoveryEnabled !== undefined) {\n    return service.config.endpointDiscoveryEnabled;\n  }\n\n  //shared ini file is only available in Node\n  //not to check env in browser\n  if (util.isBrowser()) return undefined;\n\n  // If any of recognized endpoint discovery config env is set\n  for (var i = 0; i < endpointDiscoveryEnabledEnvs.length; i++) {\n    var env = endpointDiscoveryEnabledEnvs[i];\n    if (Object.prototype.hasOwnProperty.call(process.env, env)) {\n      if (process.env[env] === '' || process.env[env] === undefined) {\n        throw util.error(new Error(), {\n          code: 'ConfigurationException',\n          message: 'environmental variable ' + env + ' cannot be set to nothing'\n        });\n      }\n      return !isFalsy(process.env[env]);\n    }\n  }\n\n  var configFile = {};\n  try {\n    configFile = AWS.util.iniLoader ? AWS.util.iniLoader.loadFrom({\n      isConfig: true,\n      filename: process.env[AWS.util.sharedConfigFileEnv]\n    }) : {};\n  } catch (e) {}\n  var sharedFileConfig = configFile[\n    process.env.AWS_PROFILE || AWS.util.defaultProfile\n  ] || {};\n  if (Object.prototype.hasOwnProperty.call(sharedFileConfig, 'endpoint_discovery_enabled')) {\n    if (sharedFileConfig.endpoint_discovery_enabled === undefined) {\n      throw util.error(new Error(), {\n        code: 'ConfigurationException',\n        message: 'config file entry \\'endpoint_discovery_enabled\\' cannot be set to nothing'\n      });\n    }\n    return !isFalsy(sharedFileConfig.endpoint_discovery_enabled);\n  }\n  return undefined;\n}\n\n/**\n * attach endpoint discovery logic to request object\n * @param [object] request\n * @api private\n */\nfunction discoverEndpoint(request, done) {\n  var service = request.service || {};\n  if (hasCustomEndpoint(service) || request.isPresigned()) return done();\n\n  var operations = service.api.operations || {};\n  var operationModel = operations[request.operation];\n  var isEndpointDiscoveryRequired = operationModel ? operationModel.endpointDiscoveryRequired : 'NULL';\n  var isEnabled = resolveEndpointDiscoveryConfig(request);\n  var hasRequiredEndpointDiscovery = service.api.hasRequiredEndpointDiscovery;\n  if (isEnabled || hasRequiredEndpointDiscovery) {\n    // Once a customer enables endpoint discovery, the SDK should start appending\n    // the string endpoint-discovery to the user-agent on all requests.\n    request.httpRequest.appendToUserAgent('endpoint-discovery');\n  }\n  switch (isEndpointDiscoveryRequired) {\n    case 'OPTIONAL':\n      if (isEnabled || hasRequiredEndpointDiscovery) {\n        // For a given service; if at least one operation requires endpoint discovery then the SDK must enable endpoint discovery\n        // by default for all operations of that service, including operations where endpoint discovery is optional.\n        optionalDiscoverEndpoint(request);\n        request.addNamedListener('INVALIDATE_CACHED_ENDPOINTS', 'extractError', invalidateCachedEndpoints);\n      }\n      done();\n      break;\n    case 'REQUIRED':\n      if (isEnabled === false) {\n        // For a given operation; if endpoint discovery is required and it has been disabled on the SDK client,\n        // then the SDK must return a clear and actionable exception.\n        request.response.error = util.error(new Error(), {\n          code: 'ConfigurationException',\n          message: 'Endpoint Discovery is disabled but ' + service.api.className + '.' + request.operation +\n                    '() requires it. Please check your configurations.'\n        });\n        done();\n        break;\n      }\n      request.addNamedListener('INVALIDATE_CACHED_ENDPOINTS', 'extractError', invalidateCachedEndpoints);\n      requiredDiscoverEndpoint(request, done);\n      break;\n    case 'NULL':\n    default:\n      done();\n      break;\n  }\n}\n\nmodule.exports = {\n  discoverEndpoint: discoverEndpoint,\n  requiredDiscoverEndpoint: requiredDiscoverEndpoint,\n  optionalDiscoverEndpoint: optionalDiscoverEndpoint,\n  marshallCustomIdentifiers: marshallCustomIdentifiers,\n  getCacheKey: getCacheKey,\n  invalidateCachedEndpoint: invalidateCachedEndpoints,\n};\n","var eventMessageChunker = require('../event-stream/event-message-chunker').eventMessageChunker;\nvar parseEvent = require('./parse-event').parseEvent;\n\nfunction createEventStream(body, parser, model) {\n    var eventMessages = eventMessageChunker(body);\n\n    var events = [];\n\n    for (var i = 0; i < eventMessages.length; i++) {\n        events.push(parseEvent(parser, eventMessages[i], model));\n    }\n\n    return events;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    createEventStream: createEventStream\n};\n","var util = require('../core').util;\nvar Transform = require('stream').Transform;\nvar allocBuffer = util.buffer.alloc;\n\n/** @type {Transform} */\nfunction EventMessageChunkerStream(options) {\n    Transform.call(this, options);\n\n    this.currentMessageTotalLength = 0;\n    this.currentMessagePendingLength = 0;\n    /** @type {Buffer} */\n    this.currentMessage = null;\n\n    /** @type {Buffer} */\n    this.messageLengthBuffer = null;\n}\n\nEventMessageChunkerStream.prototype = Object.create(Transform.prototype);\n\n/**\n *\n * @param {Buffer} chunk\n * @param {string} encoding\n * @param {*} callback\n */\nEventMessageChunkerStream.prototype._transform = function(chunk, encoding, callback) {\n    var chunkLength = chunk.length;\n    var currentOffset = 0;\n\n    while (currentOffset < chunkLength) {\n        // create new message if necessary\n        if (!this.currentMessage) {\n            // working on a new message, determine total length\n            var bytesRemaining = chunkLength - currentOffset;\n            // prevent edge case where total length spans 2 chunks\n            if (!this.messageLengthBuffer) {\n                this.messageLengthBuffer = allocBuffer(4);\n            }\n            var numBytesForTotal = Math.min(\n                4 - this.currentMessagePendingLength, // remaining bytes to fill the messageLengthBuffer\n                bytesRemaining // bytes left in chunk\n            );\n\n            chunk.copy(\n                this.messageLengthBuffer,\n                this.currentMessagePendingLength,\n                currentOffset,\n                currentOffset + numBytesForTotal\n            );\n\n            this.currentMessagePendingLength += numBytesForTotal;\n            currentOffset += numBytesForTotal;\n\n            if (this.currentMessagePendingLength < 4) {\n                // not enough information to create the current message\n                break;\n            }\n            this.allocateMessage(this.messageLengthBuffer.readUInt32BE(0));\n            this.messageLengthBuffer = null;\n        }\n\n        // write data into current message\n        var numBytesToWrite = Math.min(\n            this.currentMessageTotalLength - this.currentMessagePendingLength, // number of bytes left to complete message\n            chunkLength - currentOffset // number of bytes left in the original chunk\n        );\n        chunk.copy(\n            this.currentMessage, // target buffer\n            this.currentMessagePendingLength, // target offset\n            currentOffset, // chunk offset\n            currentOffset + numBytesToWrite // chunk end to write\n        );\n        this.currentMessagePendingLength += numBytesToWrite;\n        currentOffset += numBytesToWrite;\n\n        // check if a message is ready to be pushed\n        if (this.currentMessageTotalLength && this.currentMessageTotalLength === this.currentMessagePendingLength) {\n            // push out the message\n            this.push(this.currentMessage);\n            // cleanup\n            this.currentMessage = null;\n            this.currentMessageTotalLength = 0;\n            this.currentMessagePendingLength = 0;\n        }\n    }\n\n    callback();\n};\n\nEventMessageChunkerStream.prototype._flush = function(callback) {\n    if (this.currentMessageTotalLength) {\n        if (this.currentMessageTotalLength === this.currentMessagePendingLength) {\n            callback(null, this.currentMessage);\n        } else {\n            callback(new Error('Truncated event message received.'));\n        }\n    } else {\n        callback();\n    }\n};\n\n/**\n * @param {number} size Size of the message to be allocated.\n * @api private\n */\nEventMessageChunkerStream.prototype.allocateMessage = function(size) {\n    if (typeof size !== 'number') {\n        throw new Error('Attempted to allocate an event message where size was not a number: ' + size);\n    }\n    this.currentMessageTotalLength = size;\n    this.currentMessagePendingLength = 4;\n    this.currentMessage = allocBuffer(size);\n    this.currentMessage.writeUInt32BE(size, 0);\n};\n\n/**\n * @api private\n */\nmodule.exports = {\n    EventMessageChunkerStream: EventMessageChunkerStream\n};\n","/**\n * Takes in a buffer of event messages and splits them into individual messages.\n * @param {Buffer} buffer\n * @api private\n */\nfunction eventMessageChunker(buffer) {\n    /** @type Buffer[] */\n    var messages = [];\n    var offset = 0;\n\n    while (offset < buffer.length) {\n        var totalLength = buffer.readInt32BE(offset);\n\n        // create new buffer for individual message (shares memory with original)\n        var message = buffer.slice(offset, totalLength + offset);\n        // increment offset to it starts at the next message\n        offset += totalLength;\n\n        messages.push(message);\n    }\n\n    return messages;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    eventMessageChunker: eventMessageChunker\n};\n","var Transform = require('stream').Transform;\nvar parseEvent = require('./parse-event').parseEvent;\n\n/** @type {Transform} */\nfunction EventUnmarshallerStream(options) {\n    options = options || {};\n    // set output to object mode\n    options.readableObjectMode = true;\n    Transform.call(this, options);\n    this._readableState.objectMode = true;\n\n    this.parser = options.parser;\n    this.eventStreamModel = options.eventStreamModel;\n}\n\nEventUnmarshallerStream.prototype = Object.create(Transform.prototype);\n\n/**\n *\n * @param {Buffer} chunk\n * @param {string} encoding\n * @param {*} callback\n */\nEventUnmarshallerStream.prototype._transform = function(chunk, encoding, callback) {\n    try {\n        var event = parseEvent(this.parser, chunk, this.eventStreamModel);\n        this.push(event);\n        return callback();\n    } catch (err) {\n        callback(err);\n    }\n};\n\n/**\n * @api private\n */\nmodule.exports = {\n    EventUnmarshallerStream: EventUnmarshallerStream\n};\n","var util = require('../core').util;\nvar toBuffer = util.buffer.toBuffer;\n\n/**\n * A lossless representation of a signed, 64-bit integer. Instances of this\n * class may be used in arithmetic expressions as if they were numeric\n * primitives, but the binary representation will be preserved unchanged as the\n * `bytes` property of the object. The bytes should be encoded as big-endian,\n * two's complement integers.\n * @param {Buffer} bytes\n *\n * @api private\n */\nfunction Int64(bytes) {\n    if (bytes.length !== 8) {\n        throw new Error('Int64 buffers must be exactly 8 bytes');\n    }\n    if (!util.Buffer.isBuffer(bytes)) bytes = toBuffer(bytes);\n\n    this.bytes = bytes;\n}\n\n/**\n * @param {number} number\n * @returns {Int64}\n *\n * @api private\n */\nInt64.fromNumber = function(number) {\n    if (number > 9223372036854775807 || number < -9223372036854775808) {\n        throw new Error(\n            number + ' is too large (or, if negative, too small) to represent as an Int64'\n        );\n    }\n\n    var bytes = new Uint8Array(8);\n    for (\n        var i = 7, remaining = Math.abs(Math.round(number));\n        i > -1 && remaining > 0;\n        i--, remaining /= 256\n    ) {\n        bytes[i] = remaining;\n    }\n\n    if (number < 0) {\n        negate(bytes);\n    }\n\n    return new Int64(bytes);\n};\n\n/**\n * @returns {number}\n *\n * @api private\n */\nInt64.prototype.valueOf = function() {\n    var bytes = this.bytes.slice(0);\n    var negative = bytes[0] & 128;\n    if (negative) {\n        negate(bytes);\n    }\n\n    return parseInt(bytes.toString('hex'), 16) * (negative ? -1 : 1);\n};\n\nInt64.prototype.toString = function() {\n    return String(this.valueOf());\n};\n\n/**\n * @param {Buffer} bytes\n *\n * @api private\n */\nfunction negate(bytes) {\n    for (var i = 0; i < 8; i++) {\n        bytes[i] ^= 0xFF;\n    }\n    for (var i = 7; i > -1; i--) {\n        bytes[i]++;\n        if (bytes[i] !== 0) {\n            break;\n        }\n    }\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    Int64: Int64\n};\n","var parseMessage = require('./parse-message').parseMessage;\n\n/**\n *\n * @param {*} parser\n * @param {Buffer} message\n * @param {*} shape\n * @api private\n */\nfunction parseEvent(parser, message, shape) {\n    var parsedMessage = parseMessage(message);\n\n    // check if message is an event or error\n    var messageType = parsedMessage.headers[':message-type'];\n    if (messageType) {\n        if (messageType.value === 'error') {\n            throw parseError(parsedMessage);\n        } else if (messageType.value !== 'event') {\n            // not sure how to parse non-events/non-errors, ignore for now\n            return;\n        }\n    }\n\n    // determine event type\n    var eventType = parsedMessage.headers[':event-type'];\n    // check that the event type is modeled\n    var eventModel = shape.members[eventType.value];\n    if (!eventModel) {\n        return;\n    }\n\n    var result = {};\n    // check if an event payload exists\n    var eventPayloadMemberName = eventModel.eventPayloadMemberName;\n    if (eventPayloadMemberName) {\n        var payloadShape = eventModel.members[eventPayloadMemberName];\n        // if the shape is binary, return the byte array\n        if (payloadShape.type === 'binary') {\n            result[eventPayloadMemberName] = parsedMessage.body;\n        } else {\n            result[eventPayloadMemberName] = parser.parse(parsedMessage.body.toString(), payloadShape);\n        }\n    }\n\n    // read event headers\n    var eventHeaderNames = eventModel.eventHeaderMemberNames;\n    for (var i = 0; i < eventHeaderNames.length; i++) {\n        var name = eventHeaderNames[i];\n        if (parsedMessage.headers[name]) {\n            // parse the header!\n            result[name] = eventModel.members[name].toType(parsedMessage.headers[name].value);\n        }\n    }\n\n    var output = {};\n    output[eventType.value] = result;\n    return output;\n}\n\nfunction parseError(message) {\n    var errorCode = message.headers[':error-code'];\n    var errorMessage = message.headers[':error-message'];\n    var error = new Error(errorMessage.value || errorMessage);\n    error.code = error.name = errorCode.value || errorCode;\n    return error;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    parseEvent: parseEvent\n};\n","var Int64 = require('./int64').Int64;\n\nvar splitMessage = require('./split-message').splitMessage;\n\nvar BOOLEAN_TAG = 'boolean';\nvar BYTE_TAG = 'byte';\nvar SHORT_TAG = 'short';\nvar INT_TAG = 'integer';\nvar LONG_TAG = 'long';\nvar BINARY_TAG = 'binary';\nvar STRING_TAG = 'string';\nvar TIMESTAMP_TAG = 'timestamp';\nvar UUID_TAG = 'uuid';\n\n/**\n * @api private\n *\n * @param {Buffer} headers\n */\nfunction parseHeaders(headers) {\n    var out = {};\n    var position = 0;\n    while (position < headers.length) {\n        var nameLength = headers.readUInt8(position++);\n        var name = headers.slice(position, position + nameLength).toString();\n        position += nameLength;\n        switch (headers.readUInt8(position++)) {\n            case 0 /* boolTrue */:\n                out[name] = {\n                    type: BOOLEAN_TAG,\n                    value: true\n                };\n                break;\n            case 1 /* boolFalse */:\n                out[name] = {\n                    type: BOOLEAN_TAG,\n                    value: false\n                };\n                break;\n            case 2 /* byte */:\n                out[name] = {\n                    type: BYTE_TAG,\n                    value: headers.readInt8(position++)\n                };\n                break;\n            case 3 /* short */:\n                out[name] = {\n                    type: SHORT_TAG,\n                    value: headers.readInt16BE(position)\n                };\n                position += 2;\n                break;\n            case 4 /* integer */:\n                out[name] = {\n                    type: INT_TAG,\n                    value: headers.readInt32BE(position)\n                };\n                position += 4;\n                break;\n            case 5 /* long */:\n                out[name] = {\n                    type: LONG_TAG,\n                    value: new Int64(headers.slice(position, position + 8))\n                };\n                position += 8;\n                break;\n            case 6 /* byteArray */:\n                var binaryLength = headers.readUInt16BE(position);\n                position += 2;\n                out[name] = {\n                    type: BINARY_TAG,\n                    value: headers.slice(position, position + binaryLength)\n                };\n                position += binaryLength;\n                break;\n            case 7 /* string */:\n                var stringLength = headers.readUInt16BE(position);\n                position += 2;\n                out[name] = {\n                    type: STRING_TAG,\n                    value: headers.slice(\n                        position,\n                        position + stringLength\n                    ).toString()\n                };\n                position += stringLength;\n                break;\n            case 8 /* timestamp */:\n                out[name] = {\n                    type: TIMESTAMP_TAG,\n                    value: new Date(\n                        new Int64(headers.slice(position, position + 8))\n                            .valueOf()\n                    )\n                };\n                position += 8;\n                break;\n            case 9 /* uuid */:\n                var uuidChars = headers.slice(position, position + 16)\n                    .toString('hex');\n                position += 16;\n                out[name] = {\n                    type: UUID_TAG,\n                    value: uuidChars.substr(0, 8) + '-' +\n                        uuidChars.substr(8, 4) + '-' +\n                        uuidChars.substr(12, 4) + '-' +\n                        uuidChars.substr(16, 4) + '-' +\n                        uuidChars.substr(20)\n                };\n                break;\n            default:\n                throw new Error('Unrecognized header type tag');\n        }\n    }\n    return out;\n}\n\nfunction parseMessage(message) {\n    var parsed = splitMessage(message);\n    return { headers: parseHeaders(parsed.headers), body: parsed.body };\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    parseMessage: parseMessage\n};\n","var util = require('../core').util;\nvar toBuffer = util.buffer.toBuffer;\n\n// All prelude components are unsigned, 32-bit integers\nvar PRELUDE_MEMBER_LENGTH = 4;\n// The prelude consists of two components\nvar PRELUDE_LENGTH = PRELUDE_MEMBER_LENGTH * 2;\n// Checksums are always CRC32 hashes.\nvar CHECKSUM_LENGTH = 4;\n// Messages must include a full prelude, a prelude checksum, and a message checksum\nvar MINIMUM_MESSAGE_LENGTH = PRELUDE_LENGTH + CHECKSUM_LENGTH * 2;\n\n/**\n * @api private\n *\n * @param {Buffer} message\n */\nfunction splitMessage(message) {\n    if (!util.Buffer.isBuffer(message)) message = toBuffer(message);\n\n    if (message.length < MINIMUM_MESSAGE_LENGTH) {\n        throw new Error('Provided message too short to accommodate event stream message overhead');\n    }\n\n    if (message.length !== message.readUInt32BE(0)) {\n        throw new Error('Reported message length does not match received message length');\n    }\n\n    var expectedPreludeChecksum = message.readUInt32BE(PRELUDE_LENGTH);\n\n    if (\n        expectedPreludeChecksum !== util.crypto.crc32(\n            message.slice(0, PRELUDE_LENGTH)\n        )\n    ) {\n        throw new Error(\n            'The prelude checksum specified in the message (' +\n            expectedPreludeChecksum +\n            ') does not match the calculated CRC32 checksum.'\n        );\n    }\n\n    var expectedMessageChecksum = message.readUInt32BE(message.length - CHECKSUM_LENGTH);\n\n    if (\n        expectedMessageChecksum !== util.crypto.crc32(\n            message.slice(0, message.length - CHECKSUM_LENGTH)\n        )\n    ) {\n        throw new Error(\n            'The message checksum did not match the expected value of ' +\n                expectedMessageChecksum\n        );\n    }\n\n    var headersStart = PRELUDE_LENGTH + CHECKSUM_LENGTH;\n    var headersEnd = headersStart + message.readUInt32BE(PRELUDE_MEMBER_LENGTH);\n\n    return {\n        headers: message.slice(headersStart, headersEnd),\n        body: message.slice(headersEnd, message.length - CHECKSUM_LENGTH),\n    };\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    splitMessage: splitMessage\n};\n","/**\n * What is necessary to create an event stream in node?\n *  - http response stream\n *  - parser\n *  - event stream model\n */\n\nvar EventMessageChunkerStream = require('../event-stream/event-message-chunker-stream').EventMessageChunkerStream;\nvar EventUnmarshallerStream = require('../event-stream/event-message-unmarshaller-stream').EventUnmarshallerStream;\n\nfunction createEventStream(stream, parser, model) {\n    var eventStream = new EventUnmarshallerStream({\n        parser: parser,\n        eventStreamModel: model\n    });\n\n    var eventMessageChunker = new EventMessageChunkerStream();\n\n    stream.pipe(\n        eventMessageChunker\n    ).pipe(eventStream);\n\n    stream.on('error', function(err) {\n        eventMessageChunker.emit('error', err);\n    });\n\n    eventMessageChunker.on('error', function(err) {\n        eventStream.emit('error', err);\n    });\n\n    return eventStream;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    createEventStream: createEventStream\n};\n","var AWS = require('./core');\nvar SequentialExecutor = require('./sequential_executor');\nvar DISCOVER_ENDPOINT = require('./discover_endpoint').discoverEndpoint;\n/**\n * The namespace used to register global event listeners for request building\n * and sending.\n */\nAWS.EventListeners = {\n  /**\n   * @!attribute VALIDATE_CREDENTIALS\n   *   A request listener that validates whether the request is being\n   *   sent with credentials.\n   *   Handles the {AWS.Request~validate 'validate' Request event}\n   *   @example Sending a request without validating credentials\n   *     var listener = AWS.EventListeners.Core.VALIDATE_CREDENTIALS;\n   *     request.removeListener('validate', listener);\n   *   @readonly\n   *   @return [Function]\n   * @!attribute VALIDATE_REGION\n   *   A request listener that validates whether the region is set\n   *   for a request.\n   *   Handles the {AWS.Request~validate 'validate' Request event}\n   *   @example Sending a request without validating region configuration\n   *     var listener = AWS.EventListeners.Core.VALIDATE_REGION;\n   *     request.removeListener('validate', listener);\n   *   @readonly\n   *   @return [Function]\n   * @!attribute VALIDATE_PARAMETERS\n   *   A request listener that validates input parameters in a request.\n   *   Handles the {AWS.Request~validate 'validate' Request event}\n   *   @example Sending a request without validating parameters\n   *     var listener = AWS.EventListeners.Core.VALIDATE_PARAMETERS;\n   *     request.removeListener('validate', listener);\n   *   @example Disable parameter validation globally\n   *     AWS.EventListeners.Core.removeListener('validate',\n   *       AWS.EventListeners.Core.VALIDATE_REGION);\n   *   @readonly\n   *   @return [Function]\n   * @!attribute SEND\n   *   A request listener that initiates the HTTP connection for a\n   *   request being sent. Handles the {AWS.Request~send 'send' Request event}\n   *   @example Replacing the HTTP handler\n   *     var listener = AWS.EventListeners.Core.SEND;\n   *     request.removeListener('send', listener);\n   *     request.on('send', function(response) {\n   *       customHandler.send(response);\n   *     });\n   *   @return [Function]\n   *   @readonly\n   * @!attribute HTTP_DATA\n   *   A request listener that reads data from the HTTP connection in order\n   *   to build the response data.\n   *   Handles the {AWS.Request~httpData 'httpData' Request event}.\n   *   Remove this handler if you are overriding the 'httpData' event and\n   *   do not want extra data processing and buffering overhead.\n   *   @example Disabling default data processing\n   *     var listener = AWS.EventListeners.Core.HTTP_DATA;\n   *     request.removeListener('httpData', listener);\n   *   @return [Function]\n   *   @readonly\n   */\n  Core: {} /* doc hack */\n};\n\n/**\n * @api private\n */\nfunction getOperationAuthtype(req) {\n  if (!req.service.api.operations) {\n    return '';\n  }\n  var operation = req.service.api.operations[req.operation];\n  return operation ? operation.authtype : '';\n}\n\nAWS.EventListeners = {\n  Core: new SequentialExecutor().addNamedListeners(function(add, addAsync) {\n    addAsync('VALIDATE_CREDENTIALS', 'validate',\n        function VALIDATE_CREDENTIALS(req, done) {\n      if (!req.service.api.signatureVersion && !req.service.config.signatureVersion) return done(); // none\n      req.service.config.getCredentials(function(err) {\n        if (err) {\n          req.response.error = AWS.util.error(err,\n            {code: 'CredentialsError', message: 'Missing credentials in config, if using AWS_CONFIG_FILE, set AWS_SDK_LOAD_CONFIG=1'});\n        }\n        done();\n      });\n    });\n\n    add('VALIDATE_REGION', 'validate', function VALIDATE_REGION(req) {\n      if (!req.service.isGlobalEndpoint) {\n        var dnsHostRegex = new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/);\n        if (!req.service.config.region) {\n          req.response.error = AWS.util.error(new Error(),\n            {code: 'ConfigError', message: 'Missing region in config'});\n        } else if (!dnsHostRegex.test(req.service.config.region)) {\n          req.response.error = AWS.util.error(new Error(),\n            {code: 'ConfigError', message: 'Invalid region in config'});\n        }\n      }\n    });\n\n    add('BUILD_IDEMPOTENCY_TOKENS', 'validate', function BUILD_IDEMPOTENCY_TOKENS(req) {\n      if (!req.service.api.operations) {\n        return;\n      }\n      var operation = req.service.api.operations[req.operation];\n      if (!operation) {\n        return;\n      }\n      var idempotentMembers = operation.idempotentMembers;\n      if (!idempotentMembers.length) {\n        return;\n      }\n      // creates a copy of params so user's param object isn't mutated\n      var params = AWS.util.copy(req.params);\n      for (var i = 0, iLen = idempotentMembers.length; i < iLen; i++) {\n        if (!params[idempotentMembers[i]]) {\n          // add the member\n          params[idempotentMembers[i]] = AWS.util.uuid.v4();\n        }\n      }\n      req.params = params;\n    });\n\n    add('VALIDATE_PARAMETERS', 'validate', function VALIDATE_PARAMETERS(req) {\n      if (!req.service.api.operations) {\n        return;\n      }\n      var rules = req.service.api.operations[req.operation].input;\n      var validation = req.service.config.paramValidation;\n      new AWS.ParamValidator(validation).validate(rules, req.params);\n    });\n\n    addAsync('COMPUTE_SHA256', 'afterBuild', function COMPUTE_SHA256(req, done) {\n      req.haltHandlersOnError();\n      if (!req.service.api.operations) {\n        return;\n      }\n      var operation = req.service.api.operations[req.operation];\n      var authtype = operation ? operation.authtype : '';\n      if (!req.service.api.signatureVersion && !authtype && !req.service.config.signatureVersion) return done(); // none\n      if (req.service.getSignerClass(req) === AWS.Signers.V4) {\n        var body = req.httpRequest.body || '';\n        if (authtype.indexOf('unsigned-body') >= 0) {\n          req.httpRequest.headers['X-Amz-Content-Sha256'] = 'UNSIGNED-PAYLOAD';\n          return done();\n        }\n        AWS.util.computeSha256(body, function(err, sha) {\n          if (err) {\n            done(err);\n          }\n          else {\n            req.httpRequest.headers['X-Amz-Content-Sha256'] = sha;\n            done();\n          }\n        });\n      } else {\n        done();\n      }\n    });\n\n    add('SET_CONTENT_LENGTH', 'afterBuild', function SET_CONTENT_LENGTH(req) {\n      var authtype = getOperationAuthtype(req);\n      var payloadMember = AWS.util.getRequestPayloadShape(req);\n      if (req.httpRequest.headers['Content-Length'] === undefined) {\n        try {\n          var length = AWS.util.string.byteLength(req.httpRequest.body);\n          req.httpRequest.headers['Content-Length'] = length;\n        } catch (err) {\n          if (payloadMember && payloadMember.isStreaming) {\n            if (payloadMember.requiresLength) {\n              //streaming payload requires length(s3, glacier)\n              throw err;\n            } else if (authtype.indexOf('unsigned-body') >= 0) {\n              //unbounded streaming payload(lex, mediastore)\n              req.httpRequest.headers['Transfer-Encoding'] = 'chunked';\n              return;\n            } else {\n              throw err;\n            }\n          }\n          throw err;\n        }\n      }\n    });\n\n    add('SET_HTTP_HOST', 'afterBuild', function SET_HTTP_HOST(req) {\n      req.httpRequest.headers['Host'] = req.httpRequest.endpoint.host;\n    });\n\n    add('RESTART', 'restart', function RESTART() {\n      var err = this.response.error;\n      if (!err || !err.retryable) return;\n\n      this.httpRequest = new AWS.HttpRequest(\n        this.service.endpoint,\n        this.service.region\n      );\n\n      if (this.response.retryCount < this.service.config.maxRetries) {\n        this.response.retryCount++;\n      } else {\n        this.response.error = null;\n      }\n    });\n\n    var addToHead = true;\n    addAsync('DISCOVER_ENDPOINT', 'sign', DISCOVER_ENDPOINT, addToHead);\n\n    addAsync('SIGN', 'sign', function SIGN(req, done) {\n      var service = req.service;\n      var operations = req.service.api.operations || {};\n      var operation = operations[req.operation];\n      var authtype = operation ? operation.authtype : '';\n      if (!service.api.signatureVersion && !authtype && !service.config.signatureVersion) return done(); // none\n\n      service.config.getCredentials(function (err, credentials) {\n        if (err) {\n          req.response.error = err;\n          return done();\n        }\n\n        try {\n          var date = service.getSkewCorrectedDate();\n          var SignerClass = service.getSignerClass(req);\n          var signer = new SignerClass(req.httpRequest,\n            service.getSigningName(),\n            {\n              signatureCache: service.config.signatureCache,\n              operation: operation,\n              signatureVersion: service.api.signatureVersion\n            });\n          signer.setServiceClientId(service._clientId);\n\n          // clear old authorization headers\n          delete req.httpRequest.headers['Authorization'];\n          delete req.httpRequest.headers['Date'];\n          delete req.httpRequest.headers['X-Amz-Date'];\n\n          // add new authorization\n          signer.addAuthorization(credentials, date);\n          req.signedAt = date;\n        } catch (e) {\n          req.response.error = e;\n        }\n        done();\n      });\n    });\n\n    add('VALIDATE_RESPONSE', 'validateResponse', function VALIDATE_RESPONSE(resp) {\n      if (this.service.successfulResponse(resp, this)) {\n        resp.data = {};\n        resp.error = null;\n      } else {\n        resp.data = null;\n        resp.error = AWS.util.error(new Error(),\n          {code: 'UnknownError', message: 'An unknown error occurred.'});\n      }\n    });\n\n    addAsync('SEND', 'send', function SEND(resp, done) {\n      resp.httpResponse._abortCallback = done;\n      resp.error = null;\n      resp.data = null;\n\n      function callback(httpResp) {\n        resp.httpResponse.stream = httpResp;\n        var stream = resp.request.httpRequest.stream;\n        var service = resp.request.service;\n        var api = service.api;\n        var operationName = resp.request.operation;\n        var operation = api.operations[operationName] || {};\n\n        httpResp.on('headers', function onHeaders(statusCode, headers, statusMessage) {\n          resp.request.emit(\n            'httpHeaders',\n            [statusCode, headers, resp, statusMessage]\n          );\n\n          if (!resp.httpResponse.streaming) {\n            if (AWS.HttpClient.streamsApiVersion === 2) { // streams2 API check\n              // if we detect event streams, we're going to have to\n              // return the stream immediately\n              if (operation.hasEventOutput && service.successfulResponse(resp)) {\n                // skip reading the IncomingStream\n                resp.request.emit('httpDone');\n                done();\n                return;\n              }\n\n              httpResp.on('readable', function onReadable() {\n                var data = httpResp.read();\n                if (data !== null) {\n                  resp.request.emit('httpData', [data, resp]);\n                }\n              });\n            } else { // legacy streams API\n              httpResp.on('data', function onData(data) {\n                resp.request.emit('httpData', [data, resp]);\n              });\n            }\n          }\n        });\n\n        httpResp.on('end', function onEnd() {\n          if (!stream || !stream.didCallback) {\n            if (AWS.HttpClient.streamsApiVersion === 2 && (operation.hasEventOutput && service.successfulResponse(resp))) {\n              // don't concatenate response chunks when streaming event stream data when response is successful\n              return;\n            }\n            resp.request.emit('httpDone');\n            done();\n          }\n        });\n      }\n\n      function progress(httpResp) {\n        httpResp.on('sendProgress', function onSendProgress(value) {\n          resp.request.emit('httpUploadProgress', [value, resp]);\n        });\n\n        httpResp.on('receiveProgress', function onReceiveProgress(value) {\n          resp.request.emit('httpDownloadProgress', [value, resp]);\n        });\n      }\n\n      function error(err) {\n        if (err.code !== 'RequestAbortedError') {\n          var errCode = err.code === 'TimeoutError' ? err.code : 'NetworkingError';\n          err = AWS.util.error(err, {\n            code: errCode,\n            region: resp.request.httpRequest.region,\n            hostname: resp.request.httpRequest.endpoint.hostname,\n            retryable: true\n          });\n        }\n        resp.error = err;\n        resp.request.emit('httpError', [resp.error, resp], function() {\n          done();\n        });\n      }\n\n      function executeSend() {\n        var http = AWS.HttpClient.getInstance();\n        var httpOptions = resp.request.service.config.httpOptions || {};\n        try {\n          var stream = http.handleRequest(resp.request.httpRequest, httpOptions,\n                                          callback, error);\n          progress(stream);\n        } catch (err) {\n          error(err);\n        }\n      }\n      var timeDiff = (resp.request.service.getSkewCorrectedDate() - this.signedAt) / 1000;\n      if (timeDiff >= 60 * 10) { // if we signed 10min ago, re-sign\n        this.emit('sign', [this], function(err) {\n          if (err) done(err);\n          else executeSend();\n        });\n      } else {\n        executeSend();\n      }\n    });\n\n    add('HTTP_HEADERS', 'httpHeaders',\n        function HTTP_HEADERS(statusCode, headers, resp, statusMessage) {\n      resp.httpResponse.statusCode = statusCode;\n      resp.httpResponse.statusMessage = statusMessage;\n      resp.httpResponse.headers = headers;\n      resp.httpResponse.body = AWS.util.buffer.toBuffer('');\n      resp.httpResponse.buffers = [];\n      resp.httpResponse.numBytes = 0;\n      var dateHeader = headers.date || headers.Date;\n      var service = resp.request.service;\n      if (dateHeader) {\n        var serverTime = Date.parse(dateHeader);\n        if (service.config.correctClockSkew\n            && service.isClockSkewed(serverTime)) {\n          service.applyClockOffset(serverTime);\n        }\n      }\n    });\n\n    add('HTTP_DATA', 'httpData', function HTTP_DATA(chunk, resp) {\n      if (chunk) {\n        if (AWS.util.isNode()) {\n          resp.httpResponse.numBytes += chunk.length;\n\n          var total = resp.httpResponse.headers['content-length'];\n          var progress = { loaded: resp.httpResponse.numBytes, total: total };\n          resp.request.emit('httpDownloadProgress', [progress, resp]);\n        }\n\n        resp.httpResponse.buffers.push(AWS.util.buffer.toBuffer(chunk));\n      }\n    });\n\n    add('HTTP_DONE', 'httpDone', function HTTP_DONE(resp) {\n      // convert buffers array into single buffer\n      if (resp.httpResponse.buffers && resp.httpResponse.buffers.length > 0) {\n        var body = AWS.util.buffer.concat(resp.httpResponse.buffers);\n        resp.httpResponse.body = body;\n      }\n      delete resp.httpResponse.numBytes;\n      delete resp.httpResponse.buffers;\n    });\n\n    add('FINALIZE_ERROR', 'retry', function FINALIZE_ERROR(resp) {\n      if (resp.httpResponse.statusCode) {\n        resp.error.statusCode = resp.httpResponse.statusCode;\n        if (resp.error.retryable === undefined) {\n          resp.error.retryable = this.service.retryableError(resp.error, this);\n        }\n      }\n    });\n\n    add('INVALIDATE_CREDENTIALS', 'retry', function INVALIDATE_CREDENTIALS(resp) {\n      if (!resp.error) return;\n      switch (resp.error.code) {\n        case 'RequestExpired': // EC2 only\n        case 'ExpiredTokenException':\n        case 'ExpiredToken':\n          resp.error.retryable = true;\n          resp.request.service.config.credentials.expired = true;\n      }\n    });\n\n    add('EXPIRED_SIGNATURE', 'retry', function EXPIRED_SIGNATURE(resp) {\n      var err = resp.error;\n      if (!err) return;\n      if (typeof err.code === 'string' && typeof err.message === 'string') {\n        if (err.code.match(/Signature/) && err.message.match(/expired/)) {\n          resp.error.retryable = true;\n        }\n      }\n    });\n\n    add('CLOCK_SKEWED', 'retry', function CLOCK_SKEWED(resp) {\n      if (!resp.error) return;\n      if (this.service.clockSkewError(resp.error)\n          && this.service.config.correctClockSkew) {\n        resp.error.retryable = true;\n      }\n    });\n\n    add('REDIRECT', 'retry', function REDIRECT(resp) {\n      if (resp.error && resp.error.statusCode >= 300 &&\n          resp.error.statusCode < 400 && resp.httpResponse.headers['location']) {\n        this.httpRequest.endpoint =\n          new AWS.Endpoint(resp.httpResponse.headers['location']);\n        this.httpRequest.headers['Host'] = this.httpRequest.endpoint.host;\n        resp.error.redirect = true;\n        resp.error.retryable = true;\n      }\n    });\n\n    add('RETRY_CHECK', 'retry', function RETRY_CHECK(resp) {\n      if (resp.error) {\n        if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n          resp.error.retryDelay = 0;\n        } else if (resp.retryCount < resp.maxRetries) {\n          resp.error.retryDelay = this.service.retryDelays(resp.retryCount, resp.error) || 0;\n        }\n      }\n    });\n\n    addAsync('RESET_RETRY_STATE', 'afterRetry', function RESET_RETRY_STATE(resp, done) {\n      var delay, willRetry = false;\n\n      if (resp.error) {\n        delay = resp.error.retryDelay || 0;\n        if (resp.error.retryable && resp.retryCount < resp.maxRetries) {\n          resp.retryCount++;\n          willRetry = true;\n        } else if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n          resp.redirectCount++;\n          willRetry = true;\n        }\n      }\n\n      // delay < 0 is a signal from customBackoff to skip retries\n      if (willRetry && delay >= 0) {\n        resp.error = null;\n        setTimeout(done, delay);\n      } else {\n        done();\n      }\n    });\n  }),\n\n  CorePost: new SequentialExecutor().addNamedListeners(function(add) {\n    add('EXTRACT_REQUEST_ID', 'extractData', AWS.util.extractRequestId);\n    add('EXTRACT_REQUEST_ID', 'extractError', AWS.util.extractRequestId);\n\n    add('ENOTFOUND_ERROR', 'httpError', function ENOTFOUND_ERROR(err) {\n      function isDNSError(err) {\n        return err.errno === 'ENOTFOUND' ||\n          typeof err.errno === 'number' &&\n          typeof AWS.util.getSystemErrorName === 'function' &&\n          ['EAI_NONAME', 'EAI_NODATA'].indexOf(AWS.util.getSystemErrorName(err.errno) >= 0);\n      }\n      if (err.code === 'NetworkingError' && isDNSError(err)) {\n        var message = 'Inaccessible host: `' + err.hostname +\n          '\\'. This service may not be available in the `' + err.region +\n          '\\' region.';\n        this.response.error = AWS.util.error(new Error(message), {\n          code: 'UnknownEndpoint',\n          region: err.region,\n          hostname: err.hostname,\n          retryable: true,\n          originalError: err\n        });\n      }\n    });\n  }),\n\n  Logger: new SequentialExecutor().addNamedListeners(function(add) {\n    add('LOG_REQUEST', 'complete', function LOG_REQUEST(resp) {\n      var req = resp.request;\n      var logger = req.service.config.logger;\n      if (!logger) return;\n      function filterSensitiveLog(inputShape, shape) {\n        if (!shape) {\n          return shape;\n        }\n        if (inputShape.isSensitive) {\n          return '***SensitiveInformation***';\n        }\n        switch (inputShape.type) {\n          case 'structure':\n            var struct = {};\n            AWS.util.each(shape, function(subShapeName, subShape) {\n              if (Object.prototype.hasOwnProperty.call(inputShape.members, subShapeName)) {\n                struct[subShapeName] = filterSensitiveLog(inputShape.members[subShapeName], subShape);\n              } else {\n                struct[subShapeName] = subShape;\n              }\n            });\n            return struct;\n          case 'list':\n            var list = [];\n            AWS.util.arrayEach(shape, function(subShape, index) {\n              list.push(filterSensitiveLog(inputShape.member, subShape));\n            });\n            return list;\n          case 'map':\n            var map = {};\n            AWS.util.each(shape, function(key, value) {\n              map[key] = filterSensitiveLog(inputShape.value, value);\n            });\n            return map;\n          default:\n            return shape;\n        }\n      }\n\n      function buildMessage() {\n        var time = resp.request.service.getSkewCorrectedDate().getTime();\n        var delta = (time - req.startTime.getTime()) / 1000;\n        var ansi = logger.isTTY ? true : false;\n        var status = resp.httpResponse.statusCode;\n        var censoredParams = req.params;\n        if (\n          req.service.api.operations &&\n              req.service.api.operations[req.operation] &&\n              req.service.api.operations[req.operation].input\n        ) {\n          var inputShape = req.service.api.operations[req.operation].input;\n          censoredParams = filterSensitiveLog(inputShape, req.params);\n        }\n        var params = require('util').inspect(censoredParams, true, null);\n        var message = '';\n        if (ansi) message += '\\x1B[33m';\n        message += '[AWS ' + req.service.serviceIdentifier + ' ' + status;\n        message += ' ' + delta.toString() + 's ' + resp.retryCount + ' retries]';\n        if (ansi) message += '\\x1B[0;1m';\n        message += ' ' + AWS.util.string.lowerFirst(req.operation);\n        message += '(' + params + ')';\n        if (ansi) message += '\\x1B[0m';\n        return message;\n      }\n\n      var line = buildMessage();\n      if (typeof logger.log === 'function') {\n        logger.log(line);\n      } else if (typeof logger.write === 'function') {\n        logger.write(line + '\\n');\n      }\n    });\n  }),\n\n  Json: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/json');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n\n  Rest: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/rest');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n\n  RestJson: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/rest_json');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n\n  RestXml: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/rest_xml');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n\n  Query: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/query');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  })\n};\n","var AWS = require('./core');\nvar inherit = AWS.util.inherit;\n\n/**\n * The endpoint that a service will talk to, for example,\n * `'https://ec2.ap-southeast-1.amazonaws.com'`. If\n * you need to override an endpoint for a service, you can\n * set the endpoint on a service by passing the endpoint\n * object with the `endpoint` option key:\n *\n * ```javascript\n * var ep = new AWS.Endpoint('awsproxy.example.com');\n * var s3 = new AWS.S3({endpoint: ep});\n * s3.service.endpoint.hostname == 'awsproxy.example.com'\n * ```\n *\n * Note that if you do not specify a protocol, the protocol will\n * be selected based on your current {AWS.config} configuration.\n *\n * @!attribute protocol\n *   @return [String] the protocol (http or https) of the endpoint\n *     URL\n * @!attribute hostname\n *   @return [String] the host portion of the endpoint, e.g.,\n *     example.com\n * @!attribute host\n *   @return [String] the host portion of the endpoint including\n *     the port, e.g., example.com:80\n * @!attribute port\n *   @return [Integer] the port of the endpoint\n * @!attribute href\n *   @return [String] the full URL of the endpoint\n */\nAWS.Endpoint = inherit({\n\n  /**\n   * @overload Endpoint(endpoint)\n   *   Constructs a new endpoint given an endpoint URL. If the\n   *   URL omits a protocol (http or https), the default protocol\n   *   set in the global {AWS.config} will be used.\n   *   @param endpoint [String] the URL to construct an endpoint from\n   */\n  constructor: function Endpoint(endpoint, config) {\n    AWS.util.hideProperties(this, ['slashes', 'auth', 'hash', 'search', 'query']);\n\n    if (typeof endpoint === 'undefined' || endpoint === null) {\n      throw new Error('Invalid endpoint: ' + endpoint);\n    } else if (typeof endpoint !== 'string') {\n      return AWS.util.copy(endpoint);\n    }\n\n    if (!endpoint.match(/^http/)) {\n      var useSSL = config && config.sslEnabled !== undefined ?\n        config.sslEnabled : AWS.config.sslEnabled;\n      endpoint = (useSSL ? 'https' : 'http') + '://' + endpoint;\n    }\n\n    AWS.util.update(this, AWS.util.urlParse(endpoint));\n\n    // Ensure the port property is set as an integer\n    if (this.port) {\n      this.port = parseInt(this.port, 10);\n    } else {\n      this.port = this.protocol === 'https:' ? 443 : 80;\n    }\n  }\n\n});\n\n/**\n * The low level HTTP request object, encapsulating all HTTP header\n * and body data sent by a service request.\n *\n * @!attribute method\n *   @return [String] the HTTP method of the request\n * @!attribute path\n *   @return [String] the path portion of the URI, e.g.,\n *     \"/list/?start=5&num=10\"\n * @!attribute headers\n *   @return [map<String,String>]\n *     a map of header keys and their respective values\n * @!attribute body\n *   @return [String] the request body payload\n * @!attribute endpoint\n *   @return [AWS.Endpoint] the endpoint for the request\n * @!attribute region\n *   @api private\n *   @return [String] the region, for signing purposes only.\n */\nAWS.HttpRequest = inherit({\n\n  /**\n   * @api private\n   */\n  constructor: function HttpRequest(endpoint, region) {\n    endpoint = new AWS.Endpoint(endpoint);\n    this.method = 'POST';\n    this.path = endpoint.path || '/';\n    this.headers = {};\n    this.body = '';\n    this.endpoint = endpoint;\n    this.region = region;\n    this._userAgent = '';\n    this.setUserAgent();\n  },\n\n  /**\n   * @api private\n   */\n  setUserAgent: function setUserAgent() {\n    this._userAgent = this.headers[this.getUserAgentHeaderName()] = AWS.util.userAgent();\n  },\n\n  getUserAgentHeaderName: function getUserAgentHeaderName() {\n    var prefix = AWS.util.isBrowser() ? 'X-Amz-' : '';\n    return prefix + 'User-Agent';\n  },\n\n  /**\n   * @api private\n   */\n  appendToUserAgent: function appendToUserAgent(agentPartial) {\n    if (typeof agentPartial === 'string' && agentPartial) {\n      this._userAgent += ' ' + agentPartial;\n    }\n    this.headers[this.getUserAgentHeaderName()] = this._userAgent;\n  },\n\n  /**\n   * @api private\n   */\n  getUserAgent: function getUserAgent() {\n    return this._userAgent;\n  },\n\n  /**\n   * @return [String] the part of the {path} excluding the\n   *   query string\n   */\n  pathname: function pathname() {\n    return this.path.split('?', 1)[0];\n  },\n\n  /**\n   * @return [String] the query string portion of the {path}\n   */\n  search: function search() {\n    var query = this.path.split('?', 2)[1];\n    if (query) {\n      query = AWS.util.queryStringParse(query);\n      return AWS.util.queryParamsToString(query);\n    }\n    return '';\n  },\n\n  /**\n   * @api private\n   * update httpRequest endpoint with endpoint string\n   */\n  updateEndpoint: function updateEndpoint(endpointStr) {\n    var newEndpoint = new AWS.Endpoint(endpointStr);\n    this.endpoint = newEndpoint;\n    this.path = newEndpoint.path || '/';\n    if (this.headers['Host']) {\n      this.headers['Host'] = newEndpoint.host;\n    }\n  }\n});\n\n/**\n * The low level HTTP response object, encapsulating all HTTP header\n * and body data returned from the request.\n *\n * @!attribute statusCode\n *   @return [Integer] the HTTP status code of the response (e.g., 200, 404)\n * @!attribute headers\n *   @return [map<String,String>]\n *      a map of response header keys and their respective values\n * @!attribute body\n *   @return [String] the response body payload\n * @!attribute [r] streaming\n *   @return [Boolean] whether this response is being streamed at a low-level.\n *     Defaults to `false` (buffered reads). Do not modify this manually, use\n *     {createUnbufferedStream} to convert the stream to unbuffered mode\n *     instead.\n */\nAWS.HttpResponse = inherit({\n\n  /**\n   * @api private\n   */\n  constructor: function HttpResponse() {\n    this.statusCode = undefined;\n    this.headers = {};\n    this.body = undefined;\n    this.streaming = false;\n    this.stream = null;\n  },\n\n  /**\n   * Disables buffering on the HTTP response and returns the stream for reading.\n   * @return [Stream, XMLHttpRequest, null] the underlying stream object.\n   *   Use this object to directly read data off of the stream.\n   * @note This object is only available after the {AWS.Request~httpHeaders}\n   *   event has fired. This method must be called prior to\n   *   {AWS.Request~httpData}.\n   * @example Taking control of a stream\n   *   request.on('httpHeaders', function(statusCode, headers) {\n   *     if (statusCode < 300) {\n   *       if (headers.etag === 'xyz') {\n   *         // pipe the stream, disabling buffering\n   *         var stream = this.response.httpResponse.createUnbufferedStream();\n   *         stream.pipe(process.stdout);\n   *       } else { // abort this request and set a better error message\n   *         this.abort();\n   *         this.response.error = new Error('Invalid ETag');\n   *       }\n   *     }\n   *   }).send(console.log);\n   */\n  createUnbufferedStream: function createUnbufferedStream() {\n    this.streaming = true;\n    return this.stream;\n  }\n});\n\n\nAWS.HttpClient = inherit({});\n\n/**\n * @api private\n */\nAWS.HttpClient.getInstance = function getInstance() {\n  if (this.singleton === undefined) {\n    this.singleton = new this();\n  }\n  return this.singleton;\n};\n","var AWS = require('../core');\nvar Stream = AWS.util.stream.Stream;\nvar TransformStream = AWS.util.stream.Transform;\nvar ReadableStream = AWS.util.stream.Readable;\nrequire('../http');\nvar CONNECTION_REUSE_ENV_NAME = 'AWS_NODEJS_CONNECTION_REUSE_ENABLED';\n\n/**\n * @api private\n */\nAWS.NodeHttpClient = AWS.util.inherit({\n  handleRequest: function handleRequest(httpRequest, httpOptions, callback, errCallback) {\n    var self = this;\n    var endpoint = httpRequest.endpoint;\n    var pathPrefix = '';\n    if (!httpOptions) httpOptions = {};\n    if (httpOptions.proxy) {\n      pathPrefix = endpoint.protocol + '//' + endpoint.hostname;\n      if (endpoint.port !== 80 && endpoint.port !== 443) {\n        pathPrefix += ':' + endpoint.port;\n      }\n      endpoint = new AWS.Endpoint(httpOptions.proxy);\n    }\n\n    var useSSL = endpoint.protocol === 'https:';\n    var http = useSSL ? require('https') : require('http');\n    var options = {\n      host: endpoint.hostname,\n      port: endpoint.port,\n      method: httpRequest.method,\n      headers: httpRequest.headers,\n      path: pathPrefix + httpRequest.path\n    };\n\n    if (!httpOptions.agent) {\n      options.agent = this.getAgent(useSSL, {\n        keepAlive: process.env[CONNECTION_REUSE_ENV_NAME] === '1' ? true : false\n      });\n    }\n\n    AWS.util.update(options, httpOptions);\n    delete options.proxy; // proxy isn't an HTTP option\n    delete options.timeout; // timeout isn't an HTTP option\n\n    var stream = http.request(options, function (httpResp) {\n      if (stream.didCallback) return;\n\n      callback(httpResp);\n      httpResp.emit(\n        'headers',\n        httpResp.statusCode,\n        httpResp.headers,\n        httpResp.statusMessage\n      );\n    });\n    httpRequest.stream = stream; // attach stream to httpRequest\n    stream.didCallback = false;\n\n    // connection timeout support\n    if (httpOptions.connectTimeout) {\n      var connectTimeoutId;\n      stream.on('socket', function(socket) {\n        if (socket.connecting) {\n          connectTimeoutId = setTimeout(function connectTimeout() {\n            if (stream.didCallback) return; stream.didCallback = true;\n\n            stream.abort();\n            errCallback(AWS.util.error(\n              new Error('Socket timed out without establishing a connection'),\n              {code: 'TimeoutError'}\n            ));\n          }, httpOptions.connectTimeout);\n          socket.on('connect', function() {\n            clearTimeout(connectTimeoutId);\n            connectTimeoutId = null;\n          });\n        }\n      });\n    }\n\n    // timeout support\n    stream.setTimeout(httpOptions.timeout || 0, function() {\n      if (stream.didCallback) return; stream.didCallback = true;\n\n      var msg = 'Connection timed out after ' + httpOptions.timeout + 'ms';\n      errCallback(AWS.util.error(new Error(msg), {code: 'TimeoutError'}));\n      stream.abort();\n    });\n\n    stream.on('error', function() {\n      if (connectTimeoutId) {\n        clearTimeout(connectTimeoutId);\n        connectTimeoutId = null;\n      }\n      if (stream.didCallback) return; stream.didCallback = true;\n      errCallback.apply(stream, arguments);\n    });\n\n    var expect = httpRequest.headers.Expect || httpRequest.headers.expect;\n    if (expect === '100-continue') {\n      stream.on('continue', function() {\n        self.writeBody(stream, httpRequest);\n      });\n    } else {\n      this.writeBody(stream, httpRequest);\n    }\n\n    return stream;\n  },\n\n  writeBody: function writeBody(stream, httpRequest) {\n    var body = httpRequest.body;\n    var totalBytes = parseInt(httpRequest.headers['Content-Length'], 10);\n\n    if (body instanceof Stream) {\n      // For progress support of streaming content -\n      // pipe the data through a transform stream to emit 'sendProgress' events\n      var progressStream = this.progressStream(stream, totalBytes);\n      if (progressStream) {\n        body.pipe(progressStream).pipe(stream);\n      } else {\n        body.pipe(stream);\n      }\n    } else if (body) {\n      // The provided body is a buffer/string and is already fully available in memory -\n      // For performance it's best to send it as a whole by calling stream.end(body),\n      // Callers expect a 'sendProgress' event which is best emitted once\n      // the http request stream has been fully written and all data flushed.\n      // The use of totalBytes is important over body.length for strings where\n      // length is char length and not byte length.\n      stream.once('finish', function() {\n        stream.emit('sendProgress', {\n          loaded: totalBytes,\n          total: totalBytes\n        });\n      });\n      stream.end(body);\n    } else {\n      // no request body\n      stream.end();\n    }\n  },\n\n  /**\n   * Create the https.Agent or http.Agent according to the request schema.\n   */\n  getAgent: function getAgent(useSSL, agentOptions) {\n    var http = useSSL ? require('https') : require('http');\n    if (useSSL) {\n      if (!AWS.NodeHttpClient.sslAgent) {\n        AWS.NodeHttpClient.sslAgent = new http.Agent(AWS.util.merge({\n          rejectUnauthorized: process.env.NODE_TLS_REJECT_UNAUTHORIZED === '0' ? false : true\n        }, agentOptions || {}));\n        AWS.NodeHttpClient.sslAgent.setMaxListeners(0);\n\n        // delegate maxSockets to globalAgent, set a default limit of 50 if current value is Infinity.\n        // Users can bypass this default by supplying their own Agent as part of SDK configuration.\n        Object.defineProperty(AWS.NodeHttpClient.sslAgent, 'maxSockets', {\n          enumerable: true,\n          get: function() {\n            var defaultMaxSockets = 50;\n            var globalAgent = http.globalAgent;\n            if (globalAgent && globalAgent.maxSockets !== Infinity && typeof globalAgent.maxSockets === 'number') {\n              return globalAgent.maxSockets;\n            }\n            return defaultMaxSockets;\n          }\n        });\n      }\n      return AWS.NodeHttpClient.sslAgent;\n    } else {\n      if (!AWS.NodeHttpClient.agent) {\n        AWS.NodeHttpClient.agent = new http.Agent(agentOptions);\n      }\n      return AWS.NodeHttpClient.agent;\n    }\n  },\n\n  progressStream: function progressStream(stream, totalBytes) {\n    if (typeof TransformStream === 'undefined') {\n      // for node 0.8 there is no streaming progress\n      return;\n    }\n    var loadedBytes = 0;\n    var reporter = new TransformStream();\n    reporter._transform = function(chunk, encoding, callback) {\n      if (chunk) {\n        loadedBytes += chunk.length;\n        stream.emit('sendProgress', {\n          loaded: loadedBytes,\n          total: totalBytes\n        });\n      }\n      callback(null, chunk);\n    };\n    return reporter;\n  },\n\n  emitter: null\n});\n\n/**\n * @!ignore\n */\n\n/**\n * @api private\n */\nAWS.HttpClient.prototype = AWS.NodeHttpClient.prototype;\n\n/**\n * @api private\n */\nAWS.HttpClient.streamsApiVersion = ReadableStream ? 2 : 1;\n","var util = require('../util');\n\nfunction JsonBuilder() { }\n\nJsonBuilder.prototype.build = function(value, shape) {\n  return JSON.stringify(translate(value, shape));\n};\n\nfunction translate(value, shape) {\n  if (!shape || value === undefined || value === null) return undefined;\n\n  switch (shape.type) {\n    case 'structure': return translateStructure(value, shape);\n    case 'map': return translateMap(value, shape);\n    case 'list': return translateList(value, shape);\n    default: return translateScalar(value, shape);\n  }\n}\n\nfunction translateStructure(structure, shape) {\n  var struct = {};\n  util.each(structure, function(name, value) {\n    var memberShape = shape.members[name];\n    if (memberShape) {\n      if (memberShape.location !== 'body') return;\n      var locationName = memberShape.isLocationName ? memberShape.name : name;\n      var result = translate(value, memberShape);\n      if (result !== undefined) struct[locationName] = result;\n    }\n  });\n  return struct;\n}\n\nfunction translateList(list, shape) {\n  var out = [];\n  util.arrayEach(list, function(value) {\n    var result = translate(value, shape.member);\n    if (result !== undefined) out.push(result);\n  });\n  return out;\n}\n\nfunction translateMap(map, shape) {\n  var out = {};\n  util.each(map, function(key, value) {\n    var result = translate(value, shape.value);\n    if (result !== undefined) out[key] = result;\n  });\n  return out;\n}\n\nfunction translateScalar(value, shape) {\n  return shape.toWireFormat(value);\n}\n\n/**\n * @api private\n */\nmodule.exports = JsonBuilder;\n","var util = require('../util');\n\nfunction JsonParser() { }\n\nJsonParser.prototype.parse = function(value, shape) {\n  return translate(JSON.parse(value), shape);\n};\n\nfunction translate(value, shape) {\n  if (!shape || value === undefined) return undefined;\n\n  switch (shape.type) {\n    case 'structure': return translateStructure(value, shape);\n    case 'map': return translateMap(value, shape);\n    case 'list': return translateList(value, shape);\n    default: return translateScalar(value, shape);\n  }\n}\n\nfunction translateStructure(structure, shape) {\n  if (structure == null) return undefined;\n\n  var struct = {};\n  var shapeMembers = shape.members;\n  util.each(shapeMembers, function(name, memberShape) {\n    var locationName = memberShape.isLocationName ? memberShape.name : name;\n    if (Object.prototype.hasOwnProperty.call(structure, locationName)) {\n      var value = structure[locationName];\n      var result = translate(value, memberShape);\n      if (result !== undefined) struct[name] = result;\n    }\n  });\n  return struct;\n}\n\nfunction translateList(list, shape) {\n  if (list == null) return undefined;\n\n  var out = [];\n  util.arrayEach(list, function(value) {\n    var result = translate(value, shape.member);\n    if (result === undefined) out.push(null);\n    else out.push(result);\n  });\n  return out;\n}\n\nfunction translateMap(map, shape) {\n  if (map == null) return undefined;\n\n  var out = {};\n  util.each(map, function(key, value) {\n    var result = translate(value, shape.value);\n    if (result === undefined) out[key] = null;\n    else out[key] = result;\n  });\n  return out;\n}\n\nfunction translateScalar(value, shape) {\n  return shape.toType(value);\n}\n\n/**\n * @api private\n */\nmodule.exports = JsonParser;\n","var AWS = require('./core');\nrequire('./http');\nvar inherit = AWS.util.inherit;\n\n/**\n * Represents a metadata service available on EC2 instances. Using the\n * {request} method, you can receieve metadata about any available resource\n * on the metadata service.\n *\n * You can disable the use of the IMDS by setting the AWS_EC2_METADATA_DISABLED\n * environment variable to a truthy value.\n *\n * @!attribute [r] httpOptions\n *   @return [map] a map of options to pass to the underlying HTTP request:\n *\n *     * **timeout** (Number) &mdash; a timeout value in milliseconds to wait\n *       before aborting the connection. Set to 0 for no timeout.\n *\n * @!macro nobrowser\n */\nAWS.MetadataService = inherit({\n  /**\n   * @return [String] the hostname of the instance metadata service\n   */\n  host: '169.254.169.254',\n\n  /**\n   * @!ignore\n   */\n\n  /**\n   * Default HTTP options. By default, the metadata service is set to not\n   * timeout on long requests. This means that on non-EC2 machines, this\n   * request will never return. If you are calling this operation from an\n   * environment that may not always run on EC2, set a `timeout` value so\n   * the SDK will abort the request after a given number of milliseconds.\n   */\n  httpOptions: { timeout: 0 },\n\n  /**\n   * when enabled, metadata service will not fetch token\n   */\n  disableFetchToken: false,\n\n  /**\n   * Creates a new MetadataService object with a given set of options.\n   *\n   * @option options host [String] the hostname of the instance metadata\n   *   service\n   * @option options httpOptions [map] a map of options to pass to the\n   *   underlying HTTP request:\n   *\n   *   * **timeout** (Number) &mdash; a timeout value in milliseconds to wait\n   *     before aborting the connection. Set to 0 for no timeout.\n   * @option options maxRetries [Integer] the maximum number of retries to\n   *   perform for timeout errors\n   * @option options retryDelayOptions [map] A set of options to configure the\n   *   retry delay on retryable errors. See AWS.Config for details.\n   */\n  constructor: function MetadataService(options) {\n    AWS.util.update(this, options);\n  },\n\n  /**\n   * Sends a request to the instance metadata service for a given resource.\n   *\n   * @param path [String] the path of the resource to get\n   *\n   * @param options [map] an optional map used to make request\n   *\n   *   * **method** (String) &mdash; HTTP request method\n   *\n   *   * **headers** (map<String,String>) &mdash; a map of response header keys and their respective values\n   *\n   * @callback callback function(err, data)\n   *   Called when a response is available from the service.\n   *   @param err [Error, null] if an error occurred, this value will be set\n   *   @param data [String, null] if the request was successful, the body of\n   *     the response\n   */\n  request: function request(path, options, callback) {\n    if (arguments.length === 2) {\n      callback = options;\n      options = {};\n    }\n\n    if (process.env[AWS.util.imdsDisabledEnv]) {\n      callback(new Error('EC2 Instance Metadata Service access disabled'));\n      return;\n    }\n\n    path = path || '/';\n    var httpRequest = new AWS.HttpRequest('http://' + this.host + path);\n    httpRequest.method = options.method || 'GET';\n    if (options.headers) {\n      httpRequest.headers = options.headers;\n    }\n    AWS.util.handleRequestWithRetries(httpRequest, this, callback);\n  },\n\n  /**\n  * @api private\n  */\n  loadCredentialsCallbacks: [],\n\n  /**\n   * Fetches metadata token used for getting credentials\n   *\n   * @api private\n   * @callback callback function(err, token)\n   *   Called when token is loaded from the resource\n   */\n  fetchMetadataToken: function fetchMetadataToken(callback) {\n    var self = this;\n    var tokenFetchPath = '/latest/api/token';\n    self.request(\n      tokenFetchPath,\n      {\n        'method': 'PUT',\n        'headers': {\n          'x-aws-ec2-metadata-token-ttl-seconds': '21600'\n        }\n      },\n      callback\n    );\n  },\n\n  /**\n   * Fetches credentials\n   *\n   * @api private\n   * @callback cb function(err, creds)\n   *   Called when credentials are loaded from the resource\n   */\n  fetchCredentials: function fetchCredentials(options, cb) {\n    var self = this;\n    var basePath = '/latest/meta-data/iam/security-credentials/';\n\n    self.request(basePath, options, function (err, roleName) {\n      if (err) {\n        self.disableFetchToken = !(err.statusCode === 401);\n        cb(AWS.util.error(\n          err,\n          {\n            message: 'EC2 Metadata roleName request returned error'\n          }\n        ));\n        return;\n      }\n      roleName = roleName.split('\\n')[0]; // grab first (and only) role\n      self.request(basePath + roleName, options, function (credErr, credData) {\n        if (credErr) {\n          self.disableFetchToken = !(credErr.statusCode === 401);\n          cb(AWS.util.error(\n            credErr,\n            {\n              message: 'EC2 Metadata creds request returned error'\n            }\n          ));\n          return;\n        }\n        try {\n          var credentials = JSON.parse(credData);\n          cb(null, credentials);\n        } catch (parseError) {\n          cb(parseError);\n        }\n      });\n    });\n  },\n\n  /**\n   * Loads a set of credentials stored in the instance metadata service\n   *\n   * @api private\n   * @callback callback function(err, credentials)\n   *   Called when credentials are loaded from the resource\n   *   @param err [Error] if an error occurred, this value will be set\n   *   @param credentials [Object] the raw JSON object containing all\n   *     metadata from the credentials resource\n   */\n  loadCredentials: function loadCredentials(callback) {\n    var self = this;\n    self.loadCredentialsCallbacks.push(callback);\n    if (self.loadCredentialsCallbacks.length > 1) { return; }\n\n    function callbacks(err, creds) {\n      var cb;\n      while ((cb = self.loadCredentialsCallbacks.shift()) !== undefined) {\n        cb(err, creds);\n      }\n    }\n\n    if (self.disableFetchToken) {\n      self.fetchCredentials({}, callbacks);\n    } else {\n      self.fetchMetadataToken(function(tokenError, token) {\n        if (tokenError) {\n          if (tokenError.code === 'TimeoutError') {\n            self.disableFetchToken = true;\n          } else if (tokenError.retryable === true) {\n            callbacks(AWS.util.error(\n              tokenError,\n              {\n                message: 'EC2 Metadata token request returned error'\n              }\n            ));\n            return;\n          } else if (tokenError.statusCode === 400) {\n            callbacks(AWS.util.error(\n              tokenError,\n              {\n                message: 'EC2 Metadata token request returned 400'\n              }\n            ));\n            return;\n          }\n        }\n        var options = {};\n        if (token) {\n          options.headers = {\n            'x-aws-ec2-metadata-token': token\n          };\n        }\n        self.fetchCredentials(options, callbacks);\n      });\n\n    }\n  }\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.MetadataService;\n","var Collection = require('./collection');\nvar Operation = require('./operation');\nvar Shape = require('./shape');\nvar Paginator = require('./paginator');\nvar ResourceWaiter = require('./resource_waiter');\nvar metadata = require('../../apis/metadata.json');\n\nvar util = require('../util');\nvar property = util.property;\nvar memoizedProperty = util.memoizedProperty;\n\nfunction Api(api, options) {\n  var self = this;\n  api = api || {};\n  options = options || {};\n  options.api = this;\n\n  api.metadata = api.metadata || {};\n\n  var serviceIdentifier = options.serviceIdentifier;\n  delete options.serviceIdentifier;\n\n  property(this, 'isApi', true, false);\n  property(this, 'apiVersion', api.metadata.apiVersion);\n  property(this, 'endpointPrefix', api.metadata.endpointPrefix);\n  property(this, 'signingName', api.metadata.signingName);\n  property(this, 'globalEndpoint', api.metadata.globalEndpoint);\n  property(this, 'signatureVersion', api.metadata.signatureVersion);\n  property(this, 'jsonVersion', api.metadata.jsonVersion);\n  property(this, 'targetPrefix', api.metadata.targetPrefix);\n  property(this, 'protocol', api.metadata.protocol);\n  property(this, 'timestampFormat', api.metadata.timestampFormat);\n  property(this, 'xmlNamespaceUri', api.metadata.xmlNamespace);\n  property(this, 'abbreviation', api.metadata.serviceAbbreviation);\n  property(this, 'fullName', api.metadata.serviceFullName);\n  property(this, 'serviceId', api.metadata.serviceId);\n  if (serviceIdentifier && metadata[serviceIdentifier]) {\n      property(this, 'xmlNoDefaultLists', metadata[serviceIdentifier].xmlNoDefaultLists, false);\n  }\n\n  memoizedProperty(this, 'className', function() {\n    var name = api.metadata.serviceAbbreviation || api.metadata.serviceFullName;\n    if (!name) return null;\n\n    name = name.replace(/^Amazon|AWS\\s*|\\(.*|\\s+|\\W+/g, '');\n    if (name === 'ElasticLoadBalancing') name = 'ELB';\n    return name;\n  });\n\n  function addEndpointOperation(name, operation) {\n    if (operation.endpointoperation === true) {\n      property(self, 'endpointOperation', util.string.lowerFirst(name));\n    }\n    if (operation.endpointdiscovery && !self.hasRequiredEndpointDiscovery) {\n      property(\n        self,\n        'hasRequiredEndpointDiscovery',\n        operation.endpointdiscovery.required === true\n      );\n    }\n  }\n\n  property(this, 'operations', new Collection(api.operations, options, function(name, operation) {\n    return new Operation(name, operation, options);\n  }, util.string.lowerFirst, addEndpointOperation));\n\n  property(this, 'shapes', new Collection(api.shapes, options, function(name, shape) {\n    return Shape.create(shape, options);\n  }));\n\n  property(this, 'paginators', new Collection(api.paginators, options, function(name, paginator) {\n    return new Paginator(name, paginator, options);\n  }));\n\n  property(this, 'waiters', new Collection(api.waiters, options, function(name, waiter) {\n    return new ResourceWaiter(name, waiter, options);\n  }, util.string.lowerFirst));\n\n  if (options.documentation) {\n    property(this, 'documentation', api.documentation);\n    property(this, 'documentationUrl', api.documentationUrl);\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = Api;\n","var memoizedProperty = require('../util').memoizedProperty;\n\nfunction memoize(name, value, factory, nameTr) {\n  memoizedProperty(this, nameTr(name), function() {\n    return factory(name, value);\n  });\n}\n\nfunction Collection(iterable, options, factory, nameTr, callback) {\n  nameTr = nameTr || String;\n  var self = this;\n\n  for (var id in iterable) {\n    if (Object.prototype.hasOwnProperty.call(iterable, id)) {\n      memoize.call(self, id, iterable[id], factory, nameTr);\n      if (callback) callback(id, iterable[id]);\n    }\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = Collection;\n","var Shape = require('./shape');\n\nvar util = require('../util');\nvar property = util.property;\nvar memoizedProperty = util.memoizedProperty;\n\nfunction Operation(name, operation, options) {\n  var self = this;\n  options = options || {};\n\n  property(this, 'name', operation.name || name);\n  property(this, 'api', options.api, false);\n\n  operation.http = operation.http || {};\n  property(this, 'endpoint', operation.endpoint);\n  property(this, 'httpMethod', operation.http.method || 'POST');\n  property(this, 'httpPath', operation.http.requestUri || '/');\n  property(this, 'authtype', operation.authtype || '');\n  property(\n    this,\n    'endpointDiscoveryRequired',\n    operation.endpointdiscovery ?\n      (operation.endpointdiscovery.required ? 'REQUIRED' : 'OPTIONAL') :\n    'NULL'\n  );\n\n  memoizedProperty(this, 'input', function() {\n    if (!operation.input) {\n      return new Shape.create({type: 'structure'}, options);\n    }\n    return Shape.create(operation.input, options);\n  });\n\n  memoizedProperty(this, 'output', function() {\n    if (!operation.output) {\n      return new Shape.create({type: 'structure'}, options);\n    }\n    return Shape.create(operation.output, options);\n  });\n\n  memoizedProperty(this, 'errors', function() {\n    var list = [];\n    if (!operation.errors) return null;\n\n    for (var i = 0; i < operation.errors.length; i++) {\n      list.push(Shape.create(operation.errors[i], options));\n    }\n\n    return list;\n  });\n\n  memoizedProperty(this, 'paginator', function() {\n    return options.api.paginators[name];\n  });\n\n  if (options.documentation) {\n    property(this, 'documentation', operation.documentation);\n    property(this, 'documentationUrl', operation.documentationUrl);\n  }\n\n  // idempotentMembers only tracks top-level input shapes\n  memoizedProperty(this, 'idempotentMembers', function() {\n    var idempotentMembers = [];\n    var input = self.input;\n    var members = input.members;\n    if (!input.members) {\n      return idempotentMembers;\n    }\n    for (var name in members) {\n      if (!members.hasOwnProperty(name)) {\n        continue;\n      }\n      if (members[name].isIdempotent === true) {\n        idempotentMembers.push(name);\n      }\n    }\n    return idempotentMembers;\n  });\n\n  memoizedProperty(this, 'hasEventOutput', function() {\n    var output = self.output;\n    return hasEventStream(output);\n  });\n}\n\nfunction hasEventStream(topLevelShape) {\n  var members = topLevelShape.members;\n  var payload = topLevelShape.payload;\n\n  if (!topLevelShape.members) {\n    return false;\n  }\n\n  if (payload) {\n    var payloadMember = members[payload];\n    return payloadMember.isEventStream;\n  }\n\n  // check if any member is an event stream\n  for (var name in members) {\n    if (!members.hasOwnProperty(name)) {\n      if (members[name].isEventStream === true) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\n/**\n * @api private\n */\nmodule.exports = Operation;\n","var property = require('../util').property;\n\nfunction Paginator(name, paginator) {\n  property(this, 'inputToken', paginator.input_token);\n  property(this, 'limitKey', paginator.limit_key);\n  property(this, 'moreResults', paginator.more_results);\n  property(this, 'outputToken', paginator.output_token);\n  property(this, 'resultKey', paginator.result_key);\n}\n\n/**\n * @api private\n */\nmodule.exports = Paginator;\n","var util = require('../util');\nvar property = util.property;\n\nfunction ResourceWaiter(name, waiter, options) {\n  options = options || {};\n  property(this, 'name', name);\n  property(this, 'api', options.api, false);\n\n  if (waiter.operation) {\n    property(this, 'operation', util.string.lowerFirst(waiter.operation));\n  }\n\n  var self = this;\n  var keys = [\n    'type',\n    'description',\n    'delay',\n    'maxAttempts',\n    'acceptors'\n  ];\n\n  keys.forEach(function(key) {\n    var value = waiter[key];\n    if (value) {\n      property(self, key, value);\n    }\n  });\n}\n\n/**\n * @api private\n */\nmodule.exports = ResourceWaiter;\n","var Collection = require('./collection');\n\nvar util = require('../util');\n\nfunction property(obj, name, value) {\n  if (value !== null && value !== undefined) {\n    util.property.apply(this, arguments);\n  }\n}\n\nfunction memoizedProperty(obj, name) {\n  if (!obj.constructor.prototype[name]) {\n    util.memoizedProperty.apply(this, arguments);\n  }\n}\n\nfunction Shape(shape, options, memberName) {\n  options = options || {};\n\n  property(this, 'shape', shape.shape);\n  property(this, 'api', options.api, false);\n  property(this, 'type', shape.type);\n  property(this, 'enum', shape.enum);\n  property(this, 'min', shape.min);\n  property(this, 'max', shape.max);\n  property(this, 'pattern', shape.pattern);\n  property(this, 'location', shape.location || this.location || 'body');\n  property(this, 'name', this.name || shape.xmlName || shape.queryName ||\n    shape.locationName || memberName);\n  property(this, 'isStreaming', shape.streaming || this.isStreaming || false);\n  property(this, 'requiresLength', shape.requiresLength, false);\n  property(this, 'isComposite', shape.isComposite || false);\n  property(this, 'isShape', true, false);\n  property(this, 'isQueryName', Boolean(shape.queryName), false);\n  property(this, 'isLocationName', Boolean(shape.locationName), false);\n  property(this, 'isIdempotent', shape.idempotencyToken === true);\n  property(this, 'isJsonValue', shape.jsonvalue === true);\n  property(this, 'isSensitive', shape.sensitive === true || shape.prototype && shape.prototype.sensitive === true);\n  property(this, 'isEventStream', Boolean(shape.eventstream), false);\n  property(this, 'isEvent', Boolean(shape.event), false);\n  property(this, 'isEventPayload', Boolean(shape.eventpayload), false);\n  property(this, 'isEventHeader', Boolean(shape.eventheader), false);\n  property(this, 'isTimestampFormatSet', Boolean(shape.timestampFormat) || shape.prototype && shape.prototype.isTimestampFormatSet === true, false);\n  property(this, 'endpointDiscoveryId', Boolean(shape.endpointdiscoveryid), false);\n  property(this, 'hostLabel', Boolean(shape.hostLabel), false);\n\n  if (options.documentation) {\n    property(this, 'documentation', shape.documentation);\n    property(this, 'documentationUrl', shape.documentationUrl);\n  }\n\n  if (shape.xmlAttribute) {\n    property(this, 'isXmlAttribute', shape.xmlAttribute || false);\n  }\n\n  // type conversion and parsing\n  property(this, 'defaultValue', null);\n  this.toWireFormat = function(value) {\n    if (value === null || value === undefined) return '';\n    return value;\n  };\n  this.toType = function(value) { return value; };\n}\n\n/**\n * @api private\n */\nShape.normalizedTypes = {\n  character: 'string',\n  double: 'float',\n  long: 'integer',\n  short: 'integer',\n  biginteger: 'integer',\n  bigdecimal: 'float',\n  blob: 'binary'\n};\n\n/**\n * @api private\n */\nShape.types = {\n  'structure': StructureShape,\n  'list': ListShape,\n  'map': MapShape,\n  'boolean': BooleanShape,\n  'timestamp': TimestampShape,\n  'float': FloatShape,\n  'integer': IntegerShape,\n  'string': StringShape,\n  'base64': Base64Shape,\n  'binary': BinaryShape\n};\n\nShape.resolve = function resolve(shape, options) {\n  if (shape.shape) {\n    var refShape = options.api.shapes[shape.shape];\n    if (!refShape) {\n      throw new Error('Cannot find shape reference: ' + shape.shape);\n    }\n\n    return refShape;\n  } else {\n    return null;\n  }\n};\n\nShape.create = function create(shape, options, memberName) {\n  if (shape.isShape) return shape;\n\n  var refShape = Shape.resolve(shape, options);\n  if (refShape) {\n    var filteredKeys = Object.keys(shape);\n    if (!options.documentation) {\n      filteredKeys = filteredKeys.filter(function(name) {\n        return !name.match(/documentation/);\n      });\n    }\n\n    // create an inline shape with extra members\n    var InlineShape = function() {\n      refShape.constructor.call(this, shape, options, memberName);\n    };\n    InlineShape.prototype = refShape;\n    return new InlineShape();\n  } else {\n    // set type if not set\n    if (!shape.type) {\n      if (shape.members) shape.type = 'structure';\n      else if (shape.member) shape.type = 'list';\n      else if (shape.key) shape.type = 'map';\n      else shape.type = 'string';\n    }\n\n    // normalize types\n    var origType = shape.type;\n    if (Shape.normalizedTypes[shape.type]) {\n      shape.type = Shape.normalizedTypes[shape.type];\n    }\n\n    if (Shape.types[shape.type]) {\n      return new Shape.types[shape.type](shape, options, memberName);\n    } else {\n      throw new Error('Unrecognized shape type: ' + origType);\n    }\n  }\n};\n\nfunction CompositeShape(shape) {\n  Shape.apply(this, arguments);\n  property(this, 'isComposite', true);\n\n  if (shape.flattened) {\n    property(this, 'flattened', shape.flattened || false);\n  }\n}\n\nfunction StructureShape(shape, options) {\n  var self = this;\n  var requiredMap = null, firstInit = !this.isShape;\n\n  CompositeShape.apply(this, arguments);\n\n  if (firstInit) {\n    property(this, 'defaultValue', function() { return {}; });\n    property(this, 'members', {});\n    property(this, 'memberNames', []);\n    property(this, 'required', []);\n    property(this, 'isRequired', function() { return false; });\n  }\n\n  if (shape.members) {\n    property(this, 'members', new Collection(shape.members, options, function(name, member) {\n      return Shape.create(member, options, name);\n    }));\n    memoizedProperty(this, 'memberNames', function() {\n      return shape.xmlOrder || Object.keys(shape.members);\n    });\n\n    if (shape.event) {\n      memoizedProperty(this, 'eventPayloadMemberName', function() {\n        var members = self.members;\n        var memberNames = self.memberNames;\n        // iterate over members to find ones that are event payloads\n        for (var i = 0, iLen = memberNames.length; i < iLen; i++) {\n          if (members[memberNames[i]].isEventPayload) {\n            return memberNames[i];\n          }\n        }\n      });\n\n      memoizedProperty(this, 'eventHeaderMemberNames', function() {\n        var members = self.members;\n        var memberNames = self.memberNames;\n        var eventHeaderMemberNames = [];\n        // iterate over members to find ones that are event headers\n        for (var i = 0, iLen = memberNames.length; i < iLen; i++) {\n          if (members[memberNames[i]].isEventHeader) {\n            eventHeaderMemberNames.push(memberNames[i]);\n          }\n        }\n        return eventHeaderMemberNames;\n      });\n    }\n  }\n\n  if (shape.required) {\n    property(this, 'required', shape.required);\n    property(this, 'isRequired', function(name) {\n      if (!requiredMap) {\n        requiredMap = {};\n        for (var i = 0; i < shape.required.length; i++) {\n          requiredMap[shape.required[i]] = true;\n        }\n      }\n\n      return requiredMap[name];\n    }, false, true);\n  }\n\n  property(this, 'resultWrapper', shape.resultWrapper || null);\n\n  if (shape.payload) {\n    property(this, 'payload', shape.payload);\n  }\n\n  if (typeof shape.xmlNamespace === 'string') {\n    property(this, 'xmlNamespaceUri', shape.xmlNamespace);\n  } else if (typeof shape.xmlNamespace === 'object') {\n    property(this, 'xmlNamespacePrefix', shape.xmlNamespace.prefix);\n    property(this, 'xmlNamespaceUri', shape.xmlNamespace.uri);\n  }\n}\n\nfunction ListShape(shape, options) {\n  var self = this, firstInit = !this.isShape;\n  CompositeShape.apply(this, arguments);\n\n  if (firstInit) {\n    property(this, 'defaultValue', function() { return []; });\n  }\n\n  if (shape.member) {\n    memoizedProperty(this, 'member', function() {\n      return Shape.create(shape.member, options);\n    });\n  }\n\n  if (this.flattened) {\n    var oldName = this.name;\n    memoizedProperty(this, 'name', function() {\n      return self.member.name || oldName;\n    });\n  }\n}\n\nfunction MapShape(shape, options) {\n  var firstInit = !this.isShape;\n  CompositeShape.apply(this, arguments);\n\n  if (firstInit) {\n    property(this, 'defaultValue', function() { return {}; });\n    property(this, 'key', Shape.create({type: 'string'}, options));\n    property(this, 'value', Shape.create({type: 'string'}, options));\n  }\n\n  if (shape.key) {\n    memoizedProperty(this, 'key', function() {\n      return Shape.create(shape.key, options);\n    });\n  }\n  if (shape.value) {\n    memoizedProperty(this, 'value', function() {\n      return Shape.create(shape.value, options);\n    });\n  }\n}\n\nfunction TimestampShape(shape) {\n  var self = this;\n  Shape.apply(this, arguments);\n\n  if (shape.timestampFormat) {\n    property(this, 'timestampFormat', shape.timestampFormat);\n  } else if (self.isTimestampFormatSet && this.timestampFormat) {\n    property(this, 'timestampFormat', this.timestampFormat);\n  } else if (this.location === 'header') {\n    property(this, 'timestampFormat', 'rfc822');\n  } else if (this.location === 'querystring') {\n    property(this, 'timestampFormat', 'iso8601');\n  } else if (this.api) {\n    switch (this.api.protocol) {\n      case 'json':\n      case 'rest-json':\n        property(this, 'timestampFormat', 'unixTimestamp');\n        break;\n      case 'rest-xml':\n      case 'query':\n      case 'ec2':\n        property(this, 'timestampFormat', 'iso8601');\n        break;\n    }\n  }\n\n  this.toType = function(value) {\n    if (value === null || value === undefined) return null;\n    if (typeof value.toUTCString === 'function') return value;\n    return typeof value === 'string' || typeof value === 'number' ?\n           util.date.parseTimestamp(value) : null;\n  };\n\n  this.toWireFormat = function(value) {\n    return util.date.format(value, self.timestampFormat);\n  };\n}\n\nfunction StringShape() {\n  Shape.apply(this, arguments);\n\n  var nullLessProtocols = ['rest-xml', 'query', 'ec2'];\n  this.toType = function(value) {\n    value = this.api && nullLessProtocols.indexOf(this.api.protocol) > -1 ?\n      value || '' : value;\n    if (this.isJsonValue) {\n      return JSON.parse(value);\n    }\n\n    return value && typeof value.toString === 'function' ?\n      value.toString() : value;\n  };\n\n  this.toWireFormat = function(value) {\n    return this.isJsonValue ? JSON.stringify(value) : value;\n  };\n}\n\nfunction FloatShape() {\n  Shape.apply(this, arguments);\n\n  this.toType = function(value) {\n    if (value === null || value === undefined) return null;\n    return parseFloat(value);\n  };\n  this.toWireFormat = this.toType;\n}\n\nfunction IntegerShape() {\n  Shape.apply(this, arguments);\n\n  this.toType = function(value) {\n    if (value === null || value === undefined) return null;\n    return parseInt(value, 10);\n  };\n  this.toWireFormat = this.toType;\n}\n\nfunction BinaryShape() {\n  Shape.apply(this, arguments);\n  this.toType = function(value) {\n    var buf = util.base64.decode(value);\n    if (this.isSensitive && util.isNode() && typeof util.Buffer.alloc === 'function') {\n  /* Node.js can create a Buffer that is not isolated.\n   * i.e. buf.byteLength !== buf.buffer.byteLength\n   * This means that the sensitive data is accessible to anyone with access to buf.buffer.\n   * If this is the node shared Buffer, then other code within this process _could_ find this secret.\n   * Copy sensitive data to an isolated Buffer and zero the sensitive data.\n   * While this is safe to do here, copying this code somewhere else may produce unexpected results.\n   */\n      var secureBuf = util.Buffer.alloc(buf.length, buf);\n      buf.fill(0);\n      buf = secureBuf;\n    }\n    return buf;\n  };\n  this.toWireFormat = util.base64.encode;\n}\n\nfunction Base64Shape() {\n  BinaryShape.apply(this, arguments);\n}\n\nfunction BooleanShape() {\n  Shape.apply(this, arguments);\n\n  this.toType = function(value) {\n    if (typeof value === 'boolean') return value;\n    if (value === null || value === undefined) return null;\n    return value === 'true';\n  };\n}\n\n/**\n * @api private\n */\nShape.shapes = {\n  StructureShape: StructureShape,\n  ListShape: ListShape,\n  MapShape: MapShape,\n  StringShape: StringShape,\n  BooleanShape: BooleanShape,\n  Base64Shape: Base64Shape\n};\n\n/**\n * @api private\n */\nmodule.exports = Shape;\n","var util = require('./util');\n\nutil.isBrowser = function() { return false; };\nutil.isNode = function() { return true; };\n\n// node.js specific modules\nutil.crypto.lib = require('crypto');\nutil.Buffer = require('buffer').Buffer;\nutil.domain = require('domain');\nutil.stream = require('stream');\nutil.url = require('url');\nutil.querystring = require('querystring');\nutil.environment = 'nodejs';\nutil.createEventStream = util.stream.Readable ?\n  require('./event-stream/streaming-create-event-stream').createEventStream : require('./event-stream/buffered-create-event-stream').createEventStream;\nutil.realClock = require('./realclock/nodeClock');\nutil.clientSideMonitoring = {\n  Publisher: require('./publisher').Publisher,\n  configProvider: require('./publisher/configuration'),\n};\nutil.iniLoader = require('./shared-ini').iniLoader;\nutil.getSystemErrorName = require('util').getSystemErrorName;\n\nvar AWS;\n\n/**\n * @api private\n */\nmodule.exports = AWS = require('./core');\n\nrequire('./credentials');\nrequire('./credentials/credential_provider_chain');\nrequire('./credentials/temporary_credentials');\nrequire('./credentials/chainable_temporary_credentials');\nrequire('./credentials/web_identity_credentials');\nrequire('./credentials/cognito_identity_credentials');\nrequire('./credentials/saml_credentials');\nrequire('./credentials/process_credentials');\n\n// Load the xml2js XML parser\nAWS.XML.Parser = require('./xml/node_parser');\n\n// Load Node HTTP client\nrequire('./http/node');\n\nrequire('./shared-ini/ini-loader');\n\n// Load custom credential providers\nrequire('./credentials/token_file_web_identity_credentials');\nrequire('./credentials/ec2_metadata_credentials');\nrequire('./credentials/remote_credentials');\nrequire('./credentials/ecs_credentials');\nrequire('./credentials/environment_credentials');\nrequire('./credentials/file_system_credentials');\nrequire('./credentials/shared_ini_file_credentials');\nrequire('./credentials/process_credentials');\n\n// Setup default chain providers\n// If this changes, please update documentation for\n// AWS.CredentialProviderChain.defaultProviders in\n// credentials/credential_provider_chain.js\nAWS.CredentialProviderChain.defaultProviders = [\n  function () { return new AWS.EnvironmentCredentials('AWS'); },\n  function () { return new AWS.EnvironmentCredentials('AMAZON'); },\n  function () { return new AWS.SharedIniFileCredentials(); },\n  function () { return new AWS.ECSCredentials(); },\n  function () { return new AWS.ProcessCredentials(); },\n  function () { return new AWS.TokenFileWebIdentityCredentials(); },\n  function () { return new AWS.EC2MetadataCredentials(); }\n];\n\n// Update configuration keys\nAWS.util.update(AWS.Config.prototype.keys, {\n  credentials: function () {\n    var credentials = null;\n    new AWS.CredentialProviderChain([\n      function () { return new AWS.EnvironmentCredentials('AWS'); },\n      function () { return new AWS.EnvironmentCredentials('AMAZON'); },\n      function () { return new AWS.SharedIniFileCredentials({ disableAssumeRole: true }); }\n    ]).resolve(function(err, creds) {\n      if (!err) credentials = creds;\n    });\n    return credentials;\n  },\n  credentialProvider: function() {\n    return new AWS.CredentialProviderChain();\n  },\n  logger: function () {\n    return process.env.AWSJS_DEBUG ? console : null;\n  },\n  region: function() {\n    var env = process.env;\n    var region = env.AWS_REGION || env.AMAZON_REGION;\n    if (env[AWS.util.configOptInEnv]) {\n      var toCheck = [\n        {filename: env[AWS.util.sharedCredentialsFileEnv]},\n        {isConfig: true, filename: env[AWS.util.sharedConfigFileEnv]}\n      ];\n      var iniLoader = AWS.util.iniLoader;\n      while (!region && toCheck.length) {\n        var configFile = iniLoader.loadFrom(toCheck.shift());\n        var profile = configFile[env.AWS_PROFILE || AWS.util.defaultProfile];\n        region = profile && profile.region;\n      }\n    }\n    return region;\n  }\n});\n\n// Reset configuration\nAWS.config = new AWS.Config();\n","var AWS = require('./core');\n\n/**\n * @api private\n */\nAWS.ParamValidator = AWS.util.inherit({\n  /**\n   * Create a new validator object.\n   *\n   * @param validation [Boolean|map] whether input parameters should be\n   *     validated against the operation description before sending the\n   *     request. Pass a map to enable any of the following specific\n   *     validation features:\n   *\n   *     * **min** [Boolean] &mdash; Validates that a value meets the min\n   *       constraint. This is enabled by default when paramValidation is set\n   *       to `true`.\n   *     * **max** [Boolean] &mdash; Validates that a value meets the max\n   *       constraint.\n   *     * **pattern** [Boolean] &mdash; Validates that a string value matches a\n   *       regular expression.\n   *     * **enum** [Boolean] &mdash; Validates that a string value matches one\n   *       of the allowable enum values.\n   */\n  constructor: function ParamValidator(validation) {\n    if (validation === true || validation === undefined) {\n      validation = {'min': true};\n    }\n    this.validation = validation;\n  },\n\n  validate: function validate(shape, params, context) {\n    this.errors = [];\n    this.validateMember(shape, params || {}, context || 'params');\n\n    if (this.errors.length > 1) {\n      var msg = this.errors.join('\\n* ');\n      msg = 'There were ' + this.errors.length +\n        ' validation errors:\\n* ' + msg;\n      throw AWS.util.error(new Error(msg),\n        {code: 'MultipleValidationErrors', errors: this.errors});\n    } else if (this.errors.length === 1) {\n      throw this.errors[0];\n    } else {\n      return true;\n    }\n  },\n\n  fail: function fail(code, message) {\n    this.errors.push(AWS.util.error(new Error(message), {code: code}));\n  },\n\n  validateStructure: function validateStructure(shape, params, context) {\n    this.validateType(params, context, ['object'], 'structure');\n\n    var paramName;\n    for (var i = 0; shape.required && i < shape.required.length; i++) {\n      paramName = shape.required[i];\n      var value = params[paramName];\n      if (value === undefined || value === null) {\n        this.fail('MissingRequiredParameter',\n          'Missing required key \\'' + paramName + '\\' in ' + context);\n      }\n    }\n\n    // validate hash members\n    for (paramName in params) {\n      if (!Object.prototype.hasOwnProperty.call(params, paramName)) continue;\n\n      var paramValue = params[paramName],\n          memberShape = shape.members[paramName];\n\n      if (memberShape !== undefined) {\n        var memberContext = [context, paramName].join('.');\n        this.validateMember(memberShape, paramValue, memberContext);\n      } else {\n        this.fail('UnexpectedParameter',\n          'Unexpected key \\'' + paramName + '\\' found in ' + context);\n      }\n    }\n\n    return true;\n  },\n\n  validateMember: function validateMember(shape, param, context) {\n    switch (shape.type) {\n      case 'structure':\n        return this.validateStructure(shape, param, context);\n      case 'list':\n        return this.validateList(shape, param, context);\n      case 'map':\n        return this.validateMap(shape, param, context);\n      default:\n        return this.validateScalar(shape, param, context);\n    }\n  },\n\n  validateList: function validateList(shape, params, context) {\n    if (this.validateType(params, context, [Array])) {\n      this.validateRange(shape, params.length, context, 'list member count');\n      // validate array members\n      for (var i = 0; i < params.length; i++) {\n        this.validateMember(shape.member, params[i], context + '[' + i + ']');\n      }\n    }\n  },\n\n  validateMap: function validateMap(shape, params, context) {\n    if (this.validateType(params, context, ['object'], 'map')) {\n      // Build up a count of map members to validate range traits.\n      var mapCount = 0;\n      for (var param in params) {\n        if (!Object.prototype.hasOwnProperty.call(params, param)) continue;\n        // Validate any map key trait constraints\n        this.validateMember(shape.key, param,\n                            context + '[key=\\'' + param + '\\']');\n        this.validateMember(shape.value, params[param],\n                            context + '[\\'' + param + '\\']');\n        mapCount++;\n      }\n      this.validateRange(shape, mapCount, context, 'map member count');\n    }\n  },\n\n  validateScalar: function validateScalar(shape, value, context) {\n    switch (shape.type) {\n      case null:\n      case undefined:\n      case 'string':\n        return this.validateString(shape, value, context);\n      case 'base64':\n      case 'binary':\n        return this.validatePayload(value, context);\n      case 'integer':\n      case 'float':\n        return this.validateNumber(shape, value, context);\n      case 'boolean':\n        return this.validateType(value, context, ['boolean']);\n      case 'timestamp':\n        return this.validateType(value, context, [Date,\n          /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$/, 'number'],\n          'Date object, ISO-8601 string, or a UNIX timestamp');\n      default:\n        return this.fail('UnkownType', 'Unhandled type ' +\n                         shape.type + ' for ' + context);\n    }\n  },\n\n  validateString: function validateString(shape, value, context) {\n    var validTypes = ['string'];\n    if (shape.isJsonValue) {\n      validTypes = validTypes.concat(['number', 'object', 'boolean']);\n    }\n    if (value !== null && this.validateType(value, context, validTypes)) {\n      this.validateEnum(shape, value, context);\n      this.validateRange(shape, value.length, context, 'string length');\n      this.validatePattern(shape, value, context);\n      this.validateUri(shape, value, context);\n    }\n  },\n\n  validateUri: function validateUri(shape, value, context) {\n    if (shape['location'] === 'uri') {\n      if (value.length === 0) {\n        this.fail('UriParameterError', 'Expected uri parameter to have length >= 1,'\n          + ' but found \"' + value +'\" for ' + context);\n      }\n    }\n  },\n\n  validatePattern: function validatePattern(shape, value, context) {\n    if (this.validation['pattern'] && shape['pattern'] !== undefined) {\n      if (!(new RegExp(shape['pattern'])).test(value)) {\n        this.fail('PatternMatchError', 'Provided value \"' + value + '\" '\n          + 'does not match regex pattern /' + shape['pattern'] + '/ for '\n          + context);\n      }\n    }\n  },\n\n  validateRange: function validateRange(shape, value, context, descriptor) {\n    if (this.validation['min']) {\n      if (shape['min'] !== undefined && value < shape['min']) {\n        this.fail('MinRangeError', 'Expected ' + descriptor + ' >= '\n          + shape['min'] + ', but found ' + value + ' for ' + context);\n      }\n    }\n    if (this.validation['max']) {\n      if (shape['max'] !== undefined && value > shape['max']) {\n        this.fail('MaxRangeError', 'Expected ' + descriptor + ' <= '\n          + shape['max'] + ', but found ' + value + ' for ' + context);\n      }\n    }\n  },\n\n  validateEnum: function validateRange(shape, value, context) {\n    if (this.validation['enum'] && shape['enum'] !== undefined) {\n      // Fail if the string value is not present in the enum list\n      if (shape['enum'].indexOf(value) === -1) {\n        this.fail('EnumError', 'Found string value of ' + value + ', but '\n          + 'expected ' + shape['enum'].join('|') + ' for ' + context);\n      }\n    }\n  },\n\n  validateType: function validateType(value, context, acceptedTypes, type) {\n    // We will not log an error for null or undefined, but we will return\n    // false so that callers know that the expected type was not strictly met.\n    if (value === null || value === undefined) return false;\n\n    var foundInvalidType = false;\n    for (var i = 0; i < acceptedTypes.length; i++) {\n      if (typeof acceptedTypes[i] === 'string') {\n        if (typeof value === acceptedTypes[i]) return true;\n      } else if (acceptedTypes[i] instanceof RegExp) {\n        if ((value || '').toString().match(acceptedTypes[i])) return true;\n      } else {\n        if (value instanceof acceptedTypes[i]) return true;\n        if (AWS.util.isType(value, acceptedTypes[i])) return true;\n        if (!type && !foundInvalidType) acceptedTypes = acceptedTypes.slice();\n        acceptedTypes[i] = AWS.util.typeName(acceptedTypes[i]);\n      }\n      foundInvalidType = true;\n    }\n\n    var acceptedType = type;\n    if (!acceptedType) {\n      acceptedType = acceptedTypes.join(', ').replace(/,([^,]+)$/, ', or$1');\n    }\n\n    var vowel = acceptedType.match(/^[aeiou]/i) ? 'n' : '';\n    this.fail('InvalidParameterType', 'Expected ' + context + ' to be a' +\n              vowel + ' ' + acceptedType);\n    return false;\n  },\n\n  validateNumber: function validateNumber(shape, value, context) {\n    if (value === null || value === undefined) return;\n    if (typeof value === 'string') {\n      var castedValue = parseFloat(value);\n      if (castedValue.toString() === value) value = castedValue;\n    }\n    if (this.validateType(value, context, ['number'])) {\n      this.validateRange(shape, value, context, 'numeric value');\n    }\n  },\n\n  validatePayload: function validatePayload(value, context) {\n    if (value === null || value === undefined) return;\n    if (typeof value === 'string') return;\n    if (value && typeof value.byteLength === 'number') return; // typed arrays\n    if (AWS.util.isNode()) { // special check for buffer/stream in Node.js\n      var Stream = AWS.util.stream.Stream;\n      if (AWS.util.Buffer.isBuffer(value) || value instanceof Stream) return;\n    } else {\n      if (typeof Blob !== void 0 && value instanceof Blob) return;\n    }\n\n    var types = ['Buffer', 'Stream', 'File', 'Blob', 'ArrayBuffer', 'DataView'];\n    if (value) {\n      for (var i = 0; i < types.length; i++) {\n        if (AWS.util.isType(value, types[i])) return;\n        if (AWS.util.typeName(value.constructor) === types[i]) return;\n      }\n    }\n\n    this.fail('InvalidParameterType', 'Expected ' + context + ' to be a ' +\n      'string, Buffer, Stream, Blob, or typed array object');\n  }\n});\n","var util =  require('../util');\nvar AWS = require('../core');\n\n/**\n * Prepend prefix defined by API model to endpoint that's already\n * constructed. This feature does not apply to operations using\n * endpoint discovery and can be disabled.\n * @api private\n */\nfunction populateHostPrefix(request)  {\n  var enabled = request.service.config.hostPrefixEnabled;\n  if (!enabled) return request;\n  var operationModel = request.service.api.operations[request.operation];\n  //don't marshal host prefix when operation has endpoint discovery traits\n  if (hasEndpointDiscover(request)) return request;\n  if (operationModel.endpoint && operationModel.endpoint.hostPrefix) {\n    var hostPrefixNotation = operationModel.endpoint.hostPrefix;\n    var hostPrefix = expandHostPrefix(hostPrefixNotation, request.params, operationModel.input);\n    prependEndpointPrefix(request.httpRequest.endpoint, hostPrefix);\n    validateHostname(request.httpRequest.endpoint.hostname);\n  }\n  return request;\n}\n\n/**\n * @api private\n */\nfunction hasEndpointDiscover(request) {\n  var api = request.service.api;\n  var operationModel = api.operations[request.operation];\n  var isEndpointOperation = api.endpointOperation && (api.endpointOperation === util.string.lowerFirst(operationModel.name));\n  return (operationModel.endpointDiscoveryRequired !== 'NULL' || isEndpointOperation === true);\n}\n\n/**\n * @api private\n */\nfunction expandHostPrefix(hostPrefixNotation, params, shape) {\n  util.each(shape.members, function(name, member) {\n    if (member.hostLabel === true) {\n      if (typeof params[name] !== 'string' || params[name] === '') {\n        throw util.error(new Error(), {\n          message: 'Parameter ' + name + ' should be a non-empty string.',\n          code: 'InvalidParameter'\n        });\n      }\n      var regex = new RegExp('\\\\{' + name + '\\\\}', 'g');\n      hostPrefixNotation = hostPrefixNotation.replace(regex, params[name]);\n    }\n  });\n  return hostPrefixNotation;\n}\n\n/**\n * @api private\n */\nfunction prependEndpointPrefix(endpoint, prefix) {\n  if (endpoint.host) {\n    endpoint.host = prefix + endpoint.host;\n  }\n  if (endpoint.hostname) {\n    endpoint.hostname = prefix + endpoint.hostname;\n  }\n}\n\n/**\n * @api private\n */\nfunction validateHostname(hostname) {\n  var labels = hostname.split('.');\n  //Reference: https://tools.ietf.org/html/rfc1123#section-2\n  var hostPattern = /^[a-zA-Z0-9]{1}$|^[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9]$/;\n  util.arrayEach(labels, function(label) {\n    if (!label.length || label.length < 1 || label.length > 63) {\n      throw util.error(new Error(), {\n        code: 'ValidationError',\n        message: 'Hostname label length should be between 1 to 63 characters, inclusive.'\n      });\n    }\n    if (!hostPattern.test(label)) {\n      throw AWS.util.error(new Error(),\n        {code: 'ValidationError', message: label + ' is not hostname compatible.'});\n    }\n  });\n}\n\nmodule.exports = {\n  populateHostPrefix: populateHostPrefix\n};\n","var util = require('../util');\nvar JsonBuilder = require('../json/builder');\nvar JsonParser = require('../json/parser');\nvar populateHostPrefix = require('./helpers').populateHostPrefix;\n\nfunction buildRequest(req) {\n  var httpRequest = req.httpRequest;\n  var api = req.service.api;\n  var target = api.targetPrefix + '.' + api.operations[req.operation].name;\n  var version = api.jsonVersion || '1.0';\n  var input = api.operations[req.operation].input;\n  var builder = new JsonBuilder();\n\n  if (version === 1) version = '1.0';\n  httpRequest.body = builder.build(req.params || {}, input);\n  httpRequest.headers['Content-Type'] = 'application/x-amz-json-' + version;\n  httpRequest.headers['X-Amz-Target'] = target;\n\n  populateHostPrefix(req);\n}\n\nfunction extractError(resp) {\n  var error = {};\n  var httpResponse = resp.httpResponse;\n\n  error.code = httpResponse.headers['x-amzn-errortype'] || 'UnknownError';\n  if (typeof error.code === 'string') {\n    error.code = error.code.split(':')[0];\n  }\n\n  if (httpResponse.body.length > 0) {\n    try {\n      var e = JSON.parse(httpResponse.body.toString());\n      var code = e.__type || e.code || e.Code;\n      if (code) {\n        error.code = code.split('#').pop();\n      }\n      if (error.code === 'RequestEntityTooLarge') {\n        error.message = 'Request body must be less than 1 MB';\n      } else {\n        error.message = (e.message || e.Message || null);\n      }\n    } catch (e) {\n      error.statusCode = httpResponse.statusCode;\n      error.message = httpResponse.statusMessage;\n    }\n  } else {\n    error.statusCode = httpResponse.statusCode;\n    error.message = httpResponse.statusCode.toString();\n  }\n\n  resp.error = util.error(new Error(), error);\n}\n\nfunction extractData(resp) {\n  var body = resp.httpResponse.body.toString() || '{}';\n  if (resp.request.service.config.convertResponseTypes === false) {\n    resp.data = JSON.parse(body);\n  } else {\n    var operation = resp.request.service.api.operations[resp.request.operation];\n    var shape = operation.output || {};\n    var parser = new JsonParser();\n    resp.data = parser.parse(body, shape);\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData\n};\n","var AWS = require('../core');\nvar util = require('../util');\nvar QueryParamSerializer = require('../query/query_param_serializer');\nvar Shape = require('../model/shape');\nvar populateHostPrefix = require('./helpers').populateHostPrefix;\n\nfunction buildRequest(req) {\n  var operation = req.service.api.operations[req.operation];\n  var httpRequest = req.httpRequest;\n  httpRequest.headers['Content-Type'] =\n    'application/x-www-form-urlencoded; charset=utf-8';\n  httpRequest.params = {\n    Version: req.service.api.apiVersion,\n    Action: operation.name\n  };\n\n  // convert the request parameters into a list of query params,\n  // e.g. Deeply.NestedParam.0.Name=value\n  var builder = new QueryParamSerializer();\n  builder.serialize(req.params, operation.input, function(name, value) {\n    httpRequest.params[name] = value;\n  });\n  httpRequest.body = util.queryParamsToString(httpRequest.params);\n\n  populateHostPrefix(req);\n}\n\nfunction extractError(resp) {\n  var data, body = resp.httpResponse.body.toString();\n  if (body.match('<UnknownOperationException')) {\n    data = {\n      Code: 'UnknownOperation',\n      Message: 'Unknown operation ' + resp.request.operation\n    };\n  } else {\n    try {\n      data = new AWS.XML.Parser().parse(body);\n    } catch (e) {\n      data = {\n        Code: resp.httpResponse.statusCode,\n        Message: resp.httpResponse.statusMessage\n      };\n    }\n  }\n\n  if (data.requestId && !resp.requestId) resp.requestId = data.requestId;\n  if (data.Errors) data = data.Errors;\n  if (data.Error) data = data.Error;\n  if (data.Code) {\n    resp.error = util.error(new Error(), {\n      code: data.Code,\n      message: data.Message\n    });\n  } else {\n    resp.error = util.error(new Error(), {\n      code: resp.httpResponse.statusCode,\n      message: null\n    });\n  }\n}\n\nfunction extractData(resp) {\n  var req = resp.request;\n  var operation = req.service.api.operations[req.operation];\n  var shape = operation.output || {};\n  var origRules = shape;\n\n  if (origRules.resultWrapper) {\n    var tmp = Shape.create({type: 'structure'});\n    tmp.members[origRules.resultWrapper] = shape;\n    tmp.memberNames = [origRules.resultWrapper];\n    util.property(shape, 'name', shape.resultWrapper);\n    shape = tmp;\n  }\n\n  var parser = new AWS.XML.Parser();\n\n  // TODO: Refactor XML Parser to parse RequestId from response.\n  if (shape && shape.members && !shape.members._XAMZRequestId) {\n    var requestIdShape = Shape.create(\n      { type: 'string' },\n      { api: { protocol: 'query' } },\n      'requestId'\n    );\n    shape.members._XAMZRequestId = requestIdShape;\n  }\n\n  var data = parser.parse(resp.httpResponse.body.toString(), shape);\n  resp.requestId = data._XAMZRequestId || data.requestId;\n\n  if (data._XAMZRequestId) delete data._XAMZRequestId;\n\n  if (origRules.resultWrapper) {\n    if (data[origRules.resultWrapper]) {\n      util.update(data, data[origRules.resultWrapper]);\n      delete data[origRules.resultWrapper];\n    }\n  }\n\n  resp.data = data;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData\n};\n","var util = require('../util');\nvar populateHostPrefix = require('./helpers').populateHostPrefix;\n\nfunction populateMethod(req) {\n  req.httpRequest.method = req.service.api.operations[req.operation].httpMethod;\n}\n\nfunction generateURI(endpointPath, operationPath, input, params) {\n  var uri = [endpointPath, operationPath].join('/');\n  uri = uri.replace(/\\/+/g, '/');\n\n  var queryString = {}, queryStringSet = false;\n  util.each(input.members, function (name, member) {\n    var paramValue = params[name];\n    if (paramValue === null || paramValue === undefined) return;\n    if (member.location === 'uri') {\n      var regex = new RegExp('\\\\{' + member.name + '(\\\\+)?\\\\}');\n      uri = uri.replace(regex, function(_, plus) {\n        var fn = plus ? util.uriEscapePath : util.uriEscape;\n        return fn(String(paramValue));\n      });\n    } else if (member.location === 'querystring') {\n      queryStringSet = true;\n\n      if (member.type === 'list') {\n        queryString[member.name] = paramValue.map(function(val) {\n          return util.uriEscape(member.member.toWireFormat(val).toString());\n        });\n      } else if (member.type === 'map') {\n        util.each(paramValue, function(key, value) {\n          if (Array.isArray(value)) {\n            queryString[key] = value.map(function(val) {\n              return util.uriEscape(String(val));\n            });\n          } else {\n            queryString[key] = util.uriEscape(String(value));\n          }\n        });\n      } else {\n        queryString[member.name] = util.uriEscape(member.toWireFormat(paramValue).toString());\n      }\n    }\n  });\n\n  if (queryStringSet) {\n    uri += (uri.indexOf('?') >= 0 ? '&' : '?');\n    var parts = [];\n    util.arrayEach(Object.keys(queryString).sort(), function(key) {\n      if (!Array.isArray(queryString[key])) {\n        queryString[key] = [queryString[key]];\n      }\n      for (var i = 0; i < queryString[key].length; i++) {\n        parts.push(util.uriEscape(String(key)) + '=' + queryString[key][i]);\n      }\n    });\n    uri += parts.join('&');\n  }\n\n  return uri;\n}\n\nfunction populateURI(req) {\n  var operation = req.service.api.operations[req.operation];\n  var input = operation.input;\n\n  var uri = generateURI(req.httpRequest.endpoint.path, operation.httpPath, input, req.params);\n  req.httpRequest.path = uri;\n}\n\nfunction populateHeaders(req) {\n  var operation = req.service.api.operations[req.operation];\n  util.each(operation.input.members, function (name, member) {\n    var value = req.params[name];\n    if (value === null || value === undefined) return;\n\n    if (member.location === 'headers' && member.type === 'map') {\n      util.each(value, function(key, memberValue) {\n        req.httpRequest.headers[member.name + key] = memberValue;\n      });\n    } else if (member.location === 'header') {\n      value = member.toWireFormat(value).toString();\n      if (member.isJsonValue) {\n        value = util.base64.encode(value);\n      }\n      req.httpRequest.headers[member.name] = value;\n    }\n  });\n}\n\nfunction buildRequest(req) {\n  populateMethod(req);\n  populateURI(req);\n  populateHeaders(req);\n  populateHostPrefix(req);\n}\n\nfunction extractError() {\n}\n\nfunction extractData(resp) {\n  var req = resp.request;\n  var data = {};\n  var r = resp.httpResponse;\n  var operation = req.service.api.operations[req.operation];\n  var output = operation.output;\n\n  // normalize headers names to lower-cased keys for matching\n  var headers = {};\n  util.each(r.headers, function (k, v) {\n    headers[k.toLowerCase()] = v;\n  });\n\n  util.each(output.members, function(name, member) {\n    var header = (member.name || name).toLowerCase();\n    if (member.location === 'headers' && member.type === 'map') {\n      data[name] = {};\n      var location = member.isLocationName ? member.name : '';\n      var pattern = new RegExp('^' + location + '(.+)', 'i');\n      util.each(r.headers, function (k, v) {\n        var result = k.match(pattern);\n        if (result !== null) {\n          data[name][result[1]] = v;\n        }\n      });\n    } else if (member.location === 'header') {\n      if (headers[header] !== undefined) {\n        var value = member.isJsonValue ?\n          util.base64.decode(headers[header]) :\n          headers[header];\n        data[name] = member.toType(value);\n      }\n    } else if (member.location === 'statusCode') {\n      data[name] = parseInt(r.statusCode, 10);\n    }\n  });\n\n  resp.data = data;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData,\n  generateURI: generateURI\n};\n","var util = require('../util');\nvar Rest = require('./rest');\nvar Json = require('./json');\nvar JsonBuilder = require('../json/builder');\nvar JsonParser = require('../json/parser');\n\nfunction populateBody(req) {\n  var builder = new JsonBuilder();\n  var input = req.service.api.operations[req.operation].input;\n\n  if (input.payload) {\n    var params = {};\n    var payloadShape = input.members[input.payload];\n    params = req.params[input.payload];\n    if (params === undefined) return;\n\n    if (payloadShape.type === 'structure') {\n      req.httpRequest.body = builder.build(params, payloadShape);\n      applyContentTypeHeader(req);\n    } else { // non-JSON payload\n      req.httpRequest.body = params;\n      if (payloadShape.type === 'binary' || payloadShape.isStreaming) {\n        applyContentTypeHeader(req, true);\n      }\n    }\n  } else {\n    var body = builder.build(req.params, input);\n    if (body !== '{}' || req.httpRequest.method !== 'GET') { //don't send empty body for GET method\n      req.httpRequest.body = body;\n    }\n    applyContentTypeHeader(req);\n  }\n}\n\nfunction applyContentTypeHeader(req, isBinary) {\n  var operation = req.service.api.operations[req.operation];\n  var input = operation.input;\n\n  if (!req.httpRequest.headers['Content-Type']) {\n    var type = isBinary ? 'binary/octet-stream' : 'application/json';\n    req.httpRequest.headers['Content-Type'] = type;\n  }\n}\n\nfunction buildRequest(req) {\n  Rest.buildRequest(req);\n\n  // never send body payload on HEAD/DELETE\n  if (['HEAD', 'DELETE'].indexOf(req.httpRequest.method) < 0) {\n    populateBody(req);\n  }\n}\n\nfunction extractError(resp) {\n  Json.extractError(resp);\n}\n\nfunction extractData(resp) {\n  Rest.extractData(resp);\n\n  var req = resp.request;\n  var operation = req.service.api.operations[req.operation];\n  var rules = req.service.api.operations[req.operation].output || {};\n  var parser;\n  var hasEventOutput = operation.hasEventOutput;\n\n  if (rules.payload) {\n    var payloadMember = rules.members[rules.payload];\n    var body = resp.httpResponse.body;\n    if (payloadMember.isEventStream) {\n      parser = new JsonParser();\n      resp.data[payload] = util.createEventStream(\n        AWS.HttpClient.streamsApiVersion === 2 ? resp.httpResponse.stream : body,\n        parser,\n        payloadMember\n      );\n    } else if (payloadMember.type === 'structure' || payloadMember.type === 'list') {\n      var parser = new JsonParser();\n      resp.data[rules.payload] = parser.parse(body, payloadMember);\n    } else if (payloadMember.type === 'binary' || payloadMember.isStreaming) {\n      resp.data[rules.payload] = body;\n    } else {\n      resp.data[rules.payload] = payloadMember.toType(body);\n    }\n  } else {\n    var data = resp.data;\n    Json.extractData(resp);\n    resp.data = util.merge(data, resp.data);\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData\n};\n","var AWS = require('../core');\nvar util = require('../util');\nvar Rest = require('./rest');\n\nfunction populateBody(req) {\n  var input = req.service.api.operations[req.operation].input;\n  var builder = new AWS.XML.Builder();\n  var params = req.params;\n\n  var payload = input.payload;\n  if (payload) {\n    var payloadMember = input.members[payload];\n    params = params[payload];\n    if (params === undefined) return;\n\n    if (payloadMember.type === 'structure') {\n      var rootElement = payloadMember.name;\n      req.httpRequest.body = builder.toXML(params, payloadMember, rootElement, true);\n    } else { // non-xml payload\n      req.httpRequest.body = params;\n    }\n  } else {\n    req.httpRequest.body = builder.toXML(params, input, input.name ||\n      input.shape || util.string.upperFirst(req.operation) + 'Request');\n  }\n}\n\nfunction buildRequest(req) {\n  Rest.buildRequest(req);\n\n  // never send body payload on GET/HEAD\n  if (['GET', 'HEAD'].indexOf(req.httpRequest.method) < 0) {\n    populateBody(req);\n  }\n}\n\nfunction extractError(resp) {\n  Rest.extractError(resp);\n\n  var data;\n  try {\n    data = new AWS.XML.Parser().parse(resp.httpResponse.body.toString());\n  } catch (e) {\n    data = {\n      Code: resp.httpResponse.statusCode,\n      Message: resp.httpResponse.statusMessage\n    };\n  }\n\n  if (data.Errors) data = data.Errors;\n  if (data.Error) data = data.Error;\n  if (data.Code) {\n    resp.error = util.error(new Error(), {\n      code: data.Code,\n      message: data.Message\n    });\n  } else {\n    resp.error = util.error(new Error(), {\n      code: resp.httpResponse.statusCode,\n      message: null\n    });\n  }\n}\n\nfunction extractData(resp) {\n  Rest.extractData(resp);\n\n  var parser;\n  var req = resp.request;\n  var body = resp.httpResponse.body;\n  var operation = req.service.api.operations[req.operation];\n  var output = operation.output;\n\n  var hasEventOutput = operation.hasEventOutput;\n\n  var payload = output.payload;\n  if (payload) {\n    var payloadMember = output.members[payload];\n    if (payloadMember.isEventStream) {\n      parser = new AWS.XML.Parser();\n      resp.data[payload] = util.createEventStream(\n        AWS.HttpClient.streamsApiVersion === 2 ? resp.httpResponse.stream : resp.httpResponse.body,\n        parser,\n        payloadMember\n      );\n    } else if (payloadMember.type === 'structure') {\n      parser = new AWS.XML.Parser();\n      resp.data[payload] = parser.parse(body.toString(), payloadMember);\n    } else if (payloadMember.type === 'binary' || payloadMember.isStreaming) {\n      resp.data[payload] = body;\n    } else {\n      resp.data[payload] = payloadMember.toType(body);\n    }\n  } else if (body.length > 0) {\n    parser = new AWS.XML.Parser();\n    var data = parser.parse(body.toString(), output);\n    util.update(resp.data, data);\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData\n};\n","var AWS = require('../core');\n\n/**\n * Resolve client-side monitoring configuration from either environmental variables\n * or shared config file. Configurations from environmental variables have higher priority\n * than those from shared config file. The resolver will try to read the shared config file\n * no matter whether the AWS_SDK_LOAD_CONFIG variable is set.\n * @api private\n */\nfunction resolveMonitoringConfig() {\n  var config = {\n    port: undefined,\n    clientId: undefined,\n    enabled: undefined,\n    host: undefined\n  };\n  if (fromEnvironment(config) || fromConfigFile(config)) return toJSType(config);\n  return toJSType(config);\n}\n\n/**\n * Resolve configurations from environmental variables.\n * @param {object} client side monitoring config object needs to be resolved\n * @returns {boolean} whether resolving configurations is done\n * @api private\n */\nfunction fromEnvironment(config) {\n  config.port = config.port || process.env.AWS_CSM_PORT;\n  config.enabled = config.enabled || process.env.AWS_CSM_ENABLED;\n  config.clientId = config.clientId || process.env.AWS_CSM_CLIENT_ID;\n  config.host = config.host || process.env.AWS_CSM_HOST;\n  return config.port && config.enabled && config.clientId && config.host ||\n    ['false', '0'].indexOf(config.enabled) >= 0; //no need to read shared config file if explicitely disabled\n}\n\n/**\n * Resolve cofigurations from shared config file with specified role name\n * @param {object} client side monitoring config object needs to be resolved\n * @returns {boolean} whether resolving configurations is done\n * @api private\n */\nfunction fromConfigFile(config) {\n  var sharedFileConfig;\n  try {\n    var configFile = AWS.util.iniLoader.loadFrom({\n      isConfig: true,\n      filename: process.env[AWS.util.sharedConfigFileEnv]\n    });\n    var sharedFileConfig = configFile[\n      process.env.AWS_PROFILE || AWS.util.defaultProfile\n    ];\n  } catch (err) {\n    return false;\n  }\n  if (!sharedFileConfig) return config;\n  config.port = config.port || sharedFileConfig.csm_port;\n  config.enabled = config.enabled || sharedFileConfig.csm_enabled;\n  config.clientId = config.clientId || sharedFileConfig.csm_client_id;\n  config.host = config.host || sharedFileConfig.csm_host;\n  return config.port && config.enabled && config.clientId && config.host;\n}\n\n/**\n * Transfer the resolved configuration value to proper types: port as number, enabled\n * as boolean and clientId as string. The 'enabled' flag is valued to false when set\n * to 'false' or '0'.\n * @param {object} resolved client side monitoring config\n * @api private\n */\nfunction toJSType(config) {\n    //config.XXX is either undefined or string\n  var falsyNotations = ['false', '0', undefined];\n  if (!config.enabled || falsyNotations.indexOf(config.enabled.toLowerCase()) >= 0) {\n    config.enabled = false;\n  } else {\n    config.enabled = true;\n  }\n  config.port = config.port ? parseInt(config.port, 10) : undefined;\n  return config;\n}\n\nmodule.exports = resolveMonitoringConfig;\n","var util = require('../core').util;\nvar dgram = require('dgram');\nvar stringToBuffer = util.buffer.toBuffer;\n\nvar MAX_MESSAGE_SIZE = 1024 * 8; // 8 KB\n\n/**\n * Publishes metrics via udp.\n * @param {object} options Paramters for Publisher constructor\n * @param {number} [options.port = 31000] Port number\n * @param {string} [options.clientId = ''] Client Identifier\n * @param {boolean} [options.enabled = false] enable sending metrics datagram\n * @api private\n */\nfunction Publisher(options) {\n    // handle configuration\n    options = options || {};\n    this.enabled = options.enabled || false;\n    this.port = options.port || 31000;\n    this.clientId = options.clientId || '';\n    this.address = options.host || '127.0.0.1';\n    if (this.clientId.length > 255) {\n        // ClientId has a max length of 255\n        this.clientId = this.clientId.substr(0, 255);\n    }\n    this.messagesInFlight = 0;\n}\n\nPublisher.prototype.fieldsToTrim = {\n    UserAgent: 256,\n    SdkException: 128,\n    SdkExceptionMessage: 512,\n    AwsException: 128,\n    AwsExceptionMessage: 512,\n    FinalSdkException: 128,\n    FinalSdkExceptionMessage: 512,\n    FinalAwsException: 128,\n    FinalAwsExceptionMessage: 512\n\n};\n\n/**\n * Trims fields that have a specified max length.\n * @param {object} event ApiCall or ApiCallAttempt event.\n * @returns {object}\n * @api private\n */\nPublisher.prototype.trimFields = function(event) {\n    var trimmableFields = Object.keys(this.fieldsToTrim);\n    for (var i = 0, iLen = trimmableFields.length; i < iLen; i++) {\n        var field = trimmableFields[i];\n        if (event.hasOwnProperty(field)) {\n            var maxLength = this.fieldsToTrim[field];\n            var value = event[field];\n            if (value && value.length > maxLength) {\n                event[field] = value.substr(0, maxLength);\n            }\n        }\n    }\n    return event;\n};\n\n/**\n * Handles ApiCall and ApiCallAttempt events.\n * @param {Object} event apiCall or apiCallAttempt event.\n * @api private\n */\nPublisher.prototype.eventHandler = function(event) {\n    // set the clientId\n    event.ClientId = this.clientId;\n\n    this.trimFields(event);\n\n    var message = stringToBuffer(JSON.stringify(event));\n    if (!this.enabled || message.length > MAX_MESSAGE_SIZE) {\n        // drop the message if publisher not enabled or it is too large\n        return;\n    }\n\n    this.publishDatagram(message);\n};\n\n/**\n * Publishes message to an agent.\n * @param {Buffer} message JSON message to send to agent.\n * @api private\n */\nPublisher.prototype.publishDatagram = function(message) {\n    var self = this;\n    var client = this.getClient();\n\n    this.messagesInFlight++;\n    this.client.send(message, 0, message.length, this.port, this.address, function(err, bytes) {\n        if (--self.messagesInFlight <= 0) {\n            // destroy existing client so the event loop isn't kept open\n            self.destroyClient();\n        }\n    });\n};\n\n/**\n * Returns an existing udp socket, or creates one if it doesn't already exist.\n * @api private\n */\nPublisher.prototype.getClient = function() {\n    if (!this.client) {\n        this.client = dgram.createSocket('udp4');\n    }\n    return this.client;\n};\n\n/**\n * Destroys the udp socket.\n * @api private\n */\nPublisher.prototype.destroyClient = function() {\n    if (this.client) {\n        this.client.close();\n        this.client = void 0;\n    }\n};\n\nmodule.exports = {\n    Publisher: Publisher\n};\n","var util = require('../util');\n\nfunction QueryParamSerializer() {\n}\n\nQueryParamSerializer.prototype.serialize = function(params, shape, fn) {\n  serializeStructure('', params, shape, fn);\n};\n\nfunction ucfirst(shape) {\n  if (shape.isQueryName || shape.api.protocol !== 'ec2') {\n    return shape.name;\n  } else {\n    return shape.name[0].toUpperCase() + shape.name.substr(1);\n  }\n}\n\nfunction serializeStructure(prefix, struct, rules, fn) {\n  util.each(rules.members, function(name, member) {\n    var value = struct[name];\n    if (value === null || value === undefined) return;\n\n    var memberName = ucfirst(member);\n    memberName = prefix ? prefix + '.' + memberName : memberName;\n    serializeMember(memberName, value, member, fn);\n  });\n}\n\nfunction serializeMap(name, map, rules, fn) {\n  var i = 1;\n  util.each(map, function (key, value) {\n    var prefix = rules.flattened ? '.' : '.entry.';\n    var position = prefix + (i++) + '.';\n    var keyName = position + (rules.key.name || 'key');\n    var valueName = position + (rules.value.name || 'value');\n    serializeMember(name + keyName, key, rules.key, fn);\n    serializeMember(name + valueName, value, rules.value, fn);\n  });\n}\n\nfunction serializeList(name, list, rules, fn) {\n  var memberRules = rules.member || {};\n\n  if (list.length === 0) {\n    fn.call(this, name, null);\n    return;\n  }\n\n  util.arrayEach(list, function (v, n) {\n    var suffix = '.' + (n + 1);\n    if (rules.api.protocol === 'ec2') {\n      // Do nothing for EC2\n      suffix = suffix + ''; // make linter happy\n    } else if (rules.flattened) {\n      if (memberRules.name) {\n        var parts = name.split('.');\n        parts.pop();\n        parts.push(ucfirst(memberRules));\n        name = parts.join('.');\n      }\n    } else {\n      suffix = '.' + (memberRules.name ? memberRules.name : 'member') + suffix;\n    }\n    serializeMember(name + suffix, v, memberRules, fn);\n  });\n}\n\nfunction serializeMember(name, value, rules, fn) {\n  if (value === null || value === undefined) return;\n  if (rules.type === 'structure') {\n    serializeStructure(name, value, rules, fn);\n  } else if (rules.type === 'list') {\n    serializeList(name, value, rules, fn);\n  } else if (rules.type === 'map') {\n    serializeMap(name, value, rules, fn);\n  } else {\n    fn(name, rules.toWireFormat(value).toString());\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = QueryParamSerializer;\n","module.exports = {\n  //provide realtime clock for performance measurement\n  now: function now() {\n    var second = process.hrtime();\n    return second[0] * 1000 + (second[1] / 1000000);\n  }\n};\n","var util = require('./util');\nvar regionConfig = require('./region_config_data.json');\n\nfunction generateRegionPrefix(region) {\n  if (!region) return null;\n\n  var parts = region.split('-');\n  if (parts.length < 3) return null;\n  return parts.slice(0, parts.length - 2).join('-') + '-*';\n}\n\nfunction derivedKeys(service) {\n  var region = service.config.region;\n  var regionPrefix = generateRegionPrefix(region);\n  var endpointPrefix = service.api.endpointPrefix;\n\n  return [\n    [region, endpointPrefix],\n    [regionPrefix, endpointPrefix],\n    [region, '*'],\n    [regionPrefix, '*'],\n    ['*', endpointPrefix],\n    ['*', '*']\n  ].map(function(item) {\n    return item[0] && item[1] ? item.join('/') : null;\n  });\n}\n\nfunction applyConfig(service, config) {\n  util.each(config, function(key, value) {\n    if (key === 'globalEndpoint') return;\n    if (service.config[key] === undefined || service.config[key] === null) {\n      service.config[key] = value;\n    }\n  });\n}\n\nfunction configureEndpoint(service) {\n  var keys = derivedKeys(service);\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!key) continue;\n\n    if (Object.prototype.hasOwnProperty.call(regionConfig.rules, key)) {\n      var config = regionConfig.rules[key];\n      if (typeof config === 'string') {\n        config = regionConfig.patterns[config];\n      }\n\n      // set dualstack endpoint\n      if (service.config.useDualstack && util.isDualstackAvailable(service)) {\n        config = util.copy(config);\n        config.endpoint = config.endpoint.replace(\n          /{service}\\.({region}\\.)?/,\n          '{service}.dualstack.{region}.'\n        );\n      }\n\n      // set global endpoint\n      service.isGlobalEndpoint = !!config.globalEndpoint;\n      if (config.signingRegion) {\n        service.signingRegion = config.signingRegion;\n      }\n\n      // signature version\n      if (!config.signatureVersion) config.signatureVersion = 'v4';\n\n      // merge config\n      applyConfig(service, config);\n      return;\n    }\n  }\n}\n\nfunction getEndpointSuffix(region) {\n  var regionRegexes = {\n    '^(us|eu|ap|sa|ca|me)\\\\-\\\\w+\\\\-\\\\d+$': 'amazonaws.com',\n    '^cn\\\\-\\\\w+\\\\-\\\\d+$': 'amazonaws.com.cn',\n    '^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$': 'amazonaws.com',\n    '^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$': 'c2s.ic.gov',\n    '^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$': 'sc2s.sgov.gov'\n  };\n  var defaultSuffix = 'amazonaws.com';\n  var regexes = Object.keys(regionRegexes);\n  for (var i = 0; i < regexes.length; i++) {\n    var regionPattern = RegExp(regexes[i]);\n    var dnsSuffix = regionRegexes[regexes[i]];\n    if (regionPattern.test(region)) return dnsSuffix;\n  }\n  return defaultSuffix;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  configureEndpoint: configureEndpoint,\n  getEndpointSuffix: getEndpointSuffix\n};\n","var AWS = require('./core');\nvar AcceptorStateMachine = require('./state_machine');\nvar inherit = AWS.util.inherit;\nvar domain = AWS.util.domain;\nvar jmespath = require('jmespath');\n\n/**\n * @api private\n */\nvar hardErrorStates = {success: 1, error: 1, complete: 1};\n\nfunction isTerminalState(machine) {\n  return Object.prototype.hasOwnProperty.call(hardErrorStates, machine._asm.currentState);\n}\n\nvar fsm = new AcceptorStateMachine();\nfsm.setupStates = function() {\n  var transition = function(_, done) {\n    var self = this;\n    self._haltHandlersOnError = false;\n\n    self.emit(self._asm.currentState, function(err) {\n      if (err) {\n        if (isTerminalState(self)) {\n          if (domain && self.domain instanceof domain.Domain) {\n            err.domainEmitter = self;\n            err.domain = self.domain;\n            err.domainThrown = false;\n            self.domain.emit('error', err);\n          } else {\n            throw err;\n          }\n        } else {\n          self.response.error = err;\n          done(err);\n        }\n      } else {\n        done(self.response.error);\n      }\n    });\n\n  };\n\n  this.addState('validate', 'build', 'error', transition);\n  this.addState('build', 'afterBuild', 'restart', transition);\n  this.addState('afterBuild', 'sign', 'restart', transition);\n  this.addState('sign', 'send', 'retry', transition);\n  this.addState('retry', 'afterRetry', 'afterRetry', transition);\n  this.addState('afterRetry', 'sign', 'error', transition);\n  this.addState('send', 'validateResponse', 'retry', transition);\n  this.addState('validateResponse', 'extractData', 'extractError', transition);\n  this.addState('extractError', 'extractData', 'retry', transition);\n  this.addState('extractData', 'success', 'retry', transition);\n  this.addState('restart', 'build', 'error', transition);\n  this.addState('success', 'complete', 'complete', transition);\n  this.addState('error', 'complete', 'complete', transition);\n  this.addState('complete', null, null, transition);\n};\nfsm.setupStates();\n\n/**\n * ## Asynchronous Requests\n *\n * All requests made through the SDK are asynchronous and use a\n * callback interface. Each service method that kicks off a request\n * returns an `AWS.Request` object that you can use to register\n * callbacks.\n *\n * For example, the following service method returns the request\n * object as \"request\", which can be used to register callbacks:\n *\n * ```javascript\n * // request is an AWS.Request object\n * var request = ec2.describeInstances();\n *\n * // register callbacks on request to retrieve response data\n * request.on('success', function(response) {\n *   console.log(response.data);\n * });\n * ```\n *\n * When a request is ready to be sent, the {send} method should\n * be called:\n *\n * ```javascript\n * request.send();\n * ```\n *\n * Since registered callbacks may or may not be idempotent, requests should only\n * be sent once. To perform the same operation multiple times, you will need to\n * create multiple request objects, each with its own registered callbacks.\n *\n * ## Removing Default Listeners for Events\n *\n * Request objects are built with default listeners for the various events,\n * depending on the service type. In some cases, you may want to remove\n * some built-in listeners to customize behaviour. Doing this requires\n * access to the built-in listener functions, which are exposed through\n * the {AWS.EventListeners.Core} namespace. For instance, you may\n * want to customize the HTTP handler used when sending a request. In this\n * case, you can remove the built-in listener associated with the 'send'\n * event, the {AWS.EventListeners.Core.SEND} listener and add your own.\n *\n * ## Multiple Callbacks and Chaining\n *\n * You can register multiple callbacks on any request object. The\n * callbacks can be registered for different events, or all for the\n * same event. In addition, you can chain callback registration, for\n * example:\n *\n * ```javascript\n * request.\n *   on('success', function(response) {\n *     console.log(\"Success!\");\n *   }).\n *   on('error', function(error, response) {\n *     console.log(\"Error!\");\n *   }).\n *   on('complete', function(response) {\n *     console.log(\"Always!\");\n *   }).\n *   send();\n * ```\n *\n * The above example will print either \"Success! Always!\", or \"Error! Always!\",\n * depending on whether the request succeeded or not.\n *\n * @!attribute httpRequest\n *   @readonly\n *   @!group HTTP Properties\n *   @return [AWS.HttpRequest] the raw HTTP request object\n *     containing request headers and body information\n *     sent by the service.\n *\n * @!attribute startTime\n *   @readonly\n *   @!group Operation Properties\n *   @return [Date] the time that the request started\n *\n * @!group Request Building Events\n *\n * @!event validate(request)\n *   Triggered when a request is being validated. Listeners\n *   should throw an error if the request should not be sent.\n *   @param request [Request] the request object being sent\n *   @see AWS.EventListeners.Core.VALIDATE_CREDENTIALS\n *   @see AWS.EventListeners.Core.VALIDATE_REGION\n *   @example Ensuring that a certain parameter is set before sending a request\n *     var req = s3.putObject(params);\n *     req.on('validate', function() {\n *       if (!req.params.Body.match(/^Hello\\s/)) {\n *         throw new Error('Body must start with \"Hello \"');\n *       }\n *     });\n *     req.send(function(err, data) { ... });\n *\n * @!event build(request)\n *   Triggered when the request payload is being built. Listeners\n *   should fill the necessary information to send the request\n *   over HTTP.\n *   @param (see AWS.Request~validate)\n *   @example Add a custom HTTP header to a request\n *     var req = s3.putObject(params);\n *     req.on('build', function() {\n *       req.httpRequest.headers['Custom-Header'] = 'value';\n *     });\n *     req.send(function(err, data) { ... });\n *\n * @!event sign(request)\n *   Triggered when the request is being signed. Listeners should\n *   add the correct authentication headers and/or adjust the body,\n *   depending on the authentication mechanism being used.\n *   @param (see AWS.Request~validate)\n *\n * @!group Request Sending Events\n *\n * @!event send(response)\n *   Triggered when the request is ready to be sent. Listeners\n *   should call the underlying transport layer to initiate\n *   the sending of the request.\n *   @param response [Response] the response object\n *   @context [Request] the request object that was sent\n *   @see AWS.EventListeners.Core.SEND\n *\n * @!event retry(response)\n *   Triggered when a request failed and might need to be retried or redirected.\n *   If the response is retryable, the listener should set the\n *   `response.error.retryable` property to `true`, and optionally set\n *   `response.error.retryDelay` to the millisecond delay for the next attempt.\n *   In the case of a redirect, `response.error.redirect` should be set to\n *   `true` with `retryDelay` set to an optional delay on the next request.\n *\n *   If a listener decides that a request should not be retried,\n *   it should set both `retryable` and `redirect` to false.\n *\n *   Note that a retryable error will be retried at most\n *   {AWS.Config.maxRetries} times (based on the service object's config).\n *   Similarly, a request that is redirected will only redirect at most\n *   {AWS.Config.maxRedirects} times.\n *\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *   @example Adding a custom retry for a 404 response\n *     request.on('retry', function(response) {\n *       // this resource is not yet available, wait 10 seconds to get it again\n *       if (response.httpResponse.statusCode === 404 && response.error) {\n *         response.error.retryable = true;   // retry this error\n *         response.error.retryDelay = 10000; // wait 10 seconds\n *       }\n *     });\n *\n * @!group Data Parsing Events\n *\n * @!event extractError(response)\n *   Triggered on all non-2xx requests so that listeners can extract\n *   error details from the response body. Listeners to this event\n *   should set the `response.error` property.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!event extractData(response)\n *   Triggered in successful requests to allow listeners to\n *   de-serialize the response body into `response.data`.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!group Completion Events\n *\n * @!event success(response)\n *   Triggered when the request completed successfully.\n *   `response.data` will contain the response data and\n *   `response.error` will be null.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!event error(error, response)\n *   Triggered when an error occurs at any point during the\n *   request. `response.error` will contain details about the error\n *   that occurred. `response.data` will be null.\n *   @param error [Error] the error object containing details about\n *     the error that occurred.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!event complete(response)\n *   Triggered whenever a request cycle completes. `response.error`\n *   should be checked, since the request may have failed.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!group HTTP Events\n *\n * @!event httpHeaders(statusCode, headers, response, statusMessage)\n *   Triggered when headers are sent by the remote server\n *   @param statusCode [Integer] the HTTP response code\n *   @param headers [map<String,String>] the response headers\n *   @param (see AWS.Request~send)\n *   @param statusMessage [String] A status message corresponding to the HTTP\n *                                 response code\n *   @context (see AWS.Request~send)\n *\n * @!event httpData(chunk, response)\n *   Triggered when data is sent by the remote server\n *   @param chunk [Buffer] the buffer data containing the next data chunk\n *     from the server\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *   @see AWS.EventListeners.Core.HTTP_DATA\n *\n * @!event httpUploadProgress(progress, response)\n *   Triggered when the HTTP request has uploaded more data\n *   @param progress [map] An object containing the `loaded` and `total` bytes\n *     of the request.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *   @note This event will not be emitted in Node.js 0.8.x.\n *\n * @!event httpDownloadProgress(progress, response)\n *   Triggered when the HTTP request has downloaded more data\n *   @param progress [map] An object containing the `loaded` and `total` bytes\n *     of the request.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *   @note This event will not be emitted in Node.js 0.8.x.\n *\n * @!event httpError(error, response)\n *   Triggered when the HTTP request failed\n *   @param error [Error] the error object that was thrown\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!event httpDone(response)\n *   Triggered when the server is finished sending data\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @see AWS.Response\n */\nAWS.Request = inherit({\n\n  /**\n   * Creates a request for an operation on a given service with\n   * a set of input parameters.\n   *\n   * @param service [AWS.Service] the service to perform the operation on\n   * @param operation [String] the operation to perform on the service\n   * @param params [Object] parameters to send to the operation.\n   *   See the operation's documentation for the format of the\n   *   parameters.\n   */\n  constructor: function Request(service, operation, params) {\n    var endpoint = service.endpoint;\n    var region = service.config.region;\n    var customUserAgent = service.config.customUserAgent;\n\n    if (service.isGlobalEndpoint) {\n      if (service.signingRegion) {\n        region = service.signingRegion;\n      } else {\n        region = 'us-east-1';\n      }\n    }\n\n    this.domain = domain && domain.active;\n    this.service = service;\n    this.operation = operation;\n    this.params = params || {};\n    this.httpRequest = new AWS.HttpRequest(endpoint, region);\n    this.httpRequest.appendToUserAgent(customUserAgent);\n    this.startTime = service.getSkewCorrectedDate();\n\n    this.response = new AWS.Response(this);\n    this._asm = new AcceptorStateMachine(fsm.states, 'validate');\n    this._haltHandlersOnError = false;\n\n    AWS.SequentialExecutor.call(this);\n    this.emit = this.emitEvent;\n  },\n\n  /**\n   * @!group Sending a Request\n   */\n\n  /**\n   * @overload send(callback = null)\n   *   Sends the request object.\n   *\n   *   @callback callback function(err, data)\n   *     If a callback is supplied, it is called when a response is returned\n   *     from the service.\n   *     @context [AWS.Request] the request object being sent.\n   *     @param err [Error] the error object returned from the request.\n   *       Set to `null` if the request is successful.\n   *     @param data [Object] the de-serialized data returned from\n   *       the request. Set to `null` if a request error occurs.\n   *   @example Sending a request with a callback\n   *     request = s3.putObject({Bucket: 'bucket', Key: 'key'});\n   *     request.send(function(err, data) { console.log(err, data); });\n   *   @example Sending a request with no callback (using event handlers)\n   *     request = s3.putObject({Bucket: 'bucket', Key: 'key'});\n   *     request.on('complete', function(response) { ... }); // register a callback\n   *     request.send();\n   */\n  send: function send(callback) {\n    if (callback) {\n      // append to user agent\n      this.httpRequest.appendToUserAgent('callback');\n      this.on('complete', function (resp) {\n        callback.call(resp, resp.error, resp.data);\n      });\n    }\n    this.runTo();\n\n    return this.response;\n  },\n\n  /**\n   * @!method  promise()\n   *   Sends the request and returns a 'thenable' promise.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @callback fulfilledCallback function(data)\n   *     Called if the promise is fulfilled.\n   *     @param data [Object] the de-serialized data returned from the request.\n   *   @callback rejectedCallback function(error)\n   *     Called if the promise is rejected.\n   *     @param error [Error] the error object returned from the request.\n   *   @return [Promise] A promise that represents the state of the request.\n   *   @example Sending a request using promises.\n   *     var request = s3.putObject({Bucket: 'bucket', Key: 'key'});\n   *     var result = request.promise();\n   *     result.then(function(data) { ... }, function(error) { ... });\n   */\n\n  /**\n   * @api private\n   */\n  build: function build(callback) {\n    return this.runTo('send', callback);\n  },\n\n  /**\n   * @api private\n   */\n  runTo: function runTo(state, done) {\n    this._asm.runTo(state, done, this);\n    return this;\n  },\n\n  /**\n   * Aborts a request, emitting the error and complete events.\n   *\n   * @!macro nobrowser\n   * @example Aborting a request after sending\n   *   var params = {\n   *     Bucket: 'bucket', Key: 'key',\n   *     Body: Buffer.alloc(1024 * 1024 * 5) // 5MB payload\n   *   };\n   *   var request = s3.putObject(params);\n   *   request.send(function (err, data) {\n   *     if (err) console.log(\"Error:\", err.code, err.message);\n   *     else console.log(data);\n   *   });\n   *\n   *   // abort request in 1 second\n   *   setTimeout(request.abort.bind(request), 1000);\n   *\n   *   // prints \"Error: RequestAbortedError Request aborted by user\"\n   * @return [AWS.Request] the same request object, for chaining.\n   * @since v1.4.0\n   */\n  abort: function abort() {\n    this.removeAllListeners('validateResponse');\n    this.removeAllListeners('extractError');\n    this.on('validateResponse', function addAbortedError(resp) {\n      resp.error = AWS.util.error(new Error('Request aborted by user'), {\n         code: 'RequestAbortedError', retryable: false\n      });\n    });\n\n    if (this.httpRequest.stream && !this.httpRequest.stream.didCallback) { // abort HTTP stream\n      this.httpRequest.stream.abort();\n      if (this.httpRequest._abortCallback) {\n         this.httpRequest._abortCallback();\n      } else {\n        this.removeAllListeners('send'); // haven't sent yet, so let's not\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Iterates over each page of results given a pageable request, calling\n   * the provided callback with each page of data. After all pages have been\n   * retrieved, the callback is called with `null` data.\n   *\n   * @note This operation can generate multiple requests to a service.\n   * @example Iterating over multiple pages of objects in an S3 bucket\n   *   var pages = 1;\n   *   s3.listObjects().eachPage(function(err, data) {\n   *     if (err) return;\n   *     console.log(\"Page\", pages++);\n   *     console.log(data);\n   *   });\n   * @example Iterating over multiple pages with an asynchronous callback\n   *   s3.listObjects(params).eachPage(function(err, data, done) {\n   *     doSomethingAsyncAndOrExpensive(function() {\n   *       // The next page of results isn't fetched until done is called\n   *       done();\n   *     });\n   *   });\n   * @callback callback function(err, data, [doneCallback])\n   *   Called with each page of resulting data from the request. If the\n   *   optional `doneCallback` is provided in the function, it must be called\n   *   when the callback is complete.\n   *\n   *   @param err [Error] an error object, if an error occurred.\n   *   @param data [Object] a single page of response data. If there is no\n   *     more data, this object will be `null`.\n   *   @param doneCallback [Function] an optional done callback. If this\n   *     argument is defined in the function declaration, it should be called\n   *     when the next page is ready to be retrieved. This is useful for\n   *     controlling serial pagination across asynchronous operations.\n   *   @return [Boolean] if the callback returns `false`, pagination will\n   *     stop.\n   *\n   * @see AWS.Request.eachItem\n   * @see AWS.Response.nextPage\n   * @since v1.4.0\n   */\n  eachPage: function eachPage(callback) {\n    // Make all callbacks async-ish\n    callback = AWS.util.fn.makeAsync(callback, 3);\n\n    function wrappedCallback(response) {\n      callback.call(response, response.error, response.data, function (result) {\n        if (result === false) return;\n\n        if (response.hasNextPage()) {\n          response.nextPage().on('complete', wrappedCallback).send();\n        } else {\n          callback.call(response, null, null, AWS.util.fn.noop);\n        }\n      });\n    }\n\n    this.on('complete', wrappedCallback).send();\n  },\n\n  /**\n   * Enumerates over individual items of a request, paging the responses if\n   * necessary.\n   *\n   * @api experimental\n   * @since v1.4.0\n   */\n  eachItem: function eachItem(callback) {\n    var self = this;\n    function wrappedCallback(err, data) {\n      if (err) return callback(err, null);\n      if (data === null) return callback(null, null);\n\n      var config = self.service.paginationConfig(self.operation);\n      var resultKey = config.resultKey;\n      if (Array.isArray(resultKey)) resultKey = resultKey[0];\n      var items = jmespath.search(data, resultKey);\n      var continueIteration = true;\n      AWS.util.arrayEach(items, function(item) {\n        continueIteration = callback(null, item);\n        if (continueIteration === false) {\n          return AWS.util.abort;\n        }\n      });\n      return continueIteration;\n    }\n\n    this.eachPage(wrappedCallback);\n  },\n\n  /**\n   * @return [Boolean] whether the operation can return multiple pages of\n   *   response data.\n   * @see AWS.Response.eachPage\n   * @since v1.4.0\n   */\n  isPageable: function isPageable() {\n    return this.service.paginationConfig(this.operation) ? true : false;\n  },\n\n  /**\n   * Sends the request and converts the request object into a readable stream\n   * that can be read from or piped into a writable stream.\n   *\n   * @note The data read from a readable stream contains only\n   *   the raw HTTP body contents.\n   * @example Manually reading from a stream\n   *   request.createReadStream().on('data', function(data) {\n   *     console.log(\"Got data:\", data.toString());\n   *   });\n   * @example Piping a request body into a file\n   *   var out = fs.createWriteStream('/path/to/outfile.jpg');\n   *   s3.service.getObject(params).createReadStream().pipe(out);\n   * @return [Stream] the readable stream object that can be piped\n   *   or read from (by registering 'data' event listeners).\n   * @!macro nobrowser\n   */\n  createReadStream: function createReadStream() {\n    var streams = AWS.util.stream;\n    var req = this;\n    var stream = null;\n\n    if (AWS.HttpClient.streamsApiVersion === 2) {\n      stream = new streams.PassThrough();\n      process.nextTick(function() { req.send(); });\n    } else {\n      stream = new streams.Stream();\n      stream.readable = true;\n\n      stream.sent = false;\n      stream.on('newListener', function(event) {\n        if (!stream.sent && event === 'data') {\n          stream.sent = true;\n          process.nextTick(function() { req.send(); });\n        }\n      });\n    }\n\n    this.on('error', function(err) {\n      stream.emit('error', err);\n    });\n\n    this.on('httpHeaders', function streamHeaders(statusCode, headers, resp) {\n      if (statusCode < 300) {\n        req.removeListener('httpData', AWS.EventListeners.Core.HTTP_DATA);\n        req.removeListener('httpError', AWS.EventListeners.Core.HTTP_ERROR);\n        req.on('httpError', function streamHttpError(error) {\n          resp.error = error;\n          resp.error.retryable = false;\n        });\n\n        var shouldCheckContentLength = false;\n        var expectedLen;\n        if (req.httpRequest.method !== 'HEAD') {\n          expectedLen = parseInt(headers['content-length'], 10);\n        }\n        if (expectedLen !== undefined && !isNaN(expectedLen) && expectedLen >= 0) {\n          shouldCheckContentLength = true;\n          var receivedLen = 0;\n        }\n\n        var checkContentLengthAndEmit = function checkContentLengthAndEmit() {\n          if (shouldCheckContentLength && receivedLen !== expectedLen) {\n            stream.emit('error', AWS.util.error(\n              new Error('Stream content length mismatch. Received ' +\n                receivedLen + ' of ' + expectedLen + ' bytes.'),\n              { code: 'StreamContentLengthMismatch' }\n            ));\n          } else if (AWS.HttpClient.streamsApiVersion === 2) {\n            stream.end();\n          } else {\n            stream.emit('end');\n          }\n        };\n\n        var httpStream = resp.httpResponse.createUnbufferedStream();\n\n        if (AWS.HttpClient.streamsApiVersion === 2) {\n          if (shouldCheckContentLength) {\n            var lengthAccumulator = new streams.PassThrough();\n            lengthAccumulator._write = function(chunk) {\n              if (chunk && chunk.length) {\n                receivedLen += chunk.length;\n              }\n              return streams.PassThrough.prototype._write.apply(this, arguments);\n            };\n\n            lengthAccumulator.on('end', checkContentLengthAndEmit);\n            stream.on('error', function(err) {\n              shouldCheckContentLength = false;\n              httpStream.unpipe(lengthAccumulator);\n              lengthAccumulator.emit('end');\n              lengthAccumulator.end();\n            });\n            httpStream.pipe(lengthAccumulator).pipe(stream, { end: false });\n          } else {\n            httpStream.pipe(stream);\n          }\n        } else {\n\n          if (shouldCheckContentLength) {\n            httpStream.on('data', function(arg) {\n              if (arg && arg.length) {\n                receivedLen += arg.length;\n              }\n            });\n          }\n\n          httpStream.on('data', function(arg) {\n            stream.emit('data', arg);\n          });\n          httpStream.on('end', checkContentLengthAndEmit);\n        }\n\n        httpStream.on('error', function(err) {\n          shouldCheckContentLength = false;\n          stream.emit('error', err);\n        });\n      }\n    });\n\n    return stream;\n  },\n\n  /**\n   * @param [Array,Response] args This should be the response object,\n   *   or an array of args to send to the event.\n   * @api private\n   */\n  emitEvent: function emit(eventName, args, done) {\n    if (typeof args === 'function') { done = args; args = null; }\n    if (!done) done = function() { };\n    if (!args) args = this.eventParameters(eventName, this.response);\n\n    var origEmit = AWS.SequentialExecutor.prototype.emit;\n    origEmit.call(this, eventName, args, function (err) {\n      if (err) this.response.error = err;\n      done.call(this, err);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  eventParameters: function eventParameters(eventName) {\n    switch (eventName) {\n      case 'restart':\n      case 'validate':\n      case 'sign':\n      case 'build':\n      case 'afterValidate':\n      case 'afterBuild':\n        return [this];\n      case 'error':\n        return [this.response.error, this.response];\n      default:\n        return [this.response];\n    }\n  },\n\n  /**\n   * @api private\n   */\n  presign: function presign(expires, callback) {\n    if (!callback && typeof expires === 'function') {\n      callback = expires;\n      expires = null;\n    }\n    return new AWS.Signers.Presign().sign(this.toGet(), expires, callback);\n  },\n\n  /**\n   * @api private\n   */\n  isPresigned: function isPresigned() {\n    return Object.prototype.hasOwnProperty.call(this.httpRequest.headers, 'presigned-expires');\n  },\n\n  /**\n   * @api private\n   */\n  toUnauthenticated: function toUnauthenticated() {\n    this._unAuthenticated = true;\n    this.removeListener('validate', AWS.EventListeners.Core.VALIDATE_CREDENTIALS);\n    this.removeListener('sign', AWS.EventListeners.Core.SIGN);\n    return this;\n  },\n\n  /**\n   * @api private\n   */\n  toGet: function toGet() {\n    if (this.service.api.protocol === 'query' ||\n        this.service.api.protocol === 'ec2') {\n      this.removeListener('build', this.buildAsGet);\n      this.addListener('build', this.buildAsGet);\n    }\n    return this;\n  },\n\n  /**\n   * @api private\n   */\n  buildAsGet: function buildAsGet(request) {\n    request.httpRequest.method = 'GET';\n    request.httpRequest.path = request.service.endpoint.path +\n                               '?' + request.httpRequest.body;\n    request.httpRequest.body = '';\n\n    // don't need these headers on a GET request\n    delete request.httpRequest.headers['Content-Length'];\n    delete request.httpRequest.headers['Content-Type'];\n  },\n\n  /**\n   * @api private\n   */\n  haltHandlersOnError: function haltHandlersOnError() {\n    this._haltHandlersOnError = true;\n  }\n});\n\n/**\n * @api private\n */\nAWS.Request.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n  this.prototype.promise = function promise() {\n    var self = this;\n    // append to user agent\n    this.httpRequest.appendToUserAgent('promise');\n    return new PromiseDependency(function(resolve, reject) {\n      self.on('complete', function(resp) {\n        if (resp.error) {\n          reject(resp.error);\n        } else {\n          // define $response property so that it is not enumerable\n          // this prevents circular reference errors when stringifying the JSON object\n          resolve(Object.defineProperty(\n            resp.data || {},\n            '$response',\n            {value: resp}\n          ));\n        }\n      });\n      self.runTo();\n    });\n  };\n};\n\n/**\n * @api private\n */\nAWS.Request.deletePromisesFromClass = function deletePromisesFromClass() {\n  delete this.prototype.promise;\n};\n\nAWS.util.addPromises(AWS.Request);\n\nAWS.util.mixin(AWS.Request, AWS.SequentialExecutor);\n","/**\n * Copyright 2012-2013 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You\n * may not use this file except in compliance with the License. A copy of\n * the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n\nvar AWS = require('./core');\nvar inherit = AWS.util.inherit;\nvar jmespath = require('jmespath');\n\n/**\n * @api private\n */\nfunction CHECK_ACCEPTORS(resp) {\n  var waiter = resp.request._waiter;\n  var acceptors = waiter.config.acceptors;\n  var acceptorMatched = false;\n  var state = 'retry';\n\n  acceptors.forEach(function(acceptor) {\n    if (!acceptorMatched) {\n      var matcher = waiter.matchers[acceptor.matcher];\n      if (matcher && matcher(resp, acceptor.expected, acceptor.argument)) {\n        acceptorMatched = true;\n        state = acceptor.state;\n      }\n    }\n  });\n\n  if (!acceptorMatched && resp.error) state = 'failure';\n\n  if (state === 'success') {\n    waiter.setSuccess(resp);\n  } else {\n    waiter.setError(resp, state === 'retry');\n  }\n}\n\n/**\n * @api private\n */\nAWS.ResourceWaiter = inherit({\n  /**\n   * Waits for a given state on a service object\n   * @param service [Service] the service object to wait on\n   * @param state [String] the state (defined in waiter configuration) to wait\n   *   for.\n   * @example Create a waiter for running EC2 instances\n   *   var ec2 = new AWS.EC2;\n   *   var waiter = new AWS.ResourceWaiter(ec2, 'instanceRunning');\n   */\n  constructor: function constructor(service, state) {\n    this.service = service;\n    this.state = state;\n    this.loadWaiterConfig(this.state);\n  },\n\n  service: null,\n\n  state: null,\n\n  config: null,\n\n  matchers: {\n    path: function(resp, expected, argument) {\n      try {\n        var result = jmespath.search(resp.data, argument);\n      } catch (err) {\n        return false;\n      }\n\n      return jmespath.strictDeepEqual(result,expected);\n    },\n\n    pathAll: function(resp, expected, argument) {\n      try {\n        var results = jmespath.search(resp.data, argument);\n      } catch (err) {\n        return false;\n      }\n\n      if (!Array.isArray(results)) results = [results];\n      var numResults = results.length;\n      if (!numResults) return false;\n      for (var ind = 0 ; ind < numResults; ind++) {\n        if (!jmespath.strictDeepEqual(results[ind], expected)) {\n          return false;\n        }\n      }\n      return true;\n    },\n\n    pathAny: function(resp, expected, argument) {\n      try {\n        var results = jmespath.search(resp.data, argument);\n      } catch (err) {\n        return false;\n      }\n\n      if (!Array.isArray(results)) results = [results];\n      var numResults = results.length;\n      for (var ind = 0 ; ind < numResults; ind++) {\n        if (jmespath.strictDeepEqual(results[ind], expected)) {\n          return true;\n        }\n      }\n      return false;\n    },\n\n    status: function(resp, expected) {\n      var statusCode = resp.httpResponse.statusCode;\n      return (typeof statusCode === 'number') && (statusCode === expected);\n    },\n\n    error: function(resp, expected) {\n      if (typeof expected === 'string' && resp.error) {\n        return expected === resp.error.code;\n      }\n      // if expected is not string, can be boolean indicating presence of error\n      return expected === !!resp.error;\n    }\n  },\n\n  listeners: new AWS.SequentialExecutor().addNamedListeners(function(add) {\n    add('RETRY_CHECK', 'retry', function(resp) {\n      var waiter = resp.request._waiter;\n      if (resp.error && resp.error.code === 'ResourceNotReady') {\n        resp.error.retryDelay = (waiter.config.delay || 0) * 1000;\n      }\n    });\n\n    add('CHECK_OUTPUT', 'extractData', CHECK_ACCEPTORS);\n\n    add('CHECK_ERROR', 'extractError', CHECK_ACCEPTORS);\n  }),\n\n  /**\n   * @return [AWS.Request]\n   */\n  wait: function wait(params, callback) {\n    if (typeof params === 'function') {\n      callback = params; params = undefined;\n    }\n\n    if (params && params.$waiter) {\n      params = AWS.util.copy(params);\n      if (typeof params.$waiter.delay === 'number') {\n        this.config.delay = params.$waiter.delay;\n      }\n      if (typeof params.$waiter.maxAttempts === 'number') {\n        this.config.maxAttempts = params.$waiter.maxAttempts;\n      }\n      delete params.$waiter;\n    }\n\n    var request = this.service.makeRequest(this.config.operation, params);\n    request._waiter = this;\n    request.response.maxRetries = this.config.maxAttempts;\n    request.addListeners(this.listeners);\n\n    if (callback) request.send(callback);\n    return request;\n  },\n\n  setSuccess: function setSuccess(resp) {\n    resp.error = null;\n    resp.data = resp.data || {};\n    resp.request.removeAllListeners('extractData');\n  },\n\n  setError: function setError(resp, retryable) {\n    resp.data = null;\n    resp.error = AWS.util.error(resp.error || new Error(), {\n      code: 'ResourceNotReady',\n      message: 'Resource is not in the state ' + this.state,\n      retryable: retryable\n    });\n  },\n\n  /**\n   * Loads waiter configuration from API configuration\n   *\n   * @api private\n   */\n  loadWaiterConfig: function loadWaiterConfig(state) {\n    if (!this.service.api.waiters[state]) {\n      throw new AWS.util.error(new Error(), {\n        code: 'StateNotFoundError',\n        message: 'State ' + state + ' not found.'\n      });\n    }\n\n    this.config = AWS.util.copy(this.service.api.waiters[state]);\n  }\n});\n","var AWS = require('./core');\nvar inherit = AWS.util.inherit;\nvar jmespath = require('jmespath');\n\n/**\n * This class encapsulates the response information\n * from a service request operation sent through {AWS.Request}.\n * The response object has two main properties for getting information\n * back from a request:\n *\n * ## The `data` property\n *\n * The `response.data` property contains the serialized object data\n * retrieved from the service request. For instance, for an\n * Amazon DynamoDB `listTables` method call, the response data might\n * look like:\n *\n * ```\n * > resp.data\n * { TableNames:\n *    [ 'table1', 'table2', ... ] }\n * ```\n *\n * The `data` property can be null if an error occurs (see below).\n *\n * ## The `error` property\n *\n * In the event of a service error (or transfer error), the\n * `response.error` property will be filled with the given\n * error data in the form:\n *\n * ```\n * { code: 'SHORT_UNIQUE_ERROR_CODE',\n *   message: 'Some human readable error message' }\n * ```\n *\n * In the case of an error, the `data` property will be `null`.\n * Note that if you handle events that can be in a failure state,\n * you should always check whether `response.error` is set\n * before attempting to access the `response.data` property.\n *\n * @!attribute data\n *   @readonly\n *   @!group Data Properties\n *   @note Inside of a {AWS.Request~httpData} event, this\n *     property contains a single raw packet instead of the\n *     full de-serialized service response.\n *   @return [Object] the de-serialized response data\n *     from the service.\n *\n * @!attribute error\n *   An structure containing information about a service\n *   or networking error.\n *   @readonly\n *   @!group Data Properties\n *   @note This attribute is only filled if a service or\n *     networking error occurs.\n *   @return [Error]\n *     * code [String] a unique short code representing the\n *       error that was emitted.\n *     * message [String] a longer human readable error message\n *     * retryable [Boolean] whether the error message is\n *       retryable.\n *     * statusCode [Numeric] in the case of a request that reached the service,\n *       this value contains the response status code.\n *     * time [Date] the date time object when the error occurred.\n *     * hostname [String] set when a networking error occurs to easily\n *       identify the endpoint of the request.\n *     * region [String] set when a networking error occurs to easily\n *       identify the region of the request.\n *\n * @!attribute requestId\n *   @readonly\n *   @!group Data Properties\n *   @return [String] the unique request ID associated with the response.\n *     Log this value when debugging requests for AWS support.\n *\n * @!attribute retryCount\n *   @readonly\n *   @!group Operation Properties\n *   @return [Integer] the number of retries that were\n *     attempted before the request was completed.\n *\n * @!attribute redirectCount\n *   @readonly\n *   @!group Operation Properties\n *   @return [Integer] the number of redirects that were\n *     followed before the request was completed.\n *\n * @!attribute httpResponse\n *   @readonly\n *   @!group HTTP Properties\n *   @return [AWS.HttpResponse] the raw HTTP response object\n *     containing the response headers and body information\n *     from the server.\n *\n * @see AWS.Request\n */\nAWS.Response = inherit({\n\n  /**\n   * @api private\n   */\n  constructor: function Response(request) {\n    this.request = request;\n    this.data = null;\n    this.error = null;\n    this.retryCount = 0;\n    this.redirectCount = 0;\n    this.httpResponse = new AWS.HttpResponse();\n    if (request) {\n      this.maxRetries = request.service.numRetries();\n      this.maxRedirects = request.service.config.maxRedirects;\n    }\n  },\n\n  /**\n   * Creates a new request for the next page of response data, calling the\n   * callback with the page data if a callback is provided.\n   *\n   * @callback callback function(err, data)\n   *   Called when a page of data is returned from the next request.\n   *\n   *   @param err [Error] an error object, if an error occurred in the request\n   *   @param data [Object] the next page of data, or null, if there are no\n   *     more pages left.\n   * @return [AWS.Request] the request object for the next page of data\n   * @return [null] if no callback is provided and there are no pages left\n   *   to retrieve.\n   * @since v1.4.0\n   */\n  nextPage: function nextPage(callback) {\n    var config;\n    var service = this.request.service;\n    var operation = this.request.operation;\n    try {\n      config = service.paginationConfig(operation, true);\n    } catch (e) { this.error = e; }\n\n    if (!this.hasNextPage()) {\n      if (callback) callback(this.error, null);\n      else if (this.error) throw this.error;\n      return null;\n    }\n\n    var params = AWS.util.copy(this.request.params);\n    if (!this.nextPageTokens) {\n      return callback ? callback(null, null) : null;\n    } else {\n      var inputTokens = config.inputToken;\n      if (typeof inputTokens === 'string') inputTokens = [inputTokens];\n      for (var i = 0; i < inputTokens.length; i++) {\n        params[inputTokens[i]] = this.nextPageTokens[i];\n      }\n      return service.makeRequest(this.request.operation, params, callback);\n    }\n  },\n\n  /**\n   * @return [Boolean] whether more pages of data can be returned by further\n   *   requests\n   * @since v1.4.0\n   */\n  hasNextPage: function hasNextPage() {\n    this.cacheNextPageTokens();\n    if (this.nextPageTokens) return true;\n    if (this.nextPageTokens === undefined) return undefined;\n    else return false;\n  },\n\n  /**\n   * @api private\n   */\n  cacheNextPageTokens: function cacheNextPageTokens() {\n    if (Object.prototype.hasOwnProperty.call(this, 'nextPageTokens')) return this.nextPageTokens;\n    this.nextPageTokens = undefined;\n\n    var config = this.request.service.paginationConfig(this.request.operation);\n    if (!config) return this.nextPageTokens;\n\n    this.nextPageTokens = null;\n    if (config.moreResults) {\n      if (!jmespath.search(this.data, config.moreResults)) {\n        return this.nextPageTokens;\n      }\n    }\n\n    var exprs = config.outputToken;\n    if (typeof exprs === 'string') exprs = [exprs];\n    AWS.util.arrayEach.call(this, exprs, function (expr) {\n      var output = jmespath.search(this.data, expr);\n      if (output) {\n        this.nextPageTokens = this.nextPageTokens || [];\n        this.nextPageTokens.push(output);\n      }\n    });\n\n    return this.nextPageTokens;\n  }\n\n});\n","var AWS = require('../core');\nvar byteLength = AWS.util.string.byteLength;\nvar Buffer = AWS.util.Buffer;\n\n/**\n * The managed uploader allows for easy and efficient uploading of buffers,\n * blobs, or streams, using a configurable amount of concurrency to perform\n * multipart uploads where possible. This abstraction also enables uploading\n * streams of unknown size due to the use of multipart uploads.\n *\n * To construct a managed upload object, see the {constructor} function.\n *\n * ## Tracking upload progress\n *\n * The managed upload object can also track progress by attaching an\n * 'httpUploadProgress' listener to the upload manager. This event is similar\n * to {AWS.Request~httpUploadProgress} but groups all concurrent upload progress\n * into a single event. See {AWS.S3.ManagedUpload~httpUploadProgress} for more\n * information.\n *\n * ## Handling Multipart Cleanup\n *\n * By default, this class will automatically clean up any multipart uploads\n * when an individual part upload fails. This behavior can be disabled in order\n * to manually handle failures by setting the `leavePartsOnError` configuration\n * option to `true` when initializing the upload object.\n *\n * @!event httpUploadProgress(progress)\n *   Triggered when the uploader has uploaded more data.\n *   @note The `total` property may not be set if the stream being uploaded has\n *     not yet finished chunking. In this case the `total` will be undefined\n *     until the total stream size is known.\n *   @note This event will not be emitted in Node.js 0.8.x.\n *   @param progress [map] An object containing the `loaded` and `total` bytes\n *     of the request and the `key` of the S3 object. Note that `total` may be undefined until the payload\n *     size is known.\n *   @context (see AWS.Request~send)\n */\nAWS.S3.ManagedUpload = AWS.util.inherit({\n  /**\n   * Creates a managed upload object with a set of configuration options.\n   *\n   * @note A \"Body\" parameter is required to be set prior to calling {send}.\n   * @note In Node.js, sending \"Body\" as {https://nodejs.org/dist/latest/docs/api/stream.html#stream_object_mode object-mode stream}\n   *   may result in upload hangs. Using buffer stream is preferable.\n   * @option options params [map] a map of parameters to pass to the upload\n   *   requests. The \"Body\" parameter is required to be specified either on\n   *   the service or in the params option.\n   * @note ContentMD5 should not be provided when using the managed upload object.\n   *   Instead, setting \"computeChecksums\" to true will enable automatic ContentMD5 generation\n   *   by the managed upload object.\n   * @option options queueSize [Number] (4) the size of the concurrent queue\n   *   manager to upload parts in parallel. Set to 1 for synchronous uploading\n   *   of parts. Note that the uploader will buffer at most queueSize * partSize\n   *   bytes into memory at any given time.\n   * @option options partSize [Number] (5mb) the size in bytes for each\n   *   individual part to be uploaded. Adjust the part size to ensure the number\n   *   of parts does not exceed {maxTotalParts}. See {minPartSize} for the\n   *   minimum allowed part size.\n   * @option options leavePartsOnError [Boolean] (false) whether to abort the\n   *   multipart upload if an error occurs. Set to true if you want to handle\n   *   failures manually.\n   * @option options service [AWS.S3] an optional S3 service object to use for\n   *   requests. This object might have bound parameters used by the uploader.\n   * @option options tags [Array<map>] The tags to apply to the uploaded object.\n   *   Each tag should have a `Key` and `Value` keys.\n   * @example Creating a default uploader for a stream object\n   *   var upload = new AWS.S3.ManagedUpload({\n   *     params: {Bucket: 'bucket', Key: 'key', Body: stream}\n   *   });\n   * @example Creating an uploader with concurrency of 1 and partSize of 10mb\n   *   var upload = new AWS.S3.ManagedUpload({\n   *     partSize: 10 * 1024 * 1024, queueSize: 1,\n   *     params: {Bucket: 'bucket', Key: 'key', Body: stream}\n   *   });\n   * @example Creating an uploader with tags\n   *   var upload = new AWS.S3.ManagedUpload({\n   *     params: {Bucket: 'bucket', Key: 'key', Body: stream},\n   *     tags: [{Key: 'tag1', Value: 'value1'}, {Key: 'tag2', Value: 'value2'}]\n   *   });\n   * @see send\n   */\n  constructor: function ManagedUpload(options) {\n    var self = this;\n    AWS.SequentialExecutor.call(self);\n    self.body = null;\n    self.sliceFn = null;\n    self.callback = null;\n    self.parts = {};\n    self.completeInfo = [];\n    self.fillQueue = function() {\n      self.callback(new Error('Unsupported body payload ' + typeof self.body));\n    };\n\n    self.configure(options);\n  },\n\n  /**\n   * @api private\n   */\n  configure: function configure(options) {\n    options = options || {};\n    this.partSize = this.minPartSize;\n\n    if (options.queueSize) this.queueSize = options.queueSize;\n    if (options.partSize) this.partSize = options.partSize;\n    if (options.leavePartsOnError) this.leavePartsOnError = true;\n    if (options.tags) {\n      if (!Array.isArray(options.tags)) {\n        throw new Error('Tags must be specified as an array; ' +\n          typeof options.tags + ' provided.');\n      }\n      this.tags = options.tags;\n    }\n\n    if (this.partSize < this.minPartSize) {\n      throw new Error('partSize must be greater than ' +\n                      this.minPartSize);\n    }\n\n    this.service = options.service;\n    this.bindServiceObject(options.params);\n    this.validateBody();\n    this.adjustTotalBytes();\n  },\n\n  /**\n   * @api private\n   */\n  leavePartsOnError: false,\n\n  /**\n   * @api private\n   */\n  queueSize: 4,\n\n  /**\n   * @api private\n   */\n  partSize: null,\n\n  /**\n   * @readonly\n   * @return [Number] the minimum number of bytes for an individual part\n   *   upload.\n   */\n  minPartSize: 1024 * 1024 * 5,\n\n  /**\n   * @readonly\n   * @return [Number] the maximum allowed number of parts in a multipart upload.\n   */\n  maxTotalParts: 10000,\n\n  /**\n   * Initiates the managed upload for the payload.\n   *\n   * @callback callback function(err, data)\n   *   @param err [Error] an error or null if no error occurred.\n   *   @param data [map] The response data from the successful upload:\n   *     * `Location` (String) the URL of the uploaded object\n   *     * `ETag` (String) the ETag of the uploaded object\n   *     * `Bucket` (String) the bucket to which the object was uploaded\n   *     * `Key` (String) the key to which the object was uploaded\n   * @example Sending a managed upload object\n   *   var params = {Bucket: 'bucket', Key: 'key', Body: stream};\n   *   var upload = new AWS.S3.ManagedUpload({params: params});\n   *   upload.send(function(err, data) {\n   *     console.log(err, data);\n   *   });\n   */\n  send: function(callback) {\n    var self = this;\n    self.failed = false;\n    self.callback = callback || function(err) { if (err) throw err; };\n\n    var runFill = true;\n    if (self.sliceFn) {\n      self.fillQueue = self.fillBuffer;\n    } else if (AWS.util.isNode()) {\n      var Stream = AWS.util.stream.Stream;\n      if (self.body instanceof Stream) {\n        runFill = false;\n        self.fillQueue = self.fillStream;\n        self.partBuffers = [];\n        self.body.\n          on('error', function(err) { self.cleanup(err); }).\n          on('readable', function() { self.fillQueue(); }).\n          on('end', function() {\n            self.isDoneChunking = true;\n            self.numParts = self.totalPartNumbers;\n            self.fillQueue.call(self);\n\n            if (self.isDoneChunking && self.totalPartNumbers >= 1 && self.doneParts === self.numParts) {\n              self.finishMultiPart();\n            }\n          });\n      }\n    }\n\n    if (runFill) self.fillQueue.call(self);\n  },\n\n  /**\n   * @!method  promise()\n   *   Returns a 'thenable' promise.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @callback fulfilledCallback function(data)\n   *     Called if the promise is fulfilled.\n   *     @param data [map] The response data from the successful upload:\n   *       `Location` (String) the URL of the uploaded object\n   *       `ETag` (String) the ETag of the uploaded object\n   *       `Bucket` (String) the bucket to which the object was uploaded\n   *       `Key` (String) the key to which the object was uploaded\n   *   @callback rejectedCallback function(err)\n   *     Called if the promise is rejected.\n   *     @param err [Error] an error or null if no error occurred.\n   *   @return [Promise] A promise that represents the state of the upload request.\n   *   @example Sending an upload request using promises.\n   *     var upload = s3.upload({Bucket: 'bucket', Key: 'key', Body: stream});\n   *     var promise = upload.promise();\n   *     promise.then(function(data) { ... }, function(err) { ... });\n   */\n\n  /**\n   * Aborts a managed upload, including all concurrent upload requests.\n   * @note By default, calling this function will cleanup a multipart upload\n   *   if one was created. To leave the multipart upload around after aborting\n   *   a request, configure `leavePartsOnError` to `true` in the {constructor}.\n   * @note Calling {abort} in the browser environment will not abort any requests\n   *   that are already in flight. If a multipart upload was created, any parts\n   *   not yet uploaded will not be sent, and the multipart upload will be cleaned up.\n   * @example Aborting an upload\n   *   var params = {\n   *     Bucket: 'bucket', Key: 'key',\n   *     Body: Buffer.alloc(1024 * 1024 * 25) // 25MB payload\n   *   };\n   *   var upload = s3.upload(params);\n   *   upload.send(function (err, data) {\n   *     if (err) console.log(\"Error:\", err.code, err.message);\n   *     else console.log(data);\n   *   });\n   *\n   *   // abort request in 1 second\n   *   setTimeout(upload.abort.bind(upload), 1000);\n   */\n  abort: function() {\n    var self = this;\n    //abort putObject request\n    if (self.isDoneChunking === true && self.totalPartNumbers === 1 && self.singlePart) {\n      self.singlePart.abort();\n    } else {\n      self.cleanup(AWS.util.error(new Error('Request aborted by user'), {\n        code: 'RequestAbortedError', retryable: false\n      }));\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateBody: function validateBody() {\n    var self = this;\n    self.body = self.service.config.params.Body;\n    if (typeof self.body === 'string') {\n      self.body = AWS.util.buffer.toBuffer(self.body);\n    } else if (!self.body) {\n      throw new Error('params.Body is required');\n    }\n    self.sliceFn = AWS.util.arraySliceFn(self.body);\n  },\n\n  /**\n   * @api private\n   */\n  bindServiceObject: function bindServiceObject(params) {\n    params = params || {};\n    var self = this;\n    // bind parameters to new service object\n    if (!self.service) {\n      self.service = new AWS.S3({params: params});\n    } else {\n      var service = self.service;\n      var config = AWS.util.copy(service._originalConfig || {});\n      config.signatureVersion = service.getSignatureVersion();\n      self.service = new service.constructor.__super__(config);\n      self.service.config.params =\n        AWS.util.merge(self.service.config.params || {}, params);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  adjustTotalBytes: function adjustTotalBytes() {\n    var self = this;\n    try { // try to get totalBytes\n      self.totalBytes = byteLength(self.body);\n    } catch (e) { }\n\n    // try to adjust partSize if we know payload length\n    if (self.totalBytes) {\n      var newPartSize = Math.ceil(self.totalBytes / self.maxTotalParts);\n      if (newPartSize > self.partSize) self.partSize = newPartSize;\n    } else {\n      self.totalBytes = undefined;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  isDoneChunking: false,\n\n  /**\n   * @api private\n   */\n  partPos: 0,\n\n  /**\n   * @api private\n   */\n  totalChunkedBytes: 0,\n\n  /**\n   * @api private\n   */\n  totalUploadedBytes: 0,\n\n  /**\n   * @api private\n   */\n  totalBytes: undefined,\n\n  /**\n   * @api private\n   */\n  numParts: 0,\n\n  /**\n   * @api private\n   */\n  totalPartNumbers: 0,\n\n  /**\n   * @api private\n   */\n  activeParts: 0,\n\n  /**\n   * @api private\n   */\n  doneParts: 0,\n\n  /**\n   * @api private\n   */\n  parts: null,\n\n  /**\n   * @api private\n   */\n  completeInfo: null,\n\n  /**\n   * @api private\n   */\n  failed: false,\n\n  /**\n   * @api private\n   */\n  multipartReq: null,\n\n  /**\n   * @api private\n   */\n  partBuffers: null,\n\n  /**\n   * @api private\n   */\n  partBufferLength: 0,\n\n  /**\n   * @api private\n   */\n  fillBuffer: function fillBuffer() {\n    var self = this;\n    var bodyLen = byteLength(self.body);\n\n    if (bodyLen === 0) {\n      self.isDoneChunking = true;\n      self.numParts = 1;\n      self.nextChunk(self.body);\n      return;\n    }\n\n    while (self.activeParts < self.queueSize && self.partPos < bodyLen) {\n      var endPos = Math.min(self.partPos + self.partSize, bodyLen);\n      var buf = self.sliceFn.call(self.body, self.partPos, endPos);\n      self.partPos += self.partSize;\n\n      if (byteLength(buf) < self.partSize || self.partPos === bodyLen) {\n        self.isDoneChunking = true;\n        self.numParts = self.totalPartNumbers + 1;\n      }\n      self.nextChunk(buf);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  fillStream: function fillStream() {\n    var self = this;\n    if (self.activeParts >= self.queueSize) return;\n\n    var buf = self.body.read(self.partSize - self.partBufferLength) ||\n              self.body.read();\n    if (buf) {\n      self.partBuffers.push(buf);\n      self.partBufferLength += buf.length;\n      self.totalChunkedBytes += buf.length;\n    }\n\n    if (self.partBufferLength >= self.partSize) {\n      // if we have single buffer we avoid copyfull concat\n      var pbuf = self.partBuffers.length === 1 ?\n        self.partBuffers[0] : Buffer.concat(self.partBuffers);\n      self.partBuffers = [];\n      self.partBufferLength = 0;\n\n      // if we have more than partSize, push the rest back on the queue\n      if (pbuf.length > self.partSize) {\n        var rest = pbuf.slice(self.partSize);\n        self.partBuffers.push(rest);\n        self.partBufferLength += rest.length;\n        pbuf = pbuf.slice(0, self.partSize);\n      }\n\n      self.nextChunk(pbuf);\n    }\n\n    if (self.isDoneChunking && !self.isDoneSending) {\n      // if we have single buffer we avoid copyfull concat\n      pbuf = self.partBuffers.length === 1 ?\n          self.partBuffers[0] : Buffer.concat(self.partBuffers);\n      self.partBuffers = [];\n      self.partBufferLength = 0;\n      self.totalBytes = self.totalChunkedBytes;\n      self.isDoneSending = true;\n\n      if (self.numParts === 0 || pbuf.length > 0) {\n        self.numParts++;\n        self.nextChunk(pbuf);\n      }\n    }\n\n    self.body.read(0);\n  },\n\n  /**\n   * @api private\n   */\n  nextChunk: function nextChunk(chunk) {\n    var self = this;\n    if (self.failed) return null;\n\n    var partNumber = ++self.totalPartNumbers;\n    if (self.isDoneChunking && partNumber === 1) {\n      var params = {Body: chunk};\n      if (this.tags) {\n        params.Tagging = this.getTaggingHeader();\n      }\n      var req = self.service.putObject(params);\n      req._managedUpload = self;\n      req.on('httpUploadProgress', self.progress).send(self.finishSinglePart);\n      self.singlePart = req; //save the single part request\n      return null;\n    } else if (self.service.config.params.ContentMD5) {\n      var err = AWS.util.error(new Error('The Content-MD5 you specified is invalid for multi-part uploads.'), {\n        code: 'InvalidDigest', retryable: false\n      });\n\n      self.cleanup(err);\n      return null;\n    }\n\n    if (self.completeInfo[partNumber] && self.completeInfo[partNumber].ETag !== null) {\n      return null; // Already uploaded this part.\n    }\n\n    self.activeParts++;\n    if (!self.service.config.params.UploadId) {\n\n      if (!self.multipartReq) { // create multipart\n        self.multipartReq = self.service.createMultipartUpload();\n        self.multipartReq.on('success', function(resp) {\n          self.service.config.params.UploadId = resp.data.UploadId;\n          self.multipartReq = null;\n        });\n        self.queueChunks(chunk, partNumber);\n        self.multipartReq.on('error', function(err) {\n          self.cleanup(err);\n        });\n        self.multipartReq.send();\n      } else {\n        self.queueChunks(chunk, partNumber);\n      }\n    } else { // multipart is created, just send\n      self.uploadPart(chunk, partNumber);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getTaggingHeader: function getTaggingHeader() {\n    var kvPairStrings = [];\n    for (var i = 0; i < this.tags.length; i++) {\n      kvPairStrings.push(AWS.util.uriEscape(this.tags[i].Key) + '=' +\n        AWS.util.uriEscape(this.tags[i].Value));\n    }\n\n    return kvPairStrings.join('&');\n  },\n\n  /**\n   * @api private\n   */\n  uploadPart: function uploadPart(chunk, partNumber) {\n    var self = this;\n\n    var partParams = {\n      Body: chunk,\n      ContentLength: AWS.util.string.byteLength(chunk),\n      PartNumber: partNumber\n    };\n\n    var partInfo = {ETag: null, PartNumber: partNumber};\n    self.completeInfo[partNumber] = partInfo;\n\n    var req = self.service.uploadPart(partParams);\n    self.parts[partNumber] = req;\n    req._lastUploadedBytes = 0;\n    req._managedUpload = self;\n    req.on('httpUploadProgress', self.progress);\n    req.send(function(err, data) {\n      delete self.parts[partParams.PartNumber];\n      self.activeParts--;\n\n      if (!err && (!data || !data.ETag)) {\n        var message = 'No access to ETag property on response.';\n        if (AWS.util.isBrowser()) {\n          message += ' Check CORS configuration to expose ETag header.';\n        }\n\n        err = AWS.util.error(new Error(message), {\n          code: 'ETagMissing', retryable: false\n        });\n      }\n      if (err) return self.cleanup(err);\n      //prevent sending part being returned twice (https://github.com/aws/aws-sdk-js/issues/2304)\n      if (self.completeInfo[partNumber] && self.completeInfo[partNumber].ETag !== null) return null;\n      partInfo.ETag = data.ETag;\n      self.doneParts++;\n      if (self.isDoneChunking && self.doneParts === self.numParts) {\n        self.finishMultiPart();\n      } else {\n        self.fillQueue.call(self);\n      }\n    });\n  },\n\n  /**\n   * @api private\n   */\n  queueChunks: function queueChunks(chunk, partNumber) {\n    var self = this;\n    self.multipartReq.on('success', function() {\n      self.uploadPart(chunk, partNumber);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  cleanup: function cleanup(err) {\n    var self = this;\n    if (self.failed) return;\n\n    // clean up stream\n    if (typeof self.body.removeAllListeners === 'function' &&\n        typeof self.body.resume === 'function') {\n      self.body.removeAllListeners('readable');\n      self.body.removeAllListeners('end');\n      self.body.resume();\n    }\n\n    // cleanup multipartReq listeners\n    if (self.multipartReq) {\n      self.multipartReq.removeAllListeners('success');\n      self.multipartReq.removeAllListeners('error');\n      self.multipartReq.removeAllListeners('complete');\n      delete self.multipartReq;\n    }\n\n    if (self.service.config.params.UploadId && !self.leavePartsOnError) {\n      self.service.abortMultipartUpload().send();\n    } else if (self.leavePartsOnError) {\n      self.isDoneChunking = false;\n    }\n\n    AWS.util.each(self.parts, function(partNumber, part) {\n      part.removeAllListeners('complete');\n      part.abort();\n    });\n\n    self.activeParts = 0;\n    self.partPos = 0;\n    self.numParts = 0;\n    self.totalPartNumbers = 0;\n    self.parts = {};\n    self.failed = true;\n    self.callback(err);\n  },\n\n  /**\n   * @api private\n   */\n  finishMultiPart: function finishMultiPart() {\n    var self = this;\n    var completeParams = { MultipartUpload: { Parts: self.completeInfo.slice(1) } };\n    self.service.completeMultipartUpload(completeParams, function(err, data) {\n      if (err) {\n        return self.cleanup(err);\n      }\n\n      if (data && typeof data.Location === 'string') {\n        data.Location = data.Location.replace(/%2F/g, '/');\n      }\n\n      if (Array.isArray(self.tags)) {\n        for (var i = 0; i < self.tags.length; i++) {\n          self.tags[i].Value = String(self.tags[i].Value);\n        }\n        self.service.putObjectTagging(\n          {Tagging: {TagSet: self.tags}},\n          function(e, d) {\n            if (e) {\n              self.callback(e);\n            } else {\n              self.callback(e, data);\n            }\n          }\n        );\n      } else {\n        self.callback(err, data);\n      }\n    });\n  },\n\n  /**\n   * @api private\n   */\n  finishSinglePart: function finishSinglePart(err, data) {\n    var upload = this.request._managedUpload;\n    var httpReq = this.request.httpRequest;\n    var endpoint = httpReq.endpoint;\n    if (err) return upload.callback(err);\n    data.Location =\n      [endpoint.protocol, '//', endpoint.host, httpReq.path].join('');\n    data.key = this.request.params.Key; // will stay undocumented\n    data.Key = this.request.params.Key;\n    data.Bucket = this.request.params.Bucket;\n    upload.callback(err, data);\n  },\n\n  /**\n   * @api private\n   */\n  progress: function progress(info) {\n    var upload = this._managedUpload;\n    if (this.operation === 'putObject') {\n      info.part = 1;\n      info.key = this.params.Key;\n    } else {\n      upload.totalUploadedBytes += info.loaded - this._lastUploadedBytes;\n      this._lastUploadedBytes = info.loaded;\n      info = {\n        loaded: upload.totalUploadedBytes,\n        total: upload.totalBytes,\n        part: this.params.PartNumber,\n        key: this.params.Key\n      };\n    }\n    upload.emit('httpUploadProgress', [info]);\n  }\n});\n\nAWS.util.mixin(AWS.S3.ManagedUpload, AWS.SequentialExecutor);\n\n/**\n * @api private\n */\nAWS.S3.ManagedUpload.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n  this.prototype.promise = AWS.util.promisifyMethod('send', PromiseDependency);\n};\n\n/**\n * @api private\n */\nAWS.S3.ManagedUpload.deletePromisesFromClass = function deletePromisesFromClass() {\n  delete this.prototype.promise;\n};\n\nAWS.util.addPromises(AWS.S3.ManagedUpload);\n\n/**\n * @api private\n */\nmodule.exports = AWS.S3.ManagedUpload;\n","var AWS = require('./core');\n\n/**\n * @api private\n * @!method on(eventName, callback)\n *   Registers an event listener callback for the event given by `eventName`.\n *   Parameters passed to the callback function depend on the individual event\n *   being triggered. See the event documentation for those parameters.\n *\n *   @param eventName [String] the event name to register the listener for\n *   @param callback [Function] the listener callback function\n *   @param toHead [Boolean] attach the listener callback to the head of callback array if set to true.\n *     Default to be false.\n *   @return [AWS.SequentialExecutor] the same object for chaining\n */\nAWS.SequentialExecutor = AWS.util.inherit({\n\n  constructor: function SequentialExecutor() {\n    this._events = {};\n  },\n\n  /**\n   * @api private\n   */\n  listeners: function listeners(eventName) {\n    return this._events[eventName] ? this._events[eventName].slice(0) : [];\n  },\n\n  on: function on(eventName, listener, toHead) {\n    if (this._events[eventName]) {\n      toHead ?\n        this._events[eventName].unshift(listener) :\n        this._events[eventName].push(listener);\n    } else {\n      this._events[eventName] = [listener];\n    }\n    return this;\n  },\n\n  onAsync: function onAsync(eventName, listener, toHead) {\n    listener._isAsync = true;\n    return this.on(eventName, listener, toHead);\n  },\n\n  removeListener: function removeListener(eventName, listener) {\n    var listeners = this._events[eventName];\n    if (listeners) {\n      var length = listeners.length;\n      var position = -1;\n      for (var i = 0; i < length; ++i) {\n        if (listeners[i] === listener) {\n          position = i;\n        }\n      }\n      if (position > -1) {\n        listeners.splice(position, 1);\n      }\n    }\n    return this;\n  },\n\n  removeAllListeners: function removeAllListeners(eventName) {\n    if (eventName) {\n      delete this._events[eventName];\n    } else {\n      this._events = {};\n    }\n    return this;\n  },\n\n  /**\n   * @api private\n   */\n  emit: function emit(eventName, eventArgs, doneCallback) {\n    if (!doneCallback) doneCallback = function() { };\n    var listeners = this.listeners(eventName);\n    var count = listeners.length;\n    this.callListeners(listeners, eventArgs, doneCallback);\n    return count > 0;\n  },\n\n  /**\n   * @api private\n   */\n  callListeners: function callListeners(listeners, args, doneCallback, prevError) {\n    var self = this;\n    var error = prevError || null;\n\n    function callNextListener(err) {\n      if (err) {\n        error = AWS.util.error(error || new Error(), err);\n        if (self._haltHandlersOnError) {\n          return doneCallback.call(self, error);\n        }\n      }\n      self.callListeners(listeners, args, doneCallback, error);\n    }\n\n    while (listeners.length > 0) {\n      var listener = listeners.shift();\n      if (listener._isAsync) { // asynchronous listener\n        listener.apply(self, args.concat([callNextListener]));\n        return; // stop here, callNextListener will continue\n      } else { // synchronous listener\n        try {\n          listener.apply(self, args);\n        } catch (err) {\n          error = AWS.util.error(error || new Error(), err);\n        }\n        if (error && self._haltHandlersOnError) {\n          doneCallback.call(self, error);\n          return;\n        }\n      }\n    }\n    doneCallback.call(self, error);\n  },\n\n  /**\n   * Adds or copies a set of listeners from another list of\n   * listeners or SequentialExecutor object.\n   *\n   * @param listeners [map<String,Array<Function>>, AWS.SequentialExecutor]\n   *   a list of events and callbacks, or an event emitter object\n   *   containing listeners to add to this emitter object.\n   * @return [AWS.SequentialExecutor] the emitter object, for chaining.\n   * @example Adding listeners from a map of listeners\n   *   emitter.addListeners({\n   *     event1: [function() { ... }, function() { ... }],\n   *     event2: [function() { ... }]\n   *   });\n   *   emitter.emit('event1'); // emitter has event1\n   *   emitter.emit('event2'); // emitter has event2\n   * @example Adding listeners from another emitter object\n   *   var emitter1 = new AWS.SequentialExecutor();\n   *   emitter1.on('event1', function() { ... });\n   *   emitter1.on('event2', function() { ... });\n   *   var emitter2 = new AWS.SequentialExecutor();\n   *   emitter2.addListeners(emitter1);\n   *   emitter2.emit('event1'); // emitter2 has event1\n   *   emitter2.emit('event2'); // emitter2 has event2\n   */\n  addListeners: function addListeners(listeners) {\n    var self = this;\n\n    // extract listeners if parameter is an SequentialExecutor object\n    if (listeners._events) listeners = listeners._events;\n\n    AWS.util.each(listeners, function(event, callbacks) {\n      if (typeof callbacks === 'function') callbacks = [callbacks];\n      AWS.util.arrayEach(callbacks, function(callback) {\n        self.on(event, callback);\n      });\n    });\n\n    return self;\n  },\n\n  /**\n   * Registers an event with {on} and saves the callback handle function\n   * as a property on the emitter object using a given `name`.\n   *\n   * @param name [String] the property name to set on this object containing\n   *   the callback function handle so that the listener can be removed in\n   *   the future.\n   * @param (see on)\n   * @return (see on)\n   * @example Adding a named listener DATA_CALLBACK\n   *   var listener = function() { doSomething(); };\n   *   emitter.addNamedListener('DATA_CALLBACK', 'data', listener);\n   *\n   *   // the following prints: true\n   *   console.log(emitter.DATA_CALLBACK == listener);\n   */\n  addNamedListener: function addNamedListener(name, eventName, callback, toHead) {\n    this[name] = callback;\n    this.addListener(eventName, callback, toHead);\n    return this;\n  },\n\n  /**\n   * @api private\n   */\n  addNamedAsyncListener: function addNamedAsyncListener(name, eventName, callback, toHead) {\n    callback._isAsync = true;\n    return this.addNamedListener(name, eventName, callback, toHead);\n  },\n\n  /**\n   * Helper method to add a set of named listeners using\n   * {addNamedListener}. The callback contains a parameter\n   * with a handle to the `addNamedListener` method.\n   *\n   * @callback callback function(add)\n   *   The callback function is called immediately in order to provide\n   *   the `add` function to the block. This simplifies the addition of\n   *   a large group of named listeners.\n   *   @param add [Function] the {addNamedListener} function to call\n   *     when registering listeners.\n   * @example Adding a set of named listeners\n   *   emitter.addNamedListeners(function(add) {\n   *     add('DATA_CALLBACK', 'data', function() { ... });\n   *     add('OTHER', 'otherEvent', function() { ... });\n   *     add('LAST', 'lastEvent', function() { ... });\n   *   });\n   *\n   *   // these properties are now set:\n   *   emitter.DATA_CALLBACK;\n   *   emitter.OTHER;\n   *   emitter.LAST;\n   */\n  addNamedListeners: function addNamedListeners(callback) {\n    var self = this;\n    callback(\n      function() {\n        self.addNamedListener.apply(self, arguments);\n      },\n      function() {\n        self.addNamedAsyncListener.apply(self, arguments);\n      }\n    );\n    return this;\n  }\n});\n\n/**\n * {on} is the prefered method.\n * @api private\n */\nAWS.SequentialExecutor.prototype.addListener = AWS.SequentialExecutor.prototype.on;\n\n/**\n * @api private\n */\nmodule.exports = AWS.SequentialExecutor;\n","var AWS = require('./core');\nvar Api = require('./model/api');\nvar regionConfig = require('./region_config');\n\nvar inherit = AWS.util.inherit;\nvar clientCount = 0;\n\n/**\n * The service class representing an AWS service.\n *\n * @class_abstract This class is an abstract class.\n *\n * @!attribute apiVersions\n *   @return [Array<String>] the list of API versions supported by this service.\n *   @readonly\n */\nAWS.Service = inherit({\n  /**\n   * Create a new service object with a configuration object\n   *\n   * @param config [map] a map of configuration options\n   */\n  constructor: function Service(config) {\n    if (!this.loadServiceClass) {\n      throw AWS.util.error(new Error(),\n        'Service must be constructed with `new\\' operator');\n    }\n    var ServiceClass = this.loadServiceClass(config || {});\n    if (ServiceClass) {\n      var originalConfig = AWS.util.copy(config);\n      var svc = new ServiceClass(config);\n      Object.defineProperty(svc, '_originalConfig', {\n        get: function() { return originalConfig; },\n        enumerable: false,\n        configurable: true\n      });\n      svc._clientId = ++clientCount;\n      return svc;\n    }\n    this.initialize(config);\n  },\n\n  /**\n   * @api private\n   */\n  initialize: function initialize(config) {\n    var svcConfig = AWS.config[this.serviceIdentifier];\n    this.config = new AWS.Config(AWS.config);\n    if (svcConfig) this.config.update(svcConfig, true);\n    if (config) this.config.update(config, true);\n\n    this.validateService();\n    if (!this.config.endpoint) regionConfig.configureEndpoint(this);\n\n    this.config.endpoint = this.endpointFromTemplate(this.config.endpoint);\n    this.setEndpoint(this.config.endpoint);\n    //enable attaching listeners to service client\n    AWS.SequentialExecutor.call(this);\n    AWS.Service.addDefaultMonitoringListeners(this);\n    if ((this.config.clientSideMonitoring || AWS.Service._clientSideMonitoring) && this.publisher) {\n      var publisher = this.publisher;\n      this.addNamedListener('PUBLISH_API_CALL', 'apiCall', function PUBLISH_API_CALL(event) {\n        process.nextTick(function() {publisher.eventHandler(event);});\n      });\n      this.addNamedListener('PUBLISH_API_ATTEMPT', 'apiCallAttempt', function PUBLISH_API_ATTEMPT(event) {\n        process.nextTick(function() {publisher.eventHandler(event);});\n      });\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateService: function validateService() {\n  },\n\n  /**\n   * @api private\n   */\n  loadServiceClass: function loadServiceClass(serviceConfig) {\n    var config = serviceConfig;\n    if (!AWS.util.isEmpty(this.api)) {\n      return null;\n    } else if (config.apiConfig) {\n      return AWS.Service.defineServiceApi(this.constructor, config.apiConfig);\n    } else if (!this.constructor.services) {\n      return null;\n    } else {\n      config = new AWS.Config(AWS.config);\n      config.update(serviceConfig, true);\n      var version = config.apiVersions[this.constructor.serviceIdentifier];\n      version = version || config.apiVersion;\n      return this.getLatestServiceClass(version);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getLatestServiceClass: function getLatestServiceClass(version) {\n    version = this.getLatestServiceVersion(version);\n    if (this.constructor.services[version] === null) {\n      AWS.Service.defineServiceApi(this.constructor, version);\n    }\n\n    return this.constructor.services[version];\n  },\n\n  /**\n   * @api private\n   */\n  getLatestServiceVersion: function getLatestServiceVersion(version) {\n    if (!this.constructor.services || this.constructor.services.length === 0) {\n      throw new Error('No services defined on ' +\n                      this.constructor.serviceIdentifier);\n    }\n\n    if (!version) {\n      version = 'latest';\n    } else if (AWS.util.isType(version, Date)) {\n      version = AWS.util.date.iso8601(version).split('T')[0];\n    }\n\n    if (Object.hasOwnProperty(this.constructor.services, version)) {\n      return version;\n    }\n\n    var keys = Object.keys(this.constructor.services).sort();\n    var selectedVersion = null;\n    for (var i = keys.length - 1; i >= 0; i--) {\n      // versions that end in \"*\" are not available on disk and can be\n      // skipped, so do not choose these as selectedVersions\n      if (keys[i][keys[i].length - 1] !== '*') {\n        selectedVersion = keys[i];\n      }\n      if (keys[i].substr(0, 10) <= version) {\n        return selectedVersion;\n      }\n    }\n\n    throw new Error('Could not find ' + this.constructor.serviceIdentifier +\n                    ' API to satisfy version constraint `' + version + '\\'');\n  },\n\n  /**\n   * @api private\n   */\n  api: {},\n\n  /**\n   * @api private\n   */\n  defaultRetryCount: 3,\n\n  /**\n   * @api private\n   */\n  customizeRequests: function customizeRequests(callback) {\n    if (!callback) {\n      this.customRequestHandler = null;\n    } else if (typeof callback === 'function') {\n      this.customRequestHandler = callback;\n    } else {\n      throw new Error('Invalid callback type \\'' + typeof callback + '\\' provided in customizeRequests');\n    }\n  },\n\n  /**\n   * Calls an operation on a service with the given input parameters.\n   *\n   * @param operation [String] the name of the operation to call on the service.\n   * @param params [map] a map of input options for the operation\n   * @callback callback function(err, data)\n   *   If a callback is supplied, it is called when a response is returned\n   *   from the service.\n   *   @param err [Error] the error object returned from the request.\n   *     Set to `null` if the request is successful.\n   *   @param data [Object] the de-serialized data returned from\n   *     the request. Set to `null` if a request error occurs.\n   */\n  makeRequest: function makeRequest(operation, params, callback) {\n    if (typeof params === 'function') {\n      callback = params;\n      params = null;\n    }\n\n    params = params || {};\n    if (this.config.params) { // copy only toplevel bound params\n      var rules = this.api.operations[operation];\n      if (rules) {\n        params = AWS.util.copy(params);\n        AWS.util.each(this.config.params, function(key, value) {\n          if (rules.input.members[key]) {\n            if (params[key] === undefined || params[key] === null) {\n              params[key] = value;\n            }\n          }\n        });\n      }\n    }\n\n    var request = new AWS.Request(this, operation, params);\n    this.addAllRequestListeners(request);\n    this.attachMonitoringEmitter(request);\n    if (callback) request.send(callback);\n    return request;\n  },\n\n  /**\n   * Calls an operation on a service with the given input parameters, without\n   * any authentication data. This method is useful for \"public\" API operations.\n   *\n   * @param operation [String] the name of the operation to call on the service.\n   * @param params [map] a map of input options for the operation\n   * @callback callback function(err, data)\n   *   If a callback is supplied, it is called when a response is returned\n   *   from the service.\n   *   @param err [Error] the error object returned from the request.\n   *     Set to `null` if the request is successful.\n   *   @param data [Object] the de-serialized data returned from\n   *     the request. Set to `null` if a request error occurs.\n   */\n  makeUnauthenticatedRequest: function makeUnauthenticatedRequest(operation, params, callback) {\n    if (typeof params === 'function') {\n      callback = params;\n      params = {};\n    }\n\n    var request = this.makeRequest(operation, params).toUnauthenticated();\n    return callback ? request.send(callback) : request;\n  },\n\n  /**\n   * Waits for a given state\n   *\n   * @param state [String] the state on the service to wait for\n   * @param params [map] a map of parameters to pass with each request\n   * @option params $waiter [map] a map of configuration options for the waiter\n   * @option params $waiter.delay [Number] The number of seconds to wait between\n   *                                       requests\n   * @option params $waiter.maxAttempts [Number] The maximum number of requests\n   *                                             to send while waiting\n   * @callback callback function(err, data)\n   *   If a callback is supplied, it is called when a response is returned\n   *   from the service.\n   *   @param err [Error] the error object returned from the request.\n   *     Set to `null` if the request is successful.\n   *   @param data [Object] the de-serialized data returned from\n   *     the request. Set to `null` if a request error occurs.\n   */\n  waitFor: function waitFor(state, params, callback) {\n    var waiter = new AWS.ResourceWaiter(this, state);\n    return waiter.wait(params, callback);\n  },\n\n  /**\n   * @api private\n   */\n  addAllRequestListeners: function addAllRequestListeners(request) {\n    var list = [AWS.events, AWS.EventListeners.Core, this.serviceInterface(),\n                AWS.EventListeners.CorePost];\n    for (var i = 0; i < list.length; i++) {\n      if (list[i]) request.addListeners(list[i]);\n    }\n\n    // disable parameter validation\n    if (!this.config.paramValidation) {\n      request.removeListener('validate',\n        AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n    }\n\n    if (this.config.logger) { // add logging events\n      request.addListeners(AWS.EventListeners.Logger);\n    }\n\n    this.setupRequestListeners(request);\n    // call prototype's customRequestHandler\n    if (typeof this.constructor.prototype.customRequestHandler === 'function') {\n      this.constructor.prototype.customRequestHandler(request);\n    }\n    // call instance's customRequestHandler\n    if (Object.prototype.hasOwnProperty.call(this, 'customRequestHandler') && typeof this.customRequestHandler === 'function') {\n      this.customRequestHandler(request);\n    }\n  },\n\n  /**\n   * Event recording metrics for a whole API call.\n   * @returns {object} a subset of api call metrics\n   * @api private\n   */\n  apiCallEvent: function apiCallEvent(request) {\n    var api = request.service.api.operations[request.operation];\n    var monitoringEvent = {\n      Type: 'ApiCall',\n      Api: api ? api.name : request.operation,\n      Version: 1,\n      Service: request.service.api.serviceId || request.service.api.endpointPrefix,\n      Region: request.httpRequest.region,\n      MaxRetriesExceeded: 0,\n      UserAgent: request.httpRequest.getUserAgent(),\n    };\n    var response = request.response;\n    if (response.httpResponse.statusCode) {\n      monitoringEvent.FinalHttpStatusCode = response.httpResponse.statusCode;\n    }\n    if (response.error) {\n      var error = response.error;\n      var statusCode = response.httpResponse.statusCode;\n      if (statusCode > 299) {\n        if (error.code) monitoringEvent.FinalAwsException = error.code;\n        if (error.message) monitoringEvent.FinalAwsExceptionMessage = error.message;\n      } else {\n        if (error.code || error.name) monitoringEvent.FinalSdkException = error.code || error.name;\n        if (error.message) monitoringEvent.FinalSdkExceptionMessage = error.message;\n      }\n    }\n    return monitoringEvent;\n  },\n\n  /**\n   * Event recording metrics for an API call attempt.\n   * @returns {object} a subset of api call attempt metrics\n   * @api private\n   */\n  apiAttemptEvent: function apiAttemptEvent(request) {\n    var api = request.service.api.operations[request.operation];\n    var monitoringEvent = {\n      Type: 'ApiCallAttempt',\n      Api: api ? api.name : request.operation,\n      Version: 1,\n      Service: request.service.api.serviceId || request.service.api.endpointPrefix,\n      Fqdn: request.httpRequest.endpoint.hostname,\n      UserAgent: request.httpRequest.getUserAgent(),\n    };\n    var response = request.response;\n    if (response.httpResponse.statusCode) {\n      monitoringEvent.HttpStatusCode = response.httpResponse.statusCode;\n    }\n    if (\n      !request._unAuthenticated &&\n      request.service.config.credentials &&\n      request.service.config.credentials.accessKeyId\n    ) {\n      monitoringEvent.AccessKey = request.service.config.credentials.accessKeyId;\n    }\n    if (!response.httpResponse.headers) return monitoringEvent;\n    if (request.httpRequest.headers['x-amz-security-token']) {\n      monitoringEvent.SessionToken = request.httpRequest.headers['x-amz-security-token'];\n    }\n    if (response.httpResponse.headers['x-amzn-requestid']) {\n      monitoringEvent.XAmznRequestId = response.httpResponse.headers['x-amzn-requestid'];\n    }\n    if (response.httpResponse.headers['x-amz-request-id']) {\n      monitoringEvent.XAmzRequestId = response.httpResponse.headers['x-amz-request-id'];\n    }\n    if (response.httpResponse.headers['x-amz-id-2']) {\n      monitoringEvent.XAmzId2 = response.httpResponse.headers['x-amz-id-2'];\n    }\n    return monitoringEvent;\n  },\n\n  /**\n   * Add metrics of failed request.\n   * @api private\n   */\n  attemptFailEvent: function attemptFailEvent(request) {\n    var monitoringEvent = this.apiAttemptEvent(request);\n    var response = request.response;\n    var error = response.error;\n    if (response.httpResponse.statusCode > 299 ) {\n      if (error.code) monitoringEvent.AwsException = error.code;\n      if (error.message) monitoringEvent.AwsExceptionMessage = error.message;\n    } else {\n      if (error.code || error.name) monitoringEvent.SdkException = error.code || error.name;\n      if (error.message) monitoringEvent.SdkExceptionMessage = error.message;\n    }\n    return monitoringEvent;\n  },\n\n  /**\n   * Attach listeners to request object to fetch metrics of each request\n   * and emit data object through \\'ApiCall\\' and \\'ApiCallAttempt\\' events.\n   * @api private\n   */\n  attachMonitoringEmitter: function attachMonitoringEmitter(request) {\n    var attemptTimestamp; //timestamp marking the beginning of a request attempt\n    var attemptStartRealTime; //Start time of request attempt. Used to calculating attemptLatency\n    var attemptLatency; //latency from request sent out to http response reaching SDK\n    var callStartRealTime; //Start time of API call. Used to calculating API call latency\n    var attemptCount = 0; //request.retryCount is not reliable here\n    var region; //region cache region for each attempt since it can be updated in plase (e.g. s3)\n    var callTimestamp; //timestamp when the request is created\n    var self = this;\n    var addToHead = true;\n\n    request.on('validate', function () {\n      callStartRealTime = AWS.util.realClock.now();\n      callTimestamp = Date.now();\n    }, addToHead);\n    request.on('sign', function () {\n      attemptStartRealTime = AWS.util.realClock.now();\n      attemptTimestamp = Date.now();\n      region = request.httpRequest.region;\n      attemptCount++;\n    }, addToHead);\n    request.on('validateResponse', function() {\n      attemptLatency = Math.round(AWS.util.realClock.now() - attemptStartRealTime);\n    });\n    request.addNamedListener('API_CALL_ATTEMPT', 'success', function API_CALL_ATTEMPT() {\n      var apiAttemptEvent = self.apiAttemptEvent(request);\n      apiAttemptEvent.Timestamp = attemptTimestamp;\n      apiAttemptEvent.AttemptLatency = attemptLatency >= 0 ? attemptLatency : 0;\n      apiAttemptEvent.Region = region;\n      self.emit('apiCallAttempt', [apiAttemptEvent]);\n    });\n    request.addNamedListener('API_CALL_ATTEMPT_RETRY', 'retry', function API_CALL_ATTEMPT_RETRY() {\n      var apiAttemptEvent = self.attemptFailEvent(request);\n      apiAttemptEvent.Timestamp = attemptTimestamp;\n      //attemptLatency may not be available if fail before response\n      attemptLatency = attemptLatency ||\n        Math.round(AWS.util.realClock.now() - attemptStartRealTime);\n      apiAttemptEvent.AttemptLatency = attemptLatency >= 0 ? attemptLatency : 0;\n      apiAttemptEvent.Region = region;\n      self.emit('apiCallAttempt', [apiAttemptEvent]);\n    });\n    request.addNamedListener('API_CALL', 'complete', function API_CALL() {\n      var apiCallEvent = self.apiCallEvent(request);\n      apiCallEvent.AttemptCount = attemptCount;\n      if (apiCallEvent.AttemptCount <= 0) return;\n      apiCallEvent.Timestamp = callTimestamp;\n      var latency = Math.round(AWS.util.realClock.now() - callStartRealTime);\n      apiCallEvent.Latency = latency >= 0 ? latency : 0;\n      var response = request.response;\n      if (\n        response.error &&\n        response.error.retryable &&\n        typeof response.retryCount === 'number' &&\n        typeof response.maxRetries === 'number' &&\n        (response.retryCount >= response.maxRetries)\n      ) {\n        apiCallEvent.MaxRetriesExceeded = 1;\n      }\n      self.emit('apiCall', [apiCallEvent]);\n    });\n  },\n\n  /**\n   * Override this method to setup any custom request listeners for each\n   * new request to the service.\n   *\n   * @method_abstract This is an abstract method.\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n  },\n\n  /**\n   * Gets the signing name for a given request\n   * @api private\n   */\n  getSigningName: function getSigningName() {\n    return this.api.signingName || this.api.endpointPrefix;\n  },\n\n  /**\n   * Gets the signer class for a given request\n   * @api private\n   */\n  getSignerClass: function getSignerClass(request) {\n    var version;\n    // get operation authtype if present\n    var operation = null;\n    var authtype = '';\n    if (request) {\n      var operations = request.service.api.operations || {};\n      operation = operations[request.operation] || null;\n      authtype = operation ? operation.authtype : '';\n    }\n    if (this.config.signatureVersion) {\n      version = this.config.signatureVersion;\n    } else if (authtype === 'v4' || authtype === 'v4-unsigned-body') {\n      version = 'v4';\n    } else {\n      version = this.api.signatureVersion;\n    }\n    return AWS.Signers.RequestSigner.getVersion(version);\n  },\n\n  /**\n   * @api private\n   */\n  serviceInterface: function serviceInterface() {\n    switch (this.api.protocol) {\n      case 'ec2': return AWS.EventListeners.Query;\n      case 'query': return AWS.EventListeners.Query;\n      case 'json': return AWS.EventListeners.Json;\n      case 'rest-json': return AWS.EventListeners.RestJson;\n      case 'rest-xml': return AWS.EventListeners.RestXml;\n    }\n    if (this.api.protocol) {\n      throw new Error('Invalid service `protocol\\' ' +\n        this.api.protocol + ' in API config');\n    }\n  },\n\n  /**\n   * @api private\n   */\n  successfulResponse: function successfulResponse(resp) {\n    return resp.httpResponse.statusCode < 300;\n  },\n\n  /**\n   * How many times a failed request should be retried before giving up.\n   * the defaultRetryCount can be overriden by service classes.\n   *\n   * @api private\n   */\n  numRetries: function numRetries() {\n    if (this.config.maxRetries !== undefined) {\n      return this.config.maxRetries;\n    } else {\n      return this.defaultRetryCount;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  retryDelays: function retryDelays(retryCount, err) {\n    return AWS.util.calculateRetryDelay(retryCount, this.config.retryDelayOptions, err);\n  },\n\n  /**\n   * @api private\n   */\n  retryableError: function retryableError(error) {\n    if (this.timeoutError(error)) return true;\n    if (this.networkingError(error)) return true;\n    if (this.expiredCredentialsError(error)) return true;\n    if (this.throttledError(error)) return true;\n    if (error.statusCode >= 500) return true;\n    return false;\n  },\n\n  /**\n   * @api private\n   */\n  networkingError: function networkingError(error) {\n    return error.code === 'NetworkingError';\n  },\n\n  /**\n   * @api private\n   */\n  timeoutError: function timeoutError(error) {\n    return error.code === 'TimeoutError';\n  },\n\n  /**\n   * @api private\n   */\n  expiredCredentialsError: function expiredCredentialsError(error) {\n    // TODO : this only handles *one* of the expired credential codes\n    return (error.code === 'ExpiredTokenException');\n  },\n\n  /**\n   * @api private\n   */\n  clockSkewError: function clockSkewError(error) {\n    switch (error.code) {\n      case 'RequestTimeTooSkewed':\n      case 'RequestExpired':\n      case 'InvalidSignatureException':\n      case 'SignatureDoesNotMatch':\n      case 'AuthFailure':\n      case 'RequestInTheFuture':\n        return true;\n      default: return false;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getSkewCorrectedDate: function getSkewCorrectedDate() {\n    return new Date(Date.now() + this.config.systemClockOffset);\n  },\n\n  /**\n   * @api private\n   */\n  applyClockOffset: function applyClockOffset(newServerTime) {\n    if (newServerTime) {\n      this.config.systemClockOffset = newServerTime - Date.now();\n    }\n  },\n\n  /**\n   * @api private\n   */\n  isClockSkewed: function isClockSkewed(newServerTime) {\n    if (newServerTime) {\n      return Math.abs(this.getSkewCorrectedDate().getTime() - newServerTime) >= 300000;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  throttledError: function throttledError(error) {\n    // this logic varies between services\n    if (error.statusCode === 429) return true;\n    switch (error.code) {\n      case 'ProvisionedThroughputExceededException':\n      case 'Throttling':\n      case 'ThrottlingException':\n      case 'RequestLimitExceeded':\n      case 'RequestThrottled':\n      case 'RequestThrottledException':\n      case 'TooManyRequestsException':\n      case 'TransactionInProgressException': //dynamodb\n      case 'EC2ThrottledException':\n        return true;\n      default:\n        return false;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  endpointFromTemplate: function endpointFromTemplate(endpoint) {\n    if (typeof endpoint !== 'string') return endpoint;\n\n    var e = endpoint;\n    e = e.replace(/\\{service\\}/g, this.api.endpointPrefix);\n    e = e.replace(/\\{region\\}/g, this.config.region);\n    e = e.replace(/\\{scheme\\}/g, this.config.sslEnabled ? 'https' : 'http');\n    return e;\n  },\n\n  /**\n   * @api private\n   */\n  setEndpoint: function setEndpoint(endpoint) {\n    this.endpoint = new AWS.Endpoint(endpoint, this.config);\n  },\n\n  /**\n   * @api private\n   */\n  paginationConfig: function paginationConfig(operation, throwException) {\n    var paginator = this.api.operations[operation].paginator;\n    if (!paginator) {\n      if (throwException) {\n        var e = new Error();\n        throw AWS.util.error(e, 'No pagination configuration for ' + operation);\n      }\n      return null;\n    }\n\n    return paginator;\n  }\n});\n\nAWS.util.update(AWS.Service, {\n\n  /**\n   * Adds one method for each operation described in the api configuration\n   *\n   * @api private\n   */\n  defineMethods: function defineMethods(svc) {\n    AWS.util.each(svc.prototype.api.operations, function iterator(method) {\n      if (svc.prototype[method]) return;\n      var operation = svc.prototype.api.operations[method];\n      if (operation.authtype === 'none') {\n        svc.prototype[method] = function (params, callback) {\n          return this.makeUnauthenticatedRequest(method, params, callback);\n        };\n      } else {\n        svc.prototype[method] = function (params, callback) {\n          return this.makeRequest(method, params, callback);\n        };\n      }\n    });\n  },\n\n  /**\n   * Defines a new Service class using a service identifier and list of versions\n   * including an optional set of features (functions) to apply to the class\n   * prototype.\n   *\n   * @param serviceIdentifier [String] the identifier for the service\n   * @param versions [Array<String>] a list of versions that work with this\n   *   service\n   * @param features [Object] an object to attach to the prototype\n   * @return [Class<Service>] the service class defined by this function.\n   */\n  defineService: function defineService(serviceIdentifier, versions, features) {\n    AWS.Service._serviceMap[serviceIdentifier] = true;\n    if (!Array.isArray(versions)) {\n      features = versions;\n      versions = [];\n    }\n\n    var svc = inherit(AWS.Service, features || {});\n\n    if (typeof serviceIdentifier === 'string') {\n      AWS.Service.addVersions(svc, versions);\n\n      var identifier = svc.serviceIdentifier || serviceIdentifier;\n      svc.serviceIdentifier = identifier;\n    } else { // defineService called with an API\n      svc.prototype.api = serviceIdentifier;\n      AWS.Service.defineMethods(svc);\n    }\n    AWS.SequentialExecutor.call(this.prototype);\n    //util.clientSideMonitoring is only available in node\n    if (!this.prototype.publisher && AWS.util.clientSideMonitoring) {\n      var Publisher = AWS.util.clientSideMonitoring.Publisher;\n      var configProvider = AWS.util.clientSideMonitoring.configProvider;\n      var publisherConfig = configProvider();\n      this.prototype.publisher = new Publisher(publisherConfig);\n      if (publisherConfig.enabled) {\n        //if csm is enabled in environment, SDK should send all metrics\n        AWS.Service._clientSideMonitoring = true;\n      }\n    }\n    AWS.SequentialExecutor.call(svc.prototype);\n    AWS.Service.addDefaultMonitoringListeners(svc.prototype);\n    return svc;\n  },\n\n  /**\n   * @api private\n   */\n  addVersions: function addVersions(svc, versions) {\n    if (!Array.isArray(versions)) versions = [versions];\n\n    svc.services = svc.services || {};\n    for (var i = 0; i < versions.length; i++) {\n      if (svc.services[versions[i]] === undefined) {\n        svc.services[versions[i]] = null;\n      }\n    }\n\n    svc.apiVersions = Object.keys(svc.services).sort();\n  },\n\n  /**\n   * @api private\n   */\n  defineServiceApi: function defineServiceApi(superclass, version, apiConfig) {\n    var svc = inherit(superclass, {\n      serviceIdentifier: superclass.serviceIdentifier\n    });\n\n    function setApi(api) {\n      if (api.isApi) {\n        svc.prototype.api = api;\n      } else {\n        svc.prototype.api = new Api(api, {\n          serviceIdentifier: superclass.serviceIdentifier\n        });\n      }\n    }\n\n    if (typeof version === 'string') {\n      if (apiConfig) {\n        setApi(apiConfig);\n      } else {\n        try {\n          setApi(AWS.apiLoader(superclass.serviceIdentifier, version));\n        } catch (err) {\n          throw AWS.util.error(err, {\n            message: 'Could not find API configuration ' +\n              superclass.serviceIdentifier + '-' + version\n          });\n        }\n      }\n      if (!Object.prototype.hasOwnProperty.call(superclass.services, version)) {\n        superclass.apiVersions = superclass.apiVersions.concat(version).sort();\n      }\n      superclass.services[version] = svc;\n    } else {\n      setApi(version);\n    }\n\n    AWS.Service.defineMethods(svc);\n    return svc;\n  },\n\n  /**\n   * @api private\n   */\n  hasService: function(identifier) {\n    return Object.prototype.hasOwnProperty.call(AWS.Service._serviceMap, identifier);\n  },\n\n  /**\n   * @param attachOn attach default monitoring listeners to object\n   *\n   * Each monitoring event should be emitted from service client to service constructor prototype and then\n   * to global service prototype like bubbling up. These default monitoring events listener will transfer\n   * the monitoring events to the upper layer.\n   * @api private\n   */\n  addDefaultMonitoringListeners: function addDefaultMonitoringListeners(attachOn) {\n    attachOn.addNamedListener('MONITOR_EVENTS_BUBBLE', 'apiCallAttempt', function EVENTS_BUBBLE(event) {\n      var baseClass = Object.getPrototypeOf(attachOn);\n      if (baseClass._events) baseClass.emit('apiCallAttempt', [event]);\n    });\n    attachOn.addNamedListener('CALL_EVENTS_BUBBLE', 'apiCall', function CALL_EVENTS_BUBBLE(event) {\n      var baseClass = Object.getPrototypeOf(attachOn);\n      if (baseClass._events) baseClass.emit('apiCall', [event]);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  _serviceMap: {}\n});\n\nAWS.util.mixin(AWS.Service, AWS.SequentialExecutor);\n\n/**\n * @api private\n */\nmodule.exports = AWS.Service;\n","var AWS = require('../core');\nvar v4Credentials = require('../signers/v4_credentials');\nvar resolveRegionalEndpointsFlag = require('../config_regional_endpoint');\nvar s3util = require('./s3util');\nvar regionUtil = require('../region_config');\n\n// Pull in managed upload extension\nrequire('../s3/managed_upload');\n\n/**\n * @api private\n */\nvar operationsWith200StatusCodeError = {\n  'completeMultipartUpload': true,\n  'copyObject': true,\n  'uploadPartCopy': true\n};\n\n/**\n * @api private\n */\n var regionRedirectErrorCodes = [\n  'AuthorizationHeaderMalformed', // non-head operations on virtual-hosted global bucket endpoints\n  'BadRequest', // head operations on virtual-hosted global bucket endpoints\n  'PermanentRedirect', // non-head operations on path-style or regional endpoints\n  301 // head operations on path-style or regional endpoints\n ];\n\nAWS.util.update(AWS.S3.prototype, {\n  /**\n   * @api private\n   */\n  getSignatureVersion: function getSignatureVersion(request) {\n    var defaultApiVersion = this.api.signatureVersion;\n    var userDefinedVersion = this._originalConfig ? this._originalConfig.signatureVersion : null;\n    var regionDefinedVersion = this.config.signatureVersion;\n    var isPresigned = request ? request.isPresigned() : false;\n    /*\n      1) User defined version specified:\n        a) always return user defined version\n      2) No user defined version specified:\n        a) If not using presigned urls, default to V4\n        b) If using presigned urls, default to lowest version the region supports\n    */\n    if (userDefinedVersion) {\n      userDefinedVersion = userDefinedVersion === 'v2' ? 's3' : userDefinedVersion;\n      return userDefinedVersion;\n    }\n    if (isPresigned !== true) {\n      defaultApiVersion = 'v4';\n    } else if (regionDefinedVersion) {\n      defaultApiVersion = regionDefinedVersion;\n    }\n    return defaultApiVersion;\n  },\n\n  /**\n   * @api private\n   */\n  getSigningName: function getSigningName() {\n    var _super = AWS.Service.prototype.getSigningName;\n    return (this._parsedArn && this._parsedArn.service)\n      ? this._parsedArn.service\n      : _super.call(this);\n  },\n\n  /**\n   * @api private\n   */\n  getSignerClass: function getSignerClass(request) {\n    var signatureVersion = this.getSignatureVersion(request);\n    return AWS.Signers.RequestSigner.getVersion(signatureVersion);\n  },\n\n  /**\n   * @api private\n   */\n  validateService: function validateService() {\n    var msg;\n    var messages = [];\n\n    // default to us-east-1 when no region is provided\n    if (!this.config.region) this.config.region = 'us-east-1';\n\n    if (!this.config.endpoint && this.config.s3BucketEndpoint) {\n      messages.push('An endpoint must be provided when configuring ' +\n                    '`s3BucketEndpoint` to true.');\n    }\n    if (messages.length === 1) {\n      msg = messages[0];\n    } else if (messages.length > 1) {\n      msg = 'Multiple configuration errors:\\n' + messages.join('\\n');\n    }\n    if (msg) {\n      throw AWS.util.error(new Error(),\n        {name: 'InvalidEndpoint', message: msg});\n    }\n  },\n\n  /**\n   * @api private\n   */\n  shouldDisableBodySigning: function shouldDisableBodySigning(request) {\n    var signerClass = this.getSignerClass();\n    if (this.config.s3DisableBodySigning === true && signerClass === AWS.Signers.V4\n        && request.httpRequest.endpoint.protocol === 'https:') {\n      return true;\n    }\n    return false;\n  },\n\n  /**\n   * @api private\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n    var prependListener = true;\n    request.addListener('validate', this.validateScheme);\n    request.addListener('validate', this.validateBucketName, prependListener);\n    request.addListener('validate', this.optInUsEast1RegionalEndpoint, prependListener);\n\n    request.removeListener('validate',\n      AWS.EventListeners.Core.VALIDATE_REGION);\n    request.addListener('build', this.addContentType);\n    request.addListener('build', this.computeContentMd5);\n    request.addListener('build', this.computeSseCustomerKeyMd5);\n    request.addListener('build', this.populateURI);\n    request.addListener('afterBuild', this.addExpect100Continue);\n    request.addListener('extractError', this.extractError);\n    request.addListener('extractData', AWS.util.hoistPayloadMember);\n    request.addListener('extractData', this.extractData);\n    request.addListener('extractData', this.extractErrorFrom200Response);\n    request.addListener('beforePresign', this.prepareSignedUrl);\n    if (this.shouldDisableBodySigning(request))  {\n      request.removeListener('afterBuild', AWS.EventListeners.Core.COMPUTE_SHA256);\n      request.addListener('afterBuild', this.disableBodySigning);\n    }\n    //deal with ARNs supplied to Bucket\n    if (request.operation !== 'createBucket' && s3util.isArnInParam(request, 'Bucket')) {\n      // avoid duplicate parsing in the future\n      request.service._parsedArn = AWS.util.ARN.parse(request.params.Bucket);\n\n      request.removeListener('validate', this.validateBucketName);\n      request.removeListener('build', this.populateURI);\n      if (request.service._parsedArn.service === 's3') {\n        request.addListener('validate', s3util.validateS3AccessPointArn);\n        request.addListener('validate', this.validateArnResourceType);\n      } else if (request.service._parsedArn.service === 's3-outposts') {\n        request.addListener('validate', s3util.validateOutpostsAccessPointArn);\n        request.addListener('validate', s3util.validateOutpostsArn);\n      }\n      request.addListener('validate', s3util.validateArnRegion);\n      request.addListener('validate', s3util.validateArnAccount);\n      request.addListener('validate', s3util.validateArnService);\n      request.addListener('build', this.populateUriFromAccessPointArn);\n      request.addListener('build', s3util.validatePopulateUriFromArn);\n      return;\n    }\n    //listeners regarding region inference\n    request.addListener('validate', this.validateBucketEndpoint);\n    request.addListener('validate', this.correctBucketRegionFromCache);\n    request.onAsync('extractError', this.requestBucketRegion);\n    if (AWS.util.isBrowser()) {\n      request.onAsync('retry', this.reqRegionForNetworkingError);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateScheme: function(req) {\n    var params = req.params,\n        scheme = req.httpRequest.endpoint.protocol,\n        sensitive = params.SSECustomerKey || params.CopySourceSSECustomerKey;\n    if (sensitive && scheme !== 'https:') {\n      var msg = 'Cannot send SSE keys over HTTP. Set \\'sslEnabled\\'' +\n        'to \\'true\\' in your configuration';\n      throw AWS.util.error(new Error(),\n        { code: 'ConfigError', message: msg });\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateBucketEndpoint: function(req) {\n    if (!req.params.Bucket && req.service.config.s3BucketEndpoint) {\n      var msg = 'Cannot send requests to root API with `s3BucketEndpoint` set.';\n      throw AWS.util.error(new Error(),\n        { code: 'ConfigError', message: msg });\n    }\n  },\n\n  /**\n   * Validate resource-type supplied in S3 ARN\n   */\n  validateArnResourceType: function validateArnResourceType(req) {\n    var resource = req.service._parsedArn.resource;\n\n    if (\n      resource.indexOf('accesspoint:') !== 0 &&\n      resource.indexOf('accesspoint/') !== 0\n    ) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'ARN resource should begin with \\'accesspoint/\\''\n      });\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateBucketName: function validateBucketName(req) {\n    var service = req.service;\n    var signatureVersion = service.getSignatureVersion(req);\n    var bucket = req.params && req.params.Bucket;\n    var key = req.params && req.params.Key;\n    var slashIndex = bucket && bucket.indexOf('/');\n    if (bucket && slashIndex >= 0) {\n      if (typeof key === 'string' && slashIndex > 0) {\n        req.params = AWS.util.copy(req.params);\n        // Need to include trailing slash to match sigv2 behavior\n        var prefix = bucket.substr(slashIndex + 1) || '';\n        req.params.Key = prefix + '/' + key;\n        req.params.Bucket = bucket.substr(0, slashIndex);\n      } else if (signatureVersion === 'v4') {\n        var msg = 'Bucket names cannot contain forward slashes. Bucket: ' + bucket;\n        throw AWS.util.error(new Error(),\n          { code: 'InvalidBucket', message: msg });\n      }\n    }\n  },\n\n  /**\n   * @api private\n   */\n  isValidAccelerateOperation: function isValidAccelerateOperation(operation) {\n    var invalidOperations = [\n      'createBucket',\n      'deleteBucket',\n      'listBuckets'\n    ];\n    return invalidOperations.indexOf(operation) === -1;\n  },\n\n  /**\n   * When us-east-1 region endpoint configuration is set, in stead of sending request to\n   * global endpoint(e.g. 's3.amazonaws.com'), we will send request to\n   * 's3.us-east-1.amazonaws.com'.\n   * @api private\n   */\n  optInUsEast1RegionalEndpoint: function optInUsEast1RegionalEndpoint(req) {\n    var service = req.service;\n    var config = service.config;\n    config.s3UsEast1RegionalEndpoint = resolveRegionalEndpointsFlag(service._originalConfig, {\n      env: 'AWS_S3_US_EAST_1_REGIONAL_ENDPOINT',\n      sharedConfig: 's3_us_east_1_regional_endpoint',\n      clientConfig: 's3UsEast1RegionalEndpoint'\n    });\n    if (\n      !(service._originalConfig || {}).endpoint &&\n      req.httpRequest.region === 'us-east-1' &&\n      config.s3UsEast1RegionalEndpoint === 'regional' &&\n      req.httpRequest.endpoint.hostname.indexOf('s3.amazonaws.com') >= 0\n    ) {\n      var insertPoint = config.endpoint.indexOf('.amazonaws.com');\n      regionalEndpoint = config.endpoint.substring(0, insertPoint) +\n        '.us-east-1' + config.endpoint.substring(insertPoint);\n      req.httpRequest.updateEndpoint(regionalEndpoint);\n    }\n  },\n\n  /**\n   * S3 prefers dns-compatible bucket names to be moved from the uri path\n   * to the hostname as a sub-domain.  This is not possible, even for dns-compat\n   * buckets when using SSL and the bucket name contains a dot ('.').  The\n   * ssl wildcard certificate is only 1-level deep.\n   *\n   * @api private\n   */\n  populateURI: function populateURI(req) {\n    var httpRequest = req.httpRequest;\n    var b = req.params.Bucket;\n    var service = req.service;\n    var endpoint = httpRequest.endpoint;\n    if (b) {\n      if (!service.pathStyleBucketName(b)) {\n        if (service.config.useAccelerateEndpoint && service.isValidAccelerateOperation(req.operation)) {\n          if (service.config.useDualstack) {\n            endpoint.hostname = b + '.s3-accelerate.dualstack.amazonaws.com';\n          } else {\n            endpoint.hostname = b + '.s3-accelerate.amazonaws.com';\n          }\n        } else if (!service.config.s3BucketEndpoint) {\n          endpoint.hostname =\n            b + '.' + endpoint.hostname;\n        }\n\n        var port = endpoint.port;\n        if (port !== 80 && port !== 443) {\n          endpoint.host = endpoint.hostname + ':' +\n            endpoint.port;\n        } else {\n          endpoint.host = endpoint.hostname;\n        }\n\n        httpRequest.virtualHostedBucket = b; // needed for signing the request\n        service.removeVirtualHostedBucketFromPath(req);\n      }\n    }\n  },\n\n  /**\n   * Takes the bucket name out of the path if bucket is virtual-hosted\n   *\n   * @api private\n   */\n  removeVirtualHostedBucketFromPath: function removeVirtualHostedBucketFromPath(req) {\n    var httpRequest = req.httpRequest;\n    var bucket = httpRequest.virtualHostedBucket;\n    if (bucket && httpRequest.path) {\n      if (req.params && req.params.Key) {\n        var encodedS3Key = '/' + AWS.util.uriEscapePath(req.params.Key);\n        if (httpRequest.path.indexOf(encodedS3Key) === 0 && (httpRequest.path.length === encodedS3Key.length || httpRequest.path[encodedS3Key.length] === '?')) {\n          //path only contains key or path contains only key and querystring\n          return;\n        }\n      }\n      httpRequest.path = httpRequest.path.replace(new RegExp('/' + bucket), '');\n      if (httpRequest.path[0] !== '/') {\n        httpRequest.path = '/' + httpRequest.path;\n      }\n    }\n  },\n\n  /**\n   * When user supply an access point ARN in the Bucket parameter, we need to\n   * populate the URI according to the ARN.\n   */\n  populateUriFromAccessPointArn: function populateUriFromAccessPointArn(req) {\n    var accessPointArn = req.service._parsedArn;\n\n    var isOutpostArn = accessPointArn.service === 's3-outposts';\n\n    var outpostsSuffix = isOutpostArn ? '.' + accessPointArn.outpostId: '';\n    var serviceName = isOutpostArn ? 's3-outposts': 's3-accesspoint';\n    var dualStackSuffix = !isOutpostArn && req.service.config.useDualstack ? '.dualstack' : '';\n\n    var endpoint = req.httpRequest.endpoint;\n    var dnsSuffix = regionUtil.getEndpointSuffix(accessPointArn.region);\n    var useArnRegion = req.service.config.s3UseArnRegion;\n\n    endpoint.hostname = [\n      accessPointArn.accessPoint + '-' + accessPointArn.accountId + outpostsSuffix,\n      serviceName + dualStackSuffix,\n      useArnRegion ? accessPointArn.region : req.service.config.region,\n      dnsSuffix\n    ].join('.');\n    endpoint.host = endpoint.hostname;\n\n    var encodedArn = AWS.util.uriEscape(req.params.Bucket);\n    var path = req.httpRequest.path;\n    //remove the Bucket value from path\n    req.httpRequest.path = path.replace(new RegExp('/' + encodedArn), '');\n    if (req.httpRequest.path[0] !== '/') {\n      req.httpRequest.path = '/' + req.httpRequest.path;\n    }\n    req.httpRequest.region = accessPointArn.region; //region used to sign\n  },\n\n  /**\n   * Adds Expect: 100-continue header if payload is greater-or-equal 1MB\n   * @api private\n   */\n  addExpect100Continue: function addExpect100Continue(req) {\n    var len = req.httpRequest.headers['Content-Length'];\n    if (AWS.util.isNode() && (len >= 1024 * 1024 || req.params.Body instanceof AWS.util.stream.Stream)) {\n      req.httpRequest.headers['Expect'] = '100-continue';\n    }\n  },\n\n  /**\n   * Adds a default content type if none is supplied.\n   *\n   * @api private\n   */\n  addContentType: function addContentType(req) {\n    var httpRequest = req.httpRequest;\n    if (httpRequest.method === 'GET' || httpRequest.method === 'HEAD') {\n      // Content-Type is not set in GET/HEAD requests\n      delete httpRequest.headers['Content-Type'];\n      return;\n    }\n\n    if (!httpRequest.headers['Content-Type']) { // always have a Content-Type\n      httpRequest.headers['Content-Type'] = 'application/octet-stream';\n    }\n\n    var contentType = httpRequest.headers['Content-Type'];\n    if (AWS.util.isBrowser()) {\n      if (typeof httpRequest.body === 'string' && !contentType.match(/;\\s*charset=/)) {\n        var charset = '; charset=UTF-8';\n        httpRequest.headers['Content-Type'] += charset;\n      } else {\n        var replaceFn = function(_, prefix, charsetName) {\n          return prefix + charsetName.toUpperCase();\n        };\n\n        httpRequest.headers['Content-Type'] =\n          contentType.replace(/(;\\s*charset=)(.+)$/, replaceFn);\n      }\n    }\n  },\n\n  /**\n   * @api private\n   */\n  computableChecksumOperations: {\n    putBucketCors: true,\n    putBucketLifecycle: true,\n    putBucketLifecycleConfiguration: true,\n    putBucketTagging: true,\n    deleteObjects: true,\n    putBucketReplication: true,\n    putObjectLegalHold: true,\n    putObjectRetention: true,\n    putObjectLockConfiguration: true\n  },\n\n  /**\n   * Checks whether checksums should be computed for the request.\n   * If the request requires checksums to be computed, this will always\n   * return true, otherwise it depends on whether {AWS.Config.computeChecksums}\n   * is set.\n   *\n   * @param req [AWS.Request] the request to check against\n   * @return [Boolean] whether to compute checksums for a request.\n   * @api private\n   */\n  willComputeChecksums: function willComputeChecksums(req) {\n    if (this.computableChecksumOperations[req.operation]) return true;\n    if (!this.config.computeChecksums) return false;\n\n    // TODO: compute checksums for Stream objects\n    if (!AWS.util.Buffer.isBuffer(req.httpRequest.body) &&\n        typeof req.httpRequest.body !== 'string') {\n      return false;\n    }\n\n    var rules = req.service.api.operations[req.operation].input.members;\n\n    // Sha256 signing disabled, and not a presigned url\n    if (req.service.shouldDisableBodySigning(req) && !Object.prototype.hasOwnProperty.call(req.httpRequest.headers, 'presigned-expires')) {\n      if (rules.ContentMD5 && !req.params.ContentMD5) {\n        return true;\n      }\n    }\n\n    // V4 signer uses SHA256 signatures so only compute MD5 if it is required\n    if (req.service.getSignerClass(req) === AWS.Signers.V4) {\n      if (rules.ContentMD5 && !rules.ContentMD5.required) return false;\n    }\n\n    if (rules.ContentMD5 && !req.params.ContentMD5) return true;\n  },\n\n  /**\n   * A listener that computes the Content-MD5 and sets it in the header.\n   * @see AWS.S3.willComputeChecksums\n   * @api private\n   */\n  computeContentMd5: function computeContentMd5(req) {\n    if (req.service.willComputeChecksums(req)) {\n      var md5 = AWS.util.crypto.md5(req.httpRequest.body, 'base64');\n      req.httpRequest.headers['Content-MD5'] = md5;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  computeSseCustomerKeyMd5: function computeSseCustomerKeyMd5(req) {\n    var keys = {\n      SSECustomerKey: 'x-amz-server-side-encryption-customer-key-MD5',\n      CopySourceSSECustomerKey: 'x-amz-copy-source-server-side-encryption-customer-key-MD5'\n    };\n    AWS.util.each(keys, function(key, header) {\n      if (req.params[key]) {\n        var value = AWS.util.crypto.md5(req.params[key], 'base64');\n        req.httpRequest.headers[header] = value;\n      }\n    });\n  },\n\n  /**\n   * Returns true if the bucket name should be left in the URI path for\n   * a request to S3.  This function takes into account the current\n   * endpoint protocol (e.g. http or https).\n   *\n   * @api private\n   */\n  pathStyleBucketName: function pathStyleBucketName(bucketName) {\n    // user can force path style requests via the configuration\n    if (this.config.s3ForcePathStyle) return true;\n    if (this.config.s3BucketEndpoint) return false;\n\n    if (s3util.dnsCompatibleBucketName(bucketName)) {\n      return (this.config.sslEnabled && bucketName.match(/\\./)) ? true : false;\n    } else {\n      return true; // not dns compatible names must always use path style\n    }\n  },\n\n  /**\n   * For COPY operations, some can be error even with status code 200.\n   * SDK treats the response as exception when response body indicates\n   * an exception or body is empty.\n   *\n   * @api private\n   */\n  extractErrorFrom200Response: function extractErrorFrom200Response(resp) {\n    if (!operationsWith200StatusCodeError[resp.request.operation]) return;\n    var httpResponse = resp.httpResponse;\n    if (httpResponse.body && httpResponse.body.toString().match('<Error>')) {\n      // Response body with '<Error>...</Error>' indicates an exception.\n      // Get S3 client object. In ManagedUpload, this.service refers to\n      // S3 client object.\n      resp.data = null;\n      var service = this.service ? this.service : this;\n      service.extractError(resp);\n      throw resp.error;\n    } else if (!httpResponse.body || !httpResponse.body.toString().match(/<[\\w_]/)) {\n      // When body is empty or incomplete, S3 might stop the request on detecting client\n      // side aborting the request.\n      resp.data = null;\n      throw AWS.util.error(new Error(), {\n        code: 'InternalError',\n        message: 'S3 aborted request'\n      });\n    }\n  },\n\n  /**\n   * @return [Boolean] whether the error can be retried\n   * @api private\n   */\n  retryableError: function retryableError(error, request) {\n    if (operationsWith200StatusCodeError[request.operation] &&\n        error.statusCode === 200) {\n      return true;\n    } else if (request._requestRegionForBucket &&\n        request.service.bucketRegionCache[request._requestRegionForBucket]) {\n      return false;\n    } else if (error && error.code === 'RequestTimeout') {\n      return true;\n    } else if (error &&\n        regionRedirectErrorCodes.indexOf(error.code) != -1 &&\n        error.region && error.region != request.httpRequest.region) {\n      request.httpRequest.region = error.region;\n      if (error.statusCode === 301) {\n        request.service.updateReqBucketRegion(request);\n      }\n      return true;\n    } else {\n      var _super = AWS.Service.prototype.retryableError;\n      return _super.call(this, error, request);\n    }\n  },\n\n  /**\n   * Updates httpRequest with region. If region is not provided, then\n   * the httpRequest will be updated based on httpRequest.region\n   *\n   * @api private\n   */\n  updateReqBucketRegion: function updateReqBucketRegion(request, region) {\n    var httpRequest = request.httpRequest;\n    if (typeof region === 'string' && region.length) {\n      httpRequest.region = region;\n    }\n    if (!httpRequest.endpoint.host.match(/s3(?!-accelerate).*\\.amazonaws\\.com$/)) {\n      return;\n    }\n    var service = request.service;\n    var s3Config = service.config;\n    var s3BucketEndpoint = s3Config.s3BucketEndpoint;\n    if (s3BucketEndpoint) {\n      delete s3Config.s3BucketEndpoint;\n    }\n    var newConfig = AWS.util.copy(s3Config);\n    delete newConfig.endpoint;\n    newConfig.region = httpRequest.region;\n\n    httpRequest.endpoint = (new AWS.S3(newConfig)).endpoint;\n    service.populateURI(request);\n    s3Config.s3BucketEndpoint = s3BucketEndpoint;\n    httpRequest.headers.Host = httpRequest.endpoint.host;\n\n    if (request._asm.currentState === 'validate') {\n      request.removeListener('build', service.populateURI);\n      request.addListener('build', service.removeVirtualHostedBucketFromPath);\n    }\n  },\n\n  /**\n   * Provides a specialized parser for getBucketLocation -- all other\n   * operations are parsed by the super class.\n   *\n   * @api private\n   */\n  extractData: function extractData(resp) {\n    var req = resp.request;\n    if (req.operation === 'getBucketLocation') {\n      var match = resp.httpResponse.body.toString().match(/>(.+)<\\/Location/);\n      delete resp.data['_'];\n      if (match) {\n        resp.data.LocationConstraint = match[1];\n      } else {\n        resp.data.LocationConstraint = '';\n      }\n    }\n    var bucket = req.params.Bucket || null;\n    if (req.operation === 'deleteBucket' && typeof bucket === 'string' && !resp.error) {\n      req.service.clearBucketRegionCache(bucket);\n    } else {\n      var headers = resp.httpResponse.headers || {};\n      var region = headers['x-amz-bucket-region'] || null;\n      if (!region && req.operation === 'createBucket' && !resp.error) {\n        var createBucketConfiguration = req.params.CreateBucketConfiguration;\n        if (!createBucketConfiguration) {\n          region = 'us-east-1';\n        } else if (createBucketConfiguration.LocationConstraint === 'EU') {\n          region = 'eu-west-1';\n        } else {\n          region = createBucketConfiguration.LocationConstraint;\n        }\n      }\n      if (region) {\n          if (bucket && region !== req.service.bucketRegionCache[bucket]) {\n            req.service.bucketRegionCache[bucket] = region;\n          }\n      }\n    }\n    req.service.extractRequestIds(resp);\n  },\n\n  /**\n   * Extracts an error object from the http response.\n   *\n   * @api private\n   */\n  extractError: function extractError(resp) {\n    var codes = {\n      304: 'NotModified',\n      403: 'Forbidden',\n      400: 'BadRequest',\n      404: 'NotFound'\n    };\n\n    var req = resp.request;\n    var code = resp.httpResponse.statusCode;\n    var body = resp.httpResponse.body || '';\n\n    var headers = resp.httpResponse.headers || {};\n    var region = headers['x-amz-bucket-region'] || null;\n    var bucket = req.params.Bucket || null;\n    var bucketRegionCache = req.service.bucketRegionCache;\n    if (region && bucket && region !== bucketRegionCache[bucket]) {\n      bucketRegionCache[bucket] = region;\n    }\n\n    var cachedRegion;\n    if (codes[code] && body.length === 0) {\n      if (bucket && !region) {\n        cachedRegion = bucketRegionCache[bucket] || null;\n        if (cachedRegion !== req.httpRequest.region) {\n          region = cachedRegion;\n        }\n      }\n      resp.error = AWS.util.error(new Error(), {\n        code: codes[code],\n        message: null,\n        region: region\n      });\n    } else {\n      var data = new AWS.XML.Parser().parse(body.toString());\n\n      if (data.Region && !region) {\n        region = data.Region;\n        if (bucket && region !== bucketRegionCache[bucket]) {\n          bucketRegionCache[bucket] = region;\n        }\n      } else if (bucket && !region && !data.Region) {\n        cachedRegion = bucketRegionCache[bucket] || null;\n        if (cachedRegion !== req.httpRequest.region) {\n          region = cachedRegion;\n        }\n      }\n\n      resp.error = AWS.util.error(new Error(), {\n        code: data.Code || code,\n        message: data.Message || null,\n        region: region\n      });\n    }\n    req.service.extractRequestIds(resp);\n  },\n\n  /**\n   * If region was not obtained synchronously, then send async request\n   * to get bucket region for errors resulting from wrong region.\n   *\n   * @api private\n   */\n  requestBucketRegion: function requestBucketRegion(resp, done) {\n    var error = resp.error;\n    var req = resp.request;\n    var bucket = req.params.Bucket || null;\n\n    if (!error || !bucket || error.region || req.operation === 'listObjects' ||\n        (AWS.util.isNode() && req.operation === 'headBucket') ||\n        (error.statusCode === 400 && req.operation !== 'headObject') ||\n        regionRedirectErrorCodes.indexOf(error.code) === -1) {\n      return done();\n    }\n    var reqOperation = AWS.util.isNode() ? 'headBucket' : 'listObjects';\n    var reqParams = {Bucket: bucket};\n    if (reqOperation === 'listObjects') reqParams.MaxKeys = 0;\n    var regionReq = req.service[reqOperation](reqParams);\n    regionReq._requestRegionForBucket = bucket;\n    regionReq.send(function() {\n      var region = req.service.bucketRegionCache[bucket] || null;\n      error.region = region;\n      done();\n    });\n  },\n\n   /**\n   * For browser only. If NetworkingError received, will attempt to obtain\n   * the bucket region.\n   *\n   * @api private\n   */\n   reqRegionForNetworkingError: function reqRegionForNetworkingError(resp, done) {\n    if (!AWS.util.isBrowser()) {\n      return done();\n    }\n    var error = resp.error;\n    var request = resp.request;\n    var bucket = request.params.Bucket;\n    if (!error || error.code !== 'NetworkingError' || !bucket ||\n        request.httpRequest.region === 'us-east-1') {\n      return done();\n    }\n    var service = request.service;\n    var bucketRegionCache = service.bucketRegionCache;\n    var cachedRegion = bucketRegionCache[bucket] || null;\n\n    if (cachedRegion && cachedRegion !== request.httpRequest.region) {\n      service.updateReqBucketRegion(request, cachedRegion);\n      done();\n    } else if (!s3util.dnsCompatibleBucketName(bucket)) {\n      service.updateReqBucketRegion(request, 'us-east-1');\n      if (bucketRegionCache[bucket] !== 'us-east-1') {\n        bucketRegionCache[bucket] = 'us-east-1';\n      }\n      done();\n    } else if (request.httpRequest.virtualHostedBucket) {\n      var getRegionReq = service.listObjects({Bucket: bucket, MaxKeys: 0});\n      service.updateReqBucketRegion(getRegionReq, 'us-east-1');\n      getRegionReq._requestRegionForBucket = bucket;\n\n      getRegionReq.send(function() {\n        var region = service.bucketRegionCache[bucket] || null;\n        if (region && region !== request.httpRequest.region) {\n          service.updateReqBucketRegion(request, region);\n        }\n        done();\n      });\n    } else {\n      // DNS-compatible path-style\n      // (s3ForcePathStyle or bucket name with dot over https)\n      // Cannot obtain region information for this case\n      done();\n    }\n   },\n\n  /**\n   * Cache for bucket region.\n   *\n   * @api private\n   */\n   bucketRegionCache: {},\n\n  /**\n   * Clears bucket region cache.\n   *\n   * @api private\n   */\n   clearBucketRegionCache: function(buckets) {\n    var bucketRegionCache = this.bucketRegionCache;\n    if (!buckets) {\n      buckets = Object.keys(bucketRegionCache);\n    } else if (typeof buckets === 'string') {\n      buckets = [buckets];\n    }\n    for (var i = 0; i < buckets.length; i++) {\n      delete bucketRegionCache[buckets[i]];\n    }\n    return bucketRegionCache;\n   },\n\n   /**\n    * Corrects request region if bucket's cached region is different\n    *\n    * @api private\n    */\n  correctBucketRegionFromCache: function correctBucketRegionFromCache(req) {\n    var bucket = req.params.Bucket || null;\n    if (bucket) {\n      var service = req.service;\n      var requestRegion = req.httpRequest.region;\n      var cachedRegion = service.bucketRegionCache[bucket];\n      if (cachedRegion && cachedRegion !== requestRegion) {\n        service.updateReqBucketRegion(req, cachedRegion);\n      }\n    }\n  },\n\n  /**\n   * Extracts S3 specific request ids from the http response.\n   *\n   * @api private\n   */\n  extractRequestIds: function extractRequestIds(resp) {\n    var extendedRequestId = resp.httpResponse.headers ? resp.httpResponse.headers['x-amz-id-2'] : null;\n    var cfId = resp.httpResponse.headers ? resp.httpResponse.headers['x-amz-cf-id'] : null;\n    resp.extendedRequestId = extendedRequestId;\n    resp.cfId = cfId;\n\n    if (resp.error) {\n      resp.error.requestId = resp.requestId || null;\n      resp.error.extendedRequestId = extendedRequestId;\n      resp.error.cfId = cfId;\n    }\n  },\n\n  /**\n   * Get a pre-signed URL for a given operation name.\n   *\n   * @note You must ensure that you have static or previously resolved\n   *   credentials if you call this method synchronously (with no callback),\n   *   otherwise it may not properly sign the request. If you cannot guarantee\n   *   this (you are using an asynchronous credential provider, i.e., EC2\n   *   IAM roles), you should always call this method with an asynchronous\n   *   callback.\n   * @note Not all operation parameters are supported when using pre-signed\n   *   URLs. Certain parameters, such as `SSECustomerKey`, `ACL`, `Expires`,\n   *   `ContentLength`, or `Tagging` must be provided as headers when sending a\n   *   request. If you are using pre-signed URLs to upload from a browser and\n   *   need to use these fields, see {createPresignedPost}.\n   * @note The default signer allows altering the request by adding corresponding\n   *   headers to set some parameters (e.g. Range) and these added parameters\n   *   won't be signed. You must use signatureVersion v4 to to include these\n   *   parameters in the signed portion of the URL and enforce exact matching\n   *   between headers and signed params in the URL.\n   * @note This operation cannot be used with a promise. See note above regarding\n   *   asynchronous credentials and use with a callback.\n   * @param operation [String] the name of the operation to call\n   * @param params [map] parameters to pass to the operation. See the given\n   *   operation for the expected operation parameters. In addition, you can\n   *   also pass the \"Expires\" parameter to inform S3 how long the URL should\n   *   work for.\n   * @option params Expires [Integer] (900) the number of seconds to expire\n   *   the pre-signed URL operation in. Defaults to 15 minutes.\n   * @param callback [Function] if a callback is provided, this function will\n   *   pass the URL as the second parameter (after the error parameter) to\n   *   the callback function.\n   * @return [String] if called synchronously (with no callback), returns the\n   *   signed URL.\n   * @return [null] nothing is returned if a callback is provided.\n   * @example Pre-signing a getObject operation (synchronously)\n   *   var params = {Bucket: 'bucket', Key: 'key'};\n   *   var url = s3.getSignedUrl('getObject', params);\n   *   console.log('The URL is', url);\n   * @example Pre-signing a putObject (asynchronously)\n   *   var params = {Bucket: 'bucket', Key: 'key'};\n   *   s3.getSignedUrl('putObject', params, function (err, url) {\n   *     console.log('The URL is', url);\n   *   });\n   * @example Pre-signing a putObject operation with a specific payload\n   *   var params = {Bucket: 'bucket', Key: 'key', Body: 'body'};\n   *   var url = s3.getSignedUrl('putObject', params);\n   *   console.log('The URL is', url);\n   * @example Passing in a 1-minute expiry time for a pre-signed URL\n   *   var params = {Bucket: 'bucket', Key: 'key', Expires: 60};\n   *   var url = s3.getSignedUrl('getObject', params);\n   *   console.log('The URL is', url); // expires in 60 seconds\n   */\n  getSignedUrl: function getSignedUrl(operation, params, callback) {\n    params = AWS.util.copy(params || {});\n    var expires = params.Expires || 900;\n\n    if (typeof expires !== 'number') {\n      throw AWS.util.error(new Error(),\n        { code: 'InvalidParameterException', message: 'The expiration must be a number, received ' + typeof expires });\n    }\n\n    delete params.Expires; // we can't validate this\n    var request = this.makeRequest(operation, params);\n\n    if (callback) {\n      AWS.util.defer(function() {\n        request.presign(expires, callback);\n      });\n    } else {\n      return request.presign(expires, callback);\n    }\n  },\n\n  /**\n   * @!method  getSignedUrlPromise()\n   *   Returns a 'thenable' promise that will be resolved with a pre-signed URL\n   *   for a given operation name.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @note Not all operation parameters are supported when using pre-signed\n   *      URLs. Certain parameters, such as `SSECustomerKey`, `ACL`, `Expires`,\n   *      `ContentLength`, or `Tagging` must be provided as headers when sending a\n   *      request. If you are using pre-signed URLs to upload from a browser and\n   *      need to use these fields, see {createPresignedPost}.\n   *   @param operation [String] the name of the operation to call\n   *   @param params [map] parameters to pass to the operation. See the given\n   *      operation for the expected operation parameters. In addition, you can\n   *      also pass the \"Expires\" parameter to inform S3 how long the URL should\n   *      work for.\n   *   @option params Expires [Integer] (900) the number of seconds to expire\n   *      the pre-signed URL operation in. Defaults to 15 minutes.\n   *   @callback fulfilledCallback function(url)\n   *     Called if the promise is fulfilled.\n   *     @param url [String] the signed url\n   *   @callback rejectedCallback function(err)\n   *     Called if the promise is rejected.\n   *     @param err [Error] if an error occurred, this value will be filled\n   *   @return [Promise] A promise that represents the state of the `refresh` call.\n   *   @example Pre-signing a getObject operation\n   *      var params = {Bucket: 'bucket', Key: 'key'};\n   *      var promise = s3.getSignedUrlPromise('getObject', params);\n   *      promise.then(function(url) {\n   *        console.log('The URL is', url);\n   *      }, function(err) { ... });\n   *   @example Pre-signing a putObject operation with a specific payload\n   *      var params = {Bucket: 'bucket', Key: 'key', Body: 'body'};\n   *      var promise = s3.getSignedUrlPromise('putObject', params);\n   *      promise.then(function(url) {\n   *        console.log('The URL is', url);\n   *      }, function(err) { ... });\n   *   @example Passing in a 1-minute expiry time for a pre-signed URL\n   *      var params = {Bucket: 'bucket', Key: 'key', Expires: 60};\n   *      var promise = s3.getSignedUrlPromise('getObject', params);\n   *      promise.then(function(url) {\n   *        console.log('The URL is', url);\n   *      }, function(err) { ... });\n   */\n\n  /**\n   * Get a pre-signed POST policy to support uploading to S3 directly from an\n   * HTML form.\n   *\n   * @param params [map]\n   * @option params Bucket [String]     The bucket to which the post should be\n   *                                    uploaded\n   * @option params Expires [Integer]   (3600) The number of seconds for which\n   *                                    the presigned policy should be valid.\n   * @option params Conditions [Array]  An array of conditions that must be met\n   *                                    for the presigned policy to allow the\n   *                                    upload. This can include required tags,\n   *                                    the accepted range for content lengths,\n   *                                    etc.\n   * @see http://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-HTTPPOSTConstructPolicy.html\n   * @option params Fields [map]        Fields to include in the form. All\n   *                                    values passed in as fields will be\n   *                                    signed as exact match conditions.\n   * @param callback [Function]\n   *\n   * @note All fields passed in when creating presigned post data will be signed\n   *   as exact match conditions. Any fields that will be interpolated by S3\n   *   must be added to the fields hash after signing, and an appropriate\n   *   condition for such fields must be explicitly added to the Conditions\n   *   array passed to this function before signing.\n   *\n   * @example Presiging post data with a known key\n   *   var params = {\n   *     Bucket: 'bucket',\n   *     Fields: {\n   *       key: 'key'\n   *     }\n   *   };\n   *   s3.createPresignedPost(params, function(err, data) {\n   *     if (err) {\n   *       console.error('Presigning post data encountered an error', err);\n   *     } else {\n   *       console.log('The post data is', data);\n   *     }\n   *   });\n   *\n   * @example Presigning post data with an interpolated key\n   *   var params = {\n   *     Bucket: 'bucket',\n   *     Conditions: [\n   *       ['starts-with', '$key', 'path/to/uploads/']\n   *     ]\n   *   };\n   *   s3.createPresignedPost(params, function(err, data) {\n   *     if (err) {\n   *       console.error('Presigning post data encountered an error', err);\n   *     } else {\n   *       data.Fields.key = 'path/to/uploads/${filename}';\n   *       console.log('The post data is', data);\n   *     }\n   *   });\n   *\n   * @note You must ensure that you have static or previously resolved\n   *   credentials if you call this method synchronously (with no callback),\n   *   otherwise it may not properly sign the request. If you cannot guarantee\n   *   this (you are using an asynchronous credential provider, i.e., EC2\n   *   IAM roles), you should always call this method with an asynchronous\n   *   callback.\n   *\n   * @return [map]  If called synchronously (with no callback), returns a hash\n   *                with the url to set as the form action and a hash of fields\n   *                to include in the form.\n   * @return [null] Nothing is returned if a callback is provided.\n   *\n   * @callback callback function (err, data)\n   *  @param err [Error] the error object returned from the policy signer\n   *  @param data [map] The data necessary to construct an HTML form\n   *  @param data.url [String] The URL to use as the action of the form\n   *  @param data.fields [map] A hash of fields that must be included in the\n   *                           form for the upload to succeed. This hash will\n   *                           include the signed POST policy, your access key\n   *                           ID and security token (if present), etc. These\n   *                           may be safely included as input elements of type\n   *                           'hidden.'\n   */\n  createPresignedPost: function createPresignedPost(params, callback) {\n    if (typeof params === 'function' && callback === undefined) {\n      callback = params;\n      params = null;\n    }\n\n    params = AWS.util.copy(params || {});\n    var boundParams = this.config.params || {};\n    var bucket = params.Bucket || boundParams.Bucket,\n      self = this,\n      config = this.config,\n      endpoint = AWS.util.copy(this.endpoint);\n    if (!config.s3BucketEndpoint) {\n      endpoint.pathname = '/' + bucket;\n    }\n\n    function finalizePost() {\n      return {\n        url: AWS.util.urlFormat(endpoint),\n        fields: self.preparePostFields(\n          config.credentials,\n          config.region,\n          bucket,\n          params.Fields,\n          params.Conditions,\n          params.Expires\n        )\n      };\n    }\n\n    if (callback) {\n      config.getCredentials(function (err) {\n        if (err) {\n          callback(err);\n        } else {\n          try {\n            callback(null, finalizePost());\n          } catch (err) {\n            callback(err);\n          }\n        }\n      });\n    } else {\n      return finalizePost();\n    }\n  },\n\n  /**\n   * @api private\n   */\n  preparePostFields: function preparePostFields(\n    credentials,\n    region,\n    bucket,\n    fields,\n    conditions,\n    expiresInSeconds\n  ) {\n    var now = this.getSkewCorrectedDate();\n    if (!credentials || !region || !bucket) {\n      throw new Error('Unable to create a POST object policy without a bucket,'\n        + ' region, and credentials');\n    }\n    fields = AWS.util.copy(fields || {});\n    conditions = (conditions || []).slice(0);\n    expiresInSeconds = expiresInSeconds || 3600;\n\n    var signingDate = AWS.util.date.iso8601(now).replace(/[:\\-]|\\.\\d{3}/g, '');\n    var shortDate = signingDate.substr(0, 8);\n    var scope = v4Credentials.createScope(shortDate, region, 's3');\n    var credential = credentials.accessKeyId + '/' + scope;\n\n    fields['bucket'] = bucket;\n    fields['X-Amz-Algorithm'] = 'AWS4-HMAC-SHA256';\n    fields['X-Amz-Credential'] = credential;\n    fields['X-Amz-Date'] = signingDate;\n    if (credentials.sessionToken) {\n      fields['X-Amz-Security-Token'] = credentials.sessionToken;\n    }\n    for (var field in fields) {\n      if (fields.hasOwnProperty(field)) {\n        var condition = {};\n        condition[field] = fields[field];\n        conditions.push(condition);\n      }\n    }\n\n    fields.Policy = this.preparePostPolicy(\n      new Date(now.valueOf() + expiresInSeconds * 1000),\n      conditions\n    );\n    fields['X-Amz-Signature'] = AWS.util.crypto.hmac(\n      v4Credentials.getSigningKey(credentials, shortDate, region, 's3', true),\n      fields.Policy,\n      'hex'\n    );\n\n    return fields;\n  },\n\n  /**\n   * @api private\n   */\n  preparePostPolicy: function preparePostPolicy(expiration, conditions) {\n    return AWS.util.base64.encode(JSON.stringify({\n      expiration: AWS.util.date.iso8601(expiration),\n      conditions: conditions\n    }));\n  },\n\n  /**\n   * @api private\n   */\n  prepareSignedUrl: function prepareSignedUrl(request) {\n    request.addListener('validate', request.service.noPresignedContentLength);\n    request.removeListener('build', request.service.addContentType);\n    if (!request.params.Body) {\n      // no Content-MD5/SHA-256 if body is not provided\n      request.removeListener('build', request.service.computeContentMd5);\n    } else {\n      request.addListener('afterBuild', AWS.EventListeners.Core.COMPUTE_SHA256);\n    }\n  },\n\n  /**\n   * @api private\n   * @param request\n   */\n  disableBodySigning: function disableBodySigning(request) {\n    var headers = request.httpRequest.headers;\n    // Add the header to anything that isn't a presigned url, unless that presigned url had a body defined\n    if (!Object.prototype.hasOwnProperty.call(headers, 'presigned-expires')) {\n      headers['X-Amz-Content-Sha256'] = 'UNSIGNED-PAYLOAD';\n    }\n  },\n\n  /**\n   * @api private\n   */\n  noPresignedContentLength: function noPresignedContentLength(request) {\n    if (request.params.ContentLength !== undefined) {\n      throw AWS.util.error(new Error(), {code: 'UnexpectedParameter',\n        message: 'ContentLength is not supported in pre-signed URLs.'});\n    }\n  },\n\n  createBucket: function createBucket(params, callback) {\n    // When creating a bucket *outside* the classic region, the location\n    // constraint must be set for the bucket and it must match the endpoint.\n    // This chunk of code will set the location constraint param based\n    // on the region (when possible), but it will not override a passed-in\n    // location constraint.\n    if (typeof params === 'function' || !params) {\n      callback = callback || params;\n      params = {};\n    }\n    var hostname = this.endpoint.hostname;\n    // copy params so that appending keys does not unintentioinallly\n    // mutate params object argument passed in by user\n    var copiedParams = AWS.util.copy(params);\n\n    if (hostname !== this.api.globalEndpoint && !params.CreateBucketConfiguration) {\n      copiedParams.CreateBucketConfiguration = { LocationConstraint: this.config.region };\n    }\n    return this.makeRequest('createBucket', copiedParams, callback);\n  },\n\n  /**\n   * @see AWS.S3.ManagedUpload\n   * @overload upload(params = {}, [options], [callback])\n   *   Uploads an arbitrarily sized buffer, blob, or stream, using intelligent\n   *   concurrent handling of parts if the payload is large enough. You can\n   *   configure the concurrent queue size by setting `options`. Note that this\n   *   is the only operation for which the SDK can retry requests with stream\n   *   bodies.\n   *\n   *   @param (see AWS.S3.putObject)\n   *   @option (see AWS.S3.ManagedUpload.constructor)\n   *   @return [AWS.S3.ManagedUpload] the managed upload object that can call\n   *     `send()` or track progress.\n   *   @example Uploading a stream object\n   *     var params = {Bucket: 'bucket', Key: 'key', Body: stream};\n   *     s3.upload(params, function(err, data) {\n   *       console.log(err, data);\n   *     });\n   *   @example Uploading a stream with concurrency of 1 and partSize of 10mb\n   *     var params = {Bucket: 'bucket', Key: 'key', Body: stream};\n   *     var options = {partSize: 10 * 1024 * 1024, queueSize: 1};\n   *     s3.upload(params, options, function(err, data) {\n   *       console.log(err, data);\n   *     });\n   * @callback callback function(err, data)\n   *   @param err [Error] an error or null if no error occurred.\n   *   @param data [map] The response data from the successful upload:\n   *   @param data.Location [String] the URL of the uploaded object\n   *   @param data.ETag [String] the ETag of the uploaded object\n   *   @param data.Bucket [String]  the bucket to which the object was uploaded\n   *   @param data.Key [String] the key to which the object was uploaded\n   */\n  upload: function upload(params, options, callback) {\n    if (typeof options === 'function' && callback === undefined) {\n      callback = options;\n      options = null;\n    }\n\n    options = options || {};\n    options = AWS.util.merge(options || {}, {service: this, params: params});\n\n    var uploader = new AWS.S3.ManagedUpload(options);\n    if (typeof callback === 'function') uploader.send(callback);\n    return uploader;\n  }\n});\n\n/**\n * @api private\n */\nAWS.S3.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n  this.prototype.getSignedUrlPromise = AWS.util.promisifyMethod('getSignedUrl', PromiseDependency);\n};\n\n/**\n * @api private\n */\nAWS.S3.deletePromisesFromClass = function deletePromisesFromClass() {\n  delete this.prototype.getSignedUrlPromise;\n};\n\nAWS.util.addPromises(AWS.S3);\n","var AWS = require('../core');\nvar regionUtil = require('../region_config');\n\nvar s3util = {\n  /**\n   * @api private\n   */\n  isArnInParam: function isArnInParam(req, paramName) {\n    var inputShape = (req.service.api.operations[req.operation] || {}).input || {};\n    var inputMembers = inputShape.members || {};\n    if (!req.params[paramName] || !inputMembers[paramName]) return false;\n    return AWS.util.ARN.validate(req.params[paramName]);\n  },\n\n  /**\n   * Validate service component from ARN supplied in Bucket parameter\n   */\n  validateArnService: function validateArnService(req) {\n    var parsedArn = req.service._parsedArn;\n\n    if (parsedArn.service !== 's3' && parsedArn.service !== 's3-outposts') {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'expect \\'s3\\' or \\'s3-outposts\\' in ARN service component'\n      });\n    }\n  },\n\n  /**\n   * Validate account ID from ARN supplied in Bucket parameter is a valid account\n   */\n  validateArnAccount: function validateArnAccount(req) {\n    var parsedArn = req.service._parsedArn;\n\n    if (!/[0-9]{12}/.exec(parsedArn.accountId)) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'ARN accountID does not match regex \"[0-9]{12}\"'\n      });\n    }\n  },\n\n  /**\n   * Validate ARN supplied in Bucket parameter is a valid access point ARN\n   */\n  validateS3AccessPointArn: function validateS3AccessPointArn(req) {\n    var parsedArn = req.service._parsedArn;\n\n    //can be ':' or '/'\n    var delimiter = parsedArn.resource['accesspoint'.length];\n\n    if (parsedArn.resource.split(delimiter).length !== 2) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'Access Point ARN should have one resource accesspoint/{accesspointName}'\n      });\n    }\n\n    var accessPoint = parsedArn.resource.split(delimiter)[1];\n    var accessPointPrefix = accessPoint + '-' + parsedArn.accountId;\n    if (!s3util.dnsCompatibleBucketName(accessPointPrefix) || accessPointPrefix.match(/\\./)) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'Access point resource in ARN is not DNS compatible. Got ' + accessPoint\n      });\n    }\n\n    //set parsed valid access point\n    req.service._parsedArn.accessPoint = accessPoint;\n  },\n\n  /**\n   * Validate Outposts ARN supplied in Bucket parameter is a valid outposts ARN\n   */\n  validateOutpostsArn: function validateOutpostsArn(req) {\n    var parsedArn = req.service._parsedArn;\n\n    if (\n      parsedArn.resource.indexOf('outpost:') !== 0 &&\n      parsedArn.resource.indexOf('outpost/') !== 0\n    ) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'ARN resource should begin with \\'outpost/\\''\n      });\n    }\n\n    //can be ':' or '/'\n    var delimiter = parsedArn.resource['outpost'.length];\n    var outpostId = parsedArn.resource.split(delimiter)[1];\n    var dnsHostRegex = new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/);\n    if (!dnsHostRegex.test(outpostId)) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'Outpost resource in ARN is not DNS compatible. Got ' + outpostId\n      });\n    }\n    req.service._parsedArn.outpostId = outpostId;\n  },\n\n  /**\n   * Validate Outposts ARN supplied in Bucket parameter is a valid outposts ARN\n   */\n  validateOutpostsAccessPointArn: function validateOutpostsAccessPointArn(req) {\n    var parsedArn = req.service._parsedArn;\n\n    //can be ':' or '/'\n    var delimiter = parsedArn.resource['outpost'.length];\n\n    if (parsedArn.resource.split(delimiter).length !== 4) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'Outposts ARN should have two resources outpost/{outpostId}/accesspoint/{accesspointName}'\n      });\n    }\n\n    var accessPoint = parsedArn.resource.split(delimiter)[3];\n    var accessPointPrefix = accessPoint + '-' + parsedArn.accountId;\n    if (!s3util.dnsCompatibleBucketName(accessPointPrefix) || accessPointPrefix.match(/\\./)) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'Access point resource in ARN is not DNS compatible. Got ' + accessPoint\n      });\n    }\n\n    //set parsed valid access point\n    req.service._parsedArn.accessPoint = accessPoint;\n  },\n\n  /**\n   * Validate region field in ARN supplied in Bucket parameter is a valid region\n   */\n  validateArnRegion: function validateArnRegion(req) {\n    var useArnRegion = s3util.loadUseArnRegionConfig(req);\n    var regionFromArn = req.service._parsedArn.region;\n    var clientRegion = req.service.config.region;\n\n    if (!regionFromArn) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'ARN region is empty'\n      });\n    }\n\n    if (\n      clientRegion.indexOf('fips') >= 0 ||\n      regionFromArn.indexOf('fips') >= 0\n    ) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'ARN endpoint is not compatible with FIPS region'\n      });\n    }\n\n    if (!useArnRegion && regionFromArn !== clientRegion) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'Configured region conflicts with access point region'\n      });\n    } else if (\n      useArnRegion &&\n      regionUtil.getEndpointSuffix(regionFromArn) !== regionUtil.getEndpointSuffix(clientRegion)\n    ) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'Configured region and access point region not in same partition'\n      });\n    }\n\n    if (req.service.config.useAccelerateEndpoint) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'useAccelerateEndpoint config is not supported with access point ARN'\n      });\n    }\n\n    if (req.service._parsedArn.service === 's3-outposts' && req.service.config.useDualstack) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'useDualstack config is not supported with outposts access point ARN'\n      });\n    }\n  },\n\n  loadUseArnRegionConfig: function loadUseArnRegionConfig(req) {\n    var envName = 'AWS_S3_USE_ARN_REGION';\n    var configName = 's3_use_arn_region';\n    var useArnRegion = true;\n    var originalConfig = req.service._originalConfig || {};\n    if (req.service.config.s3UseArnRegion !== undefined) {\n      return req.service.config.s3UseArnRegion;\n    } else if (originalConfig.s3UseArnRegion !== undefined) {\n      useArnRegion = originalConfig.s3UseArnRegion === true;\n    } else if (AWS.util.isNode()) {\n      //load from environmental variable AWS_USE_ARN_REGION\n      if (process.env[envName]) {\n        var value = process.env[envName].trim().toLowerCase();\n        if (['false', 'true'].indexOf(value) < 0) {\n          throw AWS.util.error(new Error(), {\n            code: 'InvalidConfiguration',\n            message: envName + ' only accepts true or false. Got ' + process.env[envName],\n            retryable: false\n          });\n        }\n        useArnRegion = value === 'true';\n      } else {  //load from shared config property use_arn_region\n        var profiles = {};\n        var profile = {};\n        try {\n          profiles = AWS.util.getProfilesFromSharedConfig(AWS.util.iniLoader);\n          profile = profiles[process.env.AWS_PROFILE || AWS.util.defaultProfile];\n        } catch (e) {}\n        if (profile[configName]) {\n          if (['false', 'true'].indexOf(profile[configName].trim().toLowerCase()) < 0) {\n            throw AWS.util.error(new Error(), {\n              code: 'InvalidConfiguration',\n              message: configName + ' only accepts true or false. Got ' + profile[configName],\n              retryable: false\n            });\n          }\n          useArnRegion = profile[configName].trim().toLowerCase() === 'true';\n        }\n      }\n    }\n    req.service.config.s3UseArnRegion = useArnRegion;\n    return useArnRegion;\n  },\n\n  /**\n   * Validations before URI can be populated\n   */\n  validatePopulateUriFromArn: function validatePopulateUriFromArn(req) {\n    if (req.service._originalConfig && req.service._originalConfig.endpoint) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'Custom endpoint is not compatible with access point ARN'\n      });\n    }\n\n    if (req.service.config.s3ForcePathStyle) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'Cannot construct path-style endpoint with access point'\n      });\n    }\n  },\n\n  /**\n   * Returns true if the bucket name is DNS compatible.  Buckets created\n   * outside of the classic region MUST be DNS compatible.\n   *\n   * @api private\n   */\n  dnsCompatibleBucketName: function dnsCompatibleBucketName(bucketName) {\n    var b = bucketName;\n    var domain = new RegExp(/^[a-z0-9][a-z0-9\\.\\-]{1,61}[a-z0-9]$/);\n    var ipAddress = new RegExp(/(\\d+\\.){3}\\d+/);\n    var dots = new RegExp(/\\.\\./);\n    return (b.match(domain) && !b.match(ipAddress) && !b.match(dots)) ? true : false;\n  },\n};\n\n/**\n * @api private\n */\nmodule.exports = s3util;\n","var AWS = require('../core');\nvar resolveRegionalEndpointsFlag = require('../config_regional_endpoint');\nvar ENV_REGIONAL_ENDPOINT_ENABLED = 'AWS_STS_REGIONAL_ENDPOINTS';\nvar CONFIG_REGIONAL_ENDPOINT_ENABLED = 'sts_regional_endpoints';\n\nAWS.util.update(AWS.STS.prototype, {\n  /**\n   * @overload credentialsFrom(data, credentials = null)\n   *   Creates a credentials object from STS response data containing\n   *   credentials information. Useful for quickly setting AWS credentials.\n   *\n   *   @note This is a low-level utility function. If you want to load temporary\n   *     credentials into your process for subsequent requests to AWS resources,\n   *     you should use {AWS.TemporaryCredentials} instead.\n   *   @param data [map] data retrieved from a call to {getFederatedToken},\n   *     {getSessionToken}, {assumeRole}, or {assumeRoleWithWebIdentity}.\n   *   @param credentials [AWS.Credentials] an optional credentials object to\n   *     fill instead of creating a new object. Useful when modifying an\n   *     existing credentials object from a refresh call.\n   *   @return [AWS.TemporaryCredentials] the set of temporary credentials\n   *     loaded from a raw STS operation response.\n   *   @example Using credentialsFrom to load global AWS credentials\n   *     var sts = new AWS.STS();\n   *     sts.getSessionToken(function (err, data) {\n   *       if (err) console.log(\"Error getting credentials\");\n   *       else {\n   *         AWS.config.credentials = sts.credentialsFrom(data);\n   *       }\n   *     });\n   *   @see AWS.TemporaryCredentials\n   */\n  credentialsFrom: function credentialsFrom(data, credentials) {\n    if (!data) return null;\n    if (!credentials) credentials = new AWS.TemporaryCredentials();\n    credentials.expired = false;\n    credentials.accessKeyId = data.Credentials.AccessKeyId;\n    credentials.secretAccessKey = data.Credentials.SecretAccessKey;\n    credentials.sessionToken = data.Credentials.SessionToken;\n    credentials.expireTime = data.Credentials.Expiration;\n    return credentials;\n  },\n\n  assumeRoleWithWebIdentity: function assumeRoleWithWebIdentity(params, callback) {\n    return this.makeUnauthenticatedRequest('assumeRoleWithWebIdentity', params, callback);\n  },\n\n  assumeRoleWithSAML: function assumeRoleWithSAML(params, callback) {\n    return this.makeUnauthenticatedRequest('assumeRoleWithSAML', params, callback);\n  },\n\n  /**\n   * @api private\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n    request.addListener('validate', this.optInRegionalEndpoint, true);\n  },\n\n  /**\n   * @api private\n   */\n  optInRegionalEndpoint: function optInRegionalEndpoint(req) {\n    var service = req.service;\n    var config = service.config;\n    config.stsRegionalEndpoints = resolveRegionalEndpointsFlag(service._originalConfig, {\n      env: ENV_REGIONAL_ENDPOINT_ENABLED,\n      sharedConfig: CONFIG_REGIONAL_ENDPOINT_ENABLED,\n      clientConfig: 'stsRegionalEndpoints'\n    });\n    if (\n      config.stsRegionalEndpoints === 'regional' &&\n      service.isGlobalEndpoint\n    ) {\n      //client will throw if region is not supplied; request will be signed with specified region\n      if (!config.region) {\n        throw AWS.util.error(new Error(),\n          {code: 'ConfigError', message: 'Missing region in config'});\n      }\n      var insertPoint = config.endpoint.indexOf('.amazonaws.com');\n      var regionalEndpoint = config.endpoint.substring(0, insertPoint) +\n        '.' + config.region + config.endpoint.substring(insertPoint);\n      req.httpRequest.updateEndpoint(regionalEndpoint);\n      req.httpRequest.region = config.region;\n    }\n  }\n\n});\n","var IniLoader = require('./ini-loader').IniLoader;\n/**\n * Singleton object to load specified config/credentials files.\n * It will cache all the files ever loaded;\n */\nmodule.exports.iniLoader = new IniLoader();\n","var AWS = require('../core');\nvar os = require('os');\nvar path = require('path');\n\nfunction parseFile(filename, isConfig) {\n    var content = AWS.util.ini.parse(AWS.util.readFileSync(filename));\n    var tmpContent = {};\n    Object.keys(content).forEach(function(profileName) {\n      var profileContent = content[profileName];\n      profileName = isConfig ? profileName.replace(/^profile\\s/, '') : profileName;\n      Object.defineProperty(tmpContent, profileName, {\n        value: profileContent,\n        enumerable: true\n      });\n    });\n    return tmpContent;\n}\n\n/**\n * Ini file loader class the same as that used in the SDK. It loads and\n * parses config and credentials files in .ini format and cache the content\n * to assure files are only read once.\n * Note that calling operations on the instance instantiated from this class\n * won't affect the behavior of SDK since SDK uses an internal singleton of\n * this class.\n * @!macro nobrowser\n */\nAWS.IniLoader = AWS.util.inherit({\n  constructor: function IniLoader() {\n    this.resolvedProfiles = {};\n  },\n\n  /** Remove all cached files. Used after config files are updated. */\n  clearCachedFiles: function clearCachedFiles() {\n    this.resolvedProfiles = {};\n  },\n\n/**\n * Load configurations from config/credentials files and cache them\n * for later use. If no file is specified it will try to load default\n * files.\n * @param options [map] information describing the file\n * @option options filename [String] ('~/.aws/credentials' or defined by\n *   AWS_SHARED_CREDENTIALS_FILE process env var or '~/.aws/config' if\n *   isConfig is set to true)\n *   path to the file to be read.\n * @option options isConfig [Boolean] (false) True to read config file.\n * @return [map<String,String>] object containing contents from file in key-value\n *   pairs.\n */\n  loadFrom: function loadFrom(options) {\n    options = options || {};\n    var isConfig = options.isConfig === true;\n    var filename = options.filename || this.getDefaultFilePath(isConfig);\n    if (!this.resolvedProfiles[filename]) {\n      var fileContent = this.parseFile(filename, isConfig);\n      Object.defineProperty(this.resolvedProfiles, filename, { value: fileContent });\n    }\n    return this.resolvedProfiles[filename];\n  },\n\n  /**\n   * @api private\n   */\n  parseFile: parseFile,\n\n  /**\n   * @api private\n   */\n  getDefaultFilePath: function getDefaultFilePath(isConfig) {\n    return path.join(\n      this.getHomeDir(),\n      '.aws',\n      isConfig ? 'config' : 'credentials'\n    );\n  },\n\n  /**\n   * @api private\n   */\n  getHomeDir: function getHomeDir() {\n    var env = process.env;\n    var home = env.HOME ||\n      env.USERPROFILE ||\n      (env.HOMEPATH ? ((env.HOMEDRIVE || 'C:/') + env.HOMEPATH) : null);\n\n    if (home) {\n      return home;\n    }\n\n    if (typeof os.homedir === 'function') {\n      return os.homedir();\n    }\n\n    throw AWS.util.error(\n      new Error('Cannot load credentials, HOME path not set')\n    );\n  }\n});\n\nvar IniLoader = AWS.IniLoader;\n\nmodule.exports = {\n  IniLoader: IniLoader,\n  parseFile: parseFile,\n};\n","var AWS = require('../core');\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nvar expiresHeader = 'presigned-expires';\n\n/**\n * @api private\n */\nfunction signedUrlBuilder(request) {\n  var expires = request.httpRequest.headers[expiresHeader];\n  var signerClass = request.service.getSignerClass(request);\n\n  delete request.httpRequest.headers['User-Agent'];\n  delete request.httpRequest.headers['X-Amz-User-Agent'];\n\n  if (signerClass === AWS.Signers.V4) {\n    if (expires > 604800) { // one week expiry is invalid\n      var message = 'Presigning does not support expiry time greater ' +\n                    'than a week with SigV4 signing.';\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidExpiryTime', message: message, retryable: false\n      });\n    }\n    request.httpRequest.headers[expiresHeader] = expires;\n  } else if (signerClass === AWS.Signers.S3) {\n    var now = request.service ? request.service.getSkewCorrectedDate() : AWS.util.date.getDate();\n    request.httpRequest.headers[expiresHeader] = parseInt(\n      AWS.util.date.unixTimestamp(now) + expires, 10).toString();\n  } else {\n    throw AWS.util.error(new Error(), {\n      message: 'Presigning only supports S3 or SigV4 signing.',\n      code: 'UnsupportedSigner', retryable: false\n    });\n  }\n}\n\n/**\n * @api private\n */\nfunction signedUrlSigner(request) {\n  var endpoint = request.httpRequest.endpoint;\n  var parsedUrl = AWS.util.urlParse(request.httpRequest.path);\n  var queryParams = {};\n\n  if (parsedUrl.search) {\n    queryParams = AWS.util.queryStringParse(parsedUrl.search.substr(1));\n  }\n\n  var auth = request.httpRequest.headers['Authorization'].split(' ');\n  if (auth[0] === 'AWS') {\n    auth = auth[1].split(':');\n    queryParams['Signature'] = auth.pop();\n    queryParams['AWSAccessKeyId'] = auth.join(':');\n\n    AWS.util.each(request.httpRequest.headers, function (key, value) {\n      if (key === expiresHeader) key = 'Expires';\n      if (key.indexOf('x-amz-meta-') === 0) {\n        // Delete existing, potentially not normalized key\n        delete queryParams[key];\n        key = key.toLowerCase();\n      }\n      queryParams[key] = value;\n    });\n    delete request.httpRequest.headers[expiresHeader];\n    delete queryParams['Authorization'];\n    delete queryParams['Host'];\n  } else if (auth[0] === 'AWS4-HMAC-SHA256') { // SigV4 signing\n    auth.shift();\n    var rest = auth.join(' ');\n    var signature = rest.match(/Signature=(.*?)(?:,|\\s|\\r?\\n|$)/)[1];\n    queryParams['X-Amz-Signature'] = signature;\n    delete queryParams['Expires'];\n  }\n\n  // build URL\n  endpoint.pathname = parsedUrl.pathname;\n  endpoint.search = AWS.util.queryParamsToString(queryParams);\n}\n\n/**\n * @api private\n */\nAWS.Signers.Presign = inherit({\n  /**\n   * @api private\n   */\n  sign: function sign(request, expireTime, callback) {\n    request.httpRequest.headers[expiresHeader] = expireTime || 3600;\n    request.on('build', signedUrlBuilder);\n    request.on('sign', signedUrlSigner);\n    request.removeListener('afterBuild',\n      AWS.EventListeners.Core.SET_CONTENT_LENGTH);\n    request.removeListener('afterBuild',\n      AWS.EventListeners.Core.COMPUTE_SHA256);\n\n    request.emit('beforePresign', [request]);\n\n    if (callback) {\n      request.build(function() {\n        if (this.response.error) callback(this.response.error);\n        else {\n          callback(null, AWS.util.urlFormat(request.httpRequest.endpoint));\n        }\n      });\n    } else {\n      request.build();\n      if (request.response.error) throw request.response.error;\n      return AWS.util.urlFormat(request.httpRequest.endpoint);\n    }\n  }\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.Presign;\n","var AWS = require('../core');\n\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nAWS.Signers.RequestSigner = inherit({\n  constructor: function RequestSigner(request) {\n    this.request = request;\n  },\n\n  setServiceClientId: function setServiceClientId(id) {\n    this.serviceClientId = id;\n  },\n\n  getServiceClientId: function getServiceClientId() {\n    return this.serviceClientId;\n  }\n});\n\nAWS.Signers.RequestSigner.getVersion = function getVersion(version) {\n  switch (version) {\n    case 'v2': return AWS.Signers.V2;\n    case 'v3': return AWS.Signers.V3;\n    case 's3v4': return AWS.Signers.V4;\n    case 'v4': return AWS.Signers.V4;\n    case 's3': return AWS.Signers.S3;\n    case 'v3https': return AWS.Signers.V3Https;\n  }\n  throw new Error('Unknown signing version ' + version);\n};\n\nrequire('./v2');\nrequire('./v3');\nrequire('./v3https');\nrequire('./v4');\nrequire('./s3');\nrequire('./presign');\n","var AWS = require('../core');\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nAWS.Signers.S3 = inherit(AWS.Signers.RequestSigner, {\n  /**\n   * When building the stringToSign, these sub resource params should be\n   * part of the canonical resource string with their NON-decoded values\n   */\n  subResources: {\n    'acl': 1,\n    'accelerate': 1,\n    'analytics': 1,\n    'cors': 1,\n    'lifecycle': 1,\n    'delete': 1,\n    'inventory': 1,\n    'location': 1,\n    'logging': 1,\n    'metrics': 1,\n    'notification': 1,\n    'partNumber': 1,\n    'policy': 1,\n    'requestPayment': 1,\n    'replication': 1,\n    'restore': 1,\n    'tagging': 1,\n    'torrent': 1,\n    'uploadId': 1,\n    'uploads': 1,\n    'versionId': 1,\n    'versioning': 1,\n    'versions': 1,\n    'website': 1\n  },\n\n  // when building the stringToSign, these querystring params should be\n  // part of the canonical resource string with their NON-encoded values\n  responseHeaders: {\n    'response-content-type': 1,\n    'response-content-language': 1,\n    'response-expires': 1,\n    'response-cache-control': 1,\n    'response-content-disposition': 1,\n    'response-content-encoding': 1\n  },\n\n  addAuthorization: function addAuthorization(credentials, date) {\n    if (!this.request.headers['presigned-expires']) {\n      this.request.headers['X-Amz-Date'] = AWS.util.date.rfc822(date);\n    }\n\n    if (credentials.sessionToken) {\n      // presigned URLs require this header to be lowercased\n      this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n    }\n\n    var signature = this.sign(credentials.secretAccessKey, this.stringToSign());\n    var auth = 'AWS ' + credentials.accessKeyId + ':' + signature;\n\n    this.request.headers['Authorization'] = auth;\n  },\n\n  stringToSign: function stringToSign() {\n    var r = this.request;\n\n    var parts = [];\n    parts.push(r.method);\n    parts.push(r.headers['Content-MD5'] || '');\n    parts.push(r.headers['Content-Type'] || '');\n\n    // This is the \"Date\" header, but we use X-Amz-Date.\n    // The S3 signing mechanism requires us to pass an empty\n    // string for this Date header regardless.\n    parts.push(r.headers['presigned-expires'] || '');\n\n    var headers = this.canonicalizedAmzHeaders();\n    if (headers) parts.push(headers);\n    parts.push(this.canonicalizedResource());\n\n    return parts.join('\\n');\n\n  },\n\n  canonicalizedAmzHeaders: function canonicalizedAmzHeaders() {\n\n    var amzHeaders = [];\n\n    AWS.util.each(this.request.headers, function (name) {\n      if (name.match(/^x-amz-/i))\n        amzHeaders.push(name);\n    });\n\n    amzHeaders.sort(function (a, b) {\n      return a.toLowerCase() < b.toLowerCase() ? -1 : 1;\n    });\n\n    var parts = [];\n    AWS.util.arrayEach.call(this, amzHeaders, function (name) {\n      parts.push(name.toLowerCase() + ':' + String(this.request.headers[name]));\n    });\n\n    return parts.join('\\n');\n\n  },\n\n  canonicalizedResource: function canonicalizedResource() {\n\n    var r = this.request;\n\n    var parts = r.path.split('?');\n    var path = parts[0];\n    var querystring = parts[1];\n\n    var resource = '';\n\n    if (r.virtualHostedBucket)\n      resource += '/' + r.virtualHostedBucket;\n\n    resource += path;\n\n    if (querystring) {\n\n      // collect a list of sub resources and query params that need to be signed\n      var resources = [];\n\n      AWS.util.arrayEach.call(this, querystring.split('&'), function (param) {\n        var name = param.split('=')[0];\n        var value = param.split('=')[1];\n        if (this.subResources[name] || this.responseHeaders[name]) {\n          var subresource = { name: name };\n          if (value !== undefined) {\n            if (this.subResources[name]) {\n              subresource.value = value;\n            } else {\n              subresource.value = decodeURIComponent(value);\n            }\n          }\n          resources.push(subresource);\n        }\n      });\n\n      resources.sort(function (a, b) { return a.name < b.name ? -1 : 1; });\n\n      if (resources.length) {\n\n        querystring = [];\n        AWS.util.arrayEach(resources, function (res) {\n          if (res.value === undefined) {\n            querystring.push(res.name);\n          } else {\n            querystring.push(res.name + '=' + res.value);\n          }\n        });\n\n        resource += '?' + querystring.join('&');\n      }\n\n    }\n\n    return resource;\n\n  },\n\n  sign: function sign(secret, string) {\n    return AWS.util.crypto.hmac(secret, string, 'base64', 'sha1');\n  }\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.S3;\n","var AWS = require('../core');\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nAWS.Signers.V2 = inherit(AWS.Signers.RequestSigner, {\n  addAuthorization: function addAuthorization(credentials, date) {\n\n    if (!date) date = AWS.util.date.getDate();\n\n    var r = this.request;\n\n    r.params.Timestamp = AWS.util.date.iso8601(date);\n    r.params.SignatureVersion = '2';\n    r.params.SignatureMethod = 'HmacSHA256';\n    r.params.AWSAccessKeyId = credentials.accessKeyId;\n\n    if (credentials.sessionToken) {\n      r.params.SecurityToken = credentials.sessionToken;\n    }\n\n    delete r.params.Signature; // delete old Signature for re-signing\n    r.params.Signature = this.signature(credentials);\n\n    r.body = AWS.util.queryParamsToString(r.params);\n    r.headers['Content-Length'] = r.body.length;\n  },\n\n  signature: function signature(credentials) {\n    return AWS.util.crypto.hmac(credentials.secretAccessKey, this.stringToSign(), 'base64');\n  },\n\n  stringToSign: function stringToSign() {\n    var parts = [];\n    parts.push(this.request.method);\n    parts.push(this.request.endpoint.host.toLowerCase());\n    parts.push(this.request.pathname());\n    parts.push(AWS.util.queryParamsToString(this.request.params));\n    return parts.join('\\n');\n  }\n\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.V2;\n","var AWS = require('../core');\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nAWS.Signers.V3 = inherit(AWS.Signers.RequestSigner, {\n  addAuthorization: function addAuthorization(credentials, date) {\n\n    var datetime = AWS.util.date.rfc822(date);\n\n    this.request.headers['X-Amz-Date'] = datetime;\n\n    if (credentials.sessionToken) {\n      this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n    }\n\n    this.request.headers['X-Amzn-Authorization'] =\n      this.authorization(credentials, datetime);\n\n  },\n\n  authorization: function authorization(credentials) {\n    return 'AWS3 ' +\n      'AWSAccessKeyId=' + credentials.accessKeyId + ',' +\n      'Algorithm=HmacSHA256,' +\n      'SignedHeaders=' + this.signedHeaders() + ',' +\n      'Signature=' + this.signature(credentials);\n  },\n\n  signedHeaders: function signedHeaders() {\n    var headers = [];\n    AWS.util.arrayEach(this.headersToSign(), function iterator(h) {\n      headers.push(h.toLowerCase());\n    });\n    return headers.sort().join(';');\n  },\n\n  canonicalHeaders: function canonicalHeaders() {\n    var headers = this.request.headers;\n    var parts = [];\n    AWS.util.arrayEach(this.headersToSign(), function iterator(h) {\n      parts.push(h.toLowerCase().trim() + ':' + String(headers[h]).trim());\n    });\n    return parts.sort().join('\\n') + '\\n';\n  },\n\n  headersToSign: function headersToSign() {\n    var headers = [];\n    AWS.util.each(this.request.headers, function iterator(k) {\n      if (k === 'Host' || k === 'Content-Encoding' || k.match(/^X-Amz/i)) {\n        headers.push(k);\n      }\n    });\n    return headers;\n  },\n\n  signature: function signature(credentials) {\n    return AWS.util.crypto.hmac(credentials.secretAccessKey, this.stringToSign(), 'base64');\n  },\n\n  stringToSign: function stringToSign() {\n    var parts = [];\n    parts.push(this.request.method);\n    parts.push('/');\n    parts.push('');\n    parts.push(this.canonicalHeaders());\n    parts.push(this.request.body);\n    return AWS.util.crypto.sha256(parts.join('\\n'));\n  }\n\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.V3;\n","var AWS = require('../core');\nvar inherit = AWS.util.inherit;\n\nrequire('./v3');\n\n/**\n * @api private\n */\nAWS.Signers.V3Https = inherit(AWS.Signers.V3, {\n  authorization: function authorization(credentials) {\n    return 'AWS3-HTTPS ' +\n      'AWSAccessKeyId=' + credentials.accessKeyId + ',' +\n      'Algorithm=HmacSHA256,' +\n      'Signature=' + this.signature(credentials);\n  },\n\n  stringToSign: function stringToSign() {\n    return this.request.headers['X-Amz-Date'];\n  }\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.V3Https;\n","var AWS = require('../core');\nvar v4Credentials = require('./v4_credentials');\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nvar expiresHeader = 'presigned-expires';\n\n/**\n * @api private\n */\nAWS.Signers.V4 = inherit(AWS.Signers.RequestSigner, {\n  constructor: function V4(request, serviceName, options) {\n    AWS.Signers.RequestSigner.call(this, request);\n    this.serviceName = serviceName;\n    options = options || {};\n    this.signatureCache = typeof options.signatureCache === 'boolean' ? options.signatureCache : true;\n    this.operation = options.operation;\n    this.signatureVersion = options.signatureVersion;\n  },\n\n  algorithm: 'AWS4-HMAC-SHA256',\n\n  addAuthorization: function addAuthorization(credentials, date) {\n    var datetime = AWS.util.date.iso8601(date).replace(/[:\\-]|\\.\\d{3}/g, '');\n\n    if (this.isPresigned()) {\n      this.updateForPresigned(credentials, datetime);\n    } else {\n      this.addHeaders(credentials, datetime);\n    }\n\n    this.request.headers['Authorization'] =\n      this.authorization(credentials, datetime);\n  },\n\n  addHeaders: function addHeaders(credentials, datetime) {\n    this.request.headers['X-Amz-Date'] = datetime;\n    if (credentials.sessionToken) {\n      this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n    }\n  },\n\n  updateForPresigned: function updateForPresigned(credentials, datetime) {\n    var credString = this.credentialString(datetime);\n    var qs = {\n      'X-Amz-Date': datetime,\n      'X-Amz-Algorithm': this.algorithm,\n      'X-Amz-Credential': credentials.accessKeyId + '/' + credString,\n      'X-Amz-Expires': this.request.headers[expiresHeader],\n      'X-Amz-SignedHeaders': this.signedHeaders()\n    };\n\n    if (credentials.sessionToken) {\n      qs['X-Amz-Security-Token'] = credentials.sessionToken;\n    }\n\n    if (this.request.headers['Content-Type']) {\n      qs['Content-Type'] = this.request.headers['Content-Type'];\n    }\n    if (this.request.headers['Content-MD5']) {\n      qs['Content-MD5'] = this.request.headers['Content-MD5'];\n    }\n    if (this.request.headers['Cache-Control']) {\n      qs['Cache-Control'] = this.request.headers['Cache-Control'];\n    }\n\n    // need to pull in any other X-Amz-* headers\n    AWS.util.each.call(this, this.request.headers, function(key, value) {\n      if (key === expiresHeader) return;\n      if (this.isSignableHeader(key)) {\n        var lowerKey = key.toLowerCase();\n        // Metadata should be normalized\n        if (lowerKey.indexOf('x-amz-meta-') === 0) {\n          qs[lowerKey] = value;\n        } else if (lowerKey.indexOf('x-amz-') === 0) {\n          qs[key] = value;\n        }\n      }\n    });\n\n    var sep = this.request.path.indexOf('?') >= 0 ? '&' : '?';\n    this.request.path += sep + AWS.util.queryParamsToString(qs);\n  },\n\n  authorization: function authorization(credentials, datetime) {\n    var parts = [];\n    var credString = this.credentialString(datetime);\n    parts.push(this.algorithm + ' Credential=' +\n      credentials.accessKeyId + '/' + credString);\n    parts.push('SignedHeaders=' + this.signedHeaders());\n    parts.push('Signature=' + this.signature(credentials, datetime));\n    return parts.join(', ');\n  },\n\n  signature: function signature(credentials, datetime) {\n    var signingKey = v4Credentials.getSigningKey(\n      credentials,\n      datetime.substr(0, 8),\n      this.request.region,\n      this.serviceName,\n      this.signatureCache\n    );\n    return AWS.util.crypto.hmac(signingKey, this.stringToSign(datetime), 'hex');\n  },\n\n  stringToSign: function stringToSign(datetime) {\n    var parts = [];\n    parts.push('AWS4-HMAC-SHA256');\n    parts.push(datetime);\n    parts.push(this.credentialString(datetime));\n    parts.push(this.hexEncodedHash(this.canonicalString()));\n    return parts.join('\\n');\n  },\n\n  canonicalString: function canonicalString() {\n    var parts = [], pathname = this.request.pathname();\n    if (this.serviceName !== 's3' && this.signatureVersion !== 's3v4') pathname = AWS.util.uriEscapePath(pathname);\n\n    parts.push(this.request.method);\n    parts.push(pathname);\n    parts.push(this.request.search());\n    parts.push(this.canonicalHeaders() + '\\n');\n    parts.push(this.signedHeaders());\n    parts.push(this.hexEncodedBodyHash());\n    return parts.join('\\n');\n  },\n\n  canonicalHeaders: function canonicalHeaders() {\n    var headers = [];\n    AWS.util.each.call(this, this.request.headers, function (key, item) {\n      headers.push([key, item]);\n    });\n    headers.sort(function (a, b) {\n      return a[0].toLowerCase() < b[0].toLowerCase() ? -1 : 1;\n    });\n    var parts = [];\n    AWS.util.arrayEach.call(this, headers, function (item) {\n      var key = item[0].toLowerCase();\n      if (this.isSignableHeader(key)) {\n        var value = item[1];\n        if (typeof value === 'undefined' || value === null || typeof value.toString !== 'function') {\n          throw AWS.util.error(new Error('Header ' + key + ' contains invalid value'), {\n            code: 'InvalidHeader'\n          });\n        }\n        parts.push(key + ':' +\n          this.canonicalHeaderValues(value.toString()));\n      }\n    });\n    return parts.join('\\n');\n  },\n\n  canonicalHeaderValues: function canonicalHeaderValues(values) {\n    return values.replace(/\\s+/g, ' ').replace(/^\\s+|\\s+$/g, '');\n  },\n\n  signedHeaders: function signedHeaders() {\n    var keys = [];\n    AWS.util.each.call(this, this.request.headers, function (key) {\n      key = key.toLowerCase();\n      if (this.isSignableHeader(key)) keys.push(key);\n    });\n    return keys.sort().join(';');\n  },\n\n  credentialString: function credentialString(datetime) {\n    return v4Credentials.createScope(\n      datetime.substr(0, 8),\n      this.request.region,\n      this.serviceName\n    );\n  },\n\n  hexEncodedHash: function hash(string) {\n    return AWS.util.crypto.sha256(string, 'hex');\n  },\n\n  hexEncodedBodyHash: function hexEncodedBodyHash() {\n    var request = this.request;\n    if (this.isPresigned() && this.serviceName === 's3' && !request.body) {\n      return 'UNSIGNED-PAYLOAD';\n    } else if (request.headers['X-Amz-Content-Sha256']) {\n      return request.headers['X-Amz-Content-Sha256'];\n    } else {\n      return this.hexEncodedHash(this.request.body || '');\n    }\n  },\n\n  unsignableHeaders: [\n    'authorization',\n    'content-type',\n    'content-length',\n    'user-agent',\n    expiresHeader,\n    'expect',\n    'x-amzn-trace-id'\n  ],\n\n  isSignableHeader: function isSignableHeader(key) {\n    if (key.toLowerCase().indexOf('x-amz-') === 0) return true;\n    return this.unsignableHeaders.indexOf(key) < 0;\n  },\n\n  isPresigned: function isPresigned() {\n    return this.request.headers[expiresHeader] ? true : false;\n  }\n\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.V4;\n","var AWS = require('../core');\n\n/**\n * @api private\n */\nvar cachedSecret = {};\n\n/**\n * @api private\n */\nvar cacheQueue = [];\n\n/**\n * @api private\n */\nvar maxCacheEntries = 50;\n\n/**\n * @api private\n */\nvar v4Identifier = 'aws4_request';\n\n/**\n * @api private\n */\nmodule.exports = {\n  /**\n   * @api private\n   *\n   * @param date [String]\n   * @param region [String]\n   * @param serviceName [String]\n   * @return [String]\n   */\n  createScope: function createScope(date, region, serviceName) {\n    return [\n      date.substr(0, 8),\n      region,\n      serviceName,\n      v4Identifier\n    ].join('/');\n  },\n\n  /**\n   * @api private\n   *\n   * @param credentials [Credentials]\n   * @param date [String]\n   * @param region [String]\n   * @param service [String]\n   * @param shouldCache [Boolean]\n   * @return [String]\n   */\n  getSigningKey: function getSigningKey(\n    credentials,\n    date,\n    region,\n    service,\n    shouldCache\n  ) {\n    var credsIdentifier = AWS.util.crypto\n      .hmac(credentials.secretAccessKey, credentials.accessKeyId, 'base64');\n    var cacheKey = [credsIdentifier, date, region, service].join('_');\n    shouldCache = shouldCache !== false;\n    if (shouldCache && (cacheKey in cachedSecret)) {\n      return cachedSecret[cacheKey];\n    }\n\n    var kDate = AWS.util.crypto.hmac(\n      'AWS4' + credentials.secretAccessKey,\n      date,\n      'buffer'\n    );\n    var kRegion = AWS.util.crypto.hmac(kDate, region, 'buffer');\n    var kService = AWS.util.crypto.hmac(kRegion, service, 'buffer');\n\n    var signingKey = AWS.util.crypto.hmac(kService, v4Identifier, 'buffer');\n    if (shouldCache) {\n      cachedSecret[cacheKey] = signingKey;\n      cacheQueue.push(cacheKey);\n      if (cacheQueue.length > maxCacheEntries) {\n        // remove the oldest entry (not the least recently used)\n        delete cachedSecret[cacheQueue.shift()];\n      }\n    }\n\n    return signingKey;\n  },\n\n  /**\n   * @api private\n   *\n   * Empties the derived signing key cache. Made available for testing purposes\n   * only.\n   */\n  emptyCache: function emptyCache() {\n    cachedSecret = {};\n    cacheQueue = [];\n  }\n};\n","function AcceptorStateMachine(states, state) {\n  this.currentState = state || null;\n  this.states = states || {};\n}\n\nAcceptorStateMachine.prototype.runTo = function runTo(finalState, done, bindObject, inputError) {\n  if (typeof finalState === 'function') {\n    inputError = bindObject; bindObject = done;\n    done = finalState; finalState = null;\n  }\n\n  var self = this;\n  var state = self.states[self.currentState];\n  state.fn.call(bindObject || self, inputError, function(err) {\n    if (err) {\n      if (state.fail) self.currentState = state.fail;\n      else return done ? done.call(bindObject, err) : null;\n    } else {\n      if (state.accept) self.currentState = state.accept;\n      else return done ? done.call(bindObject) : null;\n    }\n    if (self.currentState === finalState) {\n      return done ? done.call(bindObject, err) : null;\n    }\n\n    self.runTo(finalState, done, bindObject, err);\n  });\n};\n\nAcceptorStateMachine.prototype.addState = function addState(name, acceptState, failState, fn) {\n  if (typeof acceptState === 'function') {\n    fn = acceptState; acceptState = null; failState = null;\n  } else if (typeof failState === 'function') {\n    fn = failState; failState = null;\n  }\n\n  if (!this.currentState) this.currentState = name;\n  this.states[name] = { accept: acceptState, fail: failState, fn: fn };\n  return this;\n};\n\n/**\n * @api private\n */\nmodule.exports = AcceptorStateMachine;\n","/* eslint guard-for-in:0 */\nvar AWS;\n\n/**\n * A set of utility methods for use with the AWS SDK.\n *\n * @!attribute abort\n *   Return this value from an iterator function {each} or {arrayEach}\n *   to break out of the iteration.\n *   @example Breaking out of an iterator function\n *     AWS.util.each({a: 1, b: 2, c: 3}, function(key, value) {\n *       if (key == 'b') return AWS.util.abort;\n *     });\n *   @see each\n *   @see arrayEach\n * @api private\n */\nvar util = {\n  environment: 'nodejs',\n  engine: function engine() {\n    if (util.isBrowser() && typeof navigator !== 'undefined') {\n      return navigator.userAgent;\n    } else {\n      var engine = process.platform + '/' + process.version;\n      if (process.env.AWS_EXECUTION_ENV) {\n        engine += ' exec-env/' + process.env.AWS_EXECUTION_ENV;\n      }\n      return engine;\n    }\n  },\n\n  userAgent: function userAgent() {\n    var name = util.environment;\n    var agent = 'aws-sdk-' + name + '/' + require('./core').VERSION;\n    if (name === 'nodejs') agent += ' ' + util.engine();\n    return agent;\n  },\n\n  uriEscape: function uriEscape(string) {\n    var output = encodeURIComponent(string);\n    output = output.replace(/[^A-Za-z0-9_.~\\-%]+/g, escape);\n\n    // AWS percent-encodes some extra non-standard characters in a URI\n    output = output.replace(/[*]/g, function(ch) {\n      return '%' + ch.charCodeAt(0).toString(16).toUpperCase();\n    });\n\n    return output;\n  },\n\n  uriEscapePath: function uriEscapePath(string) {\n    var parts = [];\n    util.arrayEach(string.split('/'), function (part) {\n      parts.push(util.uriEscape(part));\n    });\n    return parts.join('/');\n  },\n\n  urlParse: function urlParse(url) {\n    return util.url.parse(url);\n  },\n\n  urlFormat: function urlFormat(url) {\n    return util.url.format(url);\n  },\n\n  queryStringParse: function queryStringParse(qs) {\n    return util.querystring.parse(qs);\n  },\n\n  queryParamsToString: function queryParamsToString(params) {\n    var items = [];\n    var escape = util.uriEscape;\n    var sortedKeys = Object.keys(params).sort();\n\n    util.arrayEach(sortedKeys, function(name) {\n      var value = params[name];\n      var ename = escape(name);\n      var result = ename + '=';\n      if (Array.isArray(value)) {\n        var vals = [];\n        util.arrayEach(value, function(item) { vals.push(escape(item)); });\n        result = ename + '=' + vals.sort().join('&' + ename + '=');\n      } else if (value !== undefined && value !== null) {\n        result = ename + '=' + escape(value);\n      }\n      items.push(result);\n    });\n\n    return items.join('&');\n  },\n\n  readFileSync: function readFileSync(path) {\n    if (util.isBrowser()) return null;\n    return require('fs').readFileSync(path, 'utf-8');\n  },\n\n  base64: {\n    encode: function encode64(string) {\n      if (typeof string === 'number') {\n        throw util.error(new Error('Cannot base64 encode number ' + string));\n      }\n      if (string === null || typeof string === 'undefined') {\n        return string;\n      }\n      var buf = util.buffer.toBuffer(string);\n      return buf.toString('base64');\n    },\n\n    decode: function decode64(string) {\n      if (typeof string === 'number') {\n        throw util.error(new Error('Cannot base64 decode number ' + string));\n      }\n      if (string === null || typeof string === 'undefined') {\n        return string;\n      }\n      return util.buffer.toBuffer(string, 'base64');\n    }\n\n  },\n\n  buffer: {\n    /**\n     * Buffer constructor for Node buffer and buffer pollyfill\n     */\n    toBuffer: function(data, encoding) {\n      return (typeof util.Buffer.from === 'function' && util.Buffer.from !== Uint8Array.from) ?\n        util.Buffer.from(data, encoding) : new util.Buffer(data, encoding);\n    },\n\n    alloc: function(size, fill, encoding) {\n      if (typeof size !== 'number') {\n        throw new Error('size passed to alloc must be a number.');\n      }\n      if (typeof util.Buffer.alloc === 'function') {\n        return util.Buffer.alloc(size, fill, encoding);\n      } else {\n        var buf = new util.Buffer(size);\n        if (fill !== undefined && typeof buf.fill === 'function') {\n          buf.fill(fill, undefined, undefined, encoding);\n        }\n        return buf;\n      }\n    },\n\n    toStream: function toStream(buffer) {\n      if (!util.Buffer.isBuffer(buffer)) buffer =  util.buffer.toBuffer(buffer);\n\n      var readable = new (util.stream.Readable)();\n      var pos = 0;\n      readable._read = function(size) {\n        if (pos >= buffer.length) return readable.push(null);\n\n        var end = pos + size;\n        if (end > buffer.length) end = buffer.length;\n        readable.push(buffer.slice(pos, end));\n        pos = end;\n      };\n\n      return readable;\n    },\n\n    /**\n     * Concatenates a list of Buffer objects.\n     */\n    concat: function(buffers) {\n      var length = 0,\n          offset = 0,\n          buffer = null, i;\n\n      for (i = 0; i < buffers.length; i++) {\n        length += buffers[i].length;\n      }\n\n      buffer = util.buffer.alloc(length);\n\n      for (i = 0; i < buffers.length; i++) {\n        buffers[i].copy(buffer, offset);\n        offset += buffers[i].length;\n      }\n\n      return buffer;\n    }\n  },\n\n  string: {\n    byteLength: function byteLength(string) {\n      if (string === null || string === undefined) return 0;\n      if (typeof string === 'string') string = util.buffer.toBuffer(string);\n\n      if (typeof string.byteLength === 'number') {\n        return string.byteLength;\n      } else if (typeof string.length === 'number') {\n        return string.length;\n      } else if (typeof string.size === 'number') {\n        return string.size;\n      } else if (typeof string.path === 'string') {\n        return require('fs').lstatSync(string.path).size;\n      } else {\n        throw util.error(new Error('Cannot determine length of ' + string),\n          { object: string });\n      }\n    },\n\n    upperFirst: function upperFirst(string) {\n      return string[0].toUpperCase() + string.substr(1);\n    },\n\n    lowerFirst: function lowerFirst(string) {\n      return string[0].toLowerCase() + string.substr(1);\n    }\n  },\n\n  ini: {\n    parse: function string(ini) {\n      var currentSection, map = {};\n      util.arrayEach(ini.split(/\\r?\\n/), function(line) {\n        line = line.split(/(^|\\s)[;#]/)[0]; // remove comments\n        var section = line.match(/^\\s*\\[([^\\[\\]]+)\\]\\s*$/);\n        if (section) {\n          currentSection = section[1];\n          if (currentSection === '__proto__' || currentSection.split(/\\s/)[1] === '__proto__') {\n            throw util.error(\n              new Error('Cannot load profile name \\'' + currentSection + '\\' from shared ini file.')\n            );\n          }\n        } else if (currentSection) {\n          var item = line.match(/^\\s*(.+?)\\s*=\\s*(.+?)\\s*$/);\n          if (item) {\n            map[currentSection] = map[currentSection] || {};\n            map[currentSection][item[1]] = item[2];\n          }\n        }\n      });\n\n      return map;\n    }\n  },\n\n  fn: {\n    noop: function() {},\n    callback: function (err) { if (err) throw err; },\n\n    /**\n     * Turn a synchronous function into as \"async\" function by making it call\n     * a callback. The underlying function is called with all but the last argument,\n     * which is treated as the callback. The callback is passed passed a first argument\n     * of null on success to mimick standard node callbacks.\n     */\n    makeAsync: function makeAsync(fn, expectedArgs) {\n      if (expectedArgs && expectedArgs <= fn.length) {\n        return fn;\n      }\n\n      return function() {\n        var args = Array.prototype.slice.call(arguments, 0);\n        var callback = args.pop();\n        var result = fn.apply(null, args);\n        callback(result);\n      };\n    }\n  },\n\n  /**\n   * Date and time utility functions.\n   */\n  date: {\n\n    /**\n     * @return [Date] the current JavaScript date object. Since all\n     *   AWS services rely on this date object, you can override\n     *   this function to provide a special time value to AWS service\n     *   requests.\n     */\n    getDate: function getDate() {\n      if (!AWS) AWS = require('./core');\n      if (AWS.config.systemClockOffset) { // use offset when non-zero\n        return new Date(new Date().getTime() + AWS.config.systemClockOffset);\n      } else {\n        return new Date();\n      }\n    },\n\n    /**\n     * @return [String] the date in ISO-8601 format\n     */\n    iso8601: function iso8601(date) {\n      if (date === undefined) { date = util.date.getDate(); }\n      return date.toISOString().replace(/\\.\\d{3}Z$/, 'Z');\n    },\n\n    /**\n     * @return [String] the date in RFC 822 format\n     */\n    rfc822: function rfc822(date) {\n      if (date === undefined) { date = util.date.getDate(); }\n      return date.toUTCString();\n    },\n\n    /**\n     * @return [Integer] the UNIX timestamp value for the current time\n     */\n    unixTimestamp: function unixTimestamp(date) {\n      if (date === undefined) { date = util.date.getDate(); }\n      return date.getTime() / 1000;\n    },\n\n    /**\n     * @param [String,number,Date] date\n     * @return [Date]\n     */\n    from: function format(date) {\n      if (typeof date === 'number') {\n        return new Date(date * 1000); // unix timestamp\n      } else {\n        return new Date(date);\n      }\n    },\n\n    /**\n     * Given a Date or date-like value, this function formats the\n     * date into a string of the requested value.\n     * @param [String,number,Date] date\n     * @param [String] formatter Valid formats are:\n     #   * 'iso8601'\n     #   * 'rfc822'\n     #   * 'unixTimestamp'\n     * @return [String]\n     */\n    format: function format(date, formatter) {\n      if (!formatter) formatter = 'iso8601';\n      return util.date[formatter](util.date.from(date));\n    },\n\n    parseTimestamp: function parseTimestamp(value) {\n      if (typeof value === 'number') { // unix timestamp (number)\n        return new Date(value * 1000);\n      } else if (value.match(/^\\d+$/)) { // unix timestamp\n        return new Date(value * 1000);\n      } else if (value.match(/^\\d{4}/)) { // iso8601\n        return new Date(value);\n      } else if (value.match(/^\\w{3},/)) { // rfc822\n        return new Date(value);\n      } else {\n        throw util.error(\n          new Error('unhandled timestamp format: ' + value),\n          {code: 'TimestampParserError'});\n      }\n    }\n\n  },\n\n  crypto: {\n    crc32Table: [\n     0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA, 0x076DC419,\n     0x706AF48F, 0xE963A535, 0x9E6495A3, 0x0EDB8832, 0x79DCB8A4,\n     0xE0D5E91E, 0x97D2D988, 0x09B64C2B, 0x7EB17CBD, 0xE7B82D07,\n     0x90BF1D91, 0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE,\n     0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7, 0x136C9856,\n     0x646BA8C0, 0xFD62F97A, 0x8A65C9EC, 0x14015C4F, 0x63066CD9,\n     0xFA0F3D63, 0x8D080DF5, 0x3B6E20C8, 0x4C69105E, 0xD56041E4,\n     0xA2677172, 0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B,\n     0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940, 0x32D86CE3,\n     0x45DF5C75, 0xDCD60DCF, 0xABD13D59, 0x26D930AC, 0x51DE003A,\n     0xC8D75180, 0xBFD06116, 0x21B4F4B5, 0x56B3C423, 0xCFBA9599,\n     0xB8BDA50F, 0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924,\n     0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D, 0x76DC4190,\n     0x01DB7106, 0x98D220BC, 0xEFD5102A, 0x71B18589, 0x06B6B51F,\n     0x9FBFE4A5, 0xE8B8D433, 0x7807C9A2, 0x0F00F934, 0x9609A88E,\n     0xE10E9818, 0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01,\n     0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E, 0x6C0695ED,\n     0x1B01A57B, 0x8208F4C1, 0xF50FC457, 0x65B0D9C6, 0x12B7E950,\n     0x8BBEB8EA, 0xFCB9887C, 0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3,\n     0xFBD44C65, 0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2,\n     0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB, 0x4369E96A,\n     0x346ED9FC, 0xAD678846, 0xDA60B8D0, 0x44042D73, 0x33031DE5,\n     0xAA0A4C5F, 0xDD0D7CC9, 0x5005713C, 0x270241AA, 0xBE0B1010,\n     0xC90C2086, 0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F,\n     0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4, 0x59B33D17,\n     0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD, 0xEDB88320, 0x9ABFB3B6,\n     0x03B6E20C, 0x74B1D29A, 0xEAD54739, 0x9DD277AF, 0x04DB2615,\n     0x73DC1683, 0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8,\n     0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1, 0xF00F9344,\n     0x8708A3D2, 0x1E01F268, 0x6906C2FE, 0xF762575D, 0x806567CB,\n     0x196C3671, 0x6E6B06E7, 0xFED41B76, 0x89D32BE0, 0x10DA7A5A,\n     0x67DD4ACC, 0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5,\n     0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252, 0xD1BB67F1,\n     0xA6BC5767, 0x3FB506DD, 0x48B2364B, 0xD80D2BDA, 0xAF0A1B4C,\n     0x36034AF6, 0x41047A60, 0xDF60EFC3, 0xA867DF55, 0x316E8EEF,\n     0x4669BE79, 0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236,\n     0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F, 0xC5BA3BBE,\n     0xB2BD0B28, 0x2BB45A92, 0x5CB36A04, 0xC2D7FFA7, 0xB5D0CF31,\n     0x2CD99E8B, 0x5BDEAE1D, 0x9B64C2B0, 0xEC63F226, 0x756AA39C,\n     0x026D930A, 0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713,\n     0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38, 0x92D28E9B,\n     0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21, 0x86D3D2D4, 0xF1D4E242,\n     0x68DDB3F8, 0x1FDA836E, 0x81BE16CD, 0xF6B9265B, 0x6FB077E1,\n     0x18B74777, 0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C,\n     0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45, 0xA00AE278,\n     0xD70DD2EE, 0x4E048354, 0x3903B3C2, 0xA7672661, 0xD06016F7,\n     0x4969474D, 0x3E6E77DB, 0xAED16A4A, 0xD9D65ADC, 0x40DF0B66,\n     0x37D83BF0, 0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9,\n     0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6, 0xBAD03605,\n     0xCDD70693, 0x54DE5729, 0x23D967BF, 0xB3667A2E, 0xC4614AB8,\n     0x5D681B02, 0x2A6F2B94, 0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B,\n     0x2D02EF8D],\n\n    crc32: function crc32(data) {\n      var tbl = util.crypto.crc32Table;\n      var crc = 0 ^ -1;\n\n      if (typeof data === 'string') {\n        data = util.buffer.toBuffer(data);\n      }\n\n      for (var i = 0; i < data.length; i++) {\n        var code = data.readUInt8(i);\n        crc = (crc >>> 8) ^ tbl[(crc ^ code) & 0xFF];\n      }\n      return (crc ^ -1) >>> 0;\n    },\n\n    hmac: function hmac(key, string, digest, fn) {\n      if (!digest) digest = 'binary';\n      if (digest === 'buffer') { digest = undefined; }\n      if (!fn) fn = 'sha256';\n      if (typeof string === 'string') string = util.buffer.toBuffer(string);\n      return util.crypto.lib.createHmac(fn, key).update(string).digest(digest);\n    },\n\n    md5: function md5(data, digest, callback) {\n      return util.crypto.hash('md5', data, digest, callback);\n    },\n\n    sha256: function sha256(data, digest, callback) {\n      return util.crypto.hash('sha256', data, digest, callback);\n    },\n\n    hash: function(algorithm, data, digest, callback) {\n      var hash = util.crypto.createHash(algorithm);\n      if (!digest) { digest = 'binary'; }\n      if (digest === 'buffer') { digest = undefined; }\n      if (typeof data === 'string') data = util.buffer.toBuffer(data);\n      var sliceFn = util.arraySliceFn(data);\n      var isBuffer = util.Buffer.isBuffer(data);\n      //Identifying objects with an ArrayBuffer as buffers\n      if (util.isBrowser() && typeof ArrayBuffer !== 'undefined' && data && data.buffer instanceof ArrayBuffer) isBuffer = true;\n\n      if (callback && typeof data === 'object' &&\n          typeof data.on === 'function' && !isBuffer) {\n        data.on('data', function(chunk) { hash.update(chunk); });\n        data.on('error', function(err) { callback(err); });\n        data.on('end', function() { callback(null, hash.digest(digest)); });\n      } else if (callback && sliceFn && !isBuffer &&\n                 typeof FileReader !== 'undefined') {\n        // this might be a File/Blob\n        var index = 0, size = 1024 * 512;\n        var reader = new FileReader();\n        reader.onerror = function() {\n          callback(new Error('Failed to read data.'));\n        };\n        reader.onload = function() {\n          var buf = new util.Buffer(new Uint8Array(reader.result));\n          hash.update(buf);\n          index += buf.length;\n          reader._continueReading();\n        };\n        reader._continueReading = function() {\n          if (index >= data.size) {\n            callback(null, hash.digest(digest));\n            return;\n          }\n\n          var back = index + size;\n          if (back > data.size) back = data.size;\n          reader.readAsArrayBuffer(sliceFn.call(data, index, back));\n        };\n\n        reader._continueReading();\n      } else {\n        if (util.isBrowser() && typeof data === 'object' && !isBuffer) {\n          data = new util.Buffer(new Uint8Array(data));\n        }\n        var out = hash.update(data).digest(digest);\n        if (callback) callback(null, out);\n        return out;\n      }\n    },\n\n    toHex: function toHex(data) {\n      var out = [];\n      for (var i = 0; i < data.length; i++) {\n        out.push(('0' + data.charCodeAt(i).toString(16)).substr(-2, 2));\n      }\n      return out.join('');\n    },\n\n    createHash: function createHash(algorithm) {\n      return util.crypto.lib.createHash(algorithm);\n    }\n\n  },\n\n  /** @!ignore */\n\n  /* Abort constant */\n  abort: {},\n\n  each: function each(object, iterFunction) {\n    for (var key in object) {\n      if (Object.prototype.hasOwnProperty.call(object, key)) {\n        var ret = iterFunction.call(this, key, object[key]);\n        if (ret === util.abort) break;\n      }\n    }\n  },\n\n  arrayEach: function arrayEach(array, iterFunction) {\n    for (var idx in array) {\n      if (Object.prototype.hasOwnProperty.call(array, idx)) {\n        var ret = iterFunction.call(this, array[idx], parseInt(idx, 10));\n        if (ret === util.abort) break;\n      }\n    }\n  },\n\n  update: function update(obj1, obj2) {\n    util.each(obj2, function iterator(key, item) {\n      obj1[key] = item;\n    });\n    return obj1;\n  },\n\n  merge: function merge(obj1, obj2) {\n    return util.update(util.copy(obj1), obj2);\n  },\n\n  copy: function copy(object) {\n    if (object === null || object === undefined) return object;\n    var dupe = {};\n    // jshint forin:false\n    for (var key in object) {\n      dupe[key] = object[key];\n    }\n    return dupe;\n  },\n\n  isEmpty: function isEmpty(obj) {\n    for (var prop in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n        return false;\n      }\n    }\n    return true;\n  },\n\n  arraySliceFn: function arraySliceFn(obj) {\n    var fn = obj.slice || obj.webkitSlice || obj.mozSlice;\n    return typeof fn === 'function' ? fn : null;\n  },\n\n  isType: function isType(obj, type) {\n    // handle cross-\"frame\" objects\n    if (typeof type === 'function') type = util.typeName(type);\n    return Object.prototype.toString.call(obj) === '[object ' + type + ']';\n  },\n\n  typeName: function typeName(type) {\n    if (Object.prototype.hasOwnProperty.call(type, 'name')) return type.name;\n    var str = type.toString();\n    var match = str.match(/^\\s*function (.+)\\(/);\n    return match ? match[1] : str;\n  },\n\n  error: function error(err, options) {\n    var originalError = null;\n    if (typeof err.message === 'string' && err.message !== '') {\n      if (typeof options === 'string' || (options && options.message)) {\n        originalError = util.copy(err);\n        originalError.message = err.message;\n      }\n    }\n    err.message = err.message || null;\n\n    if (typeof options === 'string') {\n      err.message = options;\n    } else if (typeof options === 'object' && options !== null) {\n      util.update(err, options);\n      if (options.message)\n        err.message = options.message;\n      if (options.code || options.name)\n        err.code = options.code || options.name;\n      if (options.stack)\n        err.stack = options.stack;\n    }\n\n    if (typeof Object.defineProperty === 'function') {\n      Object.defineProperty(err, 'name', {writable: true, enumerable: false});\n      Object.defineProperty(err, 'message', {enumerable: true});\n    }\n\n    err.name = String(options && options.name || err.name || err.code || 'Error');\n    err.time = new Date();\n\n    if (originalError) err.originalError = originalError;\n\n    return err;\n  },\n\n  /**\n   * @api private\n   */\n  inherit: function inherit(klass, features) {\n    var newObject = null;\n    if (features === undefined) {\n      features = klass;\n      klass = Object;\n      newObject = {};\n    } else {\n      var ctor = function ConstructorWrapper() {};\n      ctor.prototype = klass.prototype;\n      newObject = new ctor();\n    }\n\n    // constructor not supplied, create pass-through ctor\n    if (features.constructor === Object) {\n      features.constructor = function() {\n        if (klass !== Object) {\n          return klass.apply(this, arguments);\n        }\n      };\n    }\n\n    features.constructor.prototype = newObject;\n    util.update(features.constructor.prototype, features);\n    features.constructor.__super__ = klass;\n    return features.constructor;\n  },\n\n  /**\n   * @api private\n   */\n  mixin: function mixin() {\n    var klass = arguments[0];\n    for (var i = 1; i < arguments.length; i++) {\n      // jshint forin:false\n      for (var prop in arguments[i].prototype) {\n        var fn = arguments[i].prototype[prop];\n        if (prop !== 'constructor') {\n          klass.prototype[prop] = fn;\n        }\n      }\n    }\n    return klass;\n  },\n\n  /**\n   * @api private\n   */\n  hideProperties: function hideProperties(obj, props) {\n    if (typeof Object.defineProperty !== 'function') return;\n\n    util.arrayEach(props, function (key) {\n      Object.defineProperty(obj, key, {\n        enumerable: false, writable: true, configurable: true });\n    });\n  },\n\n  /**\n   * @api private\n   */\n  property: function property(obj, name, value, enumerable, isValue) {\n    var opts = {\n      configurable: true,\n      enumerable: enumerable !== undefined ? enumerable : true\n    };\n    if (typeof value === 'function' && !isValue) {\n      opts.get = value;\n    }\n    else {\n      opts.value = value; opts.writable = true;\n    }\n\n    Object.defineProperty(obj, name, opts);\n  },\n\n  /**\n   * @api private\n   */\n  memoizedProperty: function memoizedProperty(obj, name, get, enumerable) {\n    var cachedValue = null;\n\n    // build enumerable attribute for each value with lazy accessor.\n    util.property(obj, name, function() {\n      if (cachedValue === null) {\n        cachedValue = get();\n      }\n      return cachedValue;\n    }, enumerable);\n  },\n\n  /**\n   * TODO Remove in major version revision\n   * This backfill populates response data without the\n   * top-level payload name.\n   *\n   * @api private\n   */\n  hoistPayloadMember: function hoistPayloadMember(resp) {\n    var req = resp.request;\n    var operationName = req.operation;\n    var operation = req.service.api.operations[operationName];\n    var output = operation.output;\n    if (output.payload && !operation.hasEventOutput) {\n      var payloadMember = output.members[output.payload];\n      var responsePayload = resp.data[output.payload];\n      if (payloadMember.type === 'structure') {\n        util.each(responsePayload, function(key, value) {\n          util.property(resp.data, key, value, false);\n        });\n      }\n    }\n  },\n\n  /**\n   * Compute SHA-256 checksums of streams\n   *\n   * @api private\n   */\n  computeSha256: function computeSha256(body, done) {\n    if (util.isNode()) {\n      var Stream = util.stream.Stream;\n      var fs = require('fs');\n      if (typeof Stream === 'function' && body instanceof Stream) {\n        if (typeof body.path === 'string') { // assume file object\n          var settings = {};\n          if (typeof body.start === 'number') {\n            settings.start = body.start;\n          }\n          if (typeof body.end === 'number') {\n            settings.end = body.end;\n          }\n          body = fs.createReadStream(body.path, settings);\n        } else { // TODO support other stream types\n          return done(new Error('Non-file stream objects are ' +\n                                'not supported with SigV4'));\n        }\n      }\n    }\n\n    util.crypto.sha256(body, 'hex', function(err, sha) {\n      if (err) done(err);\n      else done(null, sha);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  isClockSkewed: function isClockSkewed(serverTime) {\n    if (serverTime) {\n      util.property(AWS.config, 'isClockSkewed',\n        Math.abs(new Date().getTime() - serverTime) >= 300000, false);\n      return AWS.config.isClockSkewed;\n    }\n  },\n\n  applyClockOffset: function applyClockOffset(serverTime) {\n    if (serverTime)\n      AWS.config.systemClockOffset = serverTime - new Date().getTime();\n  },\n\n  /**\n   * @api private\n   */\n  extractRequestId: function extractRequestId(resp) {\n    var requestId = resp.httpResponse.headers['x-amz-request-id'] ||\n                     resp.httpResponse.headers['x-amzn-requestid'];\n\n    if (!requestId && resp.data && resp.data.ResponseMetadata) {\n      requestId = resp.data.ResponseMetadata.RequestId;\n    }\n\n    if (requestId) {\n      resp.requestId = requestId;\n    }\n\n    if (resp.error) {\n      resp.error.requestId = requestId;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  addPromises: function addPromises(constructors, PromiseDependency) {\n    var deletePromises = false;\n    if (PromiseDependency === undefined && AWS && AWS.config) {\n      PromiseDependency = AWS.config.getPromisesDependency();\n    }\n    if (PromiseDependency === undefined && typeof Promise !== 'undefined') {\n      PromiseDependency = Promise;\n    }\n    if (typeof PromiseDependency !== 'function') deletePromises = true;\n    if (!Array.isArray(constructors)) constructors = [constructors];\n\n    for (var ind = 0; ind < constructors.length; ind++) {\n      var constructor = constructors[ind];\n      if (deletePromises) {\n        if (constructor.deletePromisesFromClass) {\n          constructor.deletePromisesFromClass();\n        }\n      } else if (constructor.addPromisesToClass) {\n        constructor.addPromisesToClass(PromiseDependency);\n      }\n    }\n  },\n\n  /**\n   * @api private\n   * Return a function that will return a promise whose fate is decided by the\n   * callback behavior of the given method with `methodName`. The method to be\n   * promisified should conform to node.js convention of accepting a callback as\n   * last argument and calling that callback with error as the first argument\n   * and success value on the second argument.\n   */\n  promisifyMethod: function promisifyMethod(methodName, PromiseDependency) {\n    return function promise() {\n      var self = this;\n      var args = Array.prototype.slice.call(arguments);\n      return new PromiseDependency(function(resolve, reject) {\n        args.push(function(err, data) {\n          if (err) {\n            reject(err);\n          } else {\n            resolve(data);\n          }\n        });\n        self[methodName].apply(self, args);\n      });\n    };\n  },\n\n  /**\n   * @api private\n   */\n  isDualstackAvailable: function isDualstackAvailable(service) {\n    if (!service) return false;\n    var metadata = require('../apis/metadata.json');\n    if (typeof service !== 'string') service = service.serviceIdentifier;\n    if (typeof service !== 'string' || !metadata.hasOwnProperty(service)) return false;\n    return !!metadata[service].dualstackAvailable;\n  },\n\n  /**\n   * @api private\n   */\n  calculateRetryDelay: function calculateRetryDelay(retryCount, retryDelayOptions, err) {\n    if (!retryDelayOptions) retryDelayOptions = {};\n    var customBackoff = retryDelayOptions.customBackoff || null;\n    if (typeof customBackoff === 'function') {\n      return customBackoff(retryCount, err);\n    }\n    var base = typeof retryDelayOptions.base === 'number' ? retryDelayOptions.base : 100;\n    var delay = Math.random() * (Math.pow(2, retryCount) * base);\n    return delay;\n  },\n\n  /**\n   * @api private\n   */\n  handleRequestWithRetries: function handleRequestWithRetries(httpRequest, options, cb) {\n    if (!options) options = {};\n    var http = AWS.HttpClient.getInstance();\n    var httpOptions = options.httpOptions || {};\n    var retryCount = 0;\n\n    var errCallback = function(err) {\n      var maxRetries = options.maxRetries || 0;\n      if (err && err.code === 'TimeoutError') err.retryable = true;\n\n      // Call `calculateRetryDelay()` only when relevant, see #3401\n      if (err && err.retryable && retryCount < maxRetries) {\n        var delay = util.calculateRetryDelay(retryCount, options.retryDelayOptions, err);\n        if (delay >= 0) {\n          retryCount++;\n          setTimeout(sendRequest, delay + (err.retryAfter || 0));\n          return;\n        }\n      }\n      cb(err);\n    };\n\n    var sendRequest = function() {\n      var data = '';\n      http.handleRequest(httpRequest, httpOptions, function(httpResponse) {\n        httpResponse.on('data', function(chunk) { data += chunk.toString(); });\n        httpResponse.on('end', function() {\n          var statusCode = httpResponse.statusCode;\n          if (statusCode < 300) {\n            cb(null, data);\n          } else {\n            var retryAfter = parseInt(httpResponse.headers['retry-after'], 10) * 1000 || 0;\n            var err = util.error(new Error(),\n              {\n                statusCode: statusCode,\n                retryable: statusCode >= 500 || statusCode === 429\n              }\n            );\n            if (retryAfter && err.retryable) err.retryAfter = retryAfter;\n            errCallback(err);\n          }\n        });\n      }, errCallback);\n    };\n\n    AWS.util.defer(sendRequest);\n  },\n\n  /**\n   * @api private\n   */\n  uuid: {\n    v4: function uuidV4() {\n      return require('uuid').v4();\n    }\n  },\n\n  /**\n   * @api private\n   */\n  convertPayloadToString: function convertPayloadToString(resp) {\n    var req = resp.request;\n    var operation = req.operation;\n    var rules = req.service.api.operations[operation].output || {};\n    if (rules.payload && resp.data[rules.payload]) {\n      resp.data[rules.payload] = resp.data[rules.payload].toString();\n    }\n  },\n\n  /**\n   * @api private\n   */\n  defer: function defer(callback) {\n    if (typeof process === 'object' && typeof process.nextTick === 'function') {\n      process.nextTick(callback);\n    } else if (typeof setImmediate === 'function') {\n      setImmediate(callback);\n    } else {\n      setTimeout(callback, 0);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getRequestPayloadShape: function getRequestPayloadShape(req) {\n    var operations = req.service.api.operations;\n    if (!operations) return undefined;\n    var operation = (operations || {})[req.operation];\n    if (!operation || !operation.input || !operation.input.payload) return undefined;\n    return operation.input.members[operation.input.payload];\n  },\n\n  getProfilesFromSharedConfig: function getProfilesFromSharedConfig(iniLoader, filename) {\n    var profiles = {};\n    var profilesFromConfig = {};\n    if (process.env[util.configOptInEnv]) {\n      var profilesFromConfig = iniLoader.loadFrom({\n        isConfig: true,\n        filename: process.env[util.sharedConfigFileEnv]\n      });\n    }\n    var profilesFromCreds= {};\n    try {\n      var profilesFromCreds = iniLoader.loadFrom({\n        filename: filename ||\n          (process.env[util.configOptInEnv] && process.env[util.sharedCredentialsFileEnv])\n      });\n    } catch (error) {\n      // if using config, assume it is fully descriptive without a credentials file:\n      if (!process.env[util.configOptInEnv]) throw error;\n    }\n    for (var i = 0, profileNames = Object.keys(profilesFromConfig); i < profileNames.length; i++) {\n      profiles[profileNames[i]] = objectAssign(profiles[profileNames[i]] || {}, profilesFromConfig[profileNames[i]]);\n    }\n    for (var i = 0, profileNames = Object.keys(profilesFromCreds); i < profileNames.length; i++) {\n      profiles[profileNames[i]] = objectAssign(profiles[profileNames[i]] || {}, profilesFromCreds[profileNames[i]]);\n    }\n    return profiles;\n\n    /**\n     * Roughly the semantics of `Object.assign(target, source)`\n     */\n    function objectAssign(target, source) {\n      for (var i = 0, keys = Object.keys(source); i < keys.length; i++) {\n        target[keys[i]] = source[keys[i]];\n      }\n      return target;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  ARN: {\n    validate: function validateARN(str) {\n      return str && str.indexOf('arn:') === 0 && str.split(':').length >= 6;\n    },\n    parse: function parseARN(arn) {\n      var matched = arn.split(':');\n      return {\n        partition: matched[1],\n        service: matched[2],\n        region: matched[3],\n        accountId: matched[4],\n        resource: matched.slice(5).join(':')\n      };\n    },\n    build: function buildARN(arnObject) {\n      if (\n        arnObject.service === undefined ||\n        arnObject.region === undefined ||\n        arnObject.accountId === undefined ||\n        arnObject.resource === undefined\n      ) throw util.error(new Error('Input ARN object is invalid'));\n      return 'arn:'+ (arnObject.partition || 'aws') + ':' + arnObject.service +\n        ':' + arnObject.region + ':' + arnObject.accountId + ':' + arnObject.resource;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  defaultProfile: 'default',\n\n  /**\n   * @api private\n   */\n  configOptInEnv: 'AWS_SDK_LOAD_CONFIG',\n\n  /**\n   * @api private\n   */\n  sharedCredentialsFileEnv: 'AWS_SHARED_CREDENTIALS_FILE',\n\n  /**\n   * @api private\n   */\n  sharedConfigFileEnv: 'AWS_CONFIG_FILE',\n\n  /**\n   * @api private\n   */\n  imdsDisabledEnv: 'AWS_EC2_METADATA_DISABLED'\n};\n\n/**\n * @api private\n */\nmodule.exports = util;\n","var util = require('../util');\nvar XmlNode = require('./xml-node').XmlNode;\nvar XmlText = require('./xml-text').XmlText;\n\nfunction XmlBuilder() { }\n\nXmlBuilder.prototype.toXML = function(params, shape, rootElement, noEmpty) {\n  var xml = new XmlNode(rootElement);\n  applyNamespaces(xml, shape, true);\n  serialize(xml, params, shape);\n  return xml.children.length > 0 || noEmpty ? xml.toString() : '';\n};\n\nfunction serialize(xml, value, shape) {\n  switch (shape.type) {\n    case 'structure': return serializeStructure(xml, value, shape);\n    case 'map': return serializeMap(xml, value, shape);\n    case 'list': return serializeList(xml, value, shape);\n    default: return serializeScalar(xml, value, shape);\n  }\n}\n\nfunction serializeStructure(xml, params, shape) {\n  util.arrayEach(shape.memberNames, function(memberName) {\n    var memberShape = shape.members[memberName];\n    if (memberShape.location !== 'body') return;\n\n    var value = params[memberName];\n    var name = memberShape.name;\n    if (value !== undefined && value !== null) {\n      if (memberShape.isXmlAttribute) {\n        xml.addAttribute(name, value);\n      } else if (memberShape.flattened) {\n        serialize(xml, value, memberShape);\n      } else {\n        var element = new XmlNode(name);\n        xml.addChildNode(element);\n        applyNamespaces(element, memberShape);\n        serialize(element, value, memberShape);\n      }\n    }\n  });\n}\n\nfunction serializeMap(xml, map, shape) {\n  var xmlKey = shape.key.name || 'key';\n  var xmlValue = shape.value.name || 'value';\n\n  util.each(map, function(key, value) {\n    var entry = new XmlNode(shape.flattened ? shape.name : 'entry');\n    xml.addChildNode(entry);\n\n    var entryKey = new XmlNode(xmlKey);\n    var entryValue = new XmlNode(xmlValue);\n    entry.addChildNode(entryKey);\n    entry.addChildNode(entryValue);\n\n    serialize(entryKey, key, shape.key);\n    serialize(entryValue, value, shape.value);\n  });\n}\n\nfunction serializeList(xml, list, shape) {\n  if (shape.flattened) {\n    util.arrayEach(list, function(value) {\n      var name = shape.member.name || shape.name;\n      var element = new XmlNode(name);\n      xml.addChildNode(element);\n      serialize(element, value, shape.member);\n    });\n  } else {\n    util.arrayEach(list, function(value) {\n      var name = shape.member.name || 'member';\n      var element = new XmlNode(name);\n      xml.addChildNode(element);\n      serialize(element, value, shape.member);\n    });\n  }\n}\n\nfunction serializeScalar(xml, value, shape) {\n  xml.addChildNode(\n    new XmlText(shape.toWireFormat(value))\n  );\n}\n\nfunction applyNamespaces(xml, shape, isRoot) {\n  var uri, prefix = 'xmlns';\n  if (shape.xmlNamespaceUri) {\n    uri = shape.xmlNamespaceUri;\n    if (shape.xmlNamespacePrefix) prefix += ':' + shape.xmlNamespacePrefix;\n  } else if (isRoot && shape.api.xmlNamespaceUri) {\n    uri = shape.api.xmlNamespaceUri;\n  }\n\n  if (uri) xml.addAttribute(prefix, uri);\n}\n\n/**\n * @api private\n */\nmodule.exports = XmlBuilder;\n","/**\n * Escapes characters that can not be in an XML attribute.\n */\nfunction escapeAttribute(value) {\n    return value.replace(/&/g, '&amp;').replace(/'/g, '&apos;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    escapeAttribute: escapeAttribute\n};\n","/**\n * Escapes characters that can not be in an XML element.\n */\nfunction escapeElement(value) {\n    return value.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    escapeElement: escapeElement\n};\n","var AWS = require('../core');\nvar util = AWS.util;\nvar Shape = AWS.Model.Shape;\n\nvar xml2js = require('xml2js');\n\n/**\n * @api private\n */\nvar options = {  // options passed to xml2js parser\n  explicitCharkey: false, // undocumented\n  trim: false,            // trim the leading/trailing whitespace from text nodes\n  normalize: false,       // trim interior whitespace inside text nodes\n  explicitRoot: false,    // return the root node in the resulting object?\n  emptyTag: null,         // the default value for empty nodes\n  explicitArray: true,    // always put child nodes in an array\n  ignoreAttrs: false,     // ignore attributes, only create text nodes\n  mergeAttrs: false,      // merge attributes and child elements\n  validator: null         // a callable validator\n};\n\nfunction NodeXmlParser() { }\n\nNodeXmlParser.prototype.parse = function(xml, shape) {\n  shape = shape || {};\n\n  var result = null;\n  var error = null;\n\n  var parser = new xml2js.Parser(options);\n  parser.parseString(xml, function (e, r) {\n    error = e;\n    result = r;\n  });\n\n  if (result) {\n    var data = parseXml(result, shape);\n    if (result.ResponseMetadata) {\n      data.ResponseMetadata = parseXml(result.ResponseMetadata[0], {});\n    }\n    return data;\n  } else if (error) {\n    throw util.error(error, {code: 'XMLParserError', retryable: true});\n  } else { // empty xml document\n    return parseXml({}, shape);\n  }\n};\n\nfunction parseXml(xml, shape) {\n  switch (shape.type) {\n    case 'structure': return parseStructure(xml, shape);\n    case 'map': return parseMap(xml, shape);\n    case 'list': return parseList(xml, shape);\n    case undefined: case null: return parseUnknown(xml);\n    default: return parseScalar(xml, shape);\n  }\n}\n\nfunction parseStructure(xml, shape) {\n  var data = {};\n  if (xml === null) return data;\n\n  util.each(shape.members, function(memberName, memberShape) {\n    var xmlName = memberShape.name;\n    if (Object.prototype.hasOwnProperty.call(xml, xmlName) && Array.isArray(xml[xmlName])) {\n      var xmlChild = xml[xmlName];\n      if (!memberShape.flattened) xmlChild = xmlChild[0];\n\n      data[memberName] = parseXml(xmlChild, memberShape);\n    } else if (memberShape.isXmlAttribute &&\n               xml.$ && Object.prototype.hasOwnProperty.call(xml.$, xmlName)) {\n      data[memberName] = parseScalar(xml.$[xmlName], memberShape);\n    } else if (memberShape.type === 'list' && !shape.api.xmlNoDefaultLists) {\n      data[memberName] = memberShape.defaultValue;\n    }\n  });\n\n  return data;\n}\n\nfunction parseMap(xml, shape) {\n  var data = {};\n  if (xml === null) return data;\n\n  var xmlKey = shape.key.name || 'key';\n  var xmlValue = shape.value.name || 'value';\n  var iterable = shape.flattened ? xml : xml.entry;\n\n  if (Array.isArray(iterable)) {\n    util.arrayEach(iterable, function(child) {\n      data[child[xmlKey][0]] = parseXml(child[xmlValue][0], shape.value);\n    });\n  }\n\n  return data;\n}\n\nfunction parseList(xml, shape) {\n  var data = [];\n  var name = shape.member.name || 'member';\n  if (shape.flattened) {\n    util.arrayEach(xml, function(xmlChild) {\n      data.push(parseXml(xmlChild, shape.member));\n    });\n  } else if (xml && Array.isArray(xml[name])) {\n    util.arrayEach(xml[name], function(child) {\n      data.push(parseXml(child, shape.member));\n    });\n  }\n\n  return data;\n}\n\nfunction parseScalar(text, shape) {\n  if (text && text.$ && text.$.encoding === 'base64') {\n    shape = new Shape.create({type: text.$.encoding});\n  }\n  if (text && text._) text = text._;\n\n  if (typeof shape.toType === 'function') {\n    return shape.toType(text);\n  } else {\n    return text;\n  }\n}\n\nfunction parseUnknown(xml) {\n  if (xml === undefined || xml === null) return '';\n  if (typeof xml === 'string') return xml;\n\n  // parse a list\n  if (Array.isArray(xml)) {\n    var arr = [];\n    for (i = 0; i < xml.length; i++) {\n      arr.push(parseXml(xml[i], {}));\n    }\n    return arr;\n  }\n\n  // empty object\n  var keys = Object.keys(xml), i;\n  if (keys.length === 0 || (keys.length === 1 && keys[0] === '$')) {\n    return {};\n  }\n\n  // object, parse as structure\n  var data = {};\n  for (i = 0; i < keys.length; i++) {\n    var key = keys[i], value = xml[key];\n    if (key === '$') continue;\n    if (value.length > 1) { // this member is a list\n      data[key] = parseList(value, {member: {}});\n    } else { // this member is a single item\n      data[key] = parseXml(value[0], {});\n    }\n  }\n  return data;\n}\n\n/**\n * @api private\n */\nmodule.exports = NodeXmlParser;\n","var escapeAttribute = require('./escape-attribute').escapeAttribute;\n\n/**\n * Represents an XML node.\n * @api private\n */\nfunction XmlNode(name, children) {\n    if (children === void 0) { children = []; }\n    this.name = name;\n    this.children = children;\n    this.attributes = {};\n}\nXmlNode.prototype.addAttribute = function (name, value) {\n    this.attributes[name] = value;\n    return this;\n};\nXmlNode.prototype.addChildNode = function (child) {\n    this.children.push(child);\n    return this;\n};\nXmlNode.prototype.removeAttribute = function (name) {\n    delete this.attributes[name];\n    return this;\n};\nXmlNode.prototype.toString = function () {\n    var hasChildren = Boolean(this.children.length);\n    var xmlText = '<' + this.name;\n    // add attributes\n    var attributes = this.attributes;\n    for (var i = 0, attributeNames = Object.keys(attributes); i < attributeNames.length; i++) {\n        var attributeName = attributeNames[i];\n        var attribute = attributes[attributeName];\n        if (typeof attribute !== 'undefined' && attribute !== null) {\n            xmlText += ' ' + attributeName + '=\\\"' + escapeAttribute('' + attribute) + '\\\"';\n        }\n    }\n    return xmlText += !hasChildren ? '/>' : '>' + this.children.map(function (c) { return c.toString(); }).join('') + '</' + this.name + '>';\n};\n\n/**\n * @api private\n */\nmodule.exports = {\n    XmlNode: XmlNode\n};\n","var escapeElement = require('./escape-element').escapeElement;\n\n/**\n * Represents an XML text value.\n * @api private\n */\nfunction XmlText(value) {\n    this.value = value;\n}\n\nXmlText.prototype.toString = function () {\n    return escapeElement('' + this.value);\n};\n\n/**\n * @api private\n */\nmodule.exports = {\n    XmlText: XmlText\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LRU_1 = require(\"./utils/LRU\");\nvar CACHE_SIZE = 1000;\n/**\n * Inspired node-lru-cache[https://github.com/isaacs/node-lru-cache]\n */\nvar EndpointCache = /** @class */ (function () {\n    function EndpointCache(maxSize) {\n        if (maxSize === void 0) { maxSize = CACHE_SIZE; }\n        this.maxSize = maxSize;\n        this.cache = new LRU_1.LRUCache(maxSize);\n    }\n    ;\n    Object.defineProperty(EndpointCache.prototype, \"size\", {\n        get: function () {\n            return this.cache.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EndpointCache.prototype.put = function (key, value) {\n      var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n        var endpointRecord = this.populateValue(value);\n        this.cache.put(keyString, endpointRecord);\n    };\n    EndpointCache.prototype.get = function (key) {\n      var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n        var now = Date.now();\n        var records = this.cache.get(keyString);\n        if (records) {\n            for (var i = 0; i < records.length; i++) {\n                var record = records[i];\n                if (record.Expire < now) {\n                    this.cache.remove(keyString);\n                    return undefined;\n                }\n            }\n        }\n        return records;\n    };\n    EndpointCache.getKeyString = function (key) {\n        var identifiers = [];\n        var identifierNames = Object.keys(key).sort();\n        for (var i = 0; i < identifierNames.length; i++) {\n            var identifierName = identifierNames[i];\n            if (key[identifierName] === undefined)\n                continue;\n            identifiers.push(key[identifierName]);\n        }\n        return identifiers.join(' ');\n    };\n    EndpointCache.prototype.populateValue = function (endpoints) {\n        var now = Date.now();\n        return endpoints.map(function (endpoint) { return ({\n            Address: endpoint.Address || '',\n            Expire: now + (endpoint.CachePeriodInMinutes || 1) * 60 * 1000\n        }); });\n    };\n    EndpointCache.prototype.empty = function () {\n        this.cache.empty();\n    };\n    EndpointCache.prototype.remove = function (key) {\n      var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n        this.cache.remove(keyString);\n    };\n    return EndpointCache;\n}());\nexports.EndpointCache = EndpointCache;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LinkedListNode = /** @class */ (function () {\n    function LinkedListNode(key, value) {\n        this.key = key;\n        this.value = value;\n    }\n    return LinkedListNode;\n}());\nvar LRUCache = /** @class */ (function () {\n    function LRUCache(size) {\n        this.nodeMap = {};\n        this.size = 0;\n        if (typeof size !== 'number' || size < 1) {\n            throw new Error('Cache size can only be positive number');\n        }\n        this.sizeLimit = size;\n    }\n    Object.defineProperty(LRUCache.prototype, \"length\", {\n        get: function () {\n            return this.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LRUCache.prototype.prependToList = function (node) {\n        if (!this.headerNode) {\n            this.tailNode = node;\n        }\n        else {\n            this.headerNode.prev = node;\n            node.next = this.headerNode;\n        }\n        this.headerNode = node;\n        this.size++;\n    };\n    LRUCache.prototype.removeFromTail = function () {\n        if (!this.tailNode) {\n            return undefined;\n        }\n        var node = this.tailNode;\n        var prevNode = node.prev;\n        if (prevNode) {\n            prevNode.next = undefined;\n        }\n        node.prev = undefined;\n        this.tailNode = prevNode;\n        this.size--;\n        return node;\n    };\n    LRUCache.prototype.detachFromList = function (node) {\n        if (this.headerNode === node) {\n            this.headerNode = node.next;\n        }\n        if (this.tailNode === node) {\n            this.tailNode = node.prev;\n        }\n        if (node.prev) {\n            node.prev.next = node.next;\n        }\n        if (node.next) {\n            node.next.prev = node.prev;\n        }\n        node.next = undefined;\n        node.prev = undefined;\n        this.size--;\n    };\n    LRUCache.prototype.get = function (key) {\n        if (this.nodeMap[key]) {\n            var node = this.nodeMap[key];\n            this.detachFromList(node);\n            this.prependToList(node);\n            return node.value;\n        }\n    };\n    LRUCache.prototype.remove = function (key) {\n        if (this.nodeMap[key]) {\n            var node = this.nodeMap[key];\n            this.detachFromList(node);\n            delete this.nodeMap[key];\n        }\n    };\n    LRUCache.prototype.put = function (key, value) {\n        if (this.nodeMap[key]) {\n            this.remove(key);\n        }\n        else if (this.size === this.sizeLimit) {\n            var tailNode = this.removeFromTail();\n            var key_1 = tailNode.key;\n            delete this.nodeMap[key_1];\n        }\n        var newNode = new LinkedListNode(key, value);\n        this.nodeMap[key] = newNode;\n        this.prependToList(newNode);\n    };\n    LRUCache.prototype.empty = function () {\n        var keys = Object.keys(this.nodeMap);\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var node = this.nodeMap[key];\n            this.detachFromList(node);\n            delete this.nodeMap[key];\n        }\n    };\n    return LRUCache;\n}());\nexports.LRUCache = LRUCache;","(function(exports) {\n  \"use strict\";\n\n  function isArray(obj) {\n    if (obj !== null) {\n      return Object.prototype.toString.call(obj) === \"[object Array]\";\n    } else {\n      return false;\n    }\n  }\n\n  function isObject(obj) {\n    if (obj !== null) {\n      return Object.prototype.toString.call(obj) === \"[object Object]\";\n    } else {\n      return false;\n    }\n  }\n\n  function strictDeepEqual(first, second) {\n    // Check the scalar case first.\n    if (first === second) {\n      return true;\n    }\n\n    // Check if they are the same type.\n    var firstType = Object.prototype.toString.call(first);\n    if (firstType !== Object.prototype.toString.call(second)) {\n      return false;\n    }\n    // We know that first and second have the same type so we can just check the\n    // first type from now on.\n    if (isArray(first) === true) {\n      // Short circuit if they're not the same length;\n      if (first.length !== second.length) {\n        return false;\n      }\n      for (var i = 0; i < first.length; i++) {\n        if (strictDeepEqual(first[i], second[i]) === false) {\n          return false;\n        }\n      }\n      return true;\n    }\n    if (isObject(first) === true) {\n      // An object is equal if it has the same key/value pairs.\n      var keysSeen = {};\n      for (var key in first) {\n        if (hasOwnProperty.call(first, key)) {\n          if (strictDeepEqual(first[key], second[key]) === false) {\n            return false;\n          }\n          keysSeen[key] = true;\n        }\n      }\n      // Now check that there aren't any keys in second that weren't\n      // in first.\n      for (var key2 in second) {\n        if (hasOwnProperty.call(second, key2)) {\n          if (keysSeen[key2] !== true) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n    return false;\n  }\n\n  function isFalse(obj) {\n    // From the spec:\n    // A false value corresponds to the following values:\n    // Empty list\n    // Empty object\n    // Empty string\n    // False boolean\n    // null value\n\n    // First check the scalar values.\n    if (obj === \"\" || obj === false || obj === null) {\n        return true;\n    } else if (isArray(obj) && obj.length === 0) {\n        // Check for an empty array.\n        return true;\n    } else if (isObject(obj)) {\n        // Check for an empty object.\n        for (var key in obj) {\n            // If there are any keys, then\n            // the object is not empty so the object\n            // is not false.\n            if (obj.hasOwnProperty(key)) {\n              return false;\n            }\n        }\n        return true;\n    } else {\n        return false;\n    }\n  }\n\n  function objValues(obj) {\n    var keys = Object.keys(obj);\n    var values = [];\n    for (var i = 0; i < keys.length; i++) {\n      values.push(obj[keys[i]]);\n    }\n    return values;\n  }\n\n  function merge(a, b) {\n      var merged = {};\n      for (var key in a) {\n          merged[key] = a[key];\n      }\n      for (var key2 in b) {\n          merged[key2] = b[key2];\n      }\n      return merged;\n  }\n\n  var trimLeft;\n  if (typeof String.prototype.trimLeft === \"function\") {\n    trimLeft = function(str) {\n      return str.trimLeft();\n    };\n  } else {\n    trimLeft = function(str) {\n      return str.match(/^\\s*(.*)/)[1];\n    };\n  }\n\n  // Type constants used to define functions.\n  var TYPE_NUMBER = 0;\n  var TYPE_ANY = 1;\n  var TYPE_STRING = 2;\n  var TYPE_ARRAY = 3;\n  var TYPE_OBJECT = 4;\n  var TYPE_BOOLEAN = 5;\n  var TYPE_EXPREF = 6;\n  var TYPE_NULL = 7;\n  var TYPE_ARRAY_NUMBER = 8;\n  var TYPE_ARRAY_STRING = 9;\n\n  var TOK_EOF = \"EOF\";\n  var TOK_UNQUOTEDIDENTIFIER = \"UnquotedIdentifier\";\n  var TOK_QUOTEDIDENTIFIER = \"QuotedIdentifier\";\n  var TOK_RBRACKET = \"Rbracket\";\n  var TOK_RPAREN = \"Rparen\";\n  var TOK_COMMA = \"Comma\";\n  var TOK_COLON = \"Colon\";\n  var TOK_RBRACE = \"Rbrace\";\n  var TOK_NUMBER = \"Number\";\n  var TOK_CURRENT = \"Current\";\n  var TOK_EXPREF = \"Expref\";\n  var TOK_PIPE = \"Pipe\";\n  var TOK_OR = \"Or\";\n  var TOK_AND = \"And\";\n  var TOK_EQ = \"EQ\";\n  var TOK_GT = \"GT\";\n  var TOK_LT = \"LT\";\n  var TOK_GTE = \"GTE\";\n  var TOK_LTE = \"LTE\";\n  var TOK_NE = \"NE\";\n  var TOK_FLATTEN = \"Flatten\";\n  var TOK_STAR = \"Star\";\n  var TOK_FILTER = \"Filter\";\n  var TOK_DOT = \"Dot\";\n  var TOK_NOT = \"Not\";\n  var TOK_LBRACE = \"Lbrace\";\n  var TOK_LBRACKET = \"Lbracket\";\n  var TOK_LPAREN= \"Lparen\";\n  var TOK_LITERAL= \"Literal\";\n\n  // The \"&\", \"[\", \"<\", \">\" tokens\n  // are not in basicToken because\n  // there are two token variants\n  // (\"&&\", \"[?\", \"<=\", \">=\").  This is specially handled\n  // below.\n\n  var basicTokens = {\n    \".\": TOK_DOT,\n    \"*\": TOK_STAR,\n    \",\": TOK_COMMA,\n    \":\": TOK_COLON,\n    \"{\": TOK_LBRACE,\n    \"}\": TOK_RBRACE,\n    \"]\": TOK_RBRACKET,\n    \"(\": TOK_LPAREN,\n    \")\": TOK_RPAREN,\n    \"@\": TOK_CURRENT\n  };\n\n  var operatorStartToken = {\n      \"<\": true,\n      \">\": true,\n      \"=\": true,\n      \"!\": true\n  };\n\n  var skipChars = {\n      \" \": true,\n      \"\\t\": true,\n      \"\\n\": true\n  };\n\n\n  function isAlpha(ch) {\n      return (ch >= \"a\" && ch <= \"z\") ||\n             (ch >= \"A\" && ch <= \"Z\") ||\n             ch === \"_\";\n  }\n\n  function isNum(ch) {\n      return (ch >= \"0\" && ch <= \"9\") ||\n             ch === \"-\";\n  }\n  function isAlphaNum(ch) {\n      return (ch >= \"a\" && ch <= \"z\") ||\n             (ch >= \"A\" && ch <= \"Z\") ||\n             (ch >= \"0\" && ch <= \"9\") ||\n             ch === \"_\";\n  }\n\n  function Lexer() {\n  }\n  Lexer.prototype = {\n      tokenize: function(stream) {\n          var tokens = [];\n          this._current = 0;\n          var start;\n          var identifier;\n          var token;\n          while (this._current < stream.length) {\n              if (isAlpha(stream[this._current])) {\n                  start = this._current;\n                  identifier = this._consumeUnquotedIdentifier(stream);\n                  tokens.push({type: TOK_UNQUOTEDIDENTIFIER,\n                               value: identifier,\n                               start: start});\n              } else if (basicTokens[stream[this._current]] !== undefined) {\n                  tokens.push({type: basicTokens[stream[this._current]],\n                              value: stream[this._current],\n                              start: this._current});\n                  this._current++;\n              } else if (isNum(stream[this._current])) {\n                  token = this._consumeNumber(stream);\n                  tokens.push(token);\n              } else if (stream[this._current] === \"[\") {\n                  // No need to increment this._current.  This happens\n                  // in _consumeLBracket\n                  token = this._consumeLBracket(stream);\n                  tokens.push(token);\n              } else if (stream[this._current] === \"\\\"\") {\n                  start = this._current;\n                  identifier = this._consumeQuotedIdentifier(stream);\n                  tokens.push({type: TOK_QUOTEDIDENTIFIER,\n                               value: identifier,\n                               start: start});\n              } else if (stream[this._current] === \"'\") {\n                  start = this._current;\n                  identifier = this._consumeRawStringLiteral(stream);\n                  tokens.push({type: TOK_LITERAL,\n                               value: identifier,\n                               start: start});\n              } else if (stream[this._current] === \"`\") {\n                  start = this._current;\n                  var literal = this._consumeLiteral(stream);\n                  tokens.push({type: TOK_LITERAL,\n                               value: literal,\n                               start: start});\n              } else if (operatorStartToken[stream[this._current]] !== undefined) {\n                  tokens.push(this._consumeOperator(stream));\n              } else if (skipChars[stream[this._current]] !== undefined) {\n                  // Ignore whitespace.\n                  this._current++;\n              } else if (stream[this._current] === \"&\") {\n                  start = this._current;\n                  this._current++;\n                  if (stream[this._current] === \"&\") {\n                      this._current++;\n                      tokens.push({type: TOK_AND, value: \"&&\", start: start});\n                  } else {\n                      tokens.push({type: TOK_EXPREF, value: \"&\", start: start});\n                  }\n              } else if (stream[this._current] === \"|\") {\n                  start = this._current;\n                  this._current++;\n                  if (stream[this._current] === \"|\") {\n                      this._current++;\n                      tokens.push({type: TOK_OR, value: \"||\", start: start});\n                  } else {\n                      tokens.push({type: TOK_PIPE, value: \"|\", start: start});\n                  }\n              } else {\n                  var error = new Error(\"Unknown character:\" + stream[this._current]);\n                  error.name = \"LexerError\";\n                  throw error;\n              }\n          }\n          return tokens;\n      },\n\n      _consumeUnquotedIdentifier: function(stream) {\n          var start = this._current;\n          this._current++;\n          while (this._current < stream.length && isAlphaNum(stream[this._current])) {\n              this._current++;\n          }\n          return stream.slice(start, this._current);\n      },\n\n      _consumeQuotedIdentifier: function(stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n          while (stream[this._current] !== \"\\\"\" && this._current < maxLength) {\n              // You can escape a double quote and you can escape an escape.\n              var current = this._current;\n              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                               stream[current + 1] === \"\\\"\")) {\n                  current += 2;\n              } else {\n                  current++;\n              }\n              this._current = current;\n          }\n          this._current++;\n          return JSON.parse(stream.slice(start, this._current));\n      },\n\n      _consumeRawStringLiteral: function(stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n          while (stream[this._current] !== \"'\" && this._current < maxLength) {\n              // You can escape a single quote and you can escape an escape.\n              var current = this._current;\n              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                               stream[current + 1] === \"'\")) {\n                  current += 2;\n              } else {\n                  current++;\n              }\n              this._current = current;\n          }\n          this._current++;\n          var literal = stream.slice(start + 1, this._current - 1);\n          return literal.replace(\"\\\\'\", \"'\");\n      },\n\n      _consumeNumber: function(stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n          while (isNum(stream[this._current]) && this._current < maxLength) {\n              this._current++;\n          }\n          var value = parseInt(stream.slice(start, this._current));\n          return {type: TOK_NUMBER, value: value, start: start};\n      },\n\n      _consumeLBracket: function(stream) {\n          var start = this._current;\n          this._current++;\n          if (stream[this._current] === \"?\") {\n              this._current++;\n              return {type: TOK_FILTER, value: \"[?\", start: start};\n          } else if (stream[this._current] === \"]\") {\n              this._current++;\n              return {type: TOK_FLATTEN, value: \"[]\", start: start};\n          } else {\n              return {type: TOK_LBRACKET, value: \"[\", start: start};\n          }\n      },\n\n      _consumeOperator: function(stream) {\n          var start = this._current;\n          var startingChar = stream[start];\n          this._current++;\n          if (startingChar === \"!\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_NE, value: \"!=\", start: start};\n              } else {\n                return {type: TOK_NOT, value: \"!\", start: start};\n              }\n          } else if (startingChar === \"<\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_LTE, value: \"<=\", start: start};\n              } else {\n                  return {type: TOK_LT, value: \"<\", start: start};\n              }\n          } else if (startingChar === \">\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_GTE, value: \">=\", start: start};\n              } else {\n                  return {type: TOK_GT, value: \">\", start: start};\n              }\n          } else if (startingChar === \"=\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_EQ, value: \"==\", start: start};\n              }\n          }\n      },\n\n      _consumeLiteral: function(stream) {\n          this._current++;\n          var start = this._current;\n          var maxLength = stream.length;\n          var literal;\n          while(stream[this._current] !== \"`\" && this._current < maxLength) {\n              // You can escape a literal char or you can escape the escape.\n              var current = this._current;\n              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                               stream[current + 1] === \"`\")) {\n                  current += 2;\n              } else {\n                  current++;\n              }\n              this._current = current;\n          }\n          var literalString = trimLeft(stream.slice(start, this._current));\n          literalString = literalString.replace(\"\\\\`\", \"`\");\n          if (this._looksLikeJSON(literalString)) {\n              literal = JSON.parse(literalString);\n          } else {\n              // Try to JSON parse it as \"<literal>\"\n              literal = JSON.parse(\"\\\"\" + literalString + \"\\\"\");\n          }\n          // +1 gets us to the ending \"`\", +1 to move on to the next char.\n          this._current++;\n          return literal;\n      },\n\n      _looksLikeJSON: function(literalString) {\n          var startingChars = \"[{\\\"\";\n          var jsonLiterals = [\"true\", \"false\", \"null\"];\n          var numberLooking = \"-0123456789\";\n\n          if (literalString === \"\") {\n              return false;\n          } else if (startingChars.indexOf(literalString[0]) >= 0) {\n              return true;\n          } else if (jsonLiterals.indexOf(literalString) >= 0) {\n              return true;\n          } else if (numberLooking.indexOf(literalString[0]) >= 0) {\n              try {\n                  JSON.parse(literalString);\n                  return true;\n              } catch (ex) {\n                  return false;\n              }\n          } else {\n              return false;\n          }\n      }\n  };\n\n      var bindingPower = {};\n      bindingPower[TOK_EOF] = 0;\n      bindingPower[TOK_UNQUOTEDIDENTIFIER] = 0;\n      bindingPower[TOK_QUOTEDIDENTIFIER] = 0;\n      bindingPower[TOK_RBRACKET] = 0;\n      bindingPower[TOK_RPAREN] = 0;\n      bindingPower[TOK_COMMA] = 0;\n      bindingPower[TOK_RBRACE] = 0;\n      bindingPower[TOK_NUMBER] = 0;\n      bindingPower[TOK_CURRENT] = 0;\n      bindingPower[TOK_EXPREF] = 0;\n      bindingPower[TOK_PIPE] = 1;\n      bindingPower[TOK_OR] = 2;\n      bindingPower[TOK_AND] = 3;\n      bindingPower[TOK_EQ] = 5;\n      bindingPower[TOK_GT] = 5;\n      bindingPower[TOK_LT] = 5;\n      bindingPower[TOK_GTE] = 5;\n      bindingPower[TOK_LTE] = 5;\n      bindingPower[TOK_NE] = 5;\n      bindingPower[TOK_FLATTEN] = 9;\n      bindingPower[TOK_STAR] = 20;\n      bindingPower[TOK_FILTER] = 21;\n      bindingPower[TOK_DOT] = 40;\n      bindingPower[TOK_NOT] = 45;\n      bindingPower[TOK_LBRACE] = 50;\n      bindingPower[TOK_LBRACKET] = 55;\n      bindingPower[TOK_LPAREN] = 60;\n\n  function Parser() {\n  }\n\n  Parser.prototype = {\n      parse: function(expression) {\n          this._loadTokens(expression);\n          this.index = 0;\n          var ast = this.expression(0);\n          if (this._lookahead(0) !== TOK_EOF) {\n              var t = this._lookaheadToken(0);\n              var error = new Error(\n                  \"Unexpected token type: \" + t.type + \", value: \" + t.value);\n              error.name = \"ParserError\";\n              throw error;\n          }\n          return ast;\n      },\n\n      _loadTokens: function(expression) {\n          var lexer = new Lexer();\n          var tokens = lexer.tokenize(expression);\n          tokens.push({type: TOK_EOF, value: \"\", start: expression.length});\n          this.tokens = tokens;\n      },\n\n      expression: function(rbp) {\n          var leftToken = this._lookaheadToken(0);\n          this._advance();\n          var left = this.nud(leftToken);\n          var currentToken = this._lookahead(0);\n          while (rbp < bindingPower[currentToken]) {\n              this._advance();\n              left = this.led(currentToken, left);\n              currentToken = this._lookahead(0);\n          }\n          return left;\n      },\n\n      _lookahead: function(number) {\n          return this.tokens[this.index + number].type;\n      },\n\n      _lookaheadToken: function(number) {\n          return this.tokens[this.index + number];\n      },\n\n      _advance: function() {\n          this.index++;\n      },\n\n      nud: function(token) {\n        var left;\n        var right;\n        var expression;\n        switch (token.type) {\n          case TOK_LITERAL:\n            return {type: \"Literal\", value: token.value};\n          case TOK_UNQUOTEDIDENTIFIER:\n            return {type: \"Field\", name: token.value};\n          case TOK_QUOTEDIDENTIFIER:\n            var node = {type: \"Field\", name: token.value};\n            if (this._lookahead(0) === TOK_LPAREN) {\n                throw new Error(\"Quoted identifier not allowed for function names.\");\n            } else {\n                return node;\n            }\n            break;\n          case TOK_NOT:\n            right = this.expression(bindingPower.Not);\n            return {type: \"NotExpression\", children: [right]};\n          case TOK_STAR:\n            left = {type: \"Identity\"};\n            right = null;\n            if (this._lookahead(0) === TOK_RBRACKET) {\n                // This can happen in a multiselect,\n                // [a, b, *]\n                right = {type: \"Identity\"};\n            } else {\n                right = this._parseProjectionRHS(bindingPower.Star);\n            }\n            return {type: \"ValueProjection\", children: [left, right]};\n          case TOK_FILTER:\n            return this.led(token.type, {type: \"Identity\"});\n          case TOK_LBRACE:\n            return this._parseMultiselectHash();\n          case TOK_FLATTEN:\n            left = {type: TOK_FLATTEN, children: [{type: \"Identity\"}]};\n            right = this._parseProjectionRHS(bindingPower.Flatten);\n            return {type: \"Projection\", children: [left, right]};\n          case TOK_LBRACKET:\n            if (this._lookahead(0) === TOK_NUMBER || this._lookahead(0) === TOK_COLON) {\n                right = this._parseIndexExpression();\n                return this._projectIfSlice({type: \"Identity\"}, right);\n            } else if (this._lookahead(0) === TOK_STAR &&\n                       this._lookahead(1) === TOK_RBRACKET) {\n                this._advance();\n                this._advance();\n                right = this._parseProjectionRHS(bindingPower.Star);\n                return {type: \"Projection\",\n                        children: [{type: \"Identity\"}, right]};\n            } else {\n                return this._parseMultiselectList();\n            }\n            break;\n          case TOK_CURRENT:\n            return {type: TOK_CURRENT};\n          case TOK_EXPREF:\n            expression = this.expression(bindingPower.Expref);\n            return {type: \"ExpressionReference\", children: [expression]};\n          case TOK_LPAREN:\n            var args = [];\n            while (this._lookahead(0) !== TOK_RPAREN) {\n              if (this._lookahead(0) === TOK_CURRENT) {\n                expression = {type: TOK_CURRENT};\n                this._advance();\n              } else {\n                expression = this.expression(0);\n              }\n              args.push(expression);\n            }\n            this._match(TOK_RPAREN);\n            return args[0];\n          default:\n            this._errorToken(token);\n        }\n      },\n\n      led: function(tokenName, left) {\n        var right;\n        switch(tokenName) {\n          case TOK_DOT:\n            var rbp = bindingPower.Dot;\n            if (this._lookahead(0) !== TOK_STAR) {\n                right = this._parseDotRHS(rbp);\n                return {type: \"Subexpression\", children: [left, right]};\n            } else {\n                // Creating a projection.\n                this._advance();\n                right = this._parseProjectionRHS(rbp);\n                return {type: \"ValueProjection\", children: [left, right]};\n            }\n            break;\n          case TOK_PIPE:\n            right = this.expression(bindingPower.Pipe);\n            return {type: TOK_PIPE, children: [left, right]};\n          case TOK_OR:\n            right = this.expression(bindingPower.Or);\n            return {type: \"OrExpression\", children: [left, right]};\n          case TOK_AND:\n            right = this.expression(bindingPower.And);\n            return {type: \"AndExpression\", children: [left, right]};\n          case TOK_LPAREN:\n            var name = left.name;\n            var args = [];\n            var expression, node;\n            while (this._lookahead(0) !== TOK_RPAREN) {\n              if (this._lookahead(0) === TOK_CURRENT) {\n                expression = {type: TOK_CURRENT};\n                this._advance();\n              } else {\n                expression = this.expression(0);\n              }\n              if (this._lookahead(0) === TOK_COMMA) {\n                this._match(TOK_COMMA);\n              }\n              args.push(expression);\n            }\n            this._match(TOK_RPAREN);\n            node = {type: \"Function\", name: name, children: args};\n            return node;\n          case TOK_FILTER:\n            var condition = this.expression(0);\n            this._match(TOK_RBRACKET);\n            if (this._lookahead(0) === TOK_FLATTEN) {\n              right = {type: \"Identity\"};\n            } else {\n              right = this._parseProjectionRHS(bindingPower.Filter);\n            }\n            return {type: \"FilterProjection\", children: [left, right, condition]};\n          case TOK_FLATTEN:\n            var leftNode = {type: TOK_FLATTEN, children: [left]};\n            var rightNode = this._parseProjectionRHS(bindingPower.Flatten);\n            return {type: \"Projection\", children: [leftNode, rightNode]};\n          case TOK_EQ:\n          case TOK_NE:\n          case TOK_GT:\n          case TOK_GTE:\n          case TOK_LT:\n          case TOK_LTE:\n            return this._parseComparator(left, tokenName);\n          case TOK_LBRACKET:\n            var token = this._lookaheadToken(0);\n            if (token.type === TOK_NUMBER || token.type === TOK_COLON) {\n                right = this._parseIndexExpression();\n                return this._projectIfSlice(left, right);\n            } else {\n                this._match(TOK_STAR);\n                this._match(TOK_RBRACKET);\n                right = this._parseProjectionRHS(bindingPower.Star);\n                return {type: \"Projection\", children: [left, right]};\n            }\n            break;\n          default:\n            this._errorToken(this._lookaheadToken(0));\n        }\n      },\n\n      _match: function(tokenType) {\n          if (this._lookahead(0) === tokenType) {\n              this._advance();\n          } else {\n              var t = this._lookaheadToken(0);\n              var error = new Error(\"Expected \" + tokenType + \", got: \" + t.type);\n              error.name = \"ParserError\";\n              throw error;\n          }\n      },\n\n      _errorToken: function(token) {\n          var error = new Error(\"Invalid token (\" +\n                                token.type + \"): \\\"\" +\n                                token.value + \"\\\"\");\n          error.name = \"ParserError\";\n          throw error;\n      },\n\n\n      _parseIndexExpression: function() {\n          if (this._lookahead(0) === TOK_COLON || this._lookahead(1) === TOK_COLON) {\n              return this._parseSliceExpression();\n          } else {\n              var node = {\n                  type: \"Index\",\n                  value: this._lookaheadToken(0).value};\n              this._advance();\n              this._match(TOK_RBRACKET);\n              return node;\n          }\n      },\n\n      _projectIfSlice: function(left, right) {\n          var indexExpr = {type: \"IndexExpression\", children: [left, right]};\n          if (right.type === \"Slice\") {\n              return {\n                  type: \"Projection\",\n                  children: [indexExpr, this._parseProjectionRHS(bindingPower.Star)]\n              };\n          } else {\n              return indexExpr;\n          }\n      },\n\n      _parseSliceExpression: function() {\n          // [start:end:step] where each part is optional, as well as the last\n          // colon.\n          var parts = [null, null, null];\n          var index = 0;\n          var currentToken = this._lookahead(0);\n          while (currentToken !== TOK_RBRACKET && index < 3) {\n              if (currentToken === TOK_COLON) {\n                  index++;\n                  this._advance();\n              } else if (currentToken === TOK_NUMBER) {\n                  parts[index] = this._lookaheadToken(0).value;\n                  this._advance();\n              } else {\n                  var t = this._lookahead(0);\n                  var error = new Error(\"Syntax error, unexpected token: \" +\n                                        t.value + \"(\" + t.type + \")\");\n                  error.name = \"Parsererror\";\n                  throw error;\n              }\n              currentToken = this._lookahead(0);\n          }\n          this._match(TOK_RBRACKET);\n          return {\n              type: \"Slice\",\n              children: parts\n          };\n      },\n\n      _parseComparator: function(left, comparator) {\n        var right = this.expression(bindingPower[comparator]);\n        return {type: \"Comparator\", name: comparator, children: [left, right]};\n      },\n\n      _parseDotRHS: function(rbp) {\n          var lookahead = this._lookahead(0);\n          var exprTokens = [TOK_UNQUOTEDIDENTIFIER, TOK_QUOTEDIDENTIFIER, TOK_STAR];\n          if (exprTokens.indexOf(lookahead) >= 0) {\n              return this.expression(rbp);\n          } else if (lookahead === TOK_LBRACKET) {\n              this._match(TOK_LBRACKET);\n              return this._parseMultiselectList();\n          } else if (lookahead === TOK_LBRACE) {\n              this._match(TOK_LBRACE);\n              return this._parseMultiselectHash();\n          }\n      },\n\n      _parseProjectionRHS: function(rbp) {\n          var right;\n          if (bindingPower[this._lookahead(0)] < 10) {\n              right = {type: \"Identity\"};\n          } else if (this._lookahead(0) === TOK_LBRACKET) {\n              right = this.expression(rbp);\n          } else if (this._lookahead(0) === TOK_FILTER) {\n              right = this.expression(rbp);\n          } else if (this._lookahead(0) === TOK_DOT) {\n              this._match(TOK_DOT);\n              right = this._parseDotRHS(rbp);\n          } else {\n              var t = this._lookaheadToken(0);\n              var error = new Error(\"Sytanx error, unexpected token: \" +\n                                    t.value + \"(\" + t.type + \")\");\n              error.name = \"ParserError\";\n              throw error;\n          }\n          return right;\n      },\n\n      _parseMultiselectList: function() {\n          var expressions = [];\n          while (this._lookahead(0) !== TOK_RBRACKET) {\n              var expression = this.expression(0);\n              expressions.push(expression);\n              if (this._lookahead(0) === TOK_COMMA) {\n                  this._match(TOK_COMMA);\n                  if (this._lookahead(0) === TOK_RBRACKET) {\n                    throw new Error(\"Unexpected token Rbracket\");\n                  }\n              }\n          }\n          this._match(TOK_RBRACKET);\n          return {type: \"MultiSelectList\", children: expressions};\n      },\n\n      _parseMultiselectHash: function() {\n        var pairs = [];\n        var identifierTypes = [TOK_UNQUOTEDIDENTIFIER, TOK_QUOTEDIDENTIFIER];\n        var keyToken, keyName, value, node;\n        for (;;) {\n          keyToken = this._lookaheadToken(0);\n          if (identifierTypes.indexOf(keyToken.type) < 0) {\n            throw new Error(\"Expecting an identifier token, got: \" +\n                            keyToken.type);\n          }\n          keyName = keyToken.value;\n          this._advance();\n          this._match(TOK_COLON);\n          value = this.expression(0);\n          node = {type: \"KeyValuePair\", name: keyName, value: value};\n          pairs.push(node);\n          if (this._lookahead(0) === TOK_COMMA) {\n            this._match(TOK_COMMA);\n          } else if (this._lookahead(0) === TOK_RBRACE) {\n            this._match(TOK_RBRACE);\n            break;\n          }\n        }\n        return {type: \"MultiSelectHash\", children: pairs};\n      }\n  };\n\n\n  function TreeInterpreter(runtime) {\n    this.runtime = runtime;\n  }\n\n  TreeInterpreter.prototype = {\n      search: function(node, value) {\n          return this.visit(node, value);\n      },\n\n      visit: function(node, value) {\n          var matched, current, result, first, second, field, left, right, collected, i;\n          switch (node.type) {\n            case \"Field\":\n              if (value === null ) {\n                  return null;\n              } else if (isObject(value)) {\n                  field = value[node.name];\n                  if (field === undefined) {\n                      return null;\n                  } else {\n                      return field;\n                  }\n              } else {\n                return null;\n              }\n              break;\n            case \"Subexpression\":\n              result = this.visit(node.children[0], value);\n              for (i = 1; i < node.children.length; i++) {\n                  result = this.visit(node.children[1], result);\n                  if (result === null) {\n                      return null;\n                  }\n              }\n              return result;\n            case \"IndexExpression\":\n              left = this.visit(node.children[0], value);\n              right = this.visit(node.children[1], left);\n              return right;\n            case \"Index\":\n              if (!isArray(value)) {\n                return null;\n              }\n              var index = node.value;\n              if (index < 0) {\n                index = value.length + index;\n              }\n              result = value[index];\n              if (result === undefined) {\n                result = null;\n              }\n              return result;\n            case \"Slice\":\n              if (!isArray(value)) {\n                return null;\n              }\n              var sliceParams = node.children.slice(0);\n              var computed = this.computeSliceParams(value.length, sliceParams);\n              var start = computed[0];\n              var stop = computed[1];\n              var step = computed[2];\n              result = [];\n              if (step > 0) {\n                  for (i = start; i < stop; i += step) {\n                      result.push(value[i]);\n                  }\n              } else {\n                  for (i = start; i > stop; i += step) {\n                      result.push(value[i]);\n                  }\n              }\n              return result;\n            case \"Projection\":\n              // Evaluate left child.\n              var base = this.visit(node.children[0], value);\n              if (!isArray(base)) {\n                return null;\n              }\n              collected = [];\n              for (i = 0; i < base.length; i++) {\n                current = this.visit(node.children[1], base[i]);\n                if (current !== null) {\n                  collected.push(current);\n                }\n              }\n              return collected;\n            case \"ValueProjection\":\n              // Evaluate left child.\n              base = this.visit(node.children[0], value);\n              if (!isObject(base)) {\n                return null;\n              }\n              collected = [];\n              var values = objValues(base);\n              for (i = 0; i < values.length; i++) {\n                current = this.visit(node.children[1], values[i]);\n                if (current !== null) {\n                  collected.push(current);\n                }\n              }\n              return collected;\n            case \"FilterProjection\":\n              base = this.visit(node.children[0], value);\n              if (!isArray(base)) {\n                return null;\n              }\n              var filtered = [];\n              var finalResults = [];\n              for (i = 0; i < base.length; i++) {\n                matched = this.visit(node.children[2], base[i]);\n                if (!isFalse(matched)) {\n                  filtered.push(base[i]);\n                }\n              }\n              for (var j = 0; j < filtered.length; j++) {\n                current = this.visit(node.children[1], filtered[j]);\n                if (current !== null) {\n                  finalResults.push(current);\n                }\n              }\n              return finalResults;\n            case \"Comparator\":\n              first = this.visit(node.children[0], value);\n              second = this.visit(node.children[1], value);\n              switch(node.name) {\n                case TOK_EQ:\n                  result = strictDeepEqual(first, second);\n                  break;\n                case TOK_NE:\n                  result = !strictDeepEqual(first, second);\n                  break;\n                case TOK_GT:\n                  result = first > second;\n                  break;\n                case TOK_GTE:\n                  result = first >= second;\n                  break;\n                case TOK_LT:\n                  result = first < second;\n                  break;\n                case TOK_LTE:\n                  result = first <= second;\n                  break;\n                default:\n                  throw new Error(\"Unknown comparator: \" + node.name);\n              }\n              return result;\n            case TOK_FLATTEN:\n              var original = this.visit(node.children[0], value);\n              if (!isArray(original)) {\n                return null;\n              }\n              var merged = [];\n              for (i = 0; i < original.length; i++) {\n                current = original[i];\n                if (isArray(current)) {\n                  merged.push.apply(merged, current);\n                } else {\n                  merged.push(current);\n                }\n              }\n              return merged;\n            case \"Identity\":\n              return value;\n            case \"MultiSelectList\":\n              if (value === null) {\n                return null;\n              }\n              collected = [];\n              for (i = 0; i < node.children.length; i++) {\n                  collected.push(this.visit(node.children[i], value));\n              }\n              return collected;\n            case \"MultiSelectHash\":\n              if (value === null) {\n                return null;\n              }\n              collected = {};\n              var child;\n              for (i = 0; i < node.children.length; i++) {\n                child = node.children[i];\n                collected[child.name] = this.visit(child.value, value);\n              }\n              return collected;\n            case \"OrExpression\":\n              matched = this.visit(node.children[0], value);\n              if (isFalse(matched)) {\n                  matched = this.visit(node.children[1], value);\n              }\n              return matched;\n            case \"AndExpression\":\n              first = this.visit(node.children[0], value);\n\n              if (isFalse(first) === true) {\n                return first;\n              }\n              return this.visit(node.children[1], value);\n            case \"NotExpression\":\n              first = this.visit(node.children[0], value);\n              return isFalse(first);\n            case \"Literal\":\n              return node.value;\n            case TOK_PIPE:\n              left = this.visit(node.children[0], value);\n              return this.visit(node.children[1], left);\n            case TOK_CURRENT:\n              return value;\n            case \"Function\":\n              var resolvedArgs = [];\n              for (i = 0; i < node.children.length; i++) {\n                  resolvedArgs.push(this.visit(node.children[i], value));\n              }\n              return this.runtime.callFunction(node.name, resolvedArgs);\n            case \"ExpressionReference\":\n              var refNode = node.children[0];\n              // Tag the node with a specific attribute so the type\n              // checker verify the type.\n              refNode.jmespathType = TOK_EXPREF;\n              return refNode;\n            default:\n              throw new Error(\"Unknown node type: \" + node.type);\n          }\n      },\n\n      computeSliceParams: function(arrayLength, sliceParams) {\n        var start = sliceParams[0];\n        var stop = sliceParams[1];\n        var step = sliceParams[2];\n        var computed = [null, null, null];\n        if (step === null) {\n          step = 1;\n        } else if (step === 0) {\n          var error = new Error(\"Invalid slice, step cannot be 0\");\n          error.name = \"RuntimeError\";\n          throw error;\n        }\n        var stepValueNegative = step < 0 ? true : false;\n\n        if (start === null) {\n            start = stepValueNegative ? arrayLength - 1 : 0;\n        } else {\n            start = this.capSliceRange(arrayLength, start, step);\n        }\n\n        if (stop === null) {\n            stop = stepValueNegative ? -1 : arrayLength;\n        } else {\n            stop = this.capSliceRange(arrayLength, stop, step);\n        }\n        computed[0] = start;\n        computed[1] = stop;\n        computed[2] = step;\n        return computed;\n      },\n\n      capSliceRange: function(arrayLength, actualValue, step) {\n          if (actualValue < 0) {\n              actualValue += arrayLength;\n              if (actualValue < 0) {\n                  actualValue = step < 0 ? -1 : 0;\n              }\n          } else if (actualValue >= arrayLength) {\n              actualValue = step < 0 ? arrayLength - 1 : arrayLength;\n          }\n          return actualValue;\n      }\n\n  };\n\n  function Runtime(interpreter) {\n    this._interpreter = interpreter;\n    this.functionTable = {\n        // name: [function, <signature>]\n        // The <signature> can be:\n        //\n        // {\n        //   args: [[type1, type2], [type1, type2]],\n        //   variadic: true|false\n        // }\n        //\n        // Each arg in the arg list is a list of valid types\n        // (if the function is overloaded and supports multiple\n        // types.  If the type is \"any\" then no type checking\n        // occurs on the argument.  Variadic is optional\n        // and if not provided is assumed to be false.\n        abs: {_func: this._functionAbs, _signature: [{types: [TYPE_NUMBER]}]},\n        avg: {_func: this._functionAvg, _signature: [{types: [TYPE_ARRAY_NUMBER]}]},\n        ceil: {_func: this._functionCeil, _signature: [{types: [TYPE_NUMBER]}]},\n        contains: {\n            _func: this._functionContains,\n            _signature: [{types: [TYPE_STRING, TYPE_ARRAY]},\n                        {types: [TYPE_ANY]}]},\n        \"ends_with\": {\n            _func: this._functionEndsWith,\n            _signature: [{types: [TYPE_STRING]}, {types: [TYPE_STRING]}]},\n        floor: {_func: this._functionFloor, _signature: [{types: [TYPE_NUMBER]}]},\n        length: {\n            _func: this._functionLength,\n            _signature: [{types: [TYPE_STRING, TYPE_ARRAY, TYPE_OBJECT]}]},\n        map: {\n            _func: this._functionMap,\n            _signature: [{types: [TYPE_EXPREF]}, {types: [TYPE_ARRAY]}]},\n        max: {\n            _func: this._functionMax,\n            _signature: [{types: [TYPE_ARRAY_NUMBER, TYPE_ARRAY_STRING]}]},\n        \"merge\": {\n            _func: this._functionMerge,\n            _signature: [{types: [TYPE_OBJECT], variadic: true}]\n        },\n        \"max_by\": {\n          _func: this._functionMaxBy,\n          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n        },\n        sum: {_func: this._functionSum, _signature: [{types: [TYPE_ARRAY_NUMBER]}]},\n        \"starts_with\": {\n            _func: this._functionStartsWith,\n            _signature: [{types: [TYPE_STRING]}, {types: [TYPE_STRING]}]},\n        min: {\n            _func: this._functionMin,\n            _signature: [{types: [TYPE_ARRAY_NUMBER, TYPE_ARRAY_STRING]}]},\n        \"min_by\": {\n          _func: this._functionMinBy,\n          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n        },\n        type: {_func: this._functionType, _signature: [{types: [TYPE_ANY]}]},\n        keys: {_func: this._functionKeys, _signature: [{types: [TYPE_OBJECT]}]},\n        values: {_func: this._functionValues, _signature: [{types: [TYPE_OBJECT]}]},\n        sort: {_func: this._functionSort, _signature: [{types: [TYPE_ARRAY_STRING, TYPE_ARRAY_NUMBER]}]},\n        \"sort_by\": {\n          _func: this._functionSortBy,\n          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n        },\n        join: {\n            _func: this._functionJoin,\n            _signature: [\n                {types: [TYPE_STRING]},\n                {types: [TYPE_ARRAY_STRING]}\n            ]\n        },\n        reverse: {\n            _func: this._functionReverse,\n            _signature: [{types: [TYPE_STRING, TYPE_ARRAY]}]},\n        \"to_array\": {_func: this._functionToArray, _signature: [{types: [TYPE_ANY]}]},\n        \"to_string\": {_func: this._functionToString, _signature: [{types: [TYPE_ANY]}]},\n        \"to_number\": {_func: this._functionToNumber, _signature: [{types: [TYPE_ANY]}]},\n        \"not_null\": {\n            _func: this._functionNotNull,\n            _signature: [{types: [TYPE_ANY], variadic: true}]\n        }\n    };\n  }\n\n  Runtime.prototype = {\n    callFunction: function(name, resolvedArgs) {\n      var functionEntry = this.functionTable[name];\n      if (functionEntry === undefined) {\n          throw new Error(\"Unknown function: \" + name + \"()\");\n      }\n      this._validateArgs(name, resolvedArgs, functionEntry._signature);\n      return functionEntry._func.call(this, resolvedArgs);\n    },\n\n    _validateArgs: function(name, args, signature) {\n        // Validating the args requires validating\n        // the correct arity and the correct type of each arg.\n        // If the last argument is declared as variadic, then we need\n        // a minimum number of args to be required.  Otherwise it has to\n        // be an exact amount.\n        var pluralized;\n        if (signature[signature.length - 1].variadic) {\n            if (args.length < signature.length) {\n                pluralized = signature.length === 1 ? \" argument\" : \" arguments\";\n                throw new Error(\"ArgumentError: \" + name + \"() \" +\n                                \"takes at least\" + signature.length + pluralized +\n                                \" but received \" + args.length);\n            }\n        } else if (args.length !== signature.length) {\n            pluralized = signature.length === 1 ? \" argument\" : \" arguments\";\n            throw new Error(\"ArgumentError: \" + name + \"() \" +\n                            \"takes \" + signature.length + pluralized +\n                            \" but received \" + args.length);\n        }\n        var currentSpec;\n        var actualType;\n        var typeMatched;\n        for (var i = 0; i < signature.length; i++) {\n            typeMatched = false;\n            currentSpec = signature[i].types;\n            actualType = this._getTypeName(args[i]);\n            for (var j = 0; j < currentSpec.length; j++) {\n                if (this._typeMatches(actualType, currentSpec[j], args[i])) {\n                    typeMatched = true;\n                    break;\n                }\n            }\n            if (!typeMatched) {\n                throw new Error(\"TypeError: \" + name + \"() \" +\n                                \"expected argument \" + (i + 1) +\n                                \" to be type \" + currentSpec +\n                                \" but received type \" + actualType +\n                                \" instead.\");\n            }\n        }\n    },\n\n    _typeMatches: function(actual, expected, argValue) {\n        if (expected === TYPE_ANY) {\n            return true;\n        }\n        if (expected === TYPE_ARRAY_STRING ||\n            expected === TYPE_ARRAY_NUMBER ||\n            expected === TYPE_ARRAY) {\n            // The expected type can either just be array,\n            // or it can require a specific subtype (array of numbers).\n            //\n            // The simplest case is if \"array\" with no subtype is specified.\n            if (expected === TYPE_ARRAY) {\n                return actual === TYPE_ARRAY;\n            } else if (actual === TYPE_ARRAY) {\n                // Otherwise we need to check subtypes.\n                // I think this has potential to be improved.\n                var subtype;\n                if (expected === TYPE_ARRAY_NUMBER) {\n                  subtype = TYPE_NUMBER;\n                } else if (expected === TYPE_ARRAY_STRING) {\n                  subtype = TYPE_STRING;\n                }\n                for (var i = 0; i < argValue.length; i++) {\n                    if (!this._typeMatches(\n                            this._getTypeName(argValue[i]), subtype,\n                                             argValue[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        } else {\n            return actual === expected;\n        }\n    },\n    _getTypeName: function(obj) {\n        switch (Object.prototype.toString.call(obj)) {\n            case \"[object String]\":\n              return TYPE_STRING;\n            case \"[object Number]\":\n              return TYPE_NUMBER;\n            case \"[object Array]\":\n              return TYPE_ARRAY;\n            case \"[object Boolean]\":\n              return TYPE_BOOLEAN;\n            case \"[object Null]\":\n              return TYPE_NULL;\n            case \"[object Object]\":\n              // Check if it's an expref.  If it has, it's been\n              // tagged with a jmespathType attr of 'Expref';\n              if (obj.jmespathType === TOK_EXPREF) {\n                return TYPE_EXPREF;\n              } else {\n                return TYPE_OBJECT;\n              }\n        }\n    },\n\n    _functionStartsWith: function(resolvedArgs) {\n        return resolvedArgs[0].lastIndexOf(resolvedArgs[1]) === 0;\n    },\n\n    _functionEndsWith: function(resolvedArgs) {\n        var searchStr = resolvedArgs[0];\n        var suffix = resolvedArgs[1];\n        return searchStr.indexOf(suffix, searchStr.length - suffix.length) !== -1;\n    },\n\n    _functionReverse: function(resolvedArgs) {\n        var typeName = this._getTypeName(resolvedArgs[0]);\n        if (typeName === TYPE_STRING) {\n          var originalStr = resolvedArgs[0];\n          var reversedStr = \"\";\n          for (var i = originalStr.length - 1; i >= 0; i--) {\n              reversedStr += originalStr[i];\n          }\n          return reversedStr;\n        } else {\n          var reversedArray = resolvedArgs[0].slice(0);\n          reversedArray.reverse();\n          return reversedArray;\n        }\n    },\n\n    _functionAbs: function(resolvedArgs) {\n      return Math.abs(resolvedArgs[0]);\n    },\n\n    _functionCeil: function(resolvedArgs) {\n        return Math.ceil(resolvedArgs[0]);\n    },\n\n    _functionAvg: function(resolvedArgs) {\n        var sum = 0;\n        var inputArray = resolvedArgs[0];\n        for (var i = 0; i < inputArray.length; i++) {\n            sum += inputArray[i];\n        }\n        return sum / inputArray.length;\n    },\n\n    _functionContains: function(resolvedArgs) {\n        return resolvedArgs[0].indexOf(resolvedArgs[1]) >= 0;\n    },\n\n    _functionFloor: function(resolvedArgs) {\n        return Math.floor(resolvedArgs[0]);\n    },\n\n    _functionLength: function(resolvedArgs) {\n       if (!isObject(resolvedArgs[0])) {\n         return resolvedArgs[0].length;\n       } else {\n         // As far as I can tell, there's no way to get the length\n         // of an object without O(n) iteration through the object.\n         return Object.keys(resolvedArgs[0]).length;\n       }\n    },\n\n    _functionMap: function(resolvedArgs) {\n      var mapped = [];\n      var interpreter = this._interpreter;\n      var exprefNode = resolvedArgs[0];\n      var elements = resolvedArgs[1];\n      for (var i = 0; i < elements.length; i++) {\n          mapped.push(interpreter.visit(exprefNode, elements[i]));\n      }\n      return mapped;\n    },\n\n    _functionMerge: function(resolvedArgs) {\n      var merged = {};\n      for (var i = 0; i < resolvedArgs.length; i++) {\n        var current = resolvedArgs[i];\n        for (var key in current) {\n          merged[key] = current[key];\n        }\n      }\n      return merged;\n    },\n\n    _functionMax: function(resolvedArgs) {\n      if (resolvedArgs[0].length > 0) {\n        var typeName = this._getTypeName(resolvedArgs[0][0]);\n        if (typeName === TYPE_NUMBER) {\n          return Math.max.apply(Math, resolvedArgs[0]);\n        } else {\n          var elements = resolvedArgs[0];\n          var maxElement = elements[0];\n          for (var i = 1; i < elements.length; i++) {\n              if (maxElement.localeCompare(elements[i]) < 0) {\n                  maxElement = elements[i];\n              }\n          }\n          return maxElement;\n        }\n      } else {\n          return null;\n      }\n    },\n\n    _functionMin: function(resolvedArgs) {\n      if (resolvedArgs[0].length > 0) {\n        var typeName = this._getTypeName(resolvedArgs[0][0]);\n        if (typeName === TYPE_NUMBER) {\n          return Math.min.apply(Math, resolvedArgs[0]);\n        } else {\n          var elements = resolvedArgs[0];\n          var minElement = elements[0];\n          for (var i = 1; i < elements.length; i++) {\n              if (elements[i].localeCompare(minElement) < 0) {\n                  minElement = elements[i];\n              }\n          }\n          return minElement;\n        }\n      } else {\n        return null;\n      }\n    },\n\n    _functionSum: function(resolvedArgs) {\n      var sum = 0;\n      var listToSum = resolvedArgs[0];\n      for (var i = 0; i < listToSum.length; i++) {\n        sum += listToSum[i];\n      }\n      return sum;\n    },\n\n    _functionType: function(resolvedArgs) {\n        switch (this._getTypeName(resolvedArgs[0])) {\n          case TYPE_NUMBER:\n            return \"number\";\n          case TYPE_STRING:\n            return \"string\";\n          case TYPE_ARRAY:\n            return \"array\";\n          case TYPE_OBJECT:\n            return \"object\";\n          case TYPE_BOOLEAN:\n            return \"boolean\";\n          case TYPE_EXPREF:\n            return \"expref\";\n          case TYPE_NULL:\n            return \"null\";\n        }\n    },\n\n    _functionKeys: function(resolvedArgs) {\n        return Object.keys(resolvedArgs[0]);\n    },\n\n    _functionValues: function(resolvedArgs) {\n        var obj = resolvedArgs[0];\n        var keys = Object.keys(obj);\n        var values = [];\n        for (var i = 0; i < keys.length; i++) {\n            values.push(obj[keys[i]]);\n        }\n        return values;\n    },\n\n    _functionJoin: function(resolvedArgs) {\n        var joinChar = resolvedArgs[0];\n        var listJoin = resolvedArgs[1];\n        return listJoin.join(joinChar);\n    },\n\n    _functionToArray: function(resolvedArgs) {\n        if (this._getTypeName(resolvedArgs[0]) === TYPE_ARRAY) {\n            return resolvedArgs[0];\n        } else {\n            return [resolvedArgs[0]];\n        }\n    },\n\n    _functionToString: function(resolvedArgs) {\n        if (this._getTypeName(resolvedArgs[0]) === TYPE_STRING) {\n            return resolvedArgs[0];\n        } else {\n            return JSON.stringify(resolvedArgs[0]);\n        }\n    },\n\n    _functionToNumber: function(resolvedArgs) {\n        var typeName = this._getTypeName(resolvedArgs[0]);\n        var convertedValue;\n        if (typeName === TYPE_NUMBER) {\n            return resolvedArgs[0];\n        } else if (typeName === TYPE_STRING) {\n            convertedValue = +resolvedArgs[0];\n            if (!isNaN(convertedValue)) {\n                return convertedValue;\n            }\n        }\n        return null;\n    },\n\n    _functionNotNull: function(resolvedArgs) {\n        for (var i = 0; i < resolvedArgs.length; i++) {\n            if (this._getTypeName(resolvedArgs[i]) !== TYPE_NULL) {\n                return resolvedArgs[i];\n            }\n        }\n        return null;\n    },\n\n    _functionSort: function(resolvedArgs) {\n        var sortedArray = resolvedArgs[0].slice(0);\n        sortedArray.sort();\n        return sortedArray;\n    },\n\n    _functionSortBy: function(resolvedArgs) {\n        var sortedArray = resolvedArgs[0].slice(0);\n        if (sortedArray.length === 0) {\n            return sortedArray;\n        }\n        var interpreter = this._interpreter;\n        var exprefNode = resolvedArgs[1];\n        var requiredType = this._getTypeName(\n            interpreter.visit(exprefNode, sortedArray[0]));\n        if ([TYPE_NUMBER, TYPE_STRING].indexOf(requiredType) < 0) {\n            throw new Error(\"TypeError\");\n        }\n        var that = this;\n        // In order to get a stable sort out of an unstable\n        // sort algorithm, we decorate/sort/undecorate (DSU)\n        // by creating a new list of [index, element] pairs.\n        // In the cmp function, if the evaluated elements are\n        // equal, then the index will be used as the tiebreaker.\n        // After the decorated list has been sorted, it will be\n        // undecorated to extract the original elements.\n        var decorated = [];\n        for (var i = 0; i < sortedArray.length; i++) {\n          decorated.push([i, sortedArray[i]]);\n        }\n        decorated.sort(function(a, b) {\n          var exprA = interpreter.visit(exprefNode, a[1]);\n          var exprB = interpreter.visit(exprefNode, b[1]);\n          if (that._getTypeName(exprA) !== requiredType) {\n              throw new Error(\n                  \"TypeError: expected \" + requiredType + \", received \" +\n                  that._getTypeName(exprA));\n          } else if (that._getTypeName(exprB) !== requiredType) {\n              throw new Error(\n                  \"TypeError: expected \" + requiredType + \", received \" +\n                  that._getTypeName(exprB));\n          }\n          if (exprA > exprB) {\n            return 1;\n          } else if (exprA < exprB) {\n            return -1;\n          } else {\n            // If they're equal compare the items by their\n            // order to maintain relative order of equal keys\n            // (i.e. to get a stable sort).\n            return a[0] - b[0];\n          }\n        });\n        // Undecorate: extract out the original list elements.\n        for (var j = 0; j < decorated.length; j++) {\n          sortedArray[j] = decorated[j][1];\n        }\n        return sortedArray;\n    },\n\n    _functionMaxBy: function(resolvedArgs) {\n      var exprefNode = resolvedArgs[1];\n      var resolvedArray = resolvedArgs[0];\n      var keyFunction = this.createKeyFunction(exprefNode, [TYPE_NUMBER, TYPE_STRING]);\n      var maxNumber = -Infinity;\n      var maxRecord;\n      var current;\n      for (var i = 0; i < resolvedArray.length; i++) {\n        current = keyFunction(resolvedArray[i]);\n        if (current > maxNumber) {\n          maxNumber = current;\n          maxRecord = resolvedArray[i];\n        }\n      }\n      return maxRecord;\n    },\n\n    _functionMinBy: function(resolvedArgs) {\n      var exprefNode = resolvedArgs[1];\n      var resolvedArray = resolvedArgs[0];\n      var keyFunction = this.createKeyFunction(exprefNode, [TYPE_NUMBER, TYPE_STRING]);\n      var minNumber = Infinity;\n      var minRecord;\n      var current;\n      for (var i = 0; i < resolvedArray.length; i++) {\n        current = keyFunction(resolvedArray[i]);\n        if (current < minNumber) {\n          minNumber = current;\n          minRecord = resolvedArray[i];\n        }\n      }\n      return minRecord;\n    },\n\n    createKeyFunction: function(exprefNode, allowedTypes) {\n      var that = this;\n      var interpreter = this._interpreter;\n      var keyFunc = function(x) {\n        var current = interpreter.visit(exprefNode, x);\n        if (allowedTypes.indexOf(that._getTypeName(current)) < 0) {\n          var msg = \"TypeError: expected one of \" + allowedTypes +\n                    \", received \" + that._getTypeName(current);\n          throw new Error(msg);\n        }\n        return current;\n      };\n      return keyFunc;\n    }\n\n  };\n\n  function compile(stream) {\n    var parser = new Parser();\n    var ast = parser.parse(stream);\n    return ast;\n  }\n\n  function tokenize(stream) {\n      var lexer = new Lexer();\n      return lexer.tokenize(stream);\n  }\n\n  function search(data, expression) {\n      var parser = new Parser();\n      // This needs to be improved.  Both the interpreter and runtime depend on\n      // each other.  The runtime needs the interpreter to support exprefs.\n      // There's likely a clean way to avoid the cyclic dependency.\n      var runtime = new Runtime();\n      var interpreter = new TreeInterpreter(runtime);\n      runtime._interpreter = interpreter;\n      var node = parser.parse(expression);\n      return interpreter.search(node, data);\n  }\n\n  exports.tokenize = tokenize;\n  exports.compile = compile;\n  exports.search = search;\n  exports.strictDeepEqual = strictDeepEqual;\n})(typeof exports === \"undefined\" ? this.jmespath = {} : exports);\n",";(function (sax) { // wrapper for non-node envs\n  sax.parser = function (strict, opt) { return new SAXParser(strict, opt) }\n  sax.SAXParser = SAXParser\n  sax.SAXStream = SAXStream\n  sax.createStream = createStream\n\n  // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n  // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n  // since that's the earliest that a buffer overrun could occur.  This way, checks are\n  // as rare as required, but as often as necessary to ensure never crossing this bound.\n  // Furthermore, buffers are only tested at most once per write(), so passing a very\n  // large string into write() might have undesirable effects, but this is manageable by\n  // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n  // edge case, result in creating at most one complete copy of the string passed in.\n  // Set to Infinity to have unlimited buffers.\n  sax.MAX_BUFFER_LENGTH = 64 * 1024\n\n  var buffers = [\n    'comment', 'sgmlDecl', 'textNode', 'tagName', 'doctype',\n    'procInstName', 'procInstBody', 'entity', 'attribName',\n    'attribValue', 'cdata', 'script'\n  ]\n\n  sax.EVENTS = [\n    'text',\n    'processinginstruction',\n    'sgmldeclaration',\n    'doctype',\n    'comment',\n    'opentagstart',\n    'attribute',\n    'opentag',\n    'closetag',\n    'opencdata',\n    'cdata',\n    'closecdata',\n    'error',\n    'end',\n    'ready',\n    'script',\n    'opennamespace',\n    'closenamespace'\n  ]\n\n  function SAXParser (strict, opt) {\n    if (!(this instanceof SAXParser)) {\n      return new SAXParser(strict, opt)\n    }\n\n    var parser = this\n    clearBuffers(parser)\n    parser.q = parser.c = ''\n    parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH\n    parser.opt = opt || {}\n    parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags\n    parser.looseCase = parser.opt.lowercase ? 'toLowerCase' : 'toUpperCase'\n    parser.tags = []\n    parser.closed = parser.closedRoot = parser.sawRoot = false\n    parser.tag = parser.error = null\n    parser.strict = !!strict\n    parser.noscript = !!(strict || parser.opt.noscript)\n    parser.state = S.BEGIN\n    parser.strictEntities = parser.opt.strictEntities\n    parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES)\n    parser.attribList = []\n\n    // namespaces form a prototype chain.\n    // it always points at the current tag,\n    // which protos to its parent tag.\n    if (parser.opt.xmlns) {\n      parser.ns = Object.create(rootNS)\n    }\n\n    // mostly just for error reporting\n    parser.trackPosition = parser.opt.position !== false\n    if (parser.trackPosition) {\n      parser.position = parser.line = parser.column = 0\n    }\n    emit(parser, 'onready')\n  }\n\n  if (!Object.create) {\n    Object.create = function (o) {\n      function F () {}\n      F.prototype = o\n      var newf = new F()\n      return newf\n    }\n  }\n\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      var a = []\n      for (var i in o) if (o.hasOwnProperty(i)) a.push(i)\n      return a\n    }\n  }\n\n  function checkBufferLength (parser) {\n    var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10)\n    var maxActual = 0\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      var len = parser[buffers[i]].length\n      if (len > maxAllowed) {\n        // Text/cdata nodes can get big, and since they're buffered,\n        // we can get here under normal conditions.\n        // Avoid issues by emitting the text node now,\n        // so at least it won't get any bigger.\n        switch (buffers[i]) {\n          case 'textNode':\n            closeText(parser)\n            break\n\n          case 'cdata':\n            emitNode(parser, 'oncdata', parser.cdata)\n            parser.cdata = ''\n            break\n\n          case 'script':\n            emitNode(parser, 'onscript', parser.script)\n            parser.script = ''\n            break\n\n          default:\n            error(parser, 'Max buffer length exceeded: ' + buffers[i])\n        }\n      }\n      maxActual = Math.max(maxActual, len)\n    }\n    // schedule the next check for the earliest possible buffer overrun.\n    var m = sax.MAX_BUFFER_LENGTH - maxActual\n    parser.bufferCheckPosition = m + parser.position\n  }\n\n  function clearBuffers (parser) {\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      parser[buffers[i]] = ''\n    }\n  }\n\n  function flushBuffers (parser) {\n    closeText(parser)\n    if (parser.cdata !== '') {\n      emitNode(parser, 'oncdata', parser.cdata)\n      parser.cdata = ''\n    }\n    if (parser.script !== '') {\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n  }\n\n  SAXParser.prototype = {\n    end: function () { end(this) },\n    write: write,\n    resume: function () { this.error = null; return this },\n    close: function () { return this.write(null) },\n    flush: function () { flushBuffers(this) }\n  }\n\n  var Stream\n  try {\n    Stream = require('stream').Stream\n  } catch (ex) {\n    Stream = function () {}\n  }\n\n  var streamWraps = sax.EVENTS.filter(function (ev) {\n    return ev !== 'error' && ev !== 'end'\n  })\n\n  function createStream (strict, opt) {\n    return new SAXStream(strict, opt)\n  }\n\n  function SAXStream (strict, opt) {\n    if (!(this instanceof SAXStream)) {\n      return new SAXStream(strict, opt)\n    }\n\n    Stream.apply(this)\n\n    this._parser = new SAXParser(strict, opt)\n    this.writable = true\n    this.readable = true\n\n    var me = this\n\n    this._parser.onend = function () {\n      me.emit('end')\n    }\n\n    this._parser.onerror = function (er) {\n      me.emit('error', er)\n\n      // if didn't throw, then means error was handled.\n      // go ahead and clear error, so we can write again.\n      me._parser.error = null\n    }\n\n    this._decoder = null\n\n    streamWraps.forEach(function (ev) {\n      Object.defineProperty(me, 'on' + ev, {\n        get: function () {\n          return me._parser['on' + ev]\n        },\n        set: function (h) {\n          if (!h) {\n            me.removeAllListeners(ev)\n            me._parser['on' + ev] = h\n            return h\n          }\n          me.on(ev, h)\n        },\n        enumerable: true,\n        configurable: false\n      })\n    })\n  }\n\n  SAXStream.prototype = Object.create(Stream.prototype, {\n    constructor: {\n      value: SAXStream\n    }\n  })\n\n  SAXStream.prototype.write = function (data) {\n    if (typeof Buffer === 'function' &&\n      typeof Buffer.isBuffer === 'function' &&\n      Buffer.isBuffer(data)) {\n      if (!this._decoder) {\n        var SD = require('string_decoder').StringDecoder\n        this._decoder = new SD('utf8')\n      }\n      data = this._decoder.write(data)\n    }\n\n    this._parser.write(data.toString())\n    this.emit('data', data)\n    return true\n  }\n\n  SAXStream.prototype.end = function (chunk) {\n    if (chunk && chunk.length) {\n      this.write(chunk)\n    }\n    this._parser.end()\n    return true\n  }\n\n  SAXStream.prototype.on = function (ev, handler) {\n    var me = this\n    if (!me._parser['on' + ev] && streamWraps.indexOf(ev) !== -1) {\n      me._parser['on' + ev] = function () {\n        var args = arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments)\n        args.splice(0, 0, ev)\n        me.emit.apply(me, args)\n      }\n    }\n\n    return Stream.prototype.on.call(me, ev, handler)\n  }\n\n  // character classes and tokens\n  var whitespace = '\\r\\n\\t '\n\n  // this really needs to be replaced with character classes.\n  // XML allows all manner of ridiculous numbers and digits.\n  var number = '0124356789'\n  var letter = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'\n\n  // (Letter | \"_\" | \":\")\n  var quote = '\\'\"'\n  var attribEnd = whitespace + '>'\n  var CDATA = '[CDATA['\n  var DOCTYPE = 'DOCTYPE'\n  var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace'\n  var XMLNS_NAMESPACE = 'http://www.w3.org/2000/xmlns/'\n  var rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE }\n\n  // turn all the string character sets into character class objects.\n  whitespace = charClass(whitespace)\n  number = charClass(number)\n  letter = charClass(letter)\n\n  // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n  // This implementation works on strings, a single character at a time\n  // as such, it cannot ever support astral-plane characters (10000-EFFFF)\n  // without a significant breaking change to either this  parser, or the\n  // JavaScript language.  Implementation of an emoji-capable xml parser\n  // is left as an exercise for the reader.\n  var nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n\n  var nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040\\.\\d-]/\n\n  var entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n  var entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040\\.\\d-]/\n\n  quote = charClass(quote)\n  attribEnd = charClass(attribEnd)\n\n  function charClass (str) {\n    return str.split('').reduce(function (s, c) {\n      s[c] = true\n      return s\n    }, {})\n  }\n\n  function isRegExp (c) {\n    return Object.prototype.toString.call(c) === '[object RegExp]'\n  }\n\n  function is (charclass, c) {\n    return isRegExp(charclass) ? !!c.match(charclass) : charclass[c]\n  }\n\n  function not (charclass, c) {\n    return !is(charclass, c)\n  }\n\n  var S = 0\n  sax.STATE = {\n    BEGIN: S++, // leading byte order mark or whitespace\n    BEGIN_WHITESPACE: S++, // leading whitespace\n    TEXT: S++, // general stuff\n    TEXT_ENTITY: S++, // &amp and such.\n    OPEN_WAKA: S++, // <\n    SGML_DECL: S++, // <!BLARG\n    SGML_DECL_QUOTED: S++, // <!BLARG foo \"bar\n    DOCTYPE: S++, // <!DOCTYPE\n    DOCTYPE_QUOTED: S++, // <!DOCTYPE \"//blah\n    DOCTYPE_DTD: S++, // <!DOCTYPE \"//blah\" [ ...\n    DOCTYPE_DTD_QUOTED: S++, // <!DOCTYPE \"//blah\" [ \"foo\n    COMMENT_STARTING: S++, // <!-\n    COMMENT: S++, // <!--\n    COMMENT_ENDING: S++, // <!-- blah -\n    COMMENT_ENDED: S++, // <!-- blah --\n    CDATA: S++, // <![CDATA[ something\n    CDATA_ENDING: S++, // ]\n    CDATA_ENDING_2: S++, // ]]\n    PROC_INST: S++, // <?hi\n    PROC_INST_BODY: S++, // <?hi there\n    PROC_INST_ENDING: S++, // <?hi \"there\" ?\n    OPEN_TAG: S++, // <strong\n    OPEN_TAG_SLASH: S++, // <strong /\n    ATTRIB: S++, // <a\n    ATTRIB_NAME: S++, // <a foo\n    ATTRIB_NAME_SAW_WHITE: S++, // <a foo _\n    ATTRIB_VALUE: S++, // <a foo=\n    ATTRIB_VALUE_QUOTED: S++, // <a foo=\"bar\n    ATTRIB_VALUE_CLOSED: S++, // <a foo=\"bar\"\n    ATTRIB_VALUE_UNQUOTED: S++, // <a foo=bar\n    ATTRIB_VALUE_ENTITY_Q: S++, // <foo bar=\"&quot;\"\n    ATTRIB_VALUE_ENTITY_U: S++, // <foo bar=&quot\n    CLOSE_TAG: S++, // </a\n    CLOSE_TAG_SAW_WHITE: S++, // </a   >\n    SCRIPT: S++, // <script> ...\n    SCRIPT_ENDING: S++ // <script> ... <\n  }\n\n  sax.XML_ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\"\n  }\n\n  sax.ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\",\n    'AElig': 198,\n    'Aacute': 193,\n    'Acirc': 194,\n    'Agrave': 192,\n    'Aring': 197,\n    'Atilde': 195,\n    'Auml': 196,\n    'Ccedil': 199,\n    'ETH': 208,\n    'Eacute': 201,\n    'Ecirc': 202,\n    'Egrave': 200,\n    'Euml': 203,\n    'Iacute': 205,\n    'Icirc': 206,\n    'Igrave': 204,\n    'Iuml': 207,\n    'Ntilde': 209,\n    'Oacute': 211,\n    'Ocirc': 212,\n    'Ograve': 210,\n    'Oslash': 216,\n    'Otilde': 213,\n    'Ouml': 214,\n    'THORN': 222,\n    'Uacute': 218,\n    'Ucirc': 219,\n    'Ugrave': 217,\n    'Uuml': 220,\n    'Yacute': 221,\n    'aacute': 225,\n    'acirc': 226,\n    'aelig': 230,\n    'agrave': 224,\n    'aring': 229,\n    'atilde': 227,\n    'auml': 228,\n    'ccedil': 231,\n    'eacute': 233,\n    'ecirc': 234,\n    'egrave': 232,\n    'eth': 240,\n    'euml': 235,\n    'iacute': 237,\n    'icirc': 238,\n    'igrave': 236,\n    'iuml': 239,\n    'ntilde': 241,\n    'oacute': 243,\n    'ocirc': 244,\n    'ograve': 242,\n    'oslash': 248,\n    'otilde': 245,\n    'ouml': 246,\n    'szlig': 223,\n    'thorn': 254,\n    'uacute': 250,\n    'ucirc': 251,\n    'ugrave': 249,\n    'uuml': 252,\n    'yacute': 253,\n    'yuml': 255,\n    'copy': 169,\n    'reg': 174,\n    'nbsp': 160,\n    'iexcl': 161,\n    'cent': 162,\n    'pound': 163,\n    'curren': 164,\n    'yen': 165,\n    'brvbar': 166,\n    'sect': 167,\n    'uml': 168,\n    'ordf': 170,\n    'laquo': 171,\n    'not': 172,\n    'shy': 173,\n    'macr': 175,\n    'deg': 176,\n    'plusmn': 177,\n    'sup1': 185,\n    'sup2': 178,\n    'sup3': 179,\n    'acute': 180,\n    'micro': 181,\n    'para': 182,\n    'middot': 183,\n    'cedil': 184,\n    'ordm': 186,\n    'raquo': 187,\n    'frac14': 188,\n    'frac12': 189,\n    'frac34': 190,\n    'iquest': 191,\n    'times': 215,\n    'divide': 247,\n    'OElig': 338,\n    'oelig': 339,\n    'Scaron': 352,\n    'scaron': 353,\n    'Yuml': 376,\n    'fnof': 402,\n    'circ': 710,\n    'tilde': 732,\n    'Alpha': 913,\n    'Beta': 914,\n    'Gamma': 915,\n    'Delta': 916,\n    'Epsilon': 917,\n    'Zeta': 918,\n    'Eta': 919,\n    'Theta': 920,\n    'Iota': 921,\n    'Kappa': 922,\n    'Lambda': 923,\n    'Mu': 924,\n    'Nu': 925,\n    'Xi': 926,\n    'Omicron': 927,\n    'Pi': 928,\n    'Rho': 929,\n    'Sigma': 931,\n    'Tau': 932,\n    'Upsilon': 933,\n    'Phi': 934,\n    'Chi': 935,\n    'Psi': 936,\n    'Omega': 937,\n    'alpha': 945,\n    'beta': 946,\n    'gamma': 947,\n    'delta': 948,\n    'epsilon': 949,\n    'zeta': 950,\n    'eta': 951,\n    'theta': 952,\n    'iota': 953,\n    'kappa': 954,\n    'lambda': 955,\n    'mu': 956,\n    'nu': 957,\n    'xi': 958,\n    'omicron': 959,\n    'pi': 960,\n    'rho': 961,\n    'sigmaf': 962,\n    'sigma': 963,\n    'tau': 964,\n    'upsilon': 965,\n    'phi': 966,\n    'chi': 967,\n    'psi': 968,\n    'omega': 969,\n    'thetasym': 977,\n    'upsih': 978,\n    'piv': 982,\n    'ensp': 8194,\n    'emsp': 8195,\n    'thinsp': 8201,\n    'zwnj': 8204,\n    'zwj': 8205,\n    'lrm': 8206,\n    'rlm': 8207,\n    'ndash': 8211,\n    'mdash': 8212,\n    'lsquo': 8216,\n    'rsquo': 8217,\n    'sbquo': 8218,\n    'ldquo': 8220,\n    'rdquo': 8221,\n    'bdquo': 8222,\n    'dagger': 8224,\n    'Dagger': 8225,\n    'bull': 8226,\n    'hellip': 8230,\n    'permil': 8240,\n    'prime': 8242,\n    'Prime': 8243,\n    'lsaquo': 8249,\n    'rsaquo': 8250,\n    'oline': 8254,\n    'frasl': 8260,\n    'euro': 8364,\n    'image': 8465,\n    'weierp': 8472,\n    'real': 8476,\n    'trade': 8482,\n    'alefsym': 8501,\n    'larr': 8592,\n    'uarr': 8593,\n    'rarr': 8594,\n    'darr': 8595,\n    'harr': 8596,\n    'crarr': 8629,\n    'lArr': 8656,\n    'uArr': 8657,\n    'rArr': 8658,\n    'dArr': 8659,\n    'hArr': 8660,\n    'forall': 8704,\n    'part': 8706,\n    'exist': 8707,\n    'empty': 8709,\n    'nabla': 8711,\n    'isin': 8712,\n    'notin': 8713,\n    'ni': 8715,\n    'prod': 8719,\n    'sum': 8721,\n    'minus': 8722,\n    'lowast': 8727,\n    'radic': 8730,\n    'prop': 8733,\n    'infin': 8734,\n    'ang': 8736,\n    'and': 8743,\n    'or': 8744,\n    'cap': 8745,\n    'cup': 8746,\n    'int': 8747,\n    'there4': 8756,\n    'sim': 8764,\n    'cong': 8773,\n    'asymp': 8776,\n    'ne': 8800,\n    'equiv': 8801,\n    'le': 8804,\n    'ge': 8805,\n    'sub': 8834,\n    'sup': 8835,\n    'nsub': 8836,\n    'sube': 8838,\n    'supe': 8839,\n    'oplus': 8853,\n    'otimes': 8855,\n    'perp': 8869,\n    'sdot': 8901,\n    'lceil': 8968,\n    'rceil': 8969,\n    'lfloor': 8970,\n    'rfloor': 8971,\n    'lang': 9001,\n    'rang': 9002,\n    'loz': 9674,\n    'spades': 9824,\n    'clubs': 9827,\n    'hearts': 9829,\n    'diams': 9830\n  }\n\n  Object.keys(sax.ENTITIES).forEach(function (key) {\n    var e = sax.ENTITIES[key]\n    var s = typeof e === 'number' ? String.fromCharCode(e) : e\n    sax.ENTITIES[key] = s\n  })\n\n  for (var s in sax.STATE) {\n    sax.STATE[sax.STATE[s]] = s\n  }\n\n  // shorthand\n  S = sax.STATE\n\n  function emit (parser, event, data) {\n    parser[event] && parser[event](data)\n  }\n\n  function emitNode (parser, nodeType, data) {\n    if (parser.textNode) closeText(parser)\n    emit(parser, nodeType, data)\n  }\n\n  function closeText (parser) {\n    parser.textNode = textopts(parser.opt, parser.textNode)\n    if (parser.textNode) emit(parser, 'ontext', parser.textNode)\n    parser.textNode = ''\n  }\n\n  function textopts (opt, text) {\n    if (opt.trim) text = text.trim()\n    if (opt.normalize) text = text.replace(/\\s+/g, ' ')\n    return text\n  }\n\n  function error (parser, er) {\n    closeText(parser)\n    if (parser.trackPosition) {\n      er += '\\nLine: ' + parser.line +\n        '\\nColumn: ' + parser.column +\n        '\\nChar: ' + parser.c\n    }\n    er = new Error(er)\n    parser.error = er\n    emit(parser, 'onerror', er)\n    return parser\n  }\n\n  function end (parser) {\n    if (parser.sawRoot && !parser.closedRoot) strictFail(parser, 'Unclosed root tag')\n    if ((parser.state !== S.BEGIN) &&\n      (parser.state !== S.BEGIN_WHITESPACE) &&\n      (parser.state !== S.TEXT)) {\n      error(parser, 'Unexpected end')\n    }\n    closeText(parser)\n    parser.c = ''\n    parser.closed = true\n    emit(parser, 'onend')\n    SAXParser.call(parser, parser.strict, parser.opt)\n    return parser\n  }\n\n  function strictFail (parser, message) {\n    if (typeof parser !== 'object' || !(parser instanceof SAXParser)) {\n      throw new Error('bad call to strictFail')\n    }\n    if (parser.strict) {\n      error(parser, message)\n    }\n  }\n\n  function newTag (parser) {\n    if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]()\n    var parent = parser.tags[parser.tags.length - 1] || parser\n    var tag = parser.tag = { name: parser.tagName, attributes: {} }\n\n    // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n    if (parser.opt.xmlns) {\n      tag.ns = parent.ns\n    }\n    parser.attribList.length = 0\n    emitNode(parser, 'onopentagstart', tag)\n  }\n\n  function qname (name, attribute) {\n    var i = name.indexOf(':')\n    var qualName = i < 0 ? [ '', name ] : name.split(':')\n    var prefix = qualName[0]\n    var local = qualName[1]\n\n    // <x \"xmlns\"=\"http://foo\">\n    if (attribute && name === 'xmlns') {\n      prefix = 'xmlns'\n      local = ''\n    }\n\n    return { prefix: prefix, local: local }\n  }\n\n  function attrib (parser) {\n    if (!parser.strict) {\n      parser.attribName = parser.attribName[parser.looseCase]()\n    }\n\n    if (parser.attribList.indexOf(parser.attribName) !== -1 ||\n      parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n      parser.attribName = parser.attribValue = ''\n      return\n    }\n\n    if (parser.opt.xmlns) {\n      var qn = qname(parser.attribName, true)\n      var prefix = qn.prefix\n      var local = qn.local\n\n      if (prefix === 'xmlns') {\n        // namespace binding attribute. push the binding into scope\n        if (local === 'xml' && parser.attribValue !== XML_NAMESPACE) {\n          strictFail(parser,\n            'xml: prefix must be bound to ' + XML_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else if (local === 'xmlns' && parser.attribValue !== XMLNS_NAMESPACE) {\n          strictFail(parser,\n            'xmlns: prefix must be bound to ' + XMLNS_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else {\n          var tag = parser.tag\n          var parent = parser.tags[parser.tags.length - 1] || parser\n          if (tag.ns === parent.ns) {\n            tag.ns = Object.create(parent.ns)\n          }\n          tag.ns[local] = parser.attribValue\n        }\n      }\n\n      // defer onattribute events until all attributes have been seen\n      // so any new bindings can take effect. preserve attribute order\n      // so deferred events can be emitted in document order\n      parser.attribList.push([parser.attribName, parser.attribValue])\n    } else {\n      // in non-xmlns mode, we can emit the event right away\n      parser.tag.attributes[parser.attribName] = parser.attribValue\n      emitNode(parser, 'onattribute', {\n        name: parser.attribName,\n        value: parser.attribValue\n      })\n    }\n\n    parser.attribName = parser.attribValue = ''\n  }\n\n  function openTag (parser, selfClosing) {\n    if (parser.opt.xmlns) {\n      // emit namespace binding events\n      var tag = parser.tag\n\n      // add namespace info to tag\n      var qn = qname(parser.tagName)\n      tag.prefix = qn.prefix\n      tag.local = qn.local\n      tag.uri = tag.ns[qn.prefix] || ''\n\n      if (tag.prefix && !tag.uri) {\n        strictFail(parser, 'Unbound namespace prefix: ' +\n          JSON.stringify(parser.tagName))\n        tag.uri = qn.prefix\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (tag.ns && parent.ns !== tag.ns) {\n        Object.keys(tag.ns).forEach(function (p) {\n          emitNode(parser, 'onopennamespace', {\n            prefix: p,\n            uri: tag.ns[p]\n          })\n        })\n      }\n\n      // handle deferred onattribute events\n      // Note: do not apply default ns to attributes:\n      //   http://www.w3.org/TR/REC-xml-names/#defaulting\n      for (var i = 0, l = parser.attribList.length; i < l; i++) {\n        var nv = parser.attribList[i]\n        var name = nv[0]\n        var value = nv[1]\n        var qualName = qname(name, true)\n        var prefix = qualName.prefix\n        var local = qualName.local\n        var uri = prefix === '' ? '' : (tag.ns[prefix] || '')\n        var a = {\n          name: name,\n          value: value,\n          prefix: prefix,\n          local: local,\n          uri: uri\n        }\n\n        // if there's any attributes with an undefined namespace,\n        // then fail on them now.\n        if (prefix && prefix !== 'xmlns' && !uri) {\n          strictFail(parser, 'Unbound namespace prefix: ' +\n            JSON.stringify(prefix))\n          a.uri = prefix\n        }\n        parser.tag.attributes[name] = a\n        emitNode(parser, 'onattribute', a)\n      }\n      parser.attribList.length = 0\n    }\n\n    parser.tag.isSelfClosing = !!selfClosing\n\n    // process the tag\n    parser.sawRoot = true\n    parser.tags.push(parser.tag)\n    emitNode(parser, 'onopentag', parser.tag)\n    if (!selfClosing) {\n      // special case for <script> in non-strict mode.\n      if (!parser.noscript && parser.tagName.toLowerCase() === 'script') {\n        parser.state = S.SCRIPT\n      } else {\n        parser.state = S.TEXT\n      }\n      parser.tag = null\n      parser.tagName = ''\n    }\n    parser.attribName = parser.attribValue = ''\n    parser.attribList.length = 0\n  }\n\n  function closeTag (parser) {\n    if (!parser.tagName) {\n      strictFail(parser, 'Weird empty close tag.')\n      parser.textNode += '</>'\n      parser.state = S.TEXT\n      return\n    }\n\n    if (parser.script) {\n      if (parser.tagName !== 'script') {\n        parser.script += '</' + parser.tagName + '>'\n        parser.tagName = ''\n        parser.state = S.SCRIPT\n        return\n      }\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n\n    // first make sure that the closing tag actually exists.\n    // <a><b></c></b></a> will close everything, otherwise.\n    var t = parser.tags.length\n    var tagName = parser.tagName\n    if (!parser.strict) {\n      tagName = tagName[parser.looseCase]()\n    }\n    var closeTo = tagName\n    while (t--) {\n      var close = parser.tags[t]\n      if (close.name !== closeTo) {\n        // fail the first time in strict mode\n        strictFail(parser, 'Unexpected close tag')\n      } else {\n        break\n      }\n    }\n\n    // didn't find it.  we already failed for strict, so just abort.\n    if (t < 0) {\n      strictFail(parser, 'Unmatched closing tag: ' + parser.tagName)\n      parser.textNode += '</' + parser.tagName + '>'\n      parser.state = S.TEXT\n      return\n    }\n    parser.tagName = tagName\n    var s = parser.tags.length\n    while (s-- > t) {\n      var tag = parser.tag = parser.tags.pop()\n      parser.tagName = parser.tag.name\n      emitNode(parser, 'onclosetag', parser.tagName)\n\n      var x = {}\n      for (var i in tag.ns) {\n        x[i] = tag.ns[i]\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (parser.opt.xmlns && tag.ns !== parent.ns) {\n        // remove namespace bindings introduced by tag\n        Object.keys(tag.ns).forEach(function (p) {\n          var n = tag.ns[p]\n          emitNode(parser, 'onclosenamespace', { prefix: p, uri: n })\n        })\n      }\n    }\n    if (t === 0) parser.closedRoot = true\n    parser.tagName = parser.attribValue = parser.attribName = ''\n    parser.attribList.length = 0\n    parser.state = S.TEXT\n  }\n\n  function parseEntity (parser) {\n    var entity = parser.entity\n    var entityLC = entity.toLowerCase()\n    var num\n    var numStr = ''\n\n    if (parser.ENTITIES[entity]) {\n      return parser.ENTITIES[entity]\n    }\n    if (parser.ENTITIES[entityLC]) {\n      return parser.ENTITIES[entityLC]\n    }\n    entity = entityLC\n    if (entity.charAt(0) === '#') {\n      if (entity.charAt(1) === 'x') {\n        entity = entity.slice(2)\n        num = parseInt(entity, 16)\n        numStr = num.toString(16)\n      } else {\n        entity = entity.slice(1)\n        num = parseInt(entity, 10)\n        numStr = num.toString(10)\n      }\n    }\n    entity = entity.replace(/^0+/, '')\n    if (numStr.toLowerCase() !== entity) {\n      strictFail(parser, 'Invalid character entity')\n      return '&' + parser.entity + ';'\n    }\n\n    return String.fromCodePoint(num)\n  }\n\n  function beginWhiteSpace (parser, c) {\n    if (c === '<') {\n      parser.state = S.OPEN_WAKA\n      parser.startTagPosition = parser.position\n    } else if (not(whitespace, c)) {\n      // have to process this as a text node.\n      // weird, but happens.\n      strictFail(parser, 'Non-whitespace before first tag.')\n      parser.textNode = c\n      parser.state = S.TEXT\n    }\n  }\n\n  function charAt (chunk, i) {\n    var result = ''\n    if (i < chunk.length) {\n      result = chunk.charAt(i)\n    }\n    return result\n  }\n\n  function write (chunk) {\n    var parser = this\n    if (this.error) {\n      throw this.error\n    }\n    if (parser.closed) {\n      return error(parser,\n        'Cannot write after close. Assign an onready handler.')\n    }\n    if (chunk === null) {\n      return end(parser)\n    }\n    if (typeof chunk === 'object') {\n      chunk = chunk.toString()\n    }\n    var i = 0\n    var c = ''\n    while (true) {\n      c = charAt(chunk, i++)\n      parser.c = c\n      if (!c) {\n        break\n      }\n      if (parser.trackPosition) {\n        parser.position++\n        if (c === '\\n') {\n          parser.line++\n          parser.column = 0\n        } else {\n          parser.column++\n        }\n      }\n      switch (parser.state) {\n        case S.BEGIN:\n          parser.state = S.BEGIN_WHITESPACE\n          if (c === '\\uFEFF') {\n            continue\n          }\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.BEGIN_WHITESPACE:\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.TEXT:\n          if (parser.sawRoot && !parser.closedRoot) {\n            var starti = i - 1\n            while (c && c !== '<' && c !== '&') {\n              c = charAt(chunk, i++)\n              if (c && parser.trackPosition) {\n                parser.position++\n                if (c === '\\n') {\n                  parser.line++\n                  parser.column = 0\n                } else {\n                  parser.column++\n                }\n              }\n            }\n            parser.textNode += chunk.substring(starti, i - 1)\n          }\n          if (c === '<' && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n            parser.state = S.OPEN_WAKA\n            parser.startTagPosition = parser.position\n          } else {\n            if (not(whitespace, c) && (!parser.sawRoot || parser.closedRoot)) {\n              strictFail(parser, 'Text data outside of root node.')\n            }\n            if (c === '&') {\n              parser.state = S.TEXT_ENTITY\n            } else {\n              parser.textNode += c\n            }\n          }\n          continue\n\n        case S.SCRIPT:\n          // only non-strict\n          if (c === '<') {\n            parser.state = S.SCRIPT_ENDING\n          } else {\n            parser.script += c\n          }\n          continue\n\n        case S.SCRIPT_ENDING:\n          if (c === '/') {\n            parser.state = S.CLOSE_TAG\n          } else {\n            parser.script += '<' + c\n            parser.state = S.SCRIPT\n          }\n          continue\n\n        case S.OPEN_WAKA:\n          // either a /, ?, !, or text is coming next.\n          if (c === '!') {\n            parser.state = S.SGML_DECL\n            parser.sgmlDecl = ''\n          } else if (is(whitespace, c)) {\n            // wait for it...\n          } else if (is(nameStart, c)) {\n            parser.state = S.OPEN_TAG\n            parser.tagName = c\n          } else if (c === '/') {\n            parser.state = S.CLOSE_TAG\n            parser.tagName = ''\n          } else if (c === '?') {\n            parser.state = S.PROC_INST\n            parser.procInstName = parser.procInstBody = ''\n          } else {\n            strictFail(parser, 'Unencoded <')\n            // if there was some whitespace, then add that in.\n            if (parser.startTagPosition + 1 < parser.position) {\n              var pad = parser.position - parser.startTagPosition\n              c = new Array(pad).join(' ') + c\n            }\n            parser.textNode += '<' + c\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.SGML_DECL:\n          if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\n            emitNode(parser, 'onopencdata')\n            parser.state = S.CDATA\n            parser.sgmlDecl = ''\n            parser.cdata = ''\n          } else if (parser.sgmlDecl + c === '--') {\n            parser.state = S.COMMENT\n            parser.comment = ''\n            parser.sgmlDecl = ''\n          } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\n            parser.state = S.DOCTYPE\n            if (parser.doctype || parser.sawRoot) {\n              strictFail(parser,\n                'Inappropriately located doctype declaration')\n            }\n            parser.doctype = ''\n            parser.sgmlDecl = ''\n          } else if (c === '>') {\n            emitNode(parser, 'onsgmldeclaration', parser.sgmlDecl)\n            parser.sgmlDecl = ''\n            parser.state = S.TEXT\n          } else if (is(quote, c)) {\n            parser.state = S.SGML_DECL_QUOTED\n            parser.sgmlDecl += c\n          } else {\n            parser.sgmlDecl += c\n          }\n          continue\n\n        case S.SGML_DECL_QUOTED:\n          if (c === parser.q) {\n            parser.state = S.SGML_DECL\n            parser.q = ''\n          }\n          parser.sgmlDecl += c\n          continue\n\n        case S.DOCTYPE:\n          if (c === '>') {\n            parser.state = S.TEXT\n            emitNode(parser, 'ondoctype', parser.doctype)\n            parser.doctype = true // just remember that we saw it.\n          } else {\n            parser.doctype += c\n            if (c === '[') {\n              parser.state = S.DOCTYPE_DTD\n            } else if (is(quote, c)) {\n              parser.state = S.DOCTYPE_QUOTED\n              parser.q = c\n            }\n          }\n          continue\n\n        case S.DOCTYPE_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.q = ''\n            parser.state = S.DOCTYPE\n          }\n          continue\n\n        case S.DOCTYPE_DTD:\n          parser.doctype += c\n          if (c === ']') {\n            parser.state = S.DOCTYPE\n          } else if (is(quote, c)) {\n            parser.state = S.DOCTYPE_DTD_QUOTED\n            parser.q = c\n          }\n          continue\n\n        case S.DOCTYPE_DTD_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.state = S.DOCTYPE_DTD\n            parser.q = ''\n          }\n          continue\n\n        case S.COMMENT:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDING\n          } else {\n            parser.comment += c\n          }\n          continue\n\n        case S.COMMENT_ENDING:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDED\n            parser.comment = textopts(parser.opt, parser.comment)\n            if (parser.comment) {\n              emitNode(parser, 'oncomment', parser.comment)\n            }\n            parser.comment = ''\n          } else {\n            parser.comment += '-' + c\n            parser.state = S.COMMENT\n          }\n          continue\n\n        case S.COMMENT_ENDED:\n          if (c !== '>') {\n            strictFail(parser, 'Malformed comment')\n            // allow <!-- blah -- bloo --> in non-strict mode,\n            // which is a comment of \" blah -- bloo \"\n            parser.comment += '--' + c\n            parser.state = S.COMMENT\n          } else {\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.CDATA:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING\n          } else {\n            parser.cdata += c\n          }\n          continue\n\n        case S.CDATA_ENDING:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING_2\n          } else {\n            parser.cdata += ']' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.CDATA_ENDING_2:\n          if (c === '>') {\n            if (parser.cdata) {\n              emitNode(parser, 'oncdata', parser.cdata)\n            }\n            emitNode(parser, 'onclosecdata')\n            parser.cdata = ''\n            parser.state = S.TEXT\n          } else if (c === ']') {\n            parser.cdata += ']'\n          } else {\n            parser.cdata += ']]' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.PROC_INST:\n          if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else if (is(whitespace, c)) {\n            parser.state = S.PROC_INST_BODY\n          } else {\n            parser.procInstName += c\n          }\n          continue\n\n        case S.PROC_INST_BODY:\n          if (!parser.procInstBody && is(whitespace, c)) {\n            continue\n          } else if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else {\n            parser.procInstBody += c\n          }\n          continue\n\n        case S.PROC_INST_ENDING:\n          if (c === '>') {\n            emitNode(parser, 'onprocessinginstruction', {\n              name: parser.procInstName,\n              body: parser.procInstBody\n            })\n            parser.procInstName = parser.procInstBody = ''\n            parser.state = S.TEXT\n          } else {\n            parser.procInstBody += '?' + c\n            parser.state = S.PROC_INST_BODY\n          }\n          continue\n\n        case S.OPEN_TAG:\n          if (is(nameBody, c)) {\n            parser.tagName += c\n          } else {\n            newTag(parser)\n            if (c === '>') {\n              openTag(parser)\n            } else if (c === '/') {\n              parser.state = S.OPEN_TAG_SLASH\n            } else {\n              if (not(whitespace, c)) {\n                strictFail(parser, 'Invalid character in tag name')\n              }\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.OPEN_TAG_SLASH:\n          if (c === '>') {\n            openTag(parser, true)\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Forward-slash in opening tag not followed by >')\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.ATTRIB:\n          // haven't read the attribute name yet.\n          if (is(whitespace, c)) {\n            continue\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (is(nameStart, c)) {\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (c === '>') {\n            strictFail(parser, 'Attribute without value')\n            parser.attribValue = parser.attribName\n            attrib(parser)\n            openTag(parser)\n          } else if (is(whitespace, c)) {\n            parser.state = S.ATTRIB_NAME_SAW_WHITE\n          } else if (is(nameBody, c)) {\n            parser.attribName += c\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME_SAW_WHITE:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (is(whitespace, c)) {\n            continue\n          } else {\n            strictFail(parser, 'Attribute without value')\n            parser.tag.attributes[parser.attribName] = ''\n            parser.attribValue = ''\n            emitNode(parser, 'onattribute', {\n              name: parser.attribName,\n              value: ''\n            })\n            parser.attribName = ''\n            if (c === '>') {\n              openTag(parser)\n            } else if (is(nameStart, c)) {\n              parser.attribName = c\n              parser.state = S.ATTRIB_NAME\n            } else {\n              strictFail(parser, 'Invalid attribute name')\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.ATTRIB_VALUE:\n          if (is(whitespace, c)) {\n            continue\n          } else if (is(quote, c)) {\n            parser.q = c\n            parser.state = S.ATTRIB_VALUE_QUOTED\n          } else {\n            strictFail(parser, 'Unquoted attribute value')\n            parser.state = S.ATTRIB_VALUE_UNQUOTED\n            parser.attribValue = c\n          }\n          continue\n\n        case S.ATTRIB_VALUE_QUOTED:\n          if (c !== parser.q) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_Q\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          parser.q = ''\n          parser.state = S.ATTRIB_VALUE_CLOSED\n          continue\n\n        case S.ATTRIB_VALUE_CLOSED:\n          if (is(whitespace, c)) {\n            parser.state = S.ATTRIB\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (is(nameStart, c)) {\n            strictFail(parser, 'No whitespace between attributes')\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_VALUE_UNQUOTED:\n          if (not(attribEnd, c)) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_U\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          if (c === '>') {\n            openTag(parser)\n          } else {\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.CLOSE_TAG:\n          if (!parser.tagName) {\n            if (is(whitespace, c)) {\n              continue\n            } else if (not(nameStart, c)) {\n              if (parser.script) {\n                parser.script += '</' + c\n                parser.state = S.SCRIPT\n              } else {\n                strictFail(parser, 'Invalid tagname in closing tag.')\n              }\n            } else {\n              parser.tagName = c\n            }\n          } else if (c === '>') {\n            closeTag(parser)\n          } else if (is(nameBody, c)) {\n            parser.tagName += c\n          } else if (parser.script) {\n            parser.script += '</' + parser.tagName\n            parser.tagName = ''\n            parser.state = S.SCRIPT\n          } else {\n            if (not(whitespace, c)) {\n              strictFail(parser, 'Invalid tagname in closing tag')\n            }\n            parser.state = S.CLOSE_TAG_SAW_WHITE\n          }\n          continue\n\n        case S.CLOSE_TAG_SAW_WHITE:\n          if (is(whitespace, c)) {\n            continue\n          }\n          if (c === '>') {\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Invalid characters in closing tag')\n          }\n          continue\n\n        case S.TEXT_ENTITY:\n        case S.ATTRIB_VALUE_ENTITY_Q:\n        case S.ATTRIB_VALUE_ENTITY_U:\n          var returnState\n          var buffer\n          switch (parser.state) {\n            case S.TEXT_ENTITY:\n              returnState = S.TEXT\n              buffer = 'textNode'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_Q:\n              returnState = S.ATTRIB_VALUE_QUOTED\n              buffer = 'attribValue'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_U:\n              returnState = S.ATTRIB_VALUE_UNQUOTED\n              buffer = 'attribValue'\n              break\n          }\n\n          if (c === ';') {\n            parser[buffer] += parseEntity(parser)\n            parser.entity = ''\n            parser.state = returnState\n          } else if (is(parser.entity.length ? entityBody : entityStart, c)) {\n            parser.entity += c\n          } else {\n            strictFail(parser, 'Invalid character in entity name')\n            parser[buffer] += '&' + parser.entity + c\n            parser.entity = ''\n            parser.state = returnState\n          }\n\n          continue\n\n        default:\n          throw new Error(parser, 'Unknown state: ' + parser.state)\n      }\n    } // while\n\n    if (parser.position >= parser.bufferCheckPosition) {\n      checkBufferLength(parser)\n    }\n    return parser\n  }\n\n  /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\n  if (!String.fromCodePoint) {\n    (function () {\n      var stringFromCharCode = String.fromCharCode\n      var floor = Math.floor\n      var fromCodePoint = function () {\n        var MAX_SIZE = 0x4000\n        var codeUnits = []\n        var highSurrogate\n        var lowSurrogate\n        var index = -1\n        var length = arguments.length\n        if (!length) {\n          return ''\n        }\n        var result = ''\n        while (++index < length) {\n          var codePoint = Number(arguments[index])\n          if (\n            !isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n            codePoint < 0 || // not a valid Unicode code point\n            codePoint > 0x10FFFF || // not a valid Unicode code point\n            floor(codePoint) !== codePoint // not an integer\n          ) {\n            throw RangeError('Invalid code point: ' + codePoint)\n          }\n          if (codePoint <= 0xFFFF) { // BMP code point\n            codeUnits.push(codePoint)\n          } else { // Astral code point; split in surrogate halves\n            // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n            codePoint -= 0x10000\n            highSurrogate = (codePoint >> 10) + 0xD800\n            lowSurrogate = (codePoint % 0x400) + 0xDC00\n            codeUnits.push(highSurrogate, lowSurrogate)\n          }\n          if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n            result += stringFromCharCode.apply(null, codeUnits)\n            codeUnits.length = 0\n          }\n        }\n        return result\n      }\n      if (Object.defineProperty) {\n        Object.defineProperty(String, 'fromCodePoint', {\n          value: fromCodePoint,\n          configurable: true,\n          writable: true\n        })\n      } else {\n        String.fromCodePoint = fromCodePoint\n      }\n    }())\n  }\n})(typeof exports === 'undefined' ? this.sax = {} : exports)\n","import S3 from 'aws-sdk/clients/s3'\r\nimport fs from 'fs'\r\nconst s3 = new S3()\r\nconst bucketName = \"nguyenvu-upload-lambda-functions\"\r\n\r\nconst key = \"first_upload\"\r\n\r\nconst fileName = \"@root/theboy.mp4\"\r\nexport const handler = async (event) => {\r\n  console.log(__dirname)\r\n  const readStream = fs.createReadStream(\"../../functions/upload/theboy.mp4\")\r\n  const params = {\r\n    Bucket: bucketName,\r\n    Key: key,\r\n    Body: readStream\r\n  }\r\n  const options = { partSize: 5 * 1024 * 1024, queueSize: 10 };  \r\n    const result = await s3.upload(params, options).promise()\r\n    console.log(result)\r\n    return {\r\n        statusCode: 200,\r\n    // Headers must be sent here as well as defined in the template.yaml.\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Access-Control-Allow-Origin': \"*\",\r\n      'Access-Control-Allow-Headers': 'Content-Type',\r\n      'Access-Control-Allow-Methods': 'OPTIONS,POST,GET,PATCH'\r\n    },\r\n    body: \"asdasd\"\r\n    }\r\n}","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In node.js\n// this is pretty straight-forward - we use the crypto API.\n\nvar crypto = require('crypto');\n\nmodule.exports = function nodeRNG() {\n  return crypto.randomBytes(16);\n};\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  exports.stripBOM = function(str) {\n    if (str[0] === '\\uFEFF') {\n      return str.substring(1);\n    } else {\n      return str;\n    }\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var builder, defaults, escapeCDATA, requiresCDATA, wrapCDATA,\n    hasProp = {}.hasOwnProperty;\n\n  builder = require('xmlbuilder');\n\n  defaults = require('./defaults').defaults;\n\n  requiresCDATA = function(entry) {\n    return typeof entry === \"string\" && (entry.indexOf('&') >= 0 || entry.indexOf('>') >= 0 || entry.indexOf('<') >= 0);\n  };\n\n  wrapCDATA = function(entry) {\n    return \"<![CDATA[\" + (escapeCDATA(entry)) + \"]]>\";\n  };\n\n  escapeCDATA = function(entry) {\n    return entry.replace(']]>', ']]]]><![CDATA[>');\n  };\n\n  exports.Builder = (function() {\n    function Builder(opts) {\n      var key, ref, value;\n      this.options = {};\n      ref = defaults[\"0.2\"];\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this.options[key] = value;\n      }\n      for (key in opts) {\n        if (!hasProp.call(opts, key)) continue;\n        value = opts[key];\n        this.options[key] = value;\n      }\n    }\n\n    Builder.prototype.buildObject = function(rootObj) {\n      var attrkey, charkey, render, rootElement, rootName;\n      attrkey = this.options.attrkey;\n      charkey = this.options.charkey;\n      if ((Object.keys(rootObj).length === 1) && (this.options.rootName === defaults['0.2'].rootName)) {\n        rootName = Object.keys(rootObj)[0];\n        rootObj = rootObj[rootName];\n      } else {\n        rootName = this.options.rootName;\n      }\n      render = (function(_this) {\n        return function(element, obj) {\n          var attr, child, entry, index, key, value;\n          if (typeof obj !== 'object') {\n            if (_this.options.cdata && requiresCDATA(obj)) {\n              element.raw(wrapCDATA(obj));\n            } else {\n              element.txt(obj);\n            }\n          } else if (Array.isArray(obj)) {\n            for (index in obj) {\n              if (!hasProp.call(obj, index)) continue;\n              child = obj[index];\n              for (key in child) {\n                entry = child[key];\n                element = render(element.ele(key), entry).up();\n              }\n            }\n          } else {\n            for (key in obj) {\n              if (!hasProp.call(obj, key)) continue;\n              child = obj[key];\n              if (key === attrkey) {\n                if (typeof child === \"object\") {\n                  for (attr in child) {\n                    value = child[attr];\n                    element = element.att(attr, value);\n                  }\n                }\n              } else if (key === charkey) {\n                if (_this.options.cdata && requiresCDATA(child)) {\n                  element = element.raw(wrapCDATA(child));\n                } else {\n                  element = element.txt(child);\n                }\n              } else if (Array.isArray(child)) {\n                for (index in child) {\n                  if (!hasProp.call(child, index)) continue;\n                  entry = child[index];\n                  if (typeof entry === 'string') {\n                    if (_this.options.cdata && requiresCDATA(entry)) {\n                      element = element.ele(key).raw(wrapCDATA(entry)).up();\n                    } else {\n                      element = element.ele(key, entry).up();\n                    }\n                  } else {\n                    element = render(element.ele(key), entry).up();\n                  }\n                }\n              } else if (typeof child === \"object\") {\n                element = render(element.ele(key), child).up();\n              } else {\n                if (typeof child === 'string' && _this.options.cdata && requiresCDATA(child)) {\n                  element = element.ele(key).raw(wrapCDATA(child)).up();\n                } else {\n                  if (child == null) {\n                    child = '';\n                  }\n                  element = element.ele(key, child.toString()).up();\n                }\n              }\n            }\n          }\n          return element;\n        };\n      })(this);\n      rootElement = builder.create(rootName, this.options.xmldec, this.options.doctype, {\n        headless: this.options.headless,\n        allowSurrogateChars: this.options.allowSurrogateChars\n      });\n      return render(rootElement, rootObj).end(this.options.renderOpts);\n    };\n\n    return Builder;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  exports.defaults = {\n    \"0.1\": {\n      explicitCharkey: false,\n      trim: true,\n      normalize: true,\n      normalizeTags: false,\n      attrkey: \"@\",\n      charkey: \"#\",\n      explicitArray: false,\n      ignoreAttrs: false,\n      mergeAttrs: false,\n      explicitRoot: false,\n      validator: null,\n      xmlns: false,\n      explicitChildren: false,\n      childkey: '@@',\n      charsAsChildren: false,\n      includeWhiteChars: false,\n      async: false,\n      strict: true,\n      attrNameProcessors: null,\n      attrValueProcessors: null,\n      tagNameProcessors: null,\n      valueProcessors: null,\n      emptyTag: ''\n    },\n    \"0.2\": {\n      explicitCharkey: false,\n      trim: false,\n      normalize: false,\n      normalizeTags: false,\n      attrkey: \"$\",\n      charkey: \"_\",\n      explicitArray: true,\n      ignoreAttrs: false,\n      mergeAttrs: false,\n      explicitRoot: true,\n      validator: null,\n      xmlns: false,\n      explicitChildren: false,\n      preserveChildrenOrder: false,\n      childkey: '$$',\n      charsAsChildren: false,\n      includeWhiteChars: false,\n      async: false,\n      strict: true,\n      attrNameProcessors: null,\n      attrValueProcessors: null,\n      tagNameProcessors: null,\n      valueProcessors: null,\n      rootName: 'root',\n      xmldec: {\n        'version': '1.0',\n        'encoding': 'UTF-8',\n        'standalone': true\n      },\n      doctype: null,\n      renderOpts: {\n        'pretty': true,\n        'indent': '  ',\n        'newline': '\\n'\n      },\n      headless: false,\n      chunkSize: 10000,\n      emptyTag: '',\n      cdata: false\n    }\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var bom, defaults, events, isEmpty, processItem, processors, sax, setImmediate,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  sax = require('sax');\n\n  events = require('events');\n\n  bom = require('./bom');\n\n  processors = require('./processors');\n\n  setImmediate = require('timers').setImmediate;\n\n  defaults = require('./defaults').defaults;\n\n  isEmpty = function(thing) {\n    return typeof thing === \"object\" && (thing != null) && Object.keys(thing).length === 0;\n  };\n\n  processItem = function(processors, item, key) {\n    var i, len, process;\n    for (i = 0, len = processors.length; i < len; i++) {\n      process = processors[i];\n      item = process(item, key);\n    }\n    return item;\n  };\n\n  exports.Parser = (function(superClass) {\n    extend(Parser, superClass);\n\n    function Parser(opts) {\n      this.parseString = bind(this.parseString, this);\n      this.reset = bind(this.reset, this);\n      this.assignOrPush = bind(this.assignOrPush, this);\n      this.processAsync = bind(this.processAsync, this);\n      var key, ref, value;\n      if (!(this instanceof exports.Parser)) {\n        return new exports.Parser(opts);\n      }\n      this.options = {};\n      ref = defaults[\"0.2\"];\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this.options[key] = value;\n      }\n      for (key in opts) {\n        if (!hasProp.call(opts, key)) continue;\n        value = opts[key];\n        this.options[key] = value;\n      }\n      if (this.options.xmlns) {\n        this.options.xmlnskey = this.options.attrkey + \"ns\";\n      }\n      if (this.options.normalizeTags) {\n        if (!this.options.tagNameProcessors) {\n          this.options.tagNameProcessors = [];\n        }\n        this.options.tagNameProcessors.unshift(processors.normalize);\n      }\n      this.reset();\n    }\n\n    Parser.prototype.processAsync = function() {\n      var chunk, err;\n      try {\n        if (this.remaining.length <= this.options.chunkSize) {\n          chunk = this.remaining;\n          this.remaining = '';\n          this.saxParser = this.saxParser.write(chunk);\n          return this.saxParser.close();\n        } else {\n          chunk = this.remaining.substr(0, this.options.chunkSize);\n          this.remaining = this.remaining.substr(this.options.chunkSize, this.remaining.length);\n          this.saxParser = this.saxParser.write(chunk);\n          return setImmediate(this.processAsync);\n        }\n      } catch (error1) {\n        err = error1;\n        if (!this.saxParser.errThrown) {\n          this.saxParser.errThrown = true;\n          return this.emit(err);\n        }\n      }\n    };\n\n    Parser.prototype.assignOrPush = function(obj, key, newValue) {\n      if (!(key in obj)) {\n        if (!this.options.explicitArray) {\n          return obj[key] = newValue;\n        } else {\n          return obj[key] = [newValue];\n        }\n      } else {\n        if (!(obj[key] instanceof Array)) {\n          obj[key] = [obj[key]];\n        }\n        return obj[key].push(newValue);\n      }\n    };\n\n    Parser.prototype.reset = function() {\n      var attrkey, charkey, ontext, stack;\n      this.removeAllListeners();\n      this.saxParser = sax.parser(this.options.strict, {\n        trim: false,\n        normalize: false,\n        xmlns: this.options.xmlns\n      });\n      this.saxParser.errThrown = false;\n      this.saxParser.onerror = (function(_this) {\n        return function(error) {\n          _this.saxParser.resume();\n          if (!_this.saxParser.errThrown) {\n            _this.saxParser.errThrown = true;\n            return _this.emit(\"error\", error);\n          }\n        };\n      })(this);\n      this.saxParser.onend = (function(_this) {\n        return function() {\n          if (!_this.saxParser.ended) {\n            _this.saxParser.ended = true;\n            return _this.emit(\"end\", _this.resultObject);\n          }\n        };\n      })(this);\n      this.saxParser.ended = false;\n      this.EXPLICIT_CHARKEY = this.options.explicitCharkey;\n      this.resultObject = null;\n      stack = [];\n      attrkey = this.options.attrkey;\n      charkey = this.options.charkey;\n      this.saxParser.onopentag = (function(_this) {\n        return function(node) {\n          var key, newValue, obj, processedKey, ref;\n          obj = {};\n          obj[charkey] = \"\";\n          if (!_this.options.ignoreAttrs) {\n            ref = node.attributes;\n            for (key in ref) {\n              if (!hasProp.call(ref, key)) continue;\n              if (!(attrkey in obj) && !_this.options.mergeAttrs) {\n                obj[attrkey] = {};\n              }\n              newValue = _this.options.attrValueProcessors ? processItem(_this.options.attrValueProcessors, node.attributes[key], key) : node.attributes[key];\n              processedKey = _this.options.attrNameProcessors ? processItem(_this.options.attrNameProcessors, key) : key;\n              if (_this.options.mergeAttrs) {\n                _this.assignOrPush(obj, processedKey, newValue);\n              } else {\n                obj[attrkey][processedKey] = newValue;\n              }\n            }\n          }\n          obj[\"#name\"] = _this.options.tagNameProcessors ? processItem(_this.options.tagNameProcessors, node.name) : node.name;\n          if (_this.options.xmlns) {\n            obj[_this.options.xmlnskey] = {\n              uri: node.uri,\n              local: node.local\n            };\n          }\n          return stack.push(obj);\n        };\n      })(this);\n      this.saxParser.onclosetag = (function(_this) {\n        return function() {\n          var cdata, emptyStr, key, node, nodeName, obj, objClone, old, s, xpath;\n          obj = stack.pop();\n          nodeName = obj[\"#name\"];\n          if (!_this.options.explicitChildren || !_this.options.preserveChildrenOrder) {\n            delete obj[\"#name\"];\n          }\n          if (obj.cdata === true) {\n            cdata = obj.cdata;\n            delete obj.cdata;\n          }\n          s = stack[stack.length - 1];\n          if (obj[charkey].match(/^\\s*$/) && !cdata) {\n            emptyStr = obj[charkey];\n            delete obj[charkey];\n          } else {\n            if (_this.options.trim) {\n              obj[charkey] = obj[charkey].trim();\n            }\n            if (_this.options.normalize) {\n              obj[charkey] = obj[charkey].replace(/\\s{2,}/g, \" \").trim();\n            }\n            obj[charkey] = _this.options.valueProcessors ? processItem(_this.options.valueProcessors, obj[charkey], nodeName) : obj[charkey];\n            if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {\n              obj = obj[charkey];\n            }\n          }\n          if (isEmpty(obj)) {\n            obj = _this.options.emptyTag !== '' ? _this.options.emptyTag : emptyStr;\n          }\n          if (_this.options.validator != null) {\n            xpath = \"/\" + ((function() {\n              var i, len, results;\n              results = [];\n              for (i = 0, len = stack.length; i < len; i++) {\n                node = stack[i];\n                results.push(node[\"#name\"]);\n              }\n              return results;\n            })()).concat(nodeName).join(\"/\");\n            (function() {\n              var err;\n              try {\n                return obj = _this.options.validator(xpath, s && s[nodeName], obj);\n              } catch (error1) {\n                err = error1;\n                return _this.emit(\"error\", err);\n              }\n            })();\n          }\n          if (_this.options.explicitChildren && !_this.options.mergeAttrs && typeof obj === 'object') {\n            if (!_this.options.preserveChildrenOrder) {\n              node = {};\n              if (_this.options.attrkey in obj) {\n                node[_this.options.attrkey] = obj[_this.options.attrkey];\n                delete obj[_this.options.attrkey];\n              }\n              if (!_this.options.charsAsChildren && _this.options.charkey in obj) {\n                node[_this.options.charkey] = obj[_this.options.charkey];\n                delete obj[_this.options.charkey];\n              }\n              if (Object.getOwnPropertyNames(obj).length > 0) {\n                node[_this.options.childkey] = obj;\n              }\n              obj = node;\n            } else if (s) {\n              s[_this.options.childkey] = s[_this.options.childkey] || [];\n              objClone = {};\n              for (key in obj) {\n                if (!hasProp.call(obj, key)) continue;\n                objClone[key] = obj[key];\n              }\n              s[_this.options.childkey].push(objClone);\n              delete obj[\"#name\"];\n              if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {\n                obj = obj[charkey];\n              }\n            }\n          }\n          if (stack.length > 0) {\n            return _this.assignOrPush(s, nodeName, obj);\n          } else {\n            if (_this.options.explicitRoot) {\n              old = obj;\n              obj = {};\n              obj[nodeName] = old;\n            }\n            _this.resultObject = obj;\n            _this.saxParser.ended = true;\n            return _this.emit(\"end\", _this.resultObject);\n          }\n        };\n      })(this);\n      ontext = (function(_this) {\n        return function(text) {\n          var charChild, s;\n          s = stack[stack.length - 1];\n          if (s) {\n            s[charkey] += text;\n            if (_this.options.explicitChildren && _this.options.preserveChildrenOrder && _this.options.charsAsChildren && (_this.options.includeWhiteChars || text.replace(/\\\\n/g, '').trim() !== '')) {\n              s[_this.options.childkey] = s[_this.options.childkey] || [];\n              charChild = {\n                '#name': '__text__'\n              };\n              charChild[charkey] = text;\n              if (_this.options.normalize) {\n                charChild[charkey] = charChild[charkey].replace(/\\s{2,}/g, \" \").trim();\n              }\n              s[_this.options.childkey].push(charChild);\n            }\n            return s;\n          }\n        };\n      })(this);\n      this.saxParser.ontext = ontext;\n      return this.saxParser.oncdata = (function(_this) {\n        return function(text) {\n          var s;\n          s = ontext(text);\n          if (s) {\n            return s.cdata = true;\n          }\n        };\n      })(this);\n    };\n\n    Parser.prototype.parseString = function(str, cb) {\n      var err;\n      if ((cb != null) && typeof cb === \"function\") {\n        this.on(\"end\", function(result) {\n          this.reset();\n          return cb(null, result);\n        });\n        this.on(\"error\", function(err) {\n          this.reset();\n          return cb(err);\n        });\n      }\n      try {\n        str = str.toString();\n        if (str.trim() === '') {\n          this.emit(\"end\", null);\n          return true;\n        }\n        str = bom.stripBOM(str);\n        if (this.options.async) {\n          this.remaining = str;\n          setImmediate(this.processAsync);\n          return this.saxParser;\n        }\n        return this.saxParser.write(str).close();\n      } catch (error1) {\n        err = error1;\n        if (!(this.saxParser.errThrown || this.saxParser.ended)) {\n          this.emit('error', err);\n          return this.saxParser.errThrown = true;\n        } else if (this.saxParser.ended) {\n          throw err;\n        }\n      }\n    };\n\n    return Parser;\n\n  })(events.EventEmitter);\n\n  exports.parseString = function(str, a, b) {\n    var cb, options, parser;\n    if (b != null) {\n      if (typeof b === 'function') {\n        cb = b;\n      }\n      if (typeof a === 'object') {\n        options = a;\n      }\n    } else {\n      if (typeof a === 'function') {\n        cb = a;\n      }\n      options = {};\n    }\n    parser = new exports.Parser(options);\n    return parser.parseString(str, cb);\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var prefixMatch;\n\n  prefixMatch = new RegExp(/(?!xmlns)^.*:/);\n\n  exports.normalize = function(str) {\n    return str.toLowerCase();\n  };\n\n  exports.firstCharLowerCase = function(str) {\n    return str.charAt(0).toLowerCase() + str.slice(1);\n  };\n\n  exports.stripPrefix = function(str) {\n    return str.replace(prefixMatch, '');\n  };\n\n  exports.parseNumbers = function(str) {\n    if (!isNaN(str)) {\n      str = str % 1 === 0 ? parseInt(str, 10) : parseFloat(str);\n    }\n    return str;\n  };\n\n  exports.parseBooleans = function(str) {\n    if (/^(?:true|false)$/i.test(str)) {\n      str = str.toLowerCase() === 'true';\n    }\n    return str;\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var builder, defaults, parser, processors,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  defaults = require('./defaults');\n\n  builder = require('./builder');\n\n  parser = require('./parser');\n\n  processors = require('./processors');\n\n  exports.defaults = defaults.defaults;\n\n  exports.processors = processors;\n\n  exports.ValidationError = (function(superClass) {\n    extend(ValidationError, superClass);\n\n    function ValidationError(message) {\n      this.message = message;\n    }\n\n    return ValidationError;\n\n  })(Error);\n\n  exports.Builder = builder.Builder;\n\n  exports.Parser = parser.Parser;\n\n  exports.parseString = parser.parseString;\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var assign, isArray, isEmpty, isFunction, isObject, isPlainObject,\n    slice = [].slice,\n    hasProp = {}.hasOwnProperty;\n\n  assign = function() {\n    var i, key, len, source, sources, target;\n    target = arguments[0], sources = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    if (isFunction(Object.assign)) {\n      Object.assign.apply(null, arguments);\n    } else {\n      for (i = 0, len = sources.length; i < len; i++) {\n        source = sources[i];\n        if (source != null) {\n          for (key in source) {\n            if (!hasProp.call(source, key)) continue;\n            target[key] = source[key];\n          }\n        }\n      }\n    }\n    return target;\n  };\n\n  isFunction = function(val) {\n    return !!val && Object.prototype.toString.call(val) === '[object Function]';\n  };\n\n  isObject = function(val) {\n    var ref;\n    return !!val && ((ref = typeof val) === 'function' || ref === 'object');\n  };\n\n  isArray = function(val) {\n    if (isFunction(Array.isArray)) {\n      return Array.isArray(val);\n    } else {\n      return Object.prototype.toString.call(val) === '[object Array]';\n    }\n  };\n\n  isEmpty = function(val) {\n    var key;\n    if (isArray(val)) {\n      return !val.length;\n    } else {\n      for (key in val) {\n        if (!hasProp.call(val, key)) continue;\n        return false;\n      }\n      return true;\n    }\n  };\n\n  isPlainObject = function(val) {\n    var ctor, proto;\n    return isObject(val) && (proto = Object.getPrototypeOf(val)) && (ctor = proto.constructor) && (typeof ctor === 'function') && (ctor instanceof ctor) && (Function.prototype.toString.call(ctor) === Function.prototype.toString.call(Object));\n  };\n\n  module.exports.assign = assign;\n\n  module.exports.isFunction = isFunction;\n\n  module.exports.isObject = isObject;\n\n  module.exports.isArray = isArray;\n\n  module.exports.isEmpty = isEmpty;\n\n  module.exports.isPlainObject = isPlainObject;\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLAttribute;\n\n  module.exports = XMLAttribute = (function() {\n    function XMLAttribute(parent, name, value) {\n      this.options = parent.options;\n      this.stringify = parent.stringify;\n      if (name == null) {\n        throw new Error(\"Missing attribute name of element \" + parent.name);\n      }\n      if (value == null) {\n        throw new Error(\"Missing attribute value for attribute \" + name + \" of element \" + parent.name);\n      }\n      this.name = this.stringify.attName(name);\n      this.value = this.stringify.attValue(value);\n    }\n\n    XMLAttribute.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLAttribute.prototype.toString = function(options) {\n      return this.options.writer.set(options).attribute(this);\n    };\n\n    return XMLAttribute;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLCData, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLCData = (function(superClass) {\n    extend(XMLCData, superClass);\n\n    function XMLCData(parent, text) {\n      XMLCData.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing CDATA text\");\n      }\n      this.text = this.stringify.cdata(text);\n    }\n\n    XMLCData.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLCData.prototype.toString = function(options) {\n      return this.options.writer.set(options).cdata(this);\n    };\n\n    return XMLCData;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLComment, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLComment = (function(superClass) {\n    extend(XMLComment, superClass);\n\n    function XMLComment(parent, text) {\n      XMLComment.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing comment text\");\n      }\n      this.text = this.stringify.comment(text);\n    }\n\n    XMLComment.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLComment.prototype.toString = function(options) {\n      return this.options.writer.set(options).comment(this);\n    };\n\n    return XMLComment;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDTDAttList, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLDTDAttList = (function(superClass) {\n    extend(XMLDTDAttList, superClass);\n\n    function XMLDTDAttList(parent, elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      XMLDTDAttList.__super__.constructor.call(this, parent);\n      if (elementName == null) {\n        throw new Error(\"Missing DTD element name\");\n      }\n      if (attributeName == null) {\n        throw new Error(\"Missing DTD attribute name\");\n      }\n      if (!attributeType) {\n        throw new Error(\"Missing DTD attribute type\");\n      }\n      if (!defaultValueType) {\n        throw new Error(\"Missing DTD attribute default\");\n      }\n      if (defaultValueType.indexOf('#') !== 0) {\n        defaultValueType = '#' + defaultValueType;\n      }\n      if (!defaultValueType.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/)) {\n        throw new Error(\"Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT\");\n      }\n      if (defaultValue && !defaultValueType.match(/^(#FIXED|#DEFAULT)$/)) {\n        throw new Error(\"Default value only applies to #FIXED or #DEFAULT\");\n      }\n      this.elementName = this.stringify.eleName(elementName);\n      this.attributeName = this.stringify.attName(attributeName);\n      this.attributeType = this.stringify.dtdAttType(attributeType);\n      this.defaultValue = this.stringify.dtdAttDefault(defaultValue);\n      this.defaultValueType = defaultValueType;\n    }\n\n    XMLDTDAttList.prototype.toString = function(options) {\n      return this.options.writer.set(options).dtdAttList(this);\n    };\n\n    return XMLDTDAttList;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDTDElement, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLDTDElement = (function(superClass) {\n    extend(XMLDTDElement, superClass);\n\n    function XMLDTDElement(parent, name, value) {\n      XMLDTDElement.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing DTD element name\");\n      }\n      if (!value) {\n        value = '(#PCDATA)';\n      }\n      if (Array.isArray(value)) {\n        value = '(' + value.join(',') + ')';\n      }\n      this.name = this.stringify.eleName(name);\n      this.value = this.stringify.dtdElementValue(value);\n    }\n\n    XMLDTDElement.prototype.toString = function(options) {\n      return this.options.writer.set(options).dtdElement(this);\n    };\n\n    return XMLDTDElement;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDTDEntity, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLDTDEntity = (function(superClass) {\n    extend(XMLDTDEntity, superClass);\n\n    function XMLDTDEntity(parent, pe, name, value) {\n      XMLDTDEntity.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing entity name\");\n      }\n      if (value == null) {\n        throw new Error(\"Missing entity value\");\n      }\n      this.pe = !!pe;\n      this.name = this.stringify.eleName(name);\n      if (!isObject(value)) {\n        this.value = this.stringify.dtdEntityValue(value);\n      } else {\n        if (!value.pubID && !value.sysID) {\n          throw new Error(\"Public and/or system identifiers are required for an external entity\");\n        }\n        if (value.pubID && !value.sysID) {\n          throw new Error(\"System identifier is required for a public external entity\");\n        }\n        if (value.pubID != null) {\n          this.pubID = this.stringify.dtdPubID(value.pubID);\n        }\n        if (value.sysID != null) {\n          this.sysID = this.stringify.dtdSysID(value.sysID);\n        }\n        if (value.nData != null) {\n          this.nData = this.stringify.dtdNData(value.nData);\n        }\n        if (this.pe && this.nData) {\n          throw new Error(\"Notation declaration is not allowed in a parameter entity\");\n        }\n      }\n    }\n\n    XMLDTDEntity.prototype.toString = function(options) {\n      return this.options.writer.set(options).dtdEntity(this);\n    };\n\n    return XMLDTDEntity;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDTDNotation, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLDTDNotation = (function(superClass) {\n    extend(XMLDTDNotation, superClass);\n\n    function XMLDTDNotation(parent, name, value) {\n      XMLDTDNotation.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing notation name\");\n      }\n      if (!value.pubID && !value.sysID) {\n        throw new Error(\"Public or system identifiers are required for an external entity\");\n      }\n      this.name = this.stringify.eleName(name);\n      if (value.pubID != null) {\n        this.pubID = this.stringify.dtdPubID(value.pubID);\n      }\n      if (value.sysID != null) {\n        this.sysID = this.stringify.dtdSysID(value.sysID);\n      }\n    }\n\n    XMLDTDNotation.prototype.toString = function(options) {\n      return this.options.writer.set(options).dtdNotation(this);\n    };\n\n    return XMLDTDNotation;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDeclaration, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLDeclaration = (function(superClass) {\n    extend(XMLDeclaration, superClass);\n\n    function XMLDeclaration(parent, version, encoding, standalone) {\n      var ref;\n      XMLDeclaration.__super__.constructor.call(this, parent);\n      if (isObject(version)) {\n        ref = version, version = ref.version, encoding = ref.encoding, standalone = ref.standalone;\n      }\n      if (!version) {\n        version = '1.0';\n      }\n      this.version = this.stringify.xmlVersion(version);\n      if (encoding != null) {\n        this.encoding = this.stringify.xmlEncoding(encoding);\n      }\n      if (standalone != null) {\n        this.standalone = this.stringify.xmlStandalone(standalone);\n      }\n    }\n\n    XMLDeclaration.prototype.toString = function(options) {\n      return this.options.writer.set(options).declaration(this);\n    };\n\n    return XMLDeclaration;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDocType, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  module.exports = XMLDocType = (function(superClass) {\n    extend(XMLDocType, superClass);\n\n    function XMLDocType(parent, pubID, sysID) {\n      var ref, ref1;\n      XMLDocType.__super__.constructor.call(this, parent);\n      this.documentObject = parent;\n      if (isObject(pubID)) {\n        ref = pubID, pubID = ref.pubID, sysID = ref.sysID;\n      }\n      if (sysID == null) {\n        ref1 = [pubID, sysID], sysID = ref1[0], pubID = ref1[1];\n      }\n      if (pubID != null) {\n        this.pubID = this.stringify.dtdPubID(pubID);\n      }\n      if (sysID != null) {\n        this.sysID = this.stringify.dtdSysID(sysID);\n      }\n    }\n\n    XMLDocType.prototype.element = function(name, value) {\n      var child;\n      child = new XMLDTDElement(this, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.attList = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      var child;\n      child = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.entity = function(name, value) {\n      var child;\n      child = new XMLDTDEntity(this, false, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.pEntity = function(name, value) {\n      var child;\n      child = new XMLDTDEntity(this, true, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.notation = function(name, value) {\n      var child;\n      child = new XMLDTDNotation(this, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.toString = function(options) {\n      return this.options.writer.set(options).docType(this);\n    };\n\n    XMLDocType.prototype.ele = function(name, value) {\n      return this.element(name, value);\n    };\n\n    XMLDocType.prototype.att = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      return this.attList(elementName, attributeName, attributeType, defaultValueType, defaultValue);\n    };\n\n    XMLDocType.prototype.ent = function(name, value) {\n      return this.entity(name, value);\n    };\n\n    XMLDocType.prototype.pent = function(name, value) {\n      return this.pEntity(name, value);\n    };\n\n    XMLDocType.prototype.not = function(name, value) {\n      return this.notation(name, value);\n    };\n\n    XMLDocType.prototype.up = function() {\n      return this.root() || this.documentObject;\n    };\n\n    return XMLDocType;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDocument, XMLNode, XMLStringWriter, XMLStringifier, isPlainObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isPlainObject = require('./Utility').isPlainObject;\n\n  XMLNode = require('./XMLNode');\n\n  XMLStringifier = require('./XMLStringifier');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  module.exports = XMLDocument = (function(superClass) {\n    extend(XMLDocument, superClass);\n\n    function XMLDocument(options) {\n      XMLDocument.__super__.constructor.call(this, null);\n      options || (options = {});\n      if (!options.writer) {\n        options.writer = new XMLStringWriter();\n      }\n      this.options = options;\n      this.stringify = new XMLStringifier(options);\n      this.isDocument = true;\n    }\n\n    XMLDocument.prototype.end = function(writer) {\n      var writerOptions;\n      if (!writer) {\n        writer = this.options.writer;\n      } else if (isPlainObject(writer)) {\n        writerOptions = writer;\n        writer = this.options.writer.set(writerOptions);\n      }\n      return writer.document(this);\n    };\n\n    XMLDocument.prototype.toString = function(options) {\n      return this.options.writer.set(options).document(this);\n    };\n\n    return XMLDocument;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLAttribute, XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLDocumentCB, XMLElement, XMLProcessingInstruction, XMLRaw, XMLStringWriter, XMLStringifier, XMLText, isFunction, isObject, isPlainObject, ref,\n    hasProp = {}.hasOwnProperty;\n\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction, isPlainObject = ref.isPlainObject;\n\n  XMLElement = require('./XMLElement');\n\n  XMLCData = require('./XMLCData');\n\n  XMLComment = require('./XMLComment');\n\n  XMLRaw = require('./XMLRaw');\n\n  XMLText = require('./XMLText');\n\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n\n  XMLDeclaration = require('./XMLDeclaration');\n\n  XMLDocType = require('./XMLDocType');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  XMLAttribute = require('./XMLAttribute');\n\n  XMLStringifier = require('./XMLStringifier');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  module.exports = XMLDocumentCB = (function() {\n    function XMLDocumentCB(options, onData, onEnd) {\n      var writerOptions;\n      options || (options = {});\n      if (!options.writer) {\n        options.writer = new XMLStringWriter(options);\n      } else if (isPlainObject(options.writer)) {\n        writerOptions = options.writer;\n        options.writer = new XMLStringWriter(writerOptions);\n      }\n      this.options = options;\n      this.writer = options.writer;\n      this.stringify = new XMLStringifier(options);\n      this.onDataCallback = onData || function() {};\n      this.onEndCallback = onEnd || function() {};\n      this.currentNode = null;\n      this.currentLevel = -1;\n      this.openTags = {};\n      this.documentStarted = false;\n      this.documentCompleted = false;\n      this.root = null;\n    }\n\n    XMLDocumentCB.prototype.node = function(name, attributes, text) {\n      var ref1;\n      if (name == null) {\n        throw new Error(\"Missing node name\");\n      }\n      if (this.root && this.currentLevel === -1) {\n        throw new Error(\"Document can only have one root node\");\n      }\n      this.openCurrent();\n      name = name.valueOf();\n      if (attributes == null) {\n        attributes = {};\n      }\n      attributes = attributes.valueOf();\n      if (!isObject(attributes)) {\n        ref1 = [attributes, text], text = ref1[0], attributes = ref1[1];\n      }\n      this.currentNode = new XMLElement(this, name, attributes);\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n      if (text != null) {\n        this.text(text);\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.element = function(name, attributes, text) {\n      if (this.currentNode && this.currentNode instanceof XMLDocType) {\n        return this.dtdElement.apply(this, arguments);\n      } else {\n        return this.node(name, attributes, text);\n      }\n    };\n\n    XMLDocumentCB.prototype.attribute = function(name, value) {\n      var attName, attValue;\n      if (!this.currentNode || this.currentNode.children) {\n        throw new Error(\"att() can only be used immediately after an ele() call in callback mode\");\n      }\n      if (name != null) {\n        name = name.valueOf();\n      }\n      if (isObject(name)) {\n        for (attName in name) {\n          if (!hasProp.call(name, attName)) continue;\n          attValue = name[attName];\n          this.attribute(attName, attValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        if (!this.options.skipNullAttributes || (value != null)) {\n          this.currentNode.attributes[name] = new XMLAttribute(this, name, value);\n        }\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.text = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLText(this, value);\n      this.onData(this.writer.text(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.cdata = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLCData(this, value);\n      this.onData(this.writer.cdata(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.comment = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLComment(this, value);\n      this.onData(this.writer.comment(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.raw = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLRaw(this, value);\n      this.onData(this.writer.raw(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.instruction = function(target, value) {\n      var i, insTarget, insValue, len, node;\n      this.openCurrent();\n      if (target != null) {\n        target = target.valueOf();\n      }\n      if (value != null) {\n        value = value.valueOf();\n      }\n      if (Array.isArray(target)) {\n        for (i = 0, len = target.length; i < len; i++) {\n          insTarget = target[i];\n          this.instruction(insTarget);\n        }\n      } else if (isObject(target)) {\n        for (insTarget in target) {\n          if (!hasProp.call(target, insTarget)) continue;\n          insValue = target[insTarget];\n          this.instruction(insTarget, insValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        node = new XMLProcessingInstruction(this, target, value);\n        this.onData(this.writer.processingInstruction(node, this.currentLevel + 1));\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.declaration = function(version, encoding, standalone) {\n      var node;\n      this.openCurrent();\n      if (this.documentStarted) {\n        throw new Error(\"declaration() must be the first node\");\n      }\n      node = new XMLDeclaration(this, version, encoding, standalone);\n      this.onData(this.writer.declaration(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.doctype = function(root, pubID, sysID) {\n      this.openCurrent();\n      if (root == null) {\n        throw new Error(\"Missing root node name\");\n      }\n      if (this.root) {\n        throw new Error(\"dtd() must come before the root node\");\n      }\n      this.currentNode = new XMLDocType(this, pubID, sysID);\n      this.currentNode.rootNodeName = root;\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n      return this;\n    };\n\n    XMLDocumentCB.prototype.dtdElement = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDElement(this, name, value);\n      this.onData(this.writer.dtdElement(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.attList = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\n      this.onData(this.writer.dtdAttList(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.entity = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, false, name, value);\n      this.onData(this.writer.dtdEntity(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.pEntity = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, true, name, value);\n      this.onData(this.writer.dtdEntity(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.notation = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDNotation(this, name, value);\n      this.onData(this.writer.dtdNotation(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.up = function() {\n      if (this.currentLevel < 0) {\n        throw new Error(\"The document node has no parent\");\n      }\n      if (this.currentNode) {\n        if (this.currentNode.children) {\n          this.closeNode(this.currentNode);\n        } else {\n          this.openNode(this.currentNode);\n        }\n        this.currentNode = null;\n      } else {\n        this.closeNode(this.openTags[this.currentLevel]);\n      }\n      delete this.openTags[this.currentLevel];\n      this.currentLevel--;\n      return this;\n    };\n\n    XMLDocumentCB.prototype.end = function() {\n      while (this.currentLevel >= 0) {\n        this.up();\n      }\n      return this.onEnd();\n    };\n\n    XMLDocumentCB.prototype.openCurrent = function() {\n      if (this.currentNode) {\n        this.currentNode.children = true;\n        return this.openNode(this.currentNode);\n      }\n    };\n\n    XMLDocumentCB.prototype.openNode = function(node) {\n      if (!node.isOpen) {\n        if (!this.root && this.currentLevel === 0 && node instanceof XMLElement) {\n          this.root = node;\n        }\n        this.onData(this.writer.openNode(node, this.currentLevel));\n        return node.isOpen = true;\n      }\n    };\n\n    XMLDocumentCB.prototype.closeNode = function(node) {\n      if (!node.isClosed) {\n        this.onData(this.writer.closeNode(node, this.currentLevel));\n        return node.isClosed = true;\n      }\n    };\n\n    XMLDocumentCB.prototype.onData = function(chunk) {\n      this.documentStarted = true;\n      return this.onDataCallback(chunk);\n    };\n\n    XMLDocumentCB.prototype.onEnd = function() {\n      this.documentCompleted = true;\n      return this.onEndCallback();\n    };\n\n    XMLDocumentCB.prototype.ele = function() {\n      return this.element.apply(this, arguments);\n    };\n\n    XMLDocumentCB.prototype.nod = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.txt = function(value) {\n      return this.text(value);\n    };\n\n    XMLDocumentCB.prototype.dat = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLDocumentCB.prototype.com = function(value) {\n      return this.comment(value);\n    };\n\n    XMLDocumentCB.prototype.ins = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLDocumentCB.prototype.dec = function(version, encoding, standalone) {\n      return this.declaration(version, encoding, standalone);\n    };\n\n    XMLDocumentCB.prototype.dtd = function(root, pubID, sysID) {\n      return this.doctype(root, pubID, sysID);\n    };\n\n    XMLDocumentCB.prototype.e = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.n = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.t = function(value) {\n      return this.text(value);\n    };\n\n    XMLDocumentCB.prototype.d = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLDocumentCB.prototype.c = function(value) {\n      return this.comment(value);\n    };\n\n    XMLDocumentCB.prototype.r = function(value) {\n      return this.raw(value);\n    };\n\n    XMLDocumentCB.prototype.i = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLDocumentCB.prototype.att = function() {\n      if (this.currentNode && this.currentNode instanceof XMLDocType) {\n        return this.attList.apply(this, arguments);\n      } else {\n        return this.attribute.apply(this, arguments);\n      }\n    };\n\n    XMLDocumentCB.prototype.a = function() {\n      if (this.currentNode && this.currentNode instanceof XMLDocType) {\n        return this.attList.apply(this, arguments);\n      } else {\n        return this.attribute.apply(this, arguments);\n      }\n    };\n\n    XMLDocumentCB.prototype.ent = function(name, value) {\n      return this.entity(name, value);\n    };\n\n    XMLDocumentCB.prototype.pent = function(name, value) {\n      return this.pEntity(name, value);\n    };\n\n    XMLDocumentCB.prototype.not = function(name, value) {\n      return this.notation(name, value);\n    };\n\n    return XMLDocumentCB;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLAttribute, XMLElement, XMLNode, isFunction, isObject, ref,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction;\n\n  XMLNode = require('./XMLNode');\n\n  XMLAttribute = require('./XMLAttribute');\n\n  module.exports = XMLElement = (function(superClass) {\n    extend(XMLElement, superClass);\n\n    function XMLElement(parent, name, attributes) {\n      XMLElement.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing element name\");\n      }\n      this.name = this.stringify.eleName(name);\n      this.attributes = {};\n      if (attributes != null) {\n        this.attribute(attributes);\n      }\n      if (parent.isDocument) {\n        this.isRoot = true;\n        this.documentObject = parent;\n        parent.rootObject = this;\n      }\n    }\n\n    XMLElement.prototype.clone = function() {\n      var att, attName, clonedSelf, ref1;\n      clonedSelf = Object.create(this);\n      if (clonedSelf.isRoot) {\n        clonedSelf.documentObject = null;\n      }\n      clonedSelf.attributes = {};\n      ref1 = this.attributes;\n      for (attName in ref1) {\n        if (!hasProp.call(ref1, attName)) continue;\n        att = ref1[attName];\n        clonedSelf.attributes[attName] = att.clone();\n      }\n      clonedSelf.children = [];\n      this.children.forEach(function(child) {\n        var clonedChild;\n        clonedChild = child.clone();\n        clonedChild.parent = clonedSelf;\n        return clonedSelf.children.push(clonedChild);\n      });\n      return clonedSelf;\n    };\n\n    XMLElement.prototype.attribute = function(name, value) {\n      var attName, attValue;\n      if (name != null) {\n        name = name.valueOf();\n      }\n      if (isObject(name)) {\n        for (attName in name) {\n          if (!hasProp.call(name, attName)) continue;\n          attValue = name[attName];\n          this.attribute(attName, attValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        if (!this.options.skipNullAttributes || (value != null)) {\n          this.attributes[name] = new XMLAttribute(this, name, value);\n        }\n      }\n      return this;\n    };\n\n    XMLElement.prototype.removeAttribute = function(name) {\n      var attName, i, len;\n      if (name == null) {\n        throw new Error(\"Missing attribute name\");\n      }\n      name = name.valueOf();\n      if (Array.isArray(name)) {\n        for (i = 0, len = name.length; i < len; i++) {\n          attName = name[i];\n          delete this.attributes[attName];\n        }\n      } else {\n        delete this.attributes[name];\n      }\n      return this;\n    };\n\n    XMLElement.prototype.toString = function(options) {\n      return this.options.writer.set(options).element(this);\n    };\n\n    XMLElement.prototype.att = function(name, value) {\n      return this.attribute(name, value);\n    };\n\n    XMLElement.prototype.a = function(name, value) {\n      return this.attribute(name, value);\n    };\n\n    return XMLElement;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLCData, XMLComment, XMLDeclaration, XMLDocType, XMLElement, XMLNode, XMLProcessingInstruction, XMLRaw, XMLText, isEmpty, isFunction, isObject, ref,\n    hasProp = {}.hasOwnProperty;\n\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction, isEmpty = ref.isEmpty;\n\n  XMLElement = null;\n\n  XMLCData = null;\n\n  XMLComment = null;\n\n  XMLDeclaration = null;\n\n  XMLDocType = null;\n\n  XMLRaw = null;\n\n  XMLText = null;\n\n  XMLProcessingInstruction = null;\n\n  module.exports = XMLNode = (function() {\n    function XMLNode(parent) {\n      this.parent = parent;\n      if (this.parent) {\n        this.options = this.parent.options;\n        this.stringify = this.parent.stringify;\n      }\n      this.children = [];\n      if (!XMLElement) {\n        XMLElement = require('./XMLElement');\n        XMLCData = require('./XMLCData');\n        XMLComment = require('./XMLComment');\n        XMLDeclaration = require('./XMLDeclaration');\n        XMLDocType = require('./XMLDocType');\n        XMLRaw = require('./XMLRaw');\n        XMLText = require('./XMLText');\n        XMLProcessingInstruction = require('./XMLProcessingInstruction');\n      }\n    }\n\n    XMLNode.prototype.element = function(name, attributes, text) {\n      var childNode, item, j, k, key, lastChild, len, len1, ref1, val;\n      lastChild = null;\n      if (attributes == null) {\n        attributes = {};\n      }\n      attributes = attributes.valueOf();\n      if (!isObject(attributes)) {\n        ref1 = [attributes, text], text = ref1[0], attributes = ref1[1];\n      }\n      if (name != null) {\n        name = name.valueOf();\n      }\n      if (Array.isArray(name)) {\n        for (j = 0, len = name.length; j < len; j++) {\n          item = name[j];\n          lastChild = this.element(item);\n        }\n      } else if (isFunction(name)) {\n        lastChild = this.element(name.apply());\n      } else if (isObject(name)) {\n        for (key in name) {\n          if (!hasProp.call(name, key)) continue;\n          val = name[key];\n          if (isFunction(val)) {\n            val = val.apply();\n          }\n          if ((isObject(val)) && (isEmpty(val))) {\n            val = null;\n          }\n          if (!this.options.ignoreDecorators && this.stringify.convertAttKey && key.indexOf(this.stringify.convertAttKey) === 0) {\n            lastChild = this.attribute(key.substr(this.stringify.convertAttKey.length), val);\n          } else if (!this.options.separateArrayItems && Array.isArray(val)) {\n            for (k = 0, len1 = val.length; k < len1; k++) {\n              item = val[k];\n              childNode = {};\n              childNode[key] = item;\n              lastChild = this.element(childNode);\n            }\n          } else if (isObject(val)) {\n            lastChild = this.element(key);\n            lastChild.element(val);\n          } else {\n            lastChild = this.element(key, val);\n          }\n        }\n      } else {\n        if (!this.options.ignoreDecorators && this.stringify.convertTextKey && name.indexOf(this.stringify.convertTextKey) === 0) {\n          lastChild = this.text(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertCDataKey && name.indexOf(this.stringify.convertCDataKey) === 0) {\n          lastChild = this.cdata(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertCommentKey && name.indexOf(this.stringify.convertCommentKey) === 0) {\n          lastChild = this.comment(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertRawKey && name.indexOf(this.stringify.convertRawKey) === 0) {\n          lastChild = this.raw(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertPIKey && name.indexOf(this.stringify.convertPIKey) === 0) {\n          lastChild = this.instruction(name.substr(this.stringify.convertPIKey.length), text);\n        } else {\n          lastChild = this.node(name, attributes, text);\n        }\n      }\n      if (lastChild == null) {\n        throw new Error(\"Could not create any elements with: \" + name);\n      }\n      return lastChild;\n    };\n\n    XMLNode.prototype.insertBefore = function(name, attributes, text) {\n      var child, i, removed;\n      if (this.isRoot) {\n        throw new Error(\"Cannot insert elements at root level\");\n      }\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i);\n      child = this.parent.element(name, attributes, text);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return child;\n    };\n\n    XMLNode.prototype.insertAfter = function(name, attributes, text) {\n      var child, i, removed;\n      if (this.isRoot) {\n        throw new Error(\"Cannot insert elements at root level\");\n      }\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.element(name, attributes, text);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return child;\n    };\n\n    XMLNode.prototype.remove = function() {\n      var i, ref1;\n      if (this.isRoot) {\n        throw new Error(\"Cannot remove the root element\");\n      }\n      i = this.parent.children.indexOf(this);\n      [].splice.apply(this.parent.children, [i, i - i + 1].concat(ref1 = [])), ref1;\n      return this.parent;\n    };\n\n    XMLNode.prototype.node = function(name, attributes, text) {\n      var child, ref1;\n      if (name != null) {\n        name = name.valueOf();\n      }\n      attributes || (attributes = {});\n      attributes = attributes.valueOf();\n      if (!isObject(attributes)) {\n        ref1 = [attributes, text], text = ref1[0], attributes = ref1[1];\n      }\n      child = new XMLElement(this, name, attributes);\n      if (text != null) {\n        child.text(text);\n      }\n      this.children.push(child);\n      return child;\n    };\n\n    XMLNode.prototype.text = function(value) {\n      var child;\n      child = new XMLText(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.cdata = function(value) {\n      var child;\n      child = new XMLCData(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.comment = function(value) {\n      var child;\n      child = new XMLComment(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.commentBefore = function(value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i);\n      child = this.parent.comment(value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.commentAfter = function(value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.comment(value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.raw = function(value) {\n      var child;\n      child = new XMLRaw(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.instruction = function(target, value) {\n      var insTarget, insValue, instruction, j, len;\n      if (target != null) {\n        target = target.valueOf();\n      }\n      if (value != null) {\n        value = value.valueOf();\n      }\n      if (Array.isArray(target)) {\n        for (j = 0, len = target.length; j < len; j++) {\n          insTarget = target[j];\n          this.instruction(insTarget);\n        }\n      } else if (isObject(target)) {\n        for (insTarget in target) {\n          if (!hasProp.call(target, insTarget)) continue;\n          insValue = target[insTarget];\n          this.instruction(insTarget, insValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        instruction = new XMLProcessingInstruction(this, target, value);\n        this.children.push(instruction);\n      }\n      return this;\n    };\n\n    XMLNode.prototype.instructionBefore = function(target, value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i);\n      child = this.parent.instruction(target, value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.instructionAfter = function(target, value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.instruction(target, value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.declaration = function(version, encoding, standalone) {\n      var doc, xmldec;\n      doc = this.document();\n      xmldec = new XMLDeclaration(doc, version, encoding, standalone);\n      if (doc.children[0] instanceof XMLDeclaration) {\n        doc.children[0] = xmldec;\n      } else {\n        doc.children.unshift(xmldec);\n      }\n      return doc.root() || doc;\n    };\n\n    XMLNode.prototype.doctype = function(pubID, sysID) {\n      var child, doc, doctype, i, j, k, len, len1, ref1, ref2;\n      doc = this.document();\n      doctype = new XMLDocType(doc, pubID, sysID);\n      ref1 = doc.children;\n      for (i = j = 0, len = ref1.length; j < len; i = ++j) {\n        child = ref1[i];\n        if (child instanceof XMLDocType) {\n          doc.children[i] = doctype;\n          return doctype;\n        }\n      }\n      ref2 = doc.children;\n      for (i = k = 0, len1 = ref2.length; k < len1; i = ++k) {\n        child = ref2[i];\n        if (child.isRoot) {\n          doc.children.splice(i, 0, doctype);\n          return doctype;\n        }\n      }\n      doc.children.push(doctype);\n      return doctype;\n    };\n\n    XMLNode.prototype.up = function() {\n      if (this.isRoot) {\n        throw new Error(\"The root node has no parent. Use doc() if you need to get the document object.\");\n      }\n      return this.parent;\n    };\n\n    XMLNode.prototype.root = function() {\n      var node;\n      node = this;\n      while (node) {\n        if (node.isDocument) {\n          return node.rootObject;\n        } else if (node.isRoot) {\n          return node;\n        } else {\n          node = node.parent;\n        }\n      }\n    };\n\n    XMLNode.prototype.document = function() {\n      var node;\n      node = this;\n      while (node) {\n        if (node.isDocument) {\n          return node;\n        } else {\n          node = node.parent;\n        }\n      }\n    };\n\n    XMLNode.prototype.end = function(options) {\n      return this.document().end(options);\n    };\n\n    XMLNode.prototype.prev = function() {\n      var i;\n      i = this.parent.children.indexOf(this);\n      if (i < 1) {\n        throw new Error(\"Already at the first node\");\n      }\n      return this.parent.children[i - 1];\n    };\n\n    XMLNode.prototype.next = function() {\n      var i;\n      i = this.parent.children.indexOf(this);\n      if (i === -1 || i === this.parent.children.length - 1) {\n        throw new Error(\"Already at the last node\");\n      }\n      return this.parent.children[i + 1];\n    };\n\n    XMLNode.prototype.importDocument = function(doc) {\n      var clonedRoot;\n      clonedRoot = doc.root().clone();\n      clonedRoot.parent = this;\n      clonedRoot.isRoot = false;\n      this.children.push(clonedRoot);\n      return this;\n    };\n\n    XMLNode.prototype.ele = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLNode.prototype.nod = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLNode.prototype.txt = function(value) {\n      return this.text(value);\n    };\n\n    XMLNode.prototype.dat = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLNode.prototype.com = function(value) {\n      return this.comment(value);\n    };\n\n    XMLNode.prototype.ins = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLNode.prototype.doc = function() {\n      return this.document();\n    };\n\n    XMLNode.prototype.dec = function(version, encoding, standalone) {\n      return this.declaration(version, encoding, standalone);\n    };\n\n    XMLNode.prototype.dtd = function(pubID, sysID) {\n      return this.doctype(pubID, sysID);\n    };\n\n    XMLNode.prototype.e = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLNode.prototype.n = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLNode.prototype.t = function(value) {\n      return this.text(value);\n    };\n\n    XMLNode.prototype.d = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLNode.prototype.c = function(value) {\n      return this.comment(value);\n    };\n\n    XMLNode.prototype.r = function(value) {\n      return this.raw(value);\n    };\n\n    XMLNode.prototype.i = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLNode.prototype.u = function() {\n      return this.up();\n    };\n\n    XMLNode.prototype.importXMLBuilder = function(doc) {\n      return this.importDocument(doc);\n    };\n\n    return XMLNode;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLNode, XMLProcessingInstruction,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLProcessingInstruction = (function(superClass) {\n    extend(XMLProcessingInstruction, superClass);\n\n    function XMLProcessingInstruction(parent, target, value) {\n      XMLProcessingInstruction.__super__.constructor.call(this, parent);\n      if (target == null) {\n        throw new Error(\"Missing instruction target\");\n      }\n      this.target = this.stringify.insTarget(target);\n      if (value) {\n        this.value = this.stringify.insValue(value);\n      }\n    }\n\n    XMLProcessingInstruction.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLProcessingInstruction.prototype.toString = function(options) {\n      return this.options.writer.set(options).processingInstruction(this);\n    };\n\n    return XMLProcessingInstruction;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLNode, XMLRaw,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLRaw = (function(superClass) {\n    extend(XMLRaw, superClass);\n\n    function XMLRaw(parent, text) {\n      XMLRaw.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing raw text\");\n      }\n      this.value = this.stringify.raw(text);\n    }\n\n    XMLRaw.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLRaw.prototype.toString = function(options) {\n      return this.options.writer.set(options).raw(this);\n    };\n\n    return XMLRaw;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLElement, XMLProcessingInstruction, XMLRaw, XMLStreamWriter, XMLText, XMLWriterBase,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLDeclaration = require('./XMLDeclaration');\n\n  XMLDocType = require('./XMLDocType');\n\n  XMLCData = require('./XMLCData');\n\n  XMLComment = require('./XMLComment');\n\n  XMLElement = require('./XMLElement');\n\n  XMLRaw = require('./XMLRaw');\n\n  XMLText = require('./XMLText');\n\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  XMLWriterBase = require('./XMLWriterBase');\n\n  module.exports = XMLStreamWriter = (function(superClass) {\n    extend(XMLStreamWriter, superClass);\n\n    function XMLStreamWriter(stream, options) {\n      XMLStreamWriter.__super__.constructor.call(this, options);\n      this.stream = stream;\n    }\n\n    XMLStreamWriter.prototype.document = function(doc) {\n      var child, i, j, len, len1, ref, ref1, results;\n      ref = doc.children;\n      for (i = 0, len = ref.length; i < len; i++) {\n        child = ref[i];\n        child.isLastRootNode = false;\n      }\n      doc.children[doc.children.length - 1].isLastRootNode = true;\n      ref1 = doc.children;\n      results = [];\n      for (j = 0, len1 = ref1.length; j < len1; j++) {\n        child = ref1[j];\n        switch (false) {\n          case !(child instanceof XMLDeclaration):\n            results.push(this.declaration(child));\n            break;\n          case !(child instanceof XMLDocType):\n            results.push(this.docType(child));\n            break;\n          case !(child instanceof XMLComment):\n            results.push(this.comment(child));\n            break;\n          case !(child instanceof XMLProcessingInstruction):\n            results.push(this.processingInstruction(child));\n            break;\n          default:\n            results.push(this.element(child));\n        }\n      }\n      return results;\n    };\n\n    XMLStreamWriter.prototype.attribute = function(att) {\n      return this.stream.write(' ' + att.name + '=\"' + att.value + '\"');\n    };\n\n    XMLStreamWriter.prototype.cdata = function(node, level) {\n      return this.stream.write(this.space(level) + '<![CDATA[' + node.text + ']]>' + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.comment = function(node, level) {\n      return this.stream.write(this.space(level) + '<!-- ' + node.text + ' -->' + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.declaration = function(node, level) {\n      this.stream.write(this.space(level));\n      this.stream.write('<?xml version=\"' + node.version + '\"');\n      if (node.encoding != null) {\n        this.stream.write(' encoding=\"' + node.encoding + '\"');\n      }\n      if (node.standalone != null) {\n        this.stream.write(' standalone=\"' + node.standalone + '\"');\n      }\n      this.stream.write(this.spacebeforeslash + '?>');\n      return this.stream.write(this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.docType = function(node, level) {\n      var child, i, len, ref;\n      level || (level = 0);\n      this.stream.write(this.space(level));\n      this.stream.write('<!DOCTYPE ' + node.root().name);\n      if (node.pubID && node.sysID) {\n        this.stream.write(' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"');\n      } else if (node.sysID) {\n        this.stream.write(' SYSTEM \"' + node.sysID + '\"');\n      }\n      if (node.children.length > 0) {\n        this.stream.write(' [');\n        this.stream.write(this.endline(node));\n        ref = node.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          switch (false) {\n            case !(child instanceof XMLDTDAttList):\n              this.dtdAttList(child, level + 1);\n              break;\n            case !(child instanceof XMLDTDElement):\n              this.dtdElement(child, level + 1);\n              break;\n            case !(child instanceof XMLDTDEntity):\n              this.dtdEntity(child, level + 1);\n              break;\n            case !(child instanceof XMLDTDNotation):\n              this.dtdNotation(child, level + 1);\n              break;\n            case !(child instanceof XMLCData):\n              this.cdata(child, level + 1);\n              break;\n            case !(child instanceof XMLComment):\n              this.comment(child, level + 1);\n              break;\n            case !(child instanceof XMLProcessingInstruction):\n              this.processingInstruction(child, level + 1);\n              break;\n            default:\n              throw new Error(\"Unknown DTD node type: \" + child.constructor.name);\n          }\n        }\n        this.stream.write(']');\n      }\n      this.stream.write(this.spacebeforeslash + '>');\n      return this.stream.write(this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.element = function(node, level) {\n      var att, child, i, len, name, ref, ref1, space;\n      level || (level = 0);\n      space = this.space(level);\n      this.stream.write(space + '<' + node.name);\n      ref = node.attributes;\n      for (name in ref) {\n        if (!hasProp.call(ref, name)) continue;\n        att = ref[name];\n        this.attribute(att);\n      }\n      if (node.children.length === 0 || node.children.every(function(e) {\n        return e.value === '';\n      })) {\n        if (this.allowEmpty) {\n          this.stream.write('></' + node.name + '>');\n        } else {\n          this.stream.write(this.spacebeforeslash + '/>');\n        }\n      } else if (this.pretty && node.children.length === 1 && (node.children[0].value != null)) {\n        this.stream.write('>');\n        this.stream.write(node.children[0].value);\n        this.stream.write('</' + node.name + '>');\n      } else {\n        this.stream.write('>' + this.newline);\n        ref1 = node.children;\n        for (i = 0, len = ref1.length; i < len; i++) {\n          child = ref1[i];\n          switch (false) {\n            case !(child instanceof XMLCData):\n              this.cdata(child, level + 1);\n              break;\n            case !(child instanceof XMLComment):\n              this.comment(child, level + 1);\n              break;\n            case !(child instanceof XMLElement):\n              this.element(child, level + 1);\n              break;\n            case !(child instanceof XMLRaw):\n              this.raw(child, level + 1);\n              break;\n            case !(child instanceof XMLText):\n              this.text(child, level + 1);\n              break;\n            case !(child instanceof XMLProcessingInstruction):\n              this.processingInstruction(child, level + 1);\n              break;\n            default:\n              throw new Error(\"Unknown XML node type: \" + child.constructor.name);\n          }\n        }\n        this.stream.write(space + '</' + node.name + '>');\n      }\n      return this.stream.write(this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.processingInstruction = function(node, level) {\n      this.stream.write(this.space(level) + '<?' + node.target);\n      if (node.value) {\n        this.stream.write(' ' + node.value);\n      }\n      return this.stream.write(this.spacebeforeslash + '?>' + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.raw = function(node, level) {\n      return this.stream.write(this.space(level) + node.value + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.text = function(node, level) {\n      return this.stream.write(this.space(level) + node.value + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.dtdAttList = function(node, level) {\n      this.stream.write(this.space(level) + '<!ATTLIST ' + node.elementName + ' ' + node.attributeName + ' ' + node.attributeType);\n      if (node.defaultValueType !== '#DEFAULT') {\n        this.stream.write(' ' + node.defaultValueType);\n      }\n      if (node.defaultValue) {\n        this.stream.write(' \"' + node.defaultValue + '\"');\n      }\n      return this.stream.write(this.spacebeforeslash + '>' + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.dtdElement = function(node, level) {\n      this.stream.write(this.space(level) + '<!ELEMENT ' + node.name + ' ' + node.value);\n      return this.stream.write(this.spacebeforeslash + '>' + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.dtdEntity = function(node, level) {\n      this.stream.write(this.space(level) + '<!ENTITY');\n      if (node.pe) {\n        this.stream.write(' %');\n      }\n      this.stream.write(' ' + node.name);\n      if (node.value) {\n        this.stream.write(' \"' + node.value + '\"');\n      } else {\n        if (node.pubID && node.sysID) {\n          this.stream.write(' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"');\n        } else if (node.sysID) {\n          this.stream.write(' SYSTEM \"' + node.sysID + '\"');\n        }\n        if (node.nData) {\n          this.stream.write(' NDATA ' + node.nData);\n        }\n      }\n      return this.stream.write(this.spacebeforeslash + '>' + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.dtdNotation = function(node, level) {\n      this.stream.write(this.space(level) + '<!NOTATION ' + node.name);\n      if (node.pubID && node.sysID) {\n        this.stream.write(' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"');\n      } else if (node.pubID) {\n        this.stream.write(' PUBLIC \"' + node.pubID + '\"');\n      } else if (node.sysID) {\n        this.stream.write(' SYSTEM \"' + node.sysID + '\"');\n      }\n      return this.stream.write(this.spacebeforeslash + '>' + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.endline = function(node) {\n      if (!node.isLastRootNode) {\n        return this.newline;\n      } else {\n        return '';\n      }\n    };\n\n    return XMLStreamWriter;\n\n  })(XMLWriterBase);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLElement, XMLProcessingInstruction, XMLRaw, XMLStringWriter, XMLText, XMLWriterBase,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLDeclaration = require('./XMLDeclaration');\n\n  XMLDocType = require('./XMLDocType');\n\n  XMLCData = require('./XMLCData');\n\n  XMLComment = require('./XMLComment');\n\n  XMLElement = require('./XMLElement');\n\n  XMLRaw = require('./XMLRaw');\n\n  XMLText = require('./XMLText');\n\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  XMLWriterBase = require('./XMLWriterBase');\n\n  module.exports = XMLStringWriter = (function(superClass) {\n    extend(XMLStringWriter, superClass);\n\n    function XMLStringWriter(options) {\n      XMLStringWriter.__super__.constructor.call(this, options);\n    }\n\n    XMLStringWriter.prototype.document = function(doc) {\n      var child, i, len, r, ref;\n      this.textispresent = false;\n      r = '';\n      ref = doc.children;\n      for (i = 0, len = ref.length; i < len; i++) {\n        child = ref[i];\n        r += (function() {\n          switch (false) {\n            case !(child instanceof XMLDeclaration):\n              return this.declaration(child);\n            case !(child instanceof XMLDocType):\n              return this.docType(child);\n            case !(child instanceof XMLComment):\n              return this.comment(child);\n            case !(child instanceof XMLProcessingInstruction):\n              return this.processingInstruction(child);\n            default:\n              return this.element(child, 0);\n          }\n        }).call(this);\n      }\n      if (this.pretty && r.slice(-this.newline.length) === this.newline) {\n        r = r.slice(0, -this.newline.length);\n      }\n      return r;\n    };\n\n    XMLStringWriter.prototype.attribute = function(att) {\n      return ' ' + att.name + '=\"' + att.value + '\"';\n    };\n\n    XMLStringWriter.prototype.cdata = function(node, level) {\n      return this.space(level) + '<![CDATA[' + node.text + ']]>' + this.newline;\n    };\n\n    XMLStringWriter.prototype.comment = function(node, level) {\n      return this.space(level) + '<!-- ' + node.text + ' -->' + this.newline;\n    };\n\n    XMLStringWriter.prototype.declaration = function(node, level) {\n      var r;\n      r = this.space(level);\n      r += '<?xml version=\"' + node.version + '\"';\n      if (node.encoding != null) {\n        r += ' encoding=\"' + node.encoding + '\"';\n      }\n      if (node.standalone != null) {\n        r += ' standalone=\"' + node.standalone + '\"';\n      }\n      r += this.spacebeforeslash + '?>';\n      r += this.newline;\n      return r;\n    };\n\n    XMLStringWriter.prototype.docType = function(node, level) {\n      var child, i, len, r, ref;\n      level || (level = 0);\n      r = this.space(level);\n      r += '<!DOCTYPE ' + node.root().name;\n      if (node.pubID && node.sysID) {\n        r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n      } else if (node.sysID) {\n        r += ' SYSTEM \"' + node.sysID + '\"';\n      }\n      if (node.children.length > 0) {\n        r += ' [';\n        r += this.newline;\n        ref = node.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          r += (function() {\n            switch (false) {\n              case !(child instanceof XMLDTDAttList):\n                return this.dtdAttList(child, level + 1);\n              case !(child instanceof XMLDTDElement):\n                return this.dtdElement(child, level + 1);\n              case !(child instanceof XMLDTDEntity):\n                return this.dtdEntity(child, level + 1);\n              case !(child instanceof XMLDTDNotation):\n                return this.dtdNotation(child, level + 1);\n              case !(child instanceof XMLCData):\n                return this.cdata(child, level + 1);\n              case !(child instanceof XMLComment):\n                return this.comment(child, level + 1);\n              case !(child instanceof XMLProcessingInstruction):\n                return this.processingInstruction(child, level + 1);\n              default:\n                throw new Error(\"Unknown DTD node type: \" + child.constructor.name);\n            }\n          }).call(this);\n        }\n        r += ']';\n      }\n      r += this.spacebeforeslash + '>';\n      r += this.newline;\n      return r;\n    };\n\n    XMLStringWriter.prototype.element = function(node, level) {\n      var att, child, i, j, len, len1, name, r, ref, ref1, ref2, space, textispresentwasset;\n      level || (level = 0);\n      textispresentwasset = false;\n      if (this.textispresent) {\n        this.newline = '';\n        this.pretty = false;\n      } else {\n        this.newline = this.newlinedefault;\n        this.pretty = this.prettydefault;\n      }\n      space = this.space(level);\n      r = '';\n      r += space + '<' + node.name;\n      ref = node.attributes;\n      for (name in ref) {\n        if (!hasProp.call(ref, name)) continue;\n        att = ref[name];\n        r += this.attribute(att);\n      }\n      if (node.children.length === 0 || node.children.every(function(e) {\n        return e.value === '';\n      })) {\n        if (this.allowEmpty) {\n          r += '></' + node.name + '>' + this.newline;\n        } else {\n          r += this.spacebeforeslash + '/>' + this.newline;\n        }\n      } else if (this.pretty && node.children.length === 1 && (node.children[0].value != null)) {\n        r += '>';\n        r += node.children[0].value;\n        r += '</' + node.name + '>' + this.newline;\n      } else {\n        if (this.dontprettytextnodes) {\n          ref1 = node.children;\n          for (i = 0, len = ref1.length; i < len; i++) {\n            child = ref1[i];\n            if (child.value != null) {\n              this.textispresent++;\n              textispresentwasset = true;\n              break;\n            }\n          }\n        }\n        if (this.textispresent) {\n          this.newline = '';\n          this.pretty = false;\n          space = this.space(level);\n        }\n        r += '>' + this.newline;\n        ref2 = node.children;\n        for (j = 0, len1 = ref2.length; j < len1; j++) {\n          child = ref2[j];\n          r += (function() {\n            switch (false) {\n              case !(child instanceof XMLCData):\n                return this.cdata(child, level + 1);\n              case !(child instanceof XMLComment):\n                return this.comment(child, level + 1);\n              case !(child instanceof XMLElement):\n                return this.element(child, level + 1);\n              case !(child instanceof XMLRaw):\n                return this.raw(child, level + 1);\n              case !(child instanceof XMLText):\n                return this.text(child, level + 1);\n              case !(child instanceof XMLProcessingInstruction):\n                return this.processingInstruction(child, level + 1);\n              default:\n                throw new Error(\"Unknown XML node type: \" + child.constructor.name);\n            }\n          }).call(this);\n        }\n        if (textispresentwasset) {\n          this.textispresent--;\n        }\n        if (!this.textispresent) {\n          this.newline = this.newlinedefault;\n          this.pretty = this.prettydefault;\n        }\n        r += space + '</' + node.name + '>' + this.newline;\n      }\n      return r;\n    };\n\n    XMLStringWriter.prototype.processingInstruction = function(node, level) {\n      var r;\n      r = this.space(level) + '<?' + node.target;\n      if (node.value) {\n        r += ' ' + node.value;\n      }\n      r += this.spacebeforeslash + '?>' + this.newline;\n      return r;\n    };\n\n    XMLStringWriter.prototype.raw = function(node, level) {\n      return this.space(level) + node.value + this.newline;\n    };\n\n    XMLStringWriter.prototype.text = function(node, level) {\n      return this.space(level) + node.value + this.newline;\n    };\n\n    XMLStringWriter.prototype.dtdAttList = function(node, level) {\n      var r;\n      r = this.space(level) + '<!ATTLIST ' + node.elementName + ' ' + node.attributeName + ' ' + node.attributeType;\n      if (node.defaultValueType !== '#DEFAULT') {\n        r += ' ' + node.defaultValueType;\n      }\n      if (node.defaultValue) {\n        r += ' \"' + node.defaultValue + '\"';\n      }\n      r += this.spacebeforeslash + '>' + this.newline;\n      return r;\n    };\n\n    XMLStringWriter.prototype.dtdElement = function(node, level) {\n      return this.space(level) + '<!ELEMENT ' + node.name + ' ' + node.value + this.spacebeforeslash + '>' + this.newline;\n    };\n\n    XMLStringWriter.prototype.dtdEntity = function(node, level) {\n      var r;\n      r = this.space(level) + '<!ENTITY';\n      if (node.pe) {\n        r += ' %';\n      }\n      r += ' ' + node.name;\n      if (node.value) {\n        r += ' \"' + node.value + '\"';\n      } else {\n        if (node.pubID && node.sysID) {\n          r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n        } else if (node.sysID) {\n          r += ' SYSTEM \"' + node.sysID + '\"';\n        }\n        if (node.nData) {\n          r += ' NDATA ' + node.nData;\n        }\n      }\n      r += this.spacebeforeslash + '>' + this.newline;\n      return r;\n    };\n\n    XMLStringWriter.prototype.dtdNotation = function(node, level) {\n      var r;\n      r = this.space(level) + '<!NOTATION ' + node.name;\n      if (node.pubID && node.sysID) {\n        r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n      } else if (node.pubID) {\n        r += ' PUBLIC \"' + node.pubID + '\"';\n      } else if (node.sysID) {\n        r += ' SYSTEM \"' + node.sysID + '\"';\n      }\n      r += this.spacebeforeslash + '>' + this.newline;\n      return r;\n    };\n\n    XMLStringWriter.prototype.openNode = function(node, level) {\n      var att, name, r, ref;\n      level || (level = 0);\n      if (node instanceof XMLElement) {\n        r = this.space(level) + '<' + node.name;\n        ref = node.attributes;\n        for (name in ref) {\n          if (!hasProp.call(ref, name)) continue;\n          att = ref[name];\n          r += this.attribute(att);\n        }\n        r += (node.children ? '>' : '/>') + this.newline;\n        return r;\n      } else {\n        r = this.space(level) + '<!DOCTYPE ' + node.rootNodeName;\n        if (node.pubID && node.sysID) {\n          r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n        } else if (node.sysID) {\n          r += ' SYSTEM \"' + node.sysID + '\"';\n        }\n        r += (node.children ? ' [' : '>') + this.newline;\n        return r;\n      }\n    };\n\n    XMLStringWriter.prototype.closeNode = function(node, level) {\n      level || (level = 0);\n      switch (false) {\n        case !(node instanceof XMLElement):\n          return this.space(level) + '</' + node.name + '>' + this.newline;\n        case !(node instanceof XMLDocType):\n          return this.space(level) + ']>' + this.newline;\n      }\n    };\n\n    return XMLStringWriter;\n\n  })(XMLWriterBase);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLStringifier,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    hasProp = {}.hasOwnProperty;\n\n  module.exports = XMLStringifier = (function() {\n    function XMLStringifier(options) {\n      this.assertLegalChar = bind(this.assertLegalChar, this);\n      var key, ref, value;\n      options || (options = {});\n      this.noDoubleEncoding = options.noDoubleEncoding;\n      ref = options.stringify || {};\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this[key] = value;\n      }\n    }\n\n    XMLStringifier.prototype.eleName = function(val) {\n      val = '' + val || '';\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.eleText = function(val) {\n      val = '' + val || '';\n      return this.assertLegalChar(this.elEscape(val));\n    };\n\n    XMLStringifier.prototype.cdata = function(val) {\n      val = '' + val || '';\n      val = val.replace(']]>', ']]]]><![CDATA[>');\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.comment = function(val) {\n      val = '' + val || '';\n      if (val.match(/--/)) {\n        throw new Error(\"Comment text cannot contain double-hypen: \" + val);\n      }\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.raw = function(val) {\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.attName = function(val) {\n      return val = '' + val || '';\n    };\n\n    XMLStringifier.prototype.attValue = function(val) {\n      val = '' + val || '';\n      return this.attEscape(val);\n    };\n\n    XMLStringifier.prototype.insTarget = function(val) {\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.insValue = function(val) {\n      val = '' + val || '';\n      if (val.match(/\\?>/)) {\n        throw new Error(\"Invalid processing instruction value: \" + val);\n      }\n      return val;\n    };\n\n    XMLStringifier.prototype.xmlVersion = function(val) {\n      val = '' + val || '';\n      if (!val.match(/1\\.[0-9]+/)) {\n        throw new Error(\"Invalid version number: \" + val);\n      }\n      return val;\n    };\n\n    XMLStringifier.prototype.xmlEncoding = function(val) {\n      val = '' + val || '';\n      if (!val.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/)) {\n        throw new Error(\"Invalid encoding: \" + val);\n      }\n      return val;\n    };\n\n    XMLStringifier.prototype.xmlStandalone = function(val) {\n      if (val) {\n        return \"yes\";\n      } else {\n        return \"no\";\n      }\n    };\n\n    XMLStringifier.prototype.dtdPubID = function(val) {\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.dtdSysID = function(val) {\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.dtdElementValue = function(val) {\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.dtdAttType = function(val) {\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.dtdAttDefault = function(val) {\n      if (val != null) {\n        return '' + val || '';\n      } else {\n        return val;\n      }\n    };\n\n    XMLStringifier.prototype.dtdEntityValue = function(val) {\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.dtdNData = function(val) {\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.convertAttKey = '@';\n\n    XMLStringifier.prototype.convertPIKey = '?';\n\n    XMLStringifier.prototype.convertTextKey = '#text';\n\n    XMLStringifier.prototype.convertCDataKey = '#cdata';\n\n    XMLStringifier.prototype.convertCommentKey = '#comment';\n\n    XMLStringifier.prototype.convertRawKey = '#raw';\n\n    XMLStringifier.prototype.assertLegalChar = function(str) {\n      var res;\n      res = str.match(/[\\0\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/);\n      if (res) {\n        throw new Error(\"Invalid character in string: \" + str + \" at index \" + res.index);\n      }\n      return str;\n    };\n\n    XMLStringifier.prototype.elEscape = function(str) {\n      var ampregex;\n      ampregex = this.noDoubleEncoding ? /(?!&\\S+;)&/g : /&/g;\n      return str.replace(ampregex, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\r/g, '&#xD;');\n    };\n\n    XMLStringifier.prototype.attEscape = function(str) {\n      var ampregex;\n      ampregex = this.noDoubleEncoding ? /(?!&\\S+;)&/g : /&/g;\n      return str.replace(ampregex, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;').replace(/\\t/g, '&#x9;').replace(/\\n/g, '&#xA;').replace(/\\r/g, '&#xD;');\n    };\n\n    return XMLStringifier;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLNode, XMLText,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLText = (function(superClass) {\n    extend(XMLText, superClass);\n\n    function XMLText(parent, text) {\n      XMLText.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing element text\");\n      }\n      this.value = this.stringify.eleText(text);\n    }\n\n    XMLText.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLText.prototype.toString = function(options) {\n      return this.options.writer.set(options).text(this);\n    };\n\n    return XMLText;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLWriterBase,\n    hasProp = {}.hasOwnProperty;\n\n  module.exports = XMLWriterBase = (function() {\n    function XMLWriterBase(options) {\n      var key, ref, ref1, ref2, ref3, ref4, ref5, ref6, value;\n      options || (options = {});\n      this.pretty = options.pretty || false;\n      this.allowEmpty = (ref = options.allowEmpty) != null ? ref : false;\n      if (this.pretty) {\n        this.indent = (ref1 = options.indent) != null ? ref1 : '  ';\n        this.newline = (ref2 = options.newline) != null ? ref2 : '\\n';\n        this.offset = (ref3 = options.offset) != null ? ref3 : 0;\n        this.dontprettytextnodes = (ref4 = options.dontprettytextnodes) != null ? ref4 : 0;\n      } else {\n        this.indent = '';\n        this.newline = '';\n        this.offset = 0;\n        this.dontprettytextnodes = 0;\n      }\n      this.spacebeforeslash = (ref5 = options.spacebeforeslash) != null ? ref5 : '';\n      if (this.spacebeforeslash === true) {\n        this.spacebeforeslash = ' ';\n      }\n      this.newlinedefault = this.newline;\n      this.prettydefault = this.pretty;\n      ref6 = options.writer || {};\n      for (key in ref6) {\n        if (!hasProp.call(ref6, key)) continue;\n        value = ref6[key];\n        this[key] = value;\n      }\n    }\n\n    XMLWriterBase.prototype.set = function(options) {\n      var key, ref, value;\n      options || (options = {});\n      if (\"pretty\" in options) {\n        this.pretty = options.pretty;\n      }\n      if (\"allowEmpty\" in options) {\n        this.allowEmpty = options.allowEmpty;\n      }\n      if (this.pretty) {\n        this.indent = \"indent\" in options ? options.indent : '  ';\n        this.newline = \"newline\" in options ? options.newline : '\\n';\n        this.offset = \"offset\" in options ? options.offset : 0;\n        this.dontprettytextnodes = \"dontprettytextnodes\" in options ? options.dontprettytextnodes : 0;\n      } else {\n        this.indent = '';\n        this.newline = '';\n        this.offset = 0;\n        this.dontprettytextnodes = 0;\n      }\n      this.spacebeforeslash = \"spacebeforeslash\" in options ? options.spacebeforeslash : '';\n      if (this.spacebeforeslash === true) {\n        this.spacebeforeslash = ' ';\n      }\n      this.newlinedefault = this.newline;\n      this.prettydefault = this.pretty;\n      ref = options.writer || {};\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this[key] = value;\n      }\n      return this;\n    };\n\n    XMLWriterBase.prototype.space = function(level) {\n      var indent;\n      if (this.pretty) {\n        indent = (level || 0) + this.offset + 1;\n        if (indent > 0) {\n          return new Array(indent).join(this.indent);\n        } else {\n          return '';\n        }\n      } else {\n        return '';\n      }\n    };\n\n    return XMLWriterBase;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDocument, XMLDocumentCB, XMLStreamWriter, XMLStringWriter, assign, isFunction, ref;\n\n  ref = require('./Utility'), assign = ref.assign, isFunction = ref.isFunction;\n\n  XMLDocument = require('./XMLDocument');\n\n  XMLDocumentCB = require('./XMLDocumentCB');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  XMLStreamWriter = require('./XMLStreamWriter');\n\n  module.exports.create = function(name, xmldec, doctype, options) {\n    var doc, root;\n    if (name == null) {\n      throw new Error(\"Root element needs a name\");\n    }\n    options = assign({}, xmldec, doctype, options);\n    doc = new XMLDocument(options);\n    root = doc.element(name);\n    if (!options.headless) {\n      doc.declaration(options);\n      if ((options.pubID != null) || (options.sysID != null)) {\n        doc.doctype(options);\n      }\n    }\n    return root;\n  };\n\n  module.exports.begin = function(options, onData, onEnd) {\n    var ref1;\n    if (isFunction(options)) {\n      ref1 = [options, onData], onData = ref1[0], onEnd = ref1[1];\n      options = {};\n    }\n    if (onData) {\n      return new XMLDocumentCB(options, onData, onEnd);\n    } else {\n      return new XMLDocument(options);\n    }\n  };\n\n  module.exports.stringWriter = function(options) {\n    return new XMLStringWriter(options);\n  };\n\n  module.exports.streamWriter = function(stream, options) {\n    return new XMLStreamWriter(stream, options);\n  };\n\n}).call(this);\n","module.exports = require(\"buffer\");;","module.exports = require(\"child_process\");;","module.exports = require(\"crypto\");;","module.exports = require(\"dgram\");;","module.exports = require(\"domain\");;","module.exports = require(\"events\");;","module.exports = require(\"fs\");;","module.exports = require(\"http\");;","module.exports = require(\"https\");;","module.exports = require(\"os\");;","module.exports = require(\"path\");;","module.exports = require(\"querystring\");;","module.exports = require(\"stream\");;","module.exports = require(\"string_decoder\");;","module.exports = require(\"timers\");;","module.exports = require(\"url\");;","module.exports = require(\"util\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(5997);\n"],"sourceRoot":""}