{"version":3,"sources":["webpack://serverless-upload/./node_modules/async/dist/async.mjs","webpack://serverless-upload/./node_modules/aws-sdk/clients/cognitoidentity.js","webpack://serverless-upload/./node_modules/aws-sdk/clients/dynamodb.js","webpack://serverless-upload/./node_modules/aws-sdk/clients/s3.js","webpack://serverless-upload/./node_modules/aws-sdk/clients/sns.js","webpack://serverless-upload/./node_modules/aws-sdk/clients/sts.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/api_loader.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/config.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/config_regional_endpoint.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/core.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/chainable_temporary_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/cognito_identity_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/credential_provider_chain.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/ec2_metadata_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/ecs_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/environment_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/file_system_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/process_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/remote_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/saml_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/shared_ini_file_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/temporary_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/token_file_web_identity_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/credentials/web_identity_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/discover_endpoint.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/dynamodb/converter.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/dynamodb/document_client.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/dynamodb/numberValue.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/dynamodb/set.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/dynamodb/translator.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/dynamodb/types.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/buffered-create-event-stream.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/event-message-chunker-stream.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/event-message-chunker.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/event-message-unmarshaller-stream.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/int64.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/parse-event.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/parse-message.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/split-message.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event-stream/streaming-create-event-stream.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/event_listeners.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/http.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/http/node.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/json/builder.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/json/parser.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/metadata_service.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/model/api.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/model/collection.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/model/operation.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/model/paginator.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/model/resource_waiter.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/model/shape.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/node_loader.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/param_validator.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/protocol/helpers.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/protocol/json.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/protocol/query.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/protocol/rest.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/protocol/rest_json.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/protocol/rest_xml.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/publisher/configuration.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/publisher/index.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/query/query_param_serializer.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/realclock/nodeClock.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/region_config.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/request.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/resource_waiter.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/response.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/s3/managed_upload.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/sequential_executor.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/service.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/services/dynamodb.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/services/s3.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/services/s3util.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/services/sts.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/shared-ini/index.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/shared-ini/ini-loader.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/signers/presign.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/signers/request_signer.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/signers/s3.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/signers/v2.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/signers/v3.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/signers/v3https.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/signers/v4.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/signers/v4_credentials.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/state_machine.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/util.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/xml/builder.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/xml/escape-attribute.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/xml/escape-element.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/xml/node_parser.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/xml/xml-node.js","webpack://serverless-upload/./node_modules/aws-sdk/lib/xml/xml-text.js","webpack://serverless-upload/./node_modules/aws-sdk/vendor/endpoint-cache/index.js","webpack://serverless-upload/./node_modules/aws-sdk/vendor/endpoint-cache/utils/LRU.js","webpack://serverless-upload/./node_modules/fluent-ffmpeg/index.js","webpack://serverless-upload/./node_modules/fluent-ffmpeg/lib/capabilities.js","webpack://serverless-upload/./node_modules/fluent-ffmpeg/lib/ffprobe.js","webpack://serverless-upload/./node_modules/fluent-ffmpeg/lib/fluent-ffmpeg.js","webpack://serverless-upload/./node_modules/fluent-ffmpeg/lib/options/audio.js","webpack://serverless-upload/./node_modules/fluent-ffmpeg/lib/options/custom.js","webpack://serverless-upload/./node_modules/fluent-ffmpeg/lib/options/inputs.js","webpack://serverless-upload/./node_modules/fluent-ffmpeg/lib/options/misc.js","webpack://serverless-upload/./node_modules/fluent-ffmpeg/lib/options/output.js","webpack://serverless-upload/./node_modules/fluent-ffmpeg/lib/options/video.js","webpack://serverless-upload/./node_modules/fluent-ffmpeg/lib/options/videosize.js","webpack://serverless-upload/./node_modules/fluent-ffmpeg/lib/options|sync","webpack://serverless-upload/./node_modules/fluent-ffmpeg/lib/processor.js","webpack://serverless-upload/./node_modules/fluent-ffmpeg/lib/recipes.js","webpack://serverless-upload/./node_modules/fluent-ffmpeg/lib/utils.js","webpack://serverless-upload/./node_modules/fluent-ffmpeg/node_modules/which/which.js","webpack://serverless-upload/./node_modules/isexe/index.js","webpack://serverless-upload/./node_modules/isexe/mode.js","webpack://serverless-upload/./node_modules/isexe/windows.js","webpack://serverless-upload/./node_modules/jmespath/jmespath.js","webpack://serverless-upload/./node_modules/sax/lib/sax.js","webpack://serverless-upload/./functions/transcoder/app.ts","webpack://serverless-upload/./node_modules/uuid/index.js","webpack://serverless-upload/./node_modules/uuid/lib/bytesToUuid.js","webpack://serverless-upload/./node_modules/uuid/lib/rng.js","webpack://serverless-upload/./node_modules/uuid/v1.js","webpack://serverless-upload/./node_modules/uuid/v4.js","webpack://serverless-upload/./node_modules/xml2js/lib/bom.js","webpack://serverless-upload/./node_modules/xml2js/lib/builder.js","webpack://serverless-upload/./node_modules/xml2js/lib/defaults.js","webpack://serverless-upload/./node_modules/xml2js/lib/parser.js","webpack://serverless-upload/./node_modules/xml2js/lib/processors.js","webpack://serverless-upload/./node_modules/xml2js/lib/xml2js.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/Utility.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLAttribute.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLCData.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLComment.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLDTDAttList.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLDTDElement.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLDTDEntity.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLDTDNotation.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLDeclaration.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLDocType.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLDocument.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLDocumentCB.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLElement.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLNode.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLProcessingInstruction.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLRaw.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLStreamWriter.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLStringWriter.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLStringifier.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLText.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/XMLWriterBase.js","webpack://serverless-upload/./node_modules/xmlbuilder/lib/index.js","webpack://serverless-upload/external \"buffer\"","webpack://serverless-upload/external \"child_process\"","webpack://serverless-upload/external \"crypto\"","webpack://serverless-upload/external \"dgram\"","webpack://serverless-upload/external \"domain\"","webpack://serverless-upload/external \"events\"","webpack://serverless-upload/external \"fs\"","webpack://serverless-upload/external \"http\"","webpack://serverless-upload/external \"https\"","webpack://serverless-upload/external \"os\"","webpack://serverless-upload/external \"path\"","webpack://serverless-upload/external \"querystring\"","webpack://serverless-upload/external \"stream\"","webpack://serverless-upload/external \"string_decoder\"","webpack://serverless-upload/external \"timers\"","webpack://serverless-upload/external \"url\"","webpack://serverless-upload/external \"util\"","webpack://serverless-upload/webpack/bootstrap","webpack://serverless-upload/webpack/startup","webpack://serverless-upload/webpack/runtime/define property getters","webpack://serverless-upload/webpack/runtime/hasOwnProperty shorthand","webpack://serverless-upload/webpack/runtime/make namespace object"],"names":["apply","fn","args","callArgs","initialParams","callback","pop","call","this","hasSetImmediate","setImmediate","hasNextTick","process","nextTick","fallback","setTimeout","wrap","defer","setImmediate$1","asyncify","func","isAsync","handlePromise","result","e","then","promise","value","invokeCallback","err","message","Error","error","Symbol","toStringTag","wrapAsync","asyncFn","awaitify","arity","length","Promise","resolve","reject","cbArgs","applyEach","eachfn","fns","that","cb","concat","_asyncMap","arr","iteratee","results","counter","_iteratee","_","iterCb","index","v","isArrayLike","breakLoop","once","wrapper","callFn","Object","assign","onlyOnce","asyncEachOfLimit","generator","limit","done","canceled","awaiting","running","idx","replenish","next","iterDone","iterateeCallback","catch","handleError","eachOfLimit","obj","RangeError","asyncIterator","isAsyncIterable","nextElem","coll","i","len","key","createArrayIterator","okeys","iterator","getIterator","item","createES2015Iterator","keys","createIterator","looping","elem","eachOfLimit$2","eachOfArrayLike","completed","iteratorCallback","eachOfGeneric","Infinity","eachOf$1","map$1","applyEach$1","eachOfSeries$1","mapSeries$1","applyEachSeries","PROMISE_SYMBOL","promiseCallback","res","rej","auto","tasks","concurrency","numTasks","runningTasks","hasError","listeners","create","readyTasks","readyToCheck","uncheckedDependencies","enqueueTask","task","push","taskCallback","safeResults","forEach","rkey","processQueue","taskFn","runTask","shift","run","getDependents","taskName","Array","isArray","indexOf","dependencies","slice","remainingDependencies","dependencyName","join","taskListeners","dependent","checkForDeadlocks","FN_ARGS","ARROW_FN_ARGS","FN_ARG_SPLIT","FN_ARG","STRIP_COMMENTS","autoInject","newTasks","params","fnIsAsync","hasNoDeps","newTask","src","toString","replace","match","split","map","arg","trim","parseParams","taskCb","newArgs","name","DLL","head","tail","node","prev","newNode","insertBefore","setInitial","insertAfter","removeLink","cur","data","testFn","curr","dll","queue","worker","payload","_worker","numRunning","workersList","events","drain","saturated","unsaturated","empty","off","event","handler","filter","ev","trigger","processingScheduled","_insert","insertAtFront","rejectOnError","q","started","_tasks","unshift","_createCB","l","splice","buffer","idle","_maybeDrain","eventMethod","handleAndRemove","on","isProcessing","paused","datum","remove","Math","min","defineProperties","writable","cargo","cargo$1","reduce$1","memo","x","seq","functions","_functions","newargs","nextargs","compose","reverse","mapLimit$1","concatLimit$1","val","mapResults","concat$1","concatSeries$1","constant","ignoredArgs","_createTester","check","getResult","testResult","testPassed","detect$1","bool","detectLimit$1","detectSeries$1","consoleFunc","resultArgs","console","dir","doWhilst$1","test","_fn","_test","truth","doUntil","_withoutIndex","each","eachLimit$2","eachSeries$1","ensureAsync","sync","innerArgs","every$1","everyLimit$1","everySeries$1","filterArray","truthValues","filterGeneric","sort","a","b","_filter","filter$1","filterLimit$1","filterSeries$1","forever$1","errback","groupByLimit$1","hasOwnProperty","prototype","groupBy","groupBySeries","log","mapValuesLimit$1","newObj","mapValues","mapValuesSeries","memoize","hasher","queues","memoized","unmemoized","_parallel","parallel","parallelLimit","queue$1","items","Heap","heap","pushCount","Number","MIN_SAFE_INTEGER","p","smaller","parent","t","percUp","top","percDown","j","y","priority","priorityQueue","race$1","TypeError","reduceRight","array","reversed","reflect","reflectCallback","retVal","reflectAll","reject$2","rejectLimit$1","rejectSeries$1","constant$1","retry","opts","options","times","intervalFunc","arguments","parseTimes","_task","attempt","retryAttempt","errorFilter","acc","interval","retryable","series","some$1","Boolean","someLimit$1","someSeries$1","sortBy$1","criteria","comparator","left","right","timeout","milliseconds","info","timer","timedOut","clearTimeout","code","timesLimit","count","size","range","n","timesSeries","transform","accumulator","k","tryEach$1","unmemoize","whilst$1","rest","until","waterfall$1","taskIndex","nextTask","cargoQueue","concatLimit","concatSeries","detect","detectLimit","detectSeries","doWhilst","eachLimit","eachOf","eachOfSeries","eachSeries","every","everyLimit","everySeries","filterLimit","filterSeries","forever","groupByLimit","mapLimit","mapSeries","mapValuesLimit","race","reduce","rejectLimit","rejectSeries","some","someLimit","someSeries","sortBy","tryEach","waterfall","whilst","all","allLimit","allSeries","any","anyLimit","anySeries","find","findLimit","findSeries","flatMap","flatMapLimit","flatMapSeries","forEachSeries","forEachLimit","forEachOf","forEachOfSeries","forEachOfLimit","inject","foldl","foldr","select","selectLimit","selectSeries","wrapSync","during","doDuring","AWS","Service","apiLoader","services","CognitoIdentity","defineService","defineProperty","get","model","paginators","enumerable","configurable","module","exports","DynamoDB","waiters","S3","SNS","STS","svc","version","PromisesDependency","Config","util","inherit","constructor","undefined","extractCredentials","set","getCredentials","self","finish","credentials","credError","msg","accessKeyId","secretAccessKey","credentialProvider","creds","update","allowUnknownKeys","hasService","loadFromPath","path","clear","JSON","parse","readFileSync","fileSystemCreds","FileSystemCredentials","chain","CredentialProviderChain","providers","property","defaultValue","merge","region","logger","apiVersions","apiVersion","endpoint","httpOptions","maxRetries","maxRedirects","paramValidation","sslEnabled","s3ForcePathStyle","s3BucketEndpoint","s3DisableBodySigning","s3UsEast1RegionalEndpoint","s3UseArnRegion","computeChecksums","convertResponseTypes","correctClockSkew","customUserAgent","dynamoDbCrc32","systemClockOffset","signatureVersion","signatureCache","retryDelayOptions","useAccelerateEndpoint","clientSideMonitoring","endpointDiscoveryEnabled","endpointCacheSize","hostPrefixEnabled","stsRegionalEndpoints","copy","Credentials","setPromisesDependency","dep","constructors","Request","ManagedUpload","addPromises","getPromisesDependency","config","validateRegionalEndpointsFlagValue","configValue","errorOptions","toLowerCase","originalConfig","resolved","clientConfig","isNode","env","profile","getProfilesFromSharedConfig","iniLoader","AWS_PROFILE","defaultProfile","sharedConfig","VERSION","Signers","Protocol","Json","Query","Rest","RestJson","RestXml","XML","Builder","Parser","Model","Api","Operation","Shape","Paginator","ResourceWaiter","EndpointCache","SequentialExecutor","memoizedProperty","hideProperties","expired","expireTime","refreshCallbacks","sessionToken","expiryWindow","needsRefresh","currentTime","date","getDate","getTime","adjustedTime","Date","refresh","coalesceRefresh","load","arrayEach","addPromisesToClass","PromiseDependency","getPromise","promisifyMethod","refreshPromise","deletePromisesFromClass","ChainableTemporaryCredentials","errorCode","tokenCodeFn","RoleArn","RoleSessionName","SerialNumber","masterCredentials","stsConfig","service","operation","getTokenCode","tokenCode","TokenCode","credentialsFrom","token","CognitoIdentityCredentials","localStorageKey","id","_identityId","_clientConfig","loadCachedId","IdentityId","identityId","createClients","getId","clearIdOnNotAuthorized","getCredentialsFromSTS","getCredentialsForIdentity","clearCachedId","poolId","IdentityPoolId","loginId","LoginId","storage","cognito","loadCredentials","AccessKeyId","SecretKey","SessionToken","Expiration","cacheId","getOpenIdToken","WebIdentityToken","Token","webIdentityCredentials","webErr","sts","isBrowser","getStorage","Logins","actualProviders","WebIdentityCredentials","cognitoConfig","setStorage","window","localStorage","defaultProviders","resolveCallbacks","resolveNext","provider","getErr","resolvePromise","EC2MetadataCredentials","defaultMaxRetries","defaultTimeout","connectTimeout","defaultConnectTimeout","metadataService","MetadataService","metadata","SecretAccessKey","ECSCredentials","RemoteCredentials","EnvironmentCredentials","envPrefix","values","prefix","filename","proc","ProcessCredentials","noop","loadViaCredentialProcess","exec","stdOut","stdErr","credData","Version","clearCachedFiles","ENV_RELATIVE_URI","ENV_FULL_URI","FULL_URI_UNRESTRICTED_PROTOCOLS","FULL_URI_ALLOWED_PROTOCOLS","FULL_URI_ALLOWED_HOSTNAMES","isConfiguredForEcsCredentials","getECSFullUri","relative","full","parsed","urlParse","protocol","hostname","getECSAuthToken","credsFormatIsValid","formatCreds","expiration","request","url","httpRequest","HttpRequest","method","headers","Accept","Authorization","handleRequestWithRetries","fullUri","dataError","SAMLCredentials","assumeRoleWithSAML","SharedIniFileCredentials","disableAssumeRole","preferStaticCredentials","profiles","preferStaticCredentialsToRoleArn","loadRoleProfile","roleProfile","roleArn","roleSessionName","externalId","mfaSerial","sourceProfileName","profileRegion","sourceCredentials","roleParams","now","ExternalId","assumeRole","TemporaryCredentials","loadMasterCredentials","getSessionToken","fs","TokenFileWebIdentityCredentials","getParamsFromEnv","ENV_TOKEN_FILE","envTokenFile","getParamsFromSharedConfig","profileName","paramsArray","assumeRoleChaining","oidcToken","encoding","assumeRoleWithWebIdentity","retryableError","endpointDiscoveryEnabledEnvs","getCacheKey","api","identifiers","operations","serviceId","marshallCustomIdentifiersHelper","shape","type","required","memberShape","members","endpointDiscoveryId","locationName","isLocationName","String","marshallCustomIdentifiers","optionalDiscoverEndpoint","operationModel","input","cacheKey","endpoints","endpointCache","Address","updateEndpoint","endpointRequest","makeRequest","endpointOperation","Identifiers","addApiVersionHeader","removeListener","EventListeners","Core","VALIDATE_PARAMETERS","RETRY_CHECK","put","CachePeriodInMinutes","send","Endpoints","requestQueue","requiredDiscoverEndpoint","inputShape","cacheKeyStr","getKeyString","response","pendingRequests","requestContext","invalidateCachedEndpoints","httpResponse","statusCode","isFalsy","discoverEndpoint","client","_originalConfig","svcConfig","serviceIdentifier","hasCustomEndpoint","isPresigned","isEndpointDiscoveryRequired","endpointDiscoveryRequired","isEnabled","configFile","loadFrom","isConfig","sharedConfigFileEnv","sharedFileConfig","endpoint_discovery_enabled","resolveEndpointDiscoveryConfig","hasRequiredEndpointDiscovery","appendToUserAgent","addNamedListener","className","invalidateCachedEndpoint","typeOf","DynamoDBSet","NumberValue","convertNumber","wrapNumbers","formatMap","M","formatted","Converter","convertInput","list","L","formatList","convertEmptyValues","nonEmptyValues","Binary","filterEmptySetValues","formatSet","S","N","B","BOOL","NULL","marshall","output","convertOutput","toBuffer","unmarshall","Translator","DocumentClient","configure","bindServiceObject","attrValue","putItem","Item","__super__","makeServiceRequest","setupRequest","setupResponse","serviceClientOperationsMap","batchGet","batchWrite","delete","query","scan","transactGet","transactWrite","createSet","getTranslator","translator","_events","validate","req","rawParams","translateInput","outputShape","translateOutput","nextPage","resp","paginationConfig","hasNextPage","nextPageTokens","inputTokens","inputToken","DynamoDBNumberValue","wrapperName","toJSON","toNumber","memberTypeToSetType","initialize","detectType","convert","mode","translate","translateStructure","translateMap","translateList","translateScalar","structure","struct","out","member","toType","isBinary","types","Stream","stream","Buffer","isBuffer","isType","typeName","eventMessageChunker","parseEvent","createEventStream","body","parser","eventMessages","Transform","allocBuffer","alloc","EventMessageChunkerStream","currentMessageTotalLength","currentMessagePendingLength","currentMessage","messageLengthBuffer","_transform","chunk","chunkLength","currentOffset","bytesRemaining","numBytesForTotal","allocateMessage","readUInt32BE","numBytesToWrite","_flush","writeUInt32BE","messages","offset","totalLength","readInt32BE","EventUnmarshallerStream","readableObjectMode","_readableState","objectMode","eventStreamModel","Int64","bytes","negate","fromNumber","number","Uint8Array","remaining","abs","round","valueOf","negative","parseInt","parseMessage","parsedMessage","messageType","errorMessage","parseError","eventType","eventModel","eventPayloadMemberName","payloadShape","eventHeaderNames","eventHeaderMemberNames","splitMessage","BOOLEAN_TAG","parseHeaders","position","nameLength","readUInt8","readInt8","readInt16BE","binaryLength","readUInt16BE","stringLength","uuidChars","substr","PRELUDE_LENGTH","expectedPreludeChecksum","PRELUDE_MEMBER_LENGTH","crypto","crc32","expectedMessageChecksum","headersEnd","eventStream","pipe","emit","DISCOVER_ENDPOINT","addNamedListeners","add","addAsync","isGlobalEndpoint","dnsHostRegex","RegExp","idempotentMembers","iLen","uuid","v4","rules","validation","ParamValidator","haltHandlersOnError","authtype","getSignerClass","V4","computeSha256","sha","getOperationAuthtype","payloadMember","getRequestPayloadShape","string","byteLength","isStreaming","requiresLength","host","retryCount","getSkewCorrectedDate","signer","getSigningName","setServiceClientId","_clientId","addAuthorization","signedAt","successfulResponse","httpResp","operationName","statusMessage","streaming","HttpClient","streamsApiVersion","hasEventOutput","read","didCallback","errCode","executeSend","http","getInstance","handleRequest","_abortCallback","buffers","numBytes","dateHeader","serverTime","isClockSkewed","applyClockOffset","total","progress","loaded","clockSkewError","Endpoint","redirect","redirectCount","retryDelay","retryDelays","delay","willRetry","CorePost","extractRequestId","errno","getSystemErrorName","isDNSError","originalError","Logger","line","delta","startTime","ansi","isTTY","status","censoredParams","filterSensitiveLog","lowerFirst","buildMessage","write","isSensitive","subShapeName","subShape","buildRequest","extractData","extractError","port","_userAgent","setUserAgent","getUserAgentHeaderName","userAgent","agentPartial","getUserAgent","pathname","search","queryStringParse","queryParamsToString","endpointStr","newEndpoint","HttpResponse","createUnbufferedStream","singleton","TransformStream","ReadableStream","Readable","NodeHttpClient","errCallback","pathPrefix","proxy","useSSL","agent","getAgent","keepAlive","connectTimeoutId","socket","connecting","abort","Expect","expect","writeBody","totalBytes","progressStream","end","agentOptions","sslAgent","Agent","rejectUnauthorized","NODE_TLS_REJECT_UNAUTHORIZED","setMaxListeners","globalAgent","maxSockets","loadedBytes","reporter","emitter","JsonBuilder","location","toWireFormat","build","stringify","JsonParser","shapeMembers","disableFetchToken","imdsDisabledEnv","loadCredentialsCallbacks","fetchMetadataToken","fetchCredentials","basePath","roleName","credErr","callbacks","tokenError","Collection","endpointPrefix","signingName","globalEndpoint","jsonVersion","targetPrefix","timestampFormat","xmlNamespace","serviceAbbreviation","serviceFullName","xmlNoDefaultLists","endpointoperation","endpointdiscovery","shapes","paginator","waiter","documentation","documentationUrl","factory","nameTr","iterable","requestUri","errors","isIdempotent","topLevelShape","isEventStream","hasEventStream","input_token","limit_key","more_results","output_token","result_key","memberName","enum","max","pattern","xmlName","queryName","isComposite","idempotencyToken","jsonvalue","sensitive","eventstream","eventpayload","eventheader","isTimestampFormatSet","endpointdiscoveryid","hostLabel","xmlAttribute","CompositeShape","flattened","StructureShape","requiredMap","firstInit","isShape","xmlOrder","memberNames","isEventPayload","isEventHeader","resultWrapper","uri","ListShape","oldName","MapShape","StringShape","nullLessProtocols","isJsonValue","BinaryShape","buf","base64","decode","secureBuf","fill","encode","Base64Shape","BooleanShape","normalizedTypes","character","double","long","short","biginteger","bigdecimal","blob","toUTCString","parseTimestamp","format","parseFloat","refShape","filteredKeys","InlineShape","origType","lib","domain","querystring","environment","realClock","Publisher","configProvider","AWSJS_DEBUG","AWS_REGION","AMAZON_REGION","configOptInEnv","toCheck","sharedCredentialsFileEnv","context","validateMember","fail","validateStructure","paramName","validateType","paramValue","memberContext","param","validateList","validateMap","validateScalar","validateRange","mapCount","validateString","validatePayload","validateNumber","validTypes","validateEnum","validatePattern","validateUri","descriptor","acceptedTypes","foundInvalidType","acceptedType","vowel","castedValue","Blob","populateHostPrefix","labels","hostPattern","hostPrefixNotation","isEndpointOperation","hasEndpointDiscover","hostPrefix","regex","label","target","builder","__type","Code","Message","QueryParamSerializer","Action","serialize","requestId","Errors","origRules","tmp","_XAMZRequestId","requestIdShape","generateURI","endpointPath","operationPath","queryString","queryStringSet","plus","uriEscapePath","uriEscape","parts","httpMethod","populateMethod","httpPath","populateURI","memberValue","populateHeaders","r","header","applyContentTypeHeader","populateBody","rootElement","toXML","upperFirst","clientId","enabled","AWS_CSM_PORT","AWS_CSM_ENABLED","AWS_CSM_CLIENT_ID","AWS_CSM_HOST","fromEnvironment","csm_port","csm_enabled","csm_client_id","csm_host","fromConfigFile","toJSType","dgram","stringToBuffer","address","messagesInFlight","fieldsToTrim","UserAgent","SdkException","SdkExceptionMessage","AwsException","AwsExceptionMessage","FinalSdkException","FinalSdkExceptionMessage","FinalAwsException","FinalAwsExceptionMessage","trimFields","trimmableFields","field","maxLength","eventHandler","ClientId","publishDatagram","getClient","destroyClient","createSocket","close","ucfirst","isQueryName","toUpperCase","serializeStructure","serializeMember","memberRules","suffix","serializeList","keyName","valueName","serializeMap","second","hrtime","regionConfig","applyConfig","configureEndpoint","regionPrefix","generateRegionPrefix","derivedKeys","patterns","useDualstack","isDualstackAvailable","signingRegion","getEndpointSuffix","regionRegexes","regexes","regionPattern","dnsSuffix","AcceptorStateMachine","jmespath","hardErrorStates","success","complete","fsm","setupStates","transition","_haltHandlersOnError","_asm","currentState","machine","Domain","domainEmitter","domainThrown","addState","active","Response","states","emitEvent","runTo","state","removeAllListeners","eachPage","makeAsync","wrappedCallback","eachItem","resultKey","continueIteration","isPageable","createReadStream","streams","PassThrough","readable","sent","HTTP_DATA","HTTP_ERROR","expectedLen","shouldCheckContentLength","isNaN","receivedLen","checkContentLengthAndEmit","httpStream","lengthAccumulator","_write","unpipe","eventName","eventParameters","presign","expires","Presign","sign","toGet","toUnauthenticated","_unAuthenticated","VALIDATE_CREDENTIALS","SIGN","buildAsGet","addListener","mixin","CHECK_ACCEPTORS","_waiter","acceptors","acceptorMatched","acceptor","matcher","matchers","expected","argument","setSuccess","setError","loadWaiterConfig","strictDeepEqual","pathAll","numResults","ind","pathAny","wait","$waiter","maxAttempts","addListeners","numRetries","cacheNextPageTokens","moreResults","exprs","outputToken","expr","sliceFn","completeInfo","fillQueue","partSize","minPartSize","queueSize","leavePartsOnError","tags","validateBody","adjustTotalBytes","maxTotalParts","failed","runFill","fillBuffer","fillStream","partBuffers","cleanup","isDoneChunking","numParts","totalPartNumbers","doneParts","finishMultiPart","singlePart","Body","arraySliceFn","getSignatureVersion","newPartSize","ceil","partPos","totalChunkedBytes","totalUploadedBytes","activeParts","multipartReq","partBufferLength","bodyLen","nextChunk","endPos","pbuf","isDoneSending","partNumber","Tagging","getTaggingHeader","putObject","_managedUpload","finishSinglePart","ContentMD5","ETag","UploadId","uploadPart","queueChunks","createMultipartUpload","kvPairStrings","Key","Value","partParams","ContentLength","PartNumber","partInfo","_lastUploadedBytes","resume","abortMultipartUpload","part","completeParams","MultipartUpload","Parts","completeMultipartUpload","Location","putObjectTagging","TagSet","d","upload","httpReq","Bucket","listener","toHead","onAsync","_isAsync","eventArgs","doneCallback","callListeners","prevError","callNextListener","addNamedAsyncListener","clientCount","loadServiceClass","ServiceClass","validateService","endpointFromTemplate","setEndpoint","addDefaultMonitoringListeners","_clientSideMonitoring","publisher","serviceConfig","isEmpty","apiConfig","defineServiceApi","getLatestServiceClass","getLatestServiceVersion","iso8601","selectedVersion","defaultRetryCount","customizeRequests","customRequestHandler","addAllRequestListeners","attachMonitoringEmitter","makeUnauthenticatedRequest","waitFor","serviceInterface","setupRequestListeners","apiCallEvent","monitoringEvent","Type","Region","MaxRetriesExceeded","FinalHttpStatusCode","apiAttemptEvent","Fqdn","HttpStatusCode","AccessKey","XAmznRequestId","XAmzRequestId","XAmzId2","attemptFailEvent","attemptTimestamp","attemptStartRealTime","attemptLatency","callStartRealTime","callTimestamp","attemptCount","Timestamp","AttemptLatency","AttemptCount","latency","Latency","RequestSigner","getVersion","calculateRetryDelay","timeoutError","networkingError","expiredCredentialsError","throttledError","newServerTime","throwException","defineMethods","versions","features","_serviceMap","addVersions","identifier","publisherConfig","superclass","setApi","isApi","attachOn","baseClass","getPrototypeOf","EXTRACT_DATA","checkCrc32","crc32IsValid","crc","base","v4Credentials","resolveRegionalEndpointsFlag","s3util","regionUtil","operationsWith200StatusCodeError","regionRedirectErrorCodes","defaultApiVersion","userDefinedVersion","regionDefinedVersion","_super","_parsedArn","shouldDisableBodySigning","signerClass","validateScheme","validateBucketName","optInUsEast1RegionalEndpoint","VALIDATE_REGION","addContentType","computeContentMd5","computeSseCustomerKeyMd5","addExpect100Continue","hoistPayloadMember","extractErrorFrom200Response","prepareSignedUrl","COMPUTE_SHA256","disableBodySigning","isArnInParam","ARN","validateS3AccessPointArn","validateArnResourceType","validateOutpostsAccessPointArn","validateOutpostsArn","validateArnRegion","validateArnAccount","validateArnService","populateUriFromAccessPointArn","validatePopulateUriFromArn","validateBucketEndpoint","correctBucketRegionFromCache","requestBucketRegion","reqRegionForNetworkingError","scheme","SSECustomerKey","CopySourceSSECustomerKey","resource","bucket","slashIndex","isValidAccelerateOperation","insertPoint","regionalEndpoint","substring","pathStyleBucketName","virtualHostedBucket","removeVirtualHostedBucketFromPath","encodedS3Key","accessPointArn","isOutpostArn","outpostsSuffix","outpostId","serviceName","dualStackSuffix","useArnRegion","accessPoint","accountId","encodedArn","contentType","charsetName","computableChecksumOperations","putBucketCors","putBucketLifecycle","putBucketLifecycleConfiguration","putBucketTagging","deleteObjects","putBucketReplication","putObjectLegalHold","putObjectRetention","putObjectLockConfiguration","willComputeChecksums","md5","bucketName","dnsCompatibleBucketName","_requestRegionForBucket","bucketRegionCache","updateReqBucketRegion","s3Config","newConfig","Host","LocationConstraint","createBucketConfiguration","CreateBucketConfiguration","clearBucketRegionCache","extractRequestIds","cachedRegion","codes","304","403","400","404","reqOperation","reqParams","MaxKeys","regionReq","getRegionReq","listObjects","buckets","requestRegion","extendedRequestId","cfId","getSignedUrl","Expires","createPresignedPost","boundParams","finalizePost","urlFormat","fields","preparePostFields","Fields","Conditions","conditions","expiresInSeconds","signingDate","shortDate","scope","createScope","credential","condition","Policy","preparePostPolicy","hmac","getSigningKey","noPresignedContentLength","createBucket","copiedParams","uploader","getSignedUrlPromise","inputMembers","parsedArn","delimiter","accessPointPrefix","loadUseArnRegionConfig","regionFromArn","clientRegion","envName","configName","ipAddress","dots","optInRegionalEndpoint","IniLoader","os","parseFile","content","ini","tmpContent","profileContent","resolvedProfiles","getDefaultFilePath","fileContent","getHomeDir","home","HOME","USERPROFILE","HOMEPATH","HOMEDRIVE","homedir","expiresHeader","signedUrlBuilder","unixTimestamp","signedUrlSigner","parsedUrl","queryParams","auth","signature","SET_CONTENT_LENGTH","serviceClientId","getServiceClientId","V2","V3","V3Https","subResources","responseHeaders","rfc822","stringToSign","canonicalizedAmzHeaders","canonicalizedResource","amzHeaders","resources","subresource","decodeURIComponent","secret","SignatureVersion","SignatureMethod","AWSAccessKeyId","SecurityToken","Signature","datetime","authorization","signedHeaders","headersToSign","h","canonicalHeaders","sha256","algorithm","updateForPresigned","addHeaders","credString","credentialString","qs","isSignableHeader","lowerKey","sep","signingKey","hexEncodedHash","canonicalString","hexEncodedBodyHash","canonicalHeaderValues","unsignableHeaders","cachedSecret","cacheQueue","v4Identifier","shouldCache","kDate","kRegion","kService","emptyCache","finalState","bindObject","inputError","accept","acceptState","failState","engine","navigator","platform","AWS_EXECUTION_ENV","encodeURIComponent","escape","ch","charCodeAt","sortedKeys","ename","vals","from","toStream","pos","_read","object","currentSection","section","expectedArgs","toISOString","formatter","crc32Table","tbl","digest","createHmac","hash","createHash","ArrayBuffer","FileReader","reader","onerror","onload","_continueReading","back","readAsArrayBuffer","toHex","iterFunction","obj1","obj2","dupe","prop","webkitSlice","mozSlice","str","stack","time","klass","newObject","ctor","props","isValue","cachedValue","responsePayload","settings","start","ResponseMetadata","RequestId","deletePromises","methodName","dualstackAvailable","customBackoff","random","pow","sendRequest","retryAfter","convertPayloadToString","profilesFromConfig","profilesFromCreds","profileNames","objectAssign","source","arn","matched","partition","arnObject","XmlNode","XmlText","XmlBuilder","xml","isXmlAttribute","addAttribute","element","addChildNode","applyNamespaces","xmlKey","xmlValue","entry","entryKey","entryValue","serializeScalar","isRoot","xmlNamespaceUri","xmlNamespacePrefix","noEmpty","children","escapeAttribute","escapeElement","xml2js","explicitCharkey","normalize","explicitRoot","emptyTag","explicitArray","ignoreAttrs","mergeAttrs","validator","NodeXmlParser","parseXml","xmlChild","$","parseScalar","parseStructure","child","parseMap","parseList","parseUnknown","text","parseString","attributes","removeAttribute","hasChildren","xmlText","attributeNames","attributeName","attribute","c","LRU_1","maxSize","cache","LRUCache","keyString","endpointRecord","populateValue","records","Expire","identifierNames","identifierName","LinkedListNode","nodeMap","sizeLimit","prependToList","headerNode","tailNode","removeFromTail","prevNode","detachFromList","key_1","async","utils","avCodecRegexp","ffCodecRegexp","ffEncodersRegexp","ffDecodersRegexp","encodersRegexp","formatRegexp","lineBreakRegexp","filterRegexp","proto","setFfmpegPath","ffmpegPath","setFfprobePath","ffprobePath","setFlvtoolPath","flvtool","flvtoolPath","_forgetPaths","_getFfmpegPath","FFMPEG_PATH","exists","ffmpeg","which","_getFfprobePath","FFPROBE_PATH","ffprobe","isWindows","dirname","_getFlvtoolPath","FLVMETA_PATH","FLVTOOL2_PATH","flvmeta","flvtool2","availableFilters","getAvailableFilters","filters","_spawnFfmpeg","captureStdout","stdoutLines","stdoutRing","lines","A","V","description","charAt","multipleInputs","multipleOutputs","availableCodecs","getAvailableCodecs","codecs","canDecode","canEncode","drawHorizBand","directRendering","weirdFrameTruncation","codecData","intraFrameOnly","isLossy","isLossless","encoders","decoders","coderData","availableEncoders","getAvailableEncoders","frameMT","sliceMT","experimental","availableFormats","getAvailableFormats","formats","canDemux","canMux","_checkCapabilities","unavailable","_outputs","fmts","_inputs","cdcs","acodec","audio","vcodec","video","spawn","legacyTag","legacyDisposition","parseFfprobeOutput","chapters","parseBlock","kv","chapter","ended","handleCallback","_currentInput","stdout","stdoutClosed","stderr","stderrClosed","isStream","stdin","pause","exitError","handleExit","processExited","legacyTagKeys","tagKey","legacyDispositionKeys","disposition","dispositionKey","signal","EventEmitter","FfmpegCommand","presets","preset","__dirname","niceness","debug","warn","inherits","clone","_currentOutput","flags","sizeData","file","instance","withNoAudio","noAudio","audioFilters","withAudioCodec","audioCodec","codec","withAudioBitrate","audioBitrate","bitrate","withAudioChannels","audioChannels","channels","withAudioFrequency","audioFrequency","freq","withAudioQuality","audioQuality","quality","withAudioFilter","withAudioFilters","audioFilter","makeFilterStrings","addInputOption","addInputOptions","withInputOption","withInputOptions","inputOption","inputOptions","doSplit","option","addOutputOption","addOutputOptions","addOption","addOptions","withOutputOption","withOutputOptions","withOption","withOptions","outputOption","outputOptions","filterGraph","complexFilter","spec","_complexFilters","streamSpec","streamRegexp","mergeAdd","addInput","isFile","withInputFormat","inputFormat","fromFormat","withInputFps","withInputFPS","withFpsInput","withFPSInput","inputFPS","inputFps","fpsInput","FPSInput","fps","nativeFramerate","withNativeFramerate","native","setStartTime","seekInput","seek","loop","duration","usingPreset","modulePath","addOutput","pipeopts","seekOutput","withDuration","setDuration","toFormat","withOutputFormat","outputFormat","updateFlvMetadata","withNoVideo","noVideo","videoFilters","withVideoCodec","videoCodec","withVideoBitrate","videoBitrate","withVideoFilter","withVideoFilters","videoFilter","withOutputFps","withOutputFPS","withFpsOutput","withFPSOutput","withFps","withFPS","outputFPS","outputFps","fpsOutput","FPSOutput","FPS","takeFrames","withFrames","frames","getScalePadFilters","width","height","aspect","color","w","createSizeFilters","fixedSize","fixedWidth","fixedHeight","percentRatio","ratio","pad","keepPixelAspect","keepDisplayAspect","keepDisplayAspectRatio","keepDAR","withSize","setSize","sizeFilters","withAspect","withAspectRatio","setAspect","setAspectRatio","aspectRatio","applyAutopadding","applyAutoPadding","applyAutopad","applyAutoPad","withAutopadding","withAutoPadding","withAutopad","withAutoPad","autoPad","autopad","webpackEmptyContext","runFfprobe","command","_ffprobeData","processCB","endCB","maxLines","linesRing","stderrRing","ffmpegProc","setEncoding","append","_getArguments","complexFilters","fileOutput","_global","outputArg","_prepare","readMetadata","execute","outputStream","inputStream","emitEnd","cwd","reportingErr","inputStreamError","kill","outputStreamError","codecDataSent","codecObject","extractCodecData","extractProgress","renice","pid","saveToFile","save","writeToStream","takeScreenshots","thumbnail","thumbnails","screenshot","screenshots","folder","timemarks","timestamps","percentSize","getMetadata","meta","vstream","biggest","codec_type","mark","timemarkToSeconds","ext","extname","basename","filenames","padding","mkdir","outputs","f","inputs","first","mergeToFile","concatenate","fileInput","hasAudioStreams","hasVideoStreams","nlRegexp","filterEscapeRegexp","whichCache","dest","argfunc","cloned","filterSpec","filterString","timemark","secs","stderrLine","codecsObject","inputStack","inputIndex","inInput","dur","audio_details","video_details","progressParts","progressSplit","parseProgressLine","ret","frame","currentFps","currentKbps","targetSize","Lsize","percent","cbs","current","closed","newLines","cmd","opt","getPathInfo","pathEnv","pathExt","pathExtExe","extExe","found","pathPart","ll","isexe","ex","nothrow","getNotFoundError","OSTYPE","COLON","er","colon","PATH","PATHEXT","F","E","ii","is","core","ignoreErrors","global","TESTING_WINDOWS","checkStat","statSync","stat","mod","uid","gid","myUid","getuid","myGid","getgid","u","g","checkMode","isSymbolicLink","pathext","checkPathExt","isObject","keysSeen","key2","isFalse","trimLeft","TYPE_NUMBER","TYPE_STRING","TOK_UNQUOTEDIDENTIFIER","TOK_QUOTEDIDENTIFIER","TOK_RBRACKET","TOK_RPAREN","TOK_COMMA","TOK_COLON","TOK_RBRACE","TOK_NUMBER","TOK_CURRENT","TOK_EXPREF","TOK_PIPE","TOK_EQ","TOK_GT","TOK_LT","TOK_GTE","TOK_LTE","TOK_NE","TOK_FLATTEN","TOK_STAR","TOK_FILTER","TOK_DOT","TOK_LBRACE","TOK_LBRACKET","TOK_LPAREN","TOK_LITERAL","basicTokens","operatorStartToken","skipChars","isNum","Lexer","tokenize","tokens","_current","_consumeUnquotedIdentifier","_consumeNumber","_consumeLBracket","_consumeQuotedIdentifier","_consumeRawStringLiteral","literal","_consumeLiteral","_consumeOperator","startingChar","literalString","_looksLikeJSON","bindingPower","TreeInterpreter","runtime","Runtime","interpreter","_interpreter","functionTable","_func","_functionAbs","_signature","avg","_functionAvg","_functionCeil","contains","_functionContains","_functionEndsWith","floor","_functionFloor","_functionLength","_functionMap","_functionMax","_functionMerge","variadic","_functionMaxBy","sum","_functionSum","_functionStartsWith","_functionMin","_functionMinBy","_functionType","_functionKeys","_functionValues","_functionSort","_functionSortBy","_functionJoin","_functionReverse","_functionToArray","_functionToString","_functionToNumber","_functionNotNull","expression","_loadTokens","ast","_lookahead","_lookaheadToken","rbp","leftToken","_advance","nud","currentToken","led","Not","_parseProjectionRHS","Star","_parseMultiselectHash","Flatten","_parseIndexExpression","_projectIfSlice","_parseMultiselectList","Expref","_match","_errorToken","tokenName","Dot","_parseDotRHS","Pipe","Or","And","Filter","_parseComparator","tokenType","_parseSliceExpression","indexExpr","lookahead","expressions","keyToken","pairs","identifierTypes","visit","collected","sliceParams","computed","computeSliceParams","stop","step","objValues","filtered","finalResults","original","merged","resolvedArgs","callFunction","refNode","jmespathType","arrayLength","stepValueNegative","capSliceRange","actualValue","functionEntry","_validateArgs","pluralized","currentSpec","actualType","typeMatched","_getTypeName","_typeMatches","actual","argValue","subtype","lastIndexOf","searchStr","originalStr","reversedStr","reversedArray","inputArray","mapped","exprefNode","elements","maxElement","localeCompare","minElement","listToSum","joinChar","convertedValue","sortedArray","requiredType","decorated","exprA","exprB","maxRecord","resolvedArray","keyFunction","createKeyFunction","maxNumber","minRecord","minNumber","allowedTypes","compile","sax","strict","SAXParser","SAXStream","createStream","MAX_BUFFER_LENGTH","clearBuffers","bufferCheckPosition","lowercase","lowercasetags","looseCase","closedRoot","sawRoot","tag","noscript","BEGIN","strictEntities","ENTITIES","XML_ENTITIES","attribList","xmlns","ns","rootNS","trackPosition","column","EVENTS","o","BEGIN_WHITESPACE","beginWhiteSpace","TEXT","starti","textNode","not","whitespace","strictFail","TEXT_ENTITY","OPEN_WAKA","startTagPosition","SCRIPT","SCRIPT_ENDING","script","CLOSE_TAG","SGML_DECL","sgmlDecl","nameStart","OPEN_TAG","tagName","PROC_INST","procInstName","procInstBody","emitNode","CDATA","cdata","COMMENT","comment","DOCTYPE","doctype","quote","SGML_DECL_QUOTED","DOCTYPE_DTD","DOCTYPE_QUOTED","DOCTYPE_DTD_QUOTED","COMMENT_ENDING","COMMENT_ENDED","textopts","CDATA_ENDING","CDATA_ENDING_2","PROC_INST_ENDING","PROC_INST_BODY","nameBody","newTag","openTag","OPEN_TAG_SLASH","ATTRIB","closeTag","attribName","attribValue","ATTRIB_NAME","ATTRIB_VALUE","attrib","ATTRIB_NAME_SAW_WHITE","ATTRIB_VALUE_QUOTED","ATTRIB_VALUE_UNQUOTED","ATTRIB_VALUE_ENTITY_Q","ATTRIB_VALUE_CLOSED","attribEnd","ATTRIB_VALUE_ENTITY_U","CLOSE_TAG_SAW_WHITE","returnState","parseEntity","entity","entityBody","entityStart","maxAllowed","maxActual","closeText","m","checkBufferLength","flush","streamWraps","_parser","me","onend","_decoder","SD","letter","XML_NAMESPACE","XMLNS_NAMESPACE","charClass","s","charclass","isRegExp","stringFromCharCode","fromCodePoint","STATE","COMMENT_STARTING","fromCharCode","nodeType","qname","qualName","local","qn","selfClosing","nv","isSelfClosing","closeTo","num","entityLC","numStr","highSurrogate","lowSurrogate","MAX_SIZE","codeUnits","codePoint","isFinite","sns","topicArn","SNS_TOPIC_ANALYSIS_ARN","DYNAMODB_TableName","S3BucketName","analystic","jobLength","promisePushMessagePool","docClient","listJob","batchJobId","jobId","publish","TopicArn","resultStoreDynamoDb","TableName","jobs","job","resultPromise","transcoder","Records","Sns","objectName","writeStream","s3","pass","uploadStream","extractAudio","v1","byteToHex","bth","randomBytes","_nodeId","_clockseq","rng","bytesToUuid","_lastMSecs","_lastNSecs","clockseq","seedBytes","msecs","nsecs","dt","tl","tmh","rnds","stripBOM","defaults","escapeCDATA","requiresCDATA","wrapCDATA","hasProp","ref","buildObject","rootObj","attrkey","charkey","render","rootName","_this","attr","raw","txt","ele","up","att","xmldec","headless","allowSurrogateChars","renderOpts","normalizeTags","explicitChildren","childkey","charsAsChildren","includeWhiteChars","attrNameProcessors","attrValueProcessors","tagNameProcessors","valueProcessors","preserveChildrenOrder","chunkSize","bom","processItem","processors","bind","thing","superClass","reset","assignOrPush","processAsync","xmlnskey","extend","saxParser","error1","errThrown","newValue","ontext","resultObject","EXPLICIT_CHARKEY","onopentag","processedKey","onclosetag","emptyStr","nodeName","objClone","old","xpath","getOwnPropertyNames","charChild","oncdata","prefixMatch","firstCharLowerCase","stripPrefix","parseNumbers","parseBooleans","ValidationError","isFunction","isPlainObject","sources","Function","XMLAttribute","attName","attValue","writer","XMLNode","XMLCData","XMLComment","XMLDTDAttList","elementName","attributeType","defaultValueType","eleName","dtdAttType","dtdAttDefault","dtdAttList","XMLDTDElement","dtdElementValue","dtdElement","XMLDTDEntity","pe","pubID","sysID","dtdPubID","dtdSysID","nData","dtdNData","dtdEntityValue","dtdEntity","XMLDTDNotation","dtdNotation","XMLDeclaration","standalone","xmlVersion","xmlEncoding","xmlStandalone","declaration","XMLDocType","ref1","documentObject","attList","pEntity","notation","docType","ent","pent","root","XMLStringWriter","XMLStringifier","XMLDocument","isDocument","writerOptions","document","XMLElement","XMLProcessingInstruction","XMLRaw","XMLText","XMLDocumentCB","onData","onEnd","onDataCallback","onEndCallback","currentNode","currentLevel","openTags","documentStarted","documentCompleted","openCurrent","skipNullAttributes","instruction","insTarget","insValue","processingInstruction","rootNodeName","closeNode","openNode","isOpen","isClosed","nod","dat","com","ins","dec","dtd","rootObject","clonedSelf","clonedChild","childNode","lastChild","len1","ignoreDecorators","convertAttKey","separateArrayItems","convertTextKey","convertCDataKey","convertCommentKey","convertRawKey","convertPIKey","removed","commentBefore","commentAfter","instructionBefore","instructionAfter","doc","ref2","importDocument","clonedRoot","importXMLBuilder","XMLWriterBase","XMLStreamWriter","isLastRootNode","level","space","endline","spacebeforeslash","allowEmpty","pretty","newline","textispresent","textispresentwasset","newlinedefault","prettydefault","dontprettytextnodes","assertLegalChar","noDoubleEncoding","eleText","elEscape","attEscape","ampregex","ref3","ref4","ref5","ref6","indent","begin","stringWriter","streamWriter","require","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","definition"],"mappings":"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AAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,WAChD,SAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,WAChD,SAAY,WAAY,WAAY,WAAY,SAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,WAChD,SAAY,WAAY,WAAY,WAAY,SAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,UAAY,WAAY,WAAY,WAChD,UAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,UAAY,WAAY,WAChD,WAAY,WAAY,WAAY,WAAY,WAChD,SAAY,WAAY,WAAY,WAAY,UAChD,WAAY,WAAY,WAAY,UAAY,WAChD,WAAY,WAAY,UAAY,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","file":"Transcoder/app.js","sourcesContent":["/**\n * Creates a continuation function with some arguments already applied.\n *\n * Useful as a shorthand when combined with other control flow functions. Any\n * arguments passed to the returned function are added to the arguments\n * originally passed to apply.\n *\n * @name apply\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {Function} fn - The function you want to eventually apply all\n * arguments to. Invokes with (arguments...).\n * @param {...*} arguments... - Any number of arguments to automatically apply\n * when the continuation is called.\n * @returns {Function} the partially-applied function\n * @example\n *\n * // using apply\n * async.parallel([\n *     async.apply(fs.writeFile, 'testfile1', 'test1'),\n *     async.apply(fs.writeFile, 'testfile2', 'test2')\n * ]);\n *\n *\n * // the same process without using apply\n * async.parallel([\n *     function(callback) {\n *         fs.writeFile('testfile1', 'test1', callback);\n *     },\n *     function(callback) {\n *         fs.writeFile('testfile2', 'test2', callback);\n *     }\n * ]);\n *\n * // It's possible to pass any number of additional arguments when calling the\n * // continuation:\n *\n * node> var fn = async.apply(sys.puts, 'one');\n * node> fn('two', 'three');\n * one\n * two\n * three\n */\nfunction apply(fn, ...args) {\n    return (...callArgs) => fn(...args,...callArgs);\n}\n\nfunction initialParams (fn) {\n    return function (...args/*, callback*/) {\n        var callback = args.pop();\n        return fn.call(this, args, callback);\n    };\n}\n\n/* istanbul ignore file */\n\nvar hasSetImmediate = typeof setImmediate === 'function' && setImmediate;\nvar hasNextTick = typeof process === 'object' && typeof process.nextTick === 'function';\n\nfunction fallback(fn) {\n    setTimeout(fn, 0);\n}\n\nfunction wrap(defer) {\n    return (fn, ...args) => defer(() => fn(...args));\n}\n\nvar _defer;\n\nif (hasSetImmediate) {\n    _defer = setImmediate;\n} else if (hasNextTick) {\n    _defer = process.nextTick;\n} else {\n    _defer = fallback;\n}\n\nvar setImmediate$1 = wrap(_defer);\n\n/**\n * Take a sync function and make it async, passing its return value to a\n * callback. This is useful for plugging sync functions into a waterfall,\n * series, or other async functions. Any arguments passed to the generated\n * function will be passed to the wrapped function (except for the final\n * callback argument). Errors thrown will be passed to the callback.\n *\n * If the function passed to `asyncify` returns a Promise, that promises's\n * resolved/rejected state will be used to call the callback, rather than simply\n * the synchronous return value.\n *\n * This also means you can asyncify ES2017 `async` functions.\n *\n * @name asyncify\n * @static\n * @memberOf module:Utils\n * @method\n * @alias wrapSync\n * @category Util\n * @param {Function} func - The synchronous function, or Promise-returning\n * function to convert to an {@link AsyncFunction}.\n * @returns {AsyncFunction} An asynchronous wrapper of the `func`. To be\n * invoked with `(args..., callback)`.\n * @example\n *\n * // passing a regular synchronous function\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(JSON.parse),\n *     function (data, next) {\n *         // data is the result of parsing the text.\n *         // If there was a parsing error, it would have been caught.\n *     }\n * ], callback);\n *\n * // passing a function returning a promise\n * async.waterfall([\n *     async.apply(fs.readFile, filename, \"utf8\"),\n *     async.asyncify(function (contents) {\n *         return db.model.create(contents);\n *     }),\n *     function (model, next) {\n *         // `model` is the instantiated model object.\n *         // If there was an error, this function would be skipped.\n *     }\n * ], callback);\n *\n * // es2017 example, though `asyncify` is not needed if your JS environment\n * // supports async functions out of the box\n * var q = async.queue(async.asyncify(async function(file) {\n *     var intermediateStep = await processFile(file);\n *     return await somePromise(intermediateStep)\n * }));\n *\n * q.push(files);\n */\nfunction asyncify(func) {\n    if (isAsync(func)) {\n        return function (...args/*, callback*/) {\n            const callback = args.pop();\n            const promise = func.apply(this, args);\n            return handlePromise(promise, callback)\n        }\n    }\n\n    return initialParams(function (args, callback) {\n        var result;\n        try {\n            result = func.apply(this, args);\n        } catch (e) {\n            return callback(e);\n        }\n        // if result is Promise object\n        if (result && typeof result.then === 'function') {\n            return handlePromise(result, callback)\n        } else {\n            callback(null, result);\n        }\n    });\n}\n\nfunction handlePromise(promise, callback) {\n    return promise.then(value => {\n        invokeCallback(callback, null, value);\n    }, err => {\n        invokeCallback(callback, err && err.message ? err : new Error(err));\n    });\n}\n\nfunction invokeCallback(callback, error, value) {\n    try {\n        callback(error, value);\n    } catch (err) {\n        setImmediate$1(e => { throw e }, err);\n    }\n}\n\nfunction isAsync(fn) {\n    return fn[Symbol.toStringTag] === 'AsyncFunction';\n}\n\nfunction isAsyncGenerator(fn) {\n    return fn[Symbol.toStringTag] === 'AsyncGenerator';\n}\n\nfunction isAsyncIterable(obj) {\n    return typeof obj[Symbol.asyncIterator] === 'function';\n}\n\nfunction wrapAsync(asyncFn) {\n    if (typeof asyncFn !== 'function') throw new Error('expected a function')\n    return isAsync(asyncFn) ? asyncify(asyncFn) : asyncFn;\n}\n\n// conditionally promisify a function.\n// only return a promise if a callback is omitted\nfunction awaitify (asyncFn, arity = asyncFn.length) {\n    if (!arity) throw new Error('arity is undefined')\n    function awaitable (...args) {\n        if (typeof args[arity - 1] === 'function') {\n            return asyncFn.apply(this, args)\n        }\n\n        return new Promise((resolve, reject) => {\n            args[arity - 1] = (err, ...cbArgs) => {\n                if (err) return reject(err)\n                resolve(cbArgs.length > 1 ? cbArgs : cbArgs[0]);\n            };\n            asyncFn.apply(this, args);\n        })\n    }\n\n    return awaitable\n}\n\nfunction applyEach (eachfn) {\n    return function applyEach(fns, ...callArgs) {\n        const go = awaitify(function (callback) {\n            var that = this;\n            return eachfn(fns, (fn, cb) => {\n                wrapAsync(fn).apply(that, callArgs.concat(cb));\n            }, callback);\n        });\n        return go;\n    };\n}\n\nfunction _asyncMap(eachfn, arr, iteratee, callback) {\n    arr = arr || [];\n    var results = [];\n    var counter = 0;\n    var _iteratee = wrapAsync(iteratee);\n\n    return eachfn(arr, (value, _, iterCb) => {\n        var index = counter++;\n        _iteratee(value, (err, v) => {\n            results[index] = v;\n            iterCb(err);\n        });\n    }, err => {\n        callback(err, results);\n    });\n}\n\nfunction isArrayLike(value) {\n    return value &&\n        typeof value.length === 'number' &&\n        value.length >= 0 &&\n        value.length % 1 === 0;\n}\n\n// A temporary value used to identify if the loop should be broken.\n// See #1064, #1293\nconst breakLoop = {};\n\nfunction once(fn) {\n    function wrapper (...args) {\n        if (fn === null) return;\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, args);\n    }\n    Object.assign(wrapper, fn);\n    return wrapper\n}\n\nfunction getIterator (coll) {\n    return coll[Symbol.iterator] && coll[Symbol.iterator]();\n}\n\nfunction createArrayIterator(coll) {\n    var i = -1;\n    var len = coll.length;\n    return function next() {\n        return ++i < len ? {value: coll[i], key: i} : null;\n    }\n}\n\nfunction createES2015Iterator(iterator) {\n    var i = -1;\n    return function next() {\n        var item = iterator.next();\n        if (item.done)\n            return null;\n        i++;\n        return {value: item.value, key: i};\n    }\n}\n\nfunction createObjectIterator(obj) {\n    var okeys = obj ? Object.keys(obj) : [];\n    var i = -1;\n    var len = okeys.length;\n    return function next() {\n        var key = okeys[++i];\n        return i < len ? {value: obj[key], key} : null;\n    };\n}\n\nfunction createIterator(coll) {\n    if (isArrayLike(coll)) {\n        return createArrayIterator(coll);\n    }\n\n    var iterator = getIterator(coll);\n    return iterator ? createES2015Iterator(iterator) : createObjectIterator(coll);\n}\n\nfunction onlyOnce(fn) {\n    return function (...args) {\n        if (fn === null) throw new Error(\"Callback was already called.\");\n        var callFn = fn;\n        fn = null;\n        callFn.apply(this, args);\n    };\n}\n\n// for async generators\nfunction asyncEachOfLimit(generator, limit, iteratee, callback) {\n    let done = false;\n    let canceled = false;\n    let awaiting = false;\n    let running = 0;\n    let idx = 0;\n\n    function replenish() {\n        //console.log('replenish')\n        if (running >= limit || awaiting || done) return\n        //console.log('replenish awaiting')\n        awaiting = true;\n        generator.next().then(({value, done: iterDone}) => {\n            //console.log('got value', value)\n            if (canceled || done) return\n            awaiting = false;\n            if (iterDone) {\n                done = true;\n                if (running <= 0) {\n                    //console.log('done nextCb')\n                    callback(null);\n                }\n                return;\n            }\n            running++;\n            iteratee(value, idx, iterateeCallback);\n            idx++;\n            replenish();\n        }).catch(handleError);\n    }\n\n    function iterateeCallback(err, result) {\n        //console.log('iterateeCallback')\n        running -= 1;\n        if (canceled) return\n        if (err) return handleError(err)\n\n        if (err === false) {\n            done = true;\n            canceled = true;\n            return\n        }\n\n        if (result === breakLoop || (done && running <= 0)) {\n            done = true;\n            //console.log('done iterCb')\n            return callback(null);\n        }\n        replenish();\n    }\n\n    function handleError(err) {\n        if (canceled) return\n        awaiting = false;\n        done = true;\n        callback(err);\n    }\n\n    replenish();\n}\n\nvar eachOfLimit = (limit) => {\n    return (obj, iteratee, callback) => {\n        callback = once(callback);\n        if (limit <= 0) {\n            throw new RangeError('concurrency limit cannot be less than 1')\n        }\n        if (!obj) {\n            return callback(null);\n        }\n        if (isAsyncGenerator(obj)) {\n            return asyncEachOfLimit(obj, limit, iteratee, callback)\n        }\n        if (isAsyncIterable(obj)) {\n            return asyncEachOfLimit(obj[Symbol.asyncIterator](), limit, iteratee, callback)\n        }\n        var nextElem = createIterator(obj);\n        var done = false;\n        var canceled = false;\n        var running = 0;\n        var looping = false;\n\n        function iterateeCallback(err, value) {\n            if (canceled) return\n            running -= 1;\n            if (err) {\n                done = true;\n                callback(err);\n            }\n            else if (err === false) {\n                done = true;\n                canceled = true;\n            }\n            else if (value === breakLoop || (done && running <= 0)) {\n                done = true;\n                return callback(null);\n            }\n            else if (!looping) {\n                replenish();\n            }\n        }\n\n        function replenish () {\n            looping = true;\n            while (running < limit && !done) {\n                var elem = nextElem();\n                if (elem === null) {\n                    done = true;\n                    if (running <= 0) {\n                        callback(null);\n                    }\n                    return;\n                }\n                running += 1;\n                iteratee(elem.value, elem.key, onlyOnce(iterateeCallback));\n            }\n            looping = false;\n        }\n\n        replenish();\n    };\n};\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name eachOfLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`. The `key` is the item's key, or index in the case of an\n * array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachOfLimit$1(coll, limit, iteratee, callback) {\n    return eachOfLimit(limit)(coll, wrapAsync(iteratee), callback);\n}\n\nvar eachOfLimit$2 = awaitify(eachOfLimit$1, 4);\n\n// eachOf implementation optimized for array-likes\nfunction eachOfArrayLike(coll, iteratee, callback) {\n    callback = once(callback);\n    var index = 0,\n        completed = 0,\n        {length} = coll,\n        canceled = false;\n    if (length === 0) {\n        callback(null);\n    }\n\n    function iteratorCallback(err, value) {\n        if (err === false) {\n            canceled = true;\n        }\n        if (canceled === true) return\n        if (err) {\n            callback(err);\n        } else if ((++completed === length) || value === breakLoop) {\n            callback(null);\n        }\n    }\n\n    for (; index < length; index++) {\n        iteratee(coll[index], index, onlyOnce(iteratorCallback));\n    }\n}\n\n// a generic version of eachOf which can handle array, object, and iterator cases.\nfunction eachOfGeneric (coll, iteratee, callback) {\n    return eachOfLimit$2(coll, Infinity, iteratee, callback);\n}\n\n/**\n * Like [`each`]{@link module:Collections.each}, except that it passes the key (or index) as the second argument\n * to the iteratee.\n *\n * @name eachOf\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEachOf\n * @category Collection\n * @see [async.each]{@link module:Collections.each}\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each\n * item in `coll`.\n * The `key` is the item's key, or index in the case of an array.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n * @example\n *\n * var obj = {dev: \"/dev.json\", test: \"/test.json\", prod: \"/prod.json\"};\n * var configs = {};\n *\n * async.forEachOf(obj, function (value, key, callback) {\n *     fs.readFile(__dirname + value, \"utf8\", function (err, data) {\n *         if (err) return callback(err);\n *         try {\n *             configs[key] = JSON.parse(data);\n *         } catch (e) {\n *             return callback(e);\n *         }\n *         callback();\n *     });\n * }, function (err) {\n *     if (err) console.error(err.message);\n *     // configs is now a map of JSON data\n *     doSomethingWith(configs);\n * });\n */\nfunction eachOf(coll, iteratee, callback) {\n    var eachOfImplementation = isArrayLike(coll) ? eachOfArrayLike : eachOfGeneric;\n    return eachOfImplementation(coll, wrapAsync(iteratee), callback);\n}\n\nvar eachOf$1 = awaitify(eachOf, 3);\n\n/**\n * Produces a new collection of values by mapping each value in `coll` through\n * the `iteratee` function. The `iteratee` is called with an item from `coll`\n * and a callback for when it has finished processing. Each of these callback\n * takes 2 arguments: an `error`, and the transformed item from `coll`. If\n * `iteratee` passes an error to its callback, the main `callback` (for the\n * `map` function) is immediately called with the error.\n *\n * Note, that since this function applies the `iteratee` to each item in\n * parallel, there is no guarantee that the `iteratee` functions will complete\n * in order. However, the results array will be in the same order as the\n * original `coll`.\n *\n * If `map` is passed an Object, the results will be an Array.  The results\n * will roughly be in the order of the original Objects' keys (but this can\n * vary across JavaScript engines).\n *\n * @name map\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an Array of the\n * transformed items from the `coll`. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * async.map(['file1','file2','file3'], fs.stat, function(err, results) {\n *     // results is now an array of stats for each file\n * });\n */\nfunction map (coll, iteratee, callback) {\n    return _asyncMap(eachOf$1, coll, iteratee, callback)\n}\nvar map$1 = awaitify(map, 3);\n\n/**\n * Applies the provided arguments to each function in the array, calling\n * `callback` after all functions have completed. If you only provide the first\n * argument, `fns`, then it will return a function which lets you pass in the\n * arguments as if it were a single function call. If more arguments are\n * provided, `callback` is required while `args` is still optional. The results\n * for each of the applied async functions are passed to the final callback\n * as an array.\n *\n * @name applyEach\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} fns - A collection of {@link AsyncFunction}s\n * to all call with the same arguments\n * @param {...*} [args] - any number of separate arguments to pass to the\n * function.\n * @param {Function} [callback] - the final argument should be the callback,\n * called when all functions have completed processing.\n * @returns {AsyncFunction} - Returns a function that takes no args other than\n * an optional callback, that is the result of applying the `args` to each\n * of the functions.\n * @example\n *\n * const appliedFn = async.applyEach([enableSearch, updateSchema], 'bucket')\n *\n * appliedFn((err, results) => {\n *     // results[0] is the results for `enableSearch`\n *     // results[1] is the results for `updateSchema`\n * });\n *\n * // partial application example:\n * async.each(\n *     buckets,\n *     async (bucket) => async.applyEach([enableSearch, updateSchema], bucket)(),\n *     callback\n * );\n */\nvar applyEach$1 = applyEach(map$1);\n\n/**\n * The same as [`eachOf`]{@link module:Collections.eachOf} but runs only a single async operation at a time.\n *\n * @name eachOfSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.eachOf]{@link module:Collections.eachOf}\n * @alias forEachOfSeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * Invoked with (item, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachOfSeries(coll, iteratee, callback) {\n    return eachOfLimit$2(coll, 1, iteratee, callback)\n}\nvar eachOfSeries$1 = awaitify(eachOfSeries, 3);\n\n/**\n * The same as [`map`]{@link module:Collections.map} but runs only a single async operation at a time.\n *\n * @name mapSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.map]{@link module:Collections.map}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an array of the\n * transformed items from the `coll`. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction mapSeries (coll, iteratee, callback) {\n    return _asyncMap(eachOfSeries$1, coll, iteratee, callback)\n}\nvar mapSeries$1 = awaitify(mapSeries, 3);\n\n/**\n * The same as [`applyEach`]{@link module:ControlFlow.applyEach} but runs only a single async operation at a time.\n *\n * @name applyEachSeries\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.applyEach]{@link module:ControlFlow.applyEach}\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} fns - A collection of {@link AsyncFunction}s to all\n * call with the same arguments\n * @param {...*} [args] - any number of separate arguments to pass to the\n * function.\n * @param {Function} [callback] - the final argument should be the callback,\n * called when all functions have completed processing.\n * @returns {AsyncFunction} - A function, that when called, is the result of\n * appling the `args` to the list of functions.  It takes no args, other than\n * a callback.\n */\nvar applyEachSeries = applyEach(mapSeries$1);\n\nconst PROMISE_SYMBOL = Symbol('promiseCallback');\n\nfunction promiseCallback () {\n    let resolve, reject;\n    function callback (err, ...args) {\n        if (err) return reject(err)\n        resolve(args.length > 1 ? args : args[0]);\n    }\n\n    callback[PROMISE_SYMBOL] = new Promise((res, rej) => {\n        resolve = res,\n        reject = rej;\n    });\n\n    return callback\n}\n\n/**\n * Determines the best order for running the {@link AsyncFunction}s in `tasks`, based on\n * their requirements. Each function can optionally depend on other functions\n * being completed first, and each function is run as soon as its requirements\n * are satisfied.\n *\n * If any of the {@link AsyncFunction}s pass an error to their callback, the `auto` sequence\n * will stop. Further tasks will not execute (so any other functions depending\n * on it will not run), and the main `callback` is immediately called with the\n * error.\n *\n * {@link AsyncFunction}s also receive an object containing the results of functions which\n * have completed so far as the first argument, if they have dependencies. If a\n * task function has no dependencies, it will only be passed a callback.\n *\n * @name auto\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Object} tasks - An object. Each of its properties is either a\n * function or an array of requirements, with the {@link AsyncFunction} itself the last item\n * in the array. The object's key of a property serves as the name of the task\n * defined by that property, i.e. can be used when specifying requirements for\n * other tasks. The function receives one or two arguments:\n * * a `results` object, containing the results of the previously executed\n *   functions, only passed if the task has any dependencies,\n * * a `callback(err, result)` function, which must be called when finished,\n *   passing an `error` (which can be `null`) and the result of the function's\n *   execution.\n * @param {number} [concurrency=Infinity] - An optional `integer` for\n * determining the maximum number of tasks that can be run in parallel. By\n * default, as many as possible.\n * @param {Function} [callback] - An optional callback which is called when all\n * the tasks have been completed. It receives the `err` argument if any `tasks`\n * pass an error to their callback. Results are always returned; however, if an\n * error occurs, no further `tasks` will be performed, and the results object\n * will only contain partial results. Invoked with (err, results).\n * @returns {Promise} a promise, if a callback is not passed\n * @example\n *\n * async.auto({\n *     // this function will just be passed a callback\n *     readData: async.apply(fs.readFile, 'data.txt', 'utf-8'),\n *     showData: ['readData', function(results, cb) {\n *         // results.readData is the file's contents\n *         // ...\n *     }]\n * }, callback);\n *\n * async.auto({\n *     get_data: function(callback) {\n *         console.log('in get_data');\n *         // async code to get some data\n *         callback(null, 'data', 'converted to array');\n *     },\n *     make_folder: function(callback) {\n *         console.log('in make_folder');\n *         // async code to create a directory to store a file in\n *         // this is run at the same time as getting the data\n *         callback(null, 'folder');\n *     },\n *     write_file: ['get_data', 'make_folder', function(results, callback) {\n *         console.log('in write_file', JSON.stringify(results));\n *         // once there is some data and the directory exists,\n *         // write the data to a file in the directory\n *         callback(null, 'filename');\n *     }],\n *     email_link: ['write_file', function(results, callback) {\n *         console.log('in email_link', JSON.stringify(results));\n *         // once the file is written let's email a link to it...\n *         // results.write_file contains the filename returned by write_file.\n *         callback(null, {'file':results.write_file, 'email':'user@example.com'});\n *     }]\n * }, function(err, results) {\n *     console.log('err = ', err);\n *     console.log('results = ', results);\n * });\n */\nfunction auto(tasks, concurrency, callback) {\n    if (typeof concurrency !== 'number') {\n        // concurrency is optional, shift the args.\n        callback = concurrency;\n        concurrency = null;\n    }\n    callback = once(callback || promiseCallback());\n    var numTasks = Object.keys(tasks).length;\n    if (!numTasks) {\n        return callback(null);\n    }\n    if (!concurrency) {\n        concurrency = numTasks;\n    }\n\n    var results = {};\n    var runningTasks = 0;\n    var canceled = false;\n    var hasError = false;\n\n    var listeners = Object.create(null);\n\n    var readyTasks = [];\n\n    // for cycle detection:\n    var readyToCheck = []; // tasks that have been identified as reachable\n    // without the possibility of returning to an ancestor task\n    var uncheckedDependencies = {};\n\n    Object.keys(tasks).forEach(key => {\n        var task = tasks[key];\n        if (!Array.isArray(task)) {\n            // no dependencies\n            enqueueTask(key, [task]);\n            readyToCheck.push(key);\n            return;\n        }\n\n        var dependencies = task.slice(0, task.length - 1);\n        var remainingDependencies = dependencies.length;\n        if (remainingDependencies === 0) {\n            enqueueTask(key, task);\n            readyToCheck.push(key);\n            return;\n        }\n        uncheckedDependencies[key] = remainingDependencies;\n\n        dependencies.forEach(dependencyName => {\n            if (!tasks[dependencyName]) {\n                throw new Error('async.auto task `' + key +\n                    '` has a non-existent dependency `' +\n                    dependencyName + '` in ' +\n                    dependencies.join(', '));\n            }\n            addListener(dependencyName, () => {\n                remainingDependencies--;\n                if (remainingDependencies === 0) {\n                    enqueueTask(key, task);\n                }\n            });\n        });\n    });\n\n    checkForDeadlocks();\n    processQueue();\n\n    function enqueueTask(key, task) {\n        readyTasks.push(() => runTask(key, task));\n    }\n\n    function processQueue() {\n        if (canceled) return\n        if (readyTasks.length === 0 && runningTasks === 0) {\n            return callback(null, results);\n        }\n        while(readyTasks.length && runningTasks < concurrency) {\n            var run = readyTasks.shift();\n            run();\n        }\n\n    }\n\n    function addListener(taskName, fn) {\n        var taskListeners = listeners[taskName];\n        if (!taskListeners) {\n            taskListeners = listeners[taskName] = [];\n        }\n\n        taskListeners.push(fn);\n    }\n\n    function taskComplete(taskName) {\n        var taskListeners = listeners[taskName] || [];\n        taskListeners.forEach(fn => fn());\n        processQueue();\n    }\n\n\n    function runTask(key, task) {\n        if (hasError) return;\n\n        var taskCallback = onlyOnce((err, ...result) => {\n            runningTasks--;\n            if (err === false) {\n                canceled = true;\n                return\n            }\n            if (result.length < 2) {\n                [result] = result;\n            }\n            if (err) {\n                var safeResults = {};\n                Object.keys(results).forEach(rkey => {\n                    safeResults[rkey] = results[rkey];\n                });\n                safeResults[key] = result;\n                hasError = true;\n                listeners = Object.create(null);\n                if (canceled) return\n                callback(err, safeResults);\n            } else {\n                results[key] = result;\n                taskComplete(key);\n            }\n        });\n\n        runningTasks++;\n        var taskFn = wrapAsync(task[task.length - 1]);\n        if (task.length > 1) {\n            taskFn(results, taskCallback);\n        } else {\n            taskFn(taskCallback);\n        }\n    }\n\n    function checkForDeadlocks() {\n        // Kahn's algorithm\n        // https://en.wikipedia.org/wiki/Topological_sorting#Kahn.27s_algorithm\n        // http://connalle.blogspot.com/2013/10/topological-sortingkahn-algorithm.html\n        var currentTask;\n        var counter = 0;\n        while (readyToCheck.length) {\n            currentTask = readyToCheck.pop();\n            counter++;\n            getDependents(currentTask).forEach(dependent => {\n                if (--uncheckedDependencies[dependent] === 0) {\n                    readyToCheck.push(dependent);\n                }\n            });\n        }\n\n        if (counter !== numTasks) {\n            throw new Error(\n                'async.auto cannot execute tasks due to a recursive dependency'\n            );\n        }\n    }\n\n    function getDependents(taskName) {\n        var result = [];\n        Object.keys(tasks).forEach(key => {\n            const task = tasks[key];\n            if (Array.isArray(task) && task.indexOf(taskName) >= 0) {\n                result.push(key);\n            }\n        });\n        return result;\n    }\n\n    return callback[PROMISE_SYMBOL]\n}\n\nvar FN_ARGS = /^(?:async\\s+)?(?:function)?\\s*\\w*\\s*\\(\\s*([^)]+)\\s*\\)(?:\\s*{)/;\nvar ARROW_FN_ARGS = /^(?:async\\s+)?\\(?\\s*([^)=]+)\\s*\\)?(?:\\s*=>)/;\nvar FN_ARG_SPLIT = /,/;\nvar FN_ARG = /(=.+)?(\\s*)$/;\nvar STRIP_COMMENTS = /((\\/\\/.*$)|(\\/\\*[\\s\\S]*?\\*\\/))/mg;\n\nfunction parseParams(func) {\n    const src = func.toString().replace(STRIP_COMMENTS, '');\n    let match = src.match(FN_ARGS);\n    if (!match) {\n        match = src.match(ARROW_FN_ARGS);\n    }\n    if (!match) throw new Error('could not parse args in autoInject\\nSource:\\n' + src)\n    let [, args] = match;\n    return args\n        .replace(/\\s/g, '')\n        .split(FN_ARG_SPLIT)\n        .map((arg) => arg.replace(FN_ARG, '').trim());\n}\n\n/**\n * A dependency-injected version of the [async.auto]{@link module:ControlFlow.auto} function. Dependent\n * tasks are specified as parameters to the function, after the usual callback\n * parameter, with the parameter names matching the names of the tasks it\n * depends on. This can provide even more readable task graphs which can be\n * easier to maintain.\n *\n * If a final callback is specified, the task results are similarly injected,\n * specified as named parameters after the initial error parameter.\n *\n * The autoInject function is purely syntactic sugar and its semantics are\n * otherwise equivalent to [async.auto]{@link module:ControlFlow.auto}.\n *\n * @name autoInject\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.auto]{@link module:ControlFlow.auto}\n * @category Control Flow\n * @param {Object} tasks - An object, each of whose properties is an {@link AsyncFunction} of\n * the form 'func([dependencies...], callback). The object's key of a property\n * serves as the name of the task defined by that property, i.e. can be used\n * when specifying requirements for other tasks.\n * * The `callback` parameter is a `callback(err, result)` which must be called\n *   when finished, passing an `error` (which can be `null`) and the result of\n *   the function's execution. The remaining parameters name other tasks on\n *   which the task is dependent, and the results from those tasks are the\n *   arguments of those parameters.\n * @param {Function} [callback] - An optional callback which is called when all\n * the tasks have been completed. It receives the `err` argument if any `tasks`\n * pass an error to their callback, and a `results` object with any completed\n * task results, similar to `auto`.\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * //  The example from `auto` can be rewritten as follows:\n * async.autoInject({\n *     get_data: function(callback) {\n *         // async code to get some data\n *         callback(null, 'data', 'converted to array');\n *     },\n *     make_folder: function(callback) {\n *         // async code to create a directory to store a file in\n *         // this is run at the same time as getting the data\n *         callback(null, 'folder');\n *     },\n *     write_file: function(get_data, make_folder, callback) {\n *         // once there is some data and the directory exists,\n *         // write the data to a file in the directory\n *         callback(null, 'filename');\n *     },\n *     email_link: function(write_file, callback) {\n *         // once the file is written let's email a link to it...\n *         // write_file contains the filename returned by write_file.\n *         callback(null, {'file':write_file, 'email':'user@example.com'});\n *     }\n * }, function(err, results) {\n *     console.log('err = ', err);\n *     console.log('email_link = ', results.email_link);\n * });\n *\n * // If you are using a JS minifier that mangles parameter names, `autoInject`\n * // will not work with plain functions, since the parameter names will be\n * // collapsed to a single letter identifier.  To work around this, you can\n * // explicitly specify the names of the parameters your task function needs\n * // in an array, similar to Angular.js dependency injection.\n *\n * // This still has an advantage over plain `auto`, since the results a task\n * // depends on are still spread into arguments.\n * async.autoInject({\n *     //...\n *     write_file: ['get_data', 'make_folder', function(get_data, make_folder, callback) {\n *         callback(null, 'filename');\n *     }],\n *     email_link: ['write_file', function(write_file, callback) {\n *         callback(null, {'file':write_file, 'email':'user@example.com'});\n *     }]\n *     //...\n * }, function(err, results) {\n *     console.log('err = ', err);\n *     console.log('email_link = ', results.email_link);\n * });\n */\nfunction autoInject(tasks, callback) {\n    var newTasks = {};\n\n    Object.keys(tasks).forEach(key => {\n        var taskFn = tasks[key];\n        var params;\n        var fnIsAsync = isAsync(taskFn);\n        var hasNoDeps =\n            (!fnIsAsync && taskFn.length === 1) ||\n            (fnIsAsync && taskFn.length === 0);\n\n        if (Array.isArray(taskFn)) {\n            params = [...taskFn];\n            taskFn = params.pop();\n\n            newTasks[key] = params.concat(params.length > 0 ? newTask : taskFn);\n        } else if (hasNoDeps) {\n            // no dependencies, use the function as-is\n            newTasks[key] = taskFn;\n        } else {\n            params = parseParams(taskFn);\n            if ((taskFn.length === 0 && !fnIsAsync) && params.length === 0) {\n                throw new Error(\"autoInject task functions require explicit parameters.\");\n            }\n\n            // remove callback param\n            if (!fnIsAsync) params.pop();\n\n            newTasks[key] = params.concat(newTask);\n        }\n\n        function newTask(results, taskCb) {\n            var newArgs = params.map(name => results[name]);\n            newArgs.push(taskCb);\n            wrapAsync(taskFn)(...newArgs);\n        }\n    });\n\n    return auto(newTasks, callback);\n}\n\n// Simple doubly linked list (https://en.wikipedia.org/wiki/Doubly_linked_list) implementation\n// used for queues. This implementation assumes that the node provided by the user can be modified\n// to adjust the next and last properties. We implement only the minimal functionality\n// for queue support.\nclass DLL {\n    constructor() {\n        this.head = this.tail = null;\n        this.length = 0;\n    }\n\n    removeLink(node) {\n        if (node.prev) node.prev.next = node.next;\n        else this.head = node.next;\n        if (node.next) node.next.prev = node.prev;\n        else this.tail = node.prev;\n\n        node.prev = node.next = null;\n        this.length -= 1;\n        return node;\n    }\n\n    empty () {\n        while(this.head) this.shift();\n        return this;\n    }\n\n    insertAfter(node, newNode) {\n        newNode.prev = node;\n        newNode.next = node.next;\n        if (node.next) node.next.prev = newNode;\n        else this.tail = newNode;\n        node.next = newNode;\n        this.length += 1;\n    }\n\n    insertBefore(node, newNode) {\n        newNode.prev = node.prev;\n        newNode.next = node;\n        if (node.prev) node.prev.next = newNode;\n        else this.head = newNode;\n        node.prev = newNode;\n        this.length += 1;\n    }\n\n    unshift(node) {\n        if (this.head) this.insertBefore(this.head, node);\n        else setInitial(this, node);\n    }\n\n    push(node) {\n        if (this.tail) this.insertAfter(this.tail, node);\n        else setInitial(this, node);\n    }\n\n    shift() {\n        return this.head && this.removeLink(this.head);\n    }\n\n    pop() {\n        return this.tail && this.removeLink(this.tail);\n    }\n\n    toArray() {\n        return [...this]\n    }\n\n    *[Symbol.iterator] () {\n        var cur = this.head;\n        while (cur) {\n            yield cur.data;\n            cur = cur.next;\n        }\n    }\n\n    remove (testFn) {\n        var curr = this.head;\n        while(curr) {\n            var {next} = curr;\n            if (testFn(curr)) {\n                this.removeLink(curr);\n            }\n            curr = next;\n        }\n        return this;\n    }\n}\n\nfunction setInitial(dll, node) {\n    dll.length = 1;\n    dll.head = dll.tail = node;\n}\n\nfunction queue(worker, concurrency, payload) {\n    if (concurrency == null) {\n        concurrency = 1;\n    }\n    else if(concurrency === 0) {\n        throw new RangeError('Concurrency must not be zero');\n    }\n\n    var _worker = wrapAsync(worker);\n    var numRunning = 0;\n    var workersList = [];\n    const events = {\n        error: [],\n        drain: [],\n        saturated: [],\n        unsaturated: [],\n        empty: []\n    };\n\n    function on (event, handler) {\n        events[event].push(handler);\n    }\n\n    function once (event, handler) {\n        const handleAndRemove = (...args) => {\n            off(event, handleAndRemove);\n            handler(...args);\n        };\n        events[event].push(handleAndRemove);\n    }\n\n    function off (event, handler) {\n        if (!event) return Object.keys(events).forEach(ev => events[ev] = [])\n        if (!handler) return events[event] = []\n        events[event] = events[event].filter(ev => ev !== handler);\n    }\n\n    function trigger (event, ...args) {\n        events[event].forEach(handler => handler(...args));\n    }\n\n    var processingScheduled = false;\n    function _insert(data, insertAtFront, rejectOnError, callback) {\n        if (callback != null && typeof callback !== 'function') {\n            throw new Error('task callback must be a function');\n        }\n        q.started = true;\n\n        var res, rej;\n        function promiseCallback (err, ...args) {\n            // we don't care about the error, let the global error handler\n            // deal with it\n            if (err) return rejectOnError ? rej(err) : res()\n            if (args.length <= 1) return res(args[0])\n            res(args);\n        }\n\n        var item = {\n            data,\n            callback: rejectOnError ?\n                promiseCallback :\n                (callback || promiseCallback)\n        };\n\n        if (insertAtFront) {\n            q._tasks.unshift(item);\n        } else {\n            q._tasks.push(item);\n        }\n\n        if (!processingScheduled) {\n            processingScheduled = true;\n            setImmediate$1(() => {\n                processingScheduled = false;\n                q.process();\n            });\n        }\n\n        if (rejectOnError || !callback) {\n            return new Promise((resolve, reject) => {\n                res = resolve;\n                rej = reject;\n            })\n        }\n    }\n\n    function _createCB(tasks) {\n        return function (err, ...args) {\n            numRunning -= 1;\n\n            for (var i = 0, l = tasks.length; i < l; i++) {\n                var task = tasks[i];\n\n                var index = workersList.indexOf(task);\n                if (index === 0) {\n                    workersList.shift();\n                } else if (index > 0) {\n                    workersList.splice(index, 1);\n                }\n\n                task.callback(err, ...args);\n\n                if (err != null) {\n                    trigger('error', err, task.data);\n                }\n            }\n\n            if (numRunning <= (q.concurrency - q.buffer) ) {\n                trigger('unsaturated');\n            }\n\n            if (q.idle()) {\n                trigger('drain');\n            }\n            q.process();\n        };\n    }\n\n    function _maybeDrain(data) {\n        if (data.length === 0 && q.idle()) {\n            // call drain immediately if there are no tasks\n            setImmediate$1(() => trigger('drain'));\n            return true\n        }\n        return false\n    }\n\n    const eventMethod = (name) => (handler) => {\n        if (!handler) {\n            return new Promise((resolve, reject) => {\n                once(name, (err, data) => {\n                    if (err) return reject(err)\n                    resolve(data);\n                });\n            })\n        }\n        off(name);\n        on(name, handler);\n\n    };\n\n    var isProcessing = false;\n    var q = {\n        _tasks: new DLL(),\n        *[Symbol.iterator] () {\n            yield* q._tasks[Symbol.iterator]();\n        },\n        concurrency,\n        payload,\n        buffer: concurrency / 4,\n        started: false,\n        paused: false,\n        push (data, callback) {\n            if (Array.isArray(data)) {\n                if (_maybeDrain(data)) return\n                return data.map(datum => _insert(datum, false, false, callback))\n            }\n            return _insert(data, false, false, callback);\n        },\n        pushAsync (data, callback) {\n            if (Array.isArray(data)) {\n                if (_maybeDrain(data)) return\n                return data.map(datum => _insert(datum, false, true, callback))\n            }\n            return _insert(data, false, true, callback);\n        },\n        kill () {\n            off();\n            q._tasks.empty();\n        },\n        unshift (data, callback) {\n            if (Array.isArray(data)) {\n                if (_maybeDrain(data)) return\n                return data.map(datum => _insert(datum, true, false, callback))\n            }\n            return _insert(data, true, false, callback);\n        },\n        unshiftAsync (data, callback) {\n            if (Array.isArray(data)) {\n                if (_maybeDrain(data)) return\n                return data.map(datum => _insert(datum, true, true, callback))\n            }\n            return _insert(data, true, true, callback);\n        },\n        remove (testFn) {\n            q._tasks.remove(testFn);\n        },\n        process () {\n            // Avoid trying to start too many processing operations. This can occur\n            // when callbacks resolve synchronously (#1267).\n            if (isProcessing) {\n                return;\n            }\n            isProcessing = true;\n            while(!q.paused && numRunning < q.concurrency && q._tasks.length){\n                var tasks = [], data = [];\n                var l = q._tasks.length;\n                if (q.payload) l = Math.min(l, q.payload);\n                for (var i = 0; i < l; i++) {\n                    var node = q._tasks.shift();\n                    tasks.push(node);\n                    workersList.push(node);\n                    data.push(node.data);\n                }\n\n                numRunning += 1;\n\n                if (q._tasks.length === 0) {\n                    trigger('empty');\n                }\n\n                if (numRunning === q.concurrency) {\n                    trigger('saturated');\n                }\n\n                var cb = onlyOnce(_createCB(tasks));\n                _worker(data, cb);\n            }\n            isProcessing = false;\n        },\n        length () {\n            return q._tasks.length;\n        },\n        running () {\n            return numRunning;\n        },\n        workersList () {\n            return workersList;\n        },\n        idle() {\n            return q._tasks.length + numRunning === 0;\n        },\n        pause () {\n            q.paused = true;\n        },\n        resume () {\n            if (q.paused === false) { return; }\n            q.paused = false;\n            setImmediate$1(q.process);\n        }\n    };\n    // define these as fixed properties, so people get useful errors when updating\n    Object.defineProperties(q, {\n        saturated: {\n            writable: false,\n            value: eventMethod('saturated')\n        },\n        unsaturated: {\n            writable: false,\n            value: eventMethod('unsaturated')\n        },\n        empty: {\n            writable: false,\n            value: eventMethod('empty')\n        },\n        drain: {\n            writable: false,\n            value: eventMethod('drain')\n        },\n        error: {\n            writable: false,\n            value: eventMethod('error')\n        },\n    });\n    return q;\n}\n\n/**\n * Creates a `cargo` object with the specified payload. Tasks added to the\n * cargo will be processed altogether (up to the `payload` limit). If the\n * `worker` is in progress, the task is queued until it becomes available. Once\n * the `worker` has completed some tasks, each callback of those tasks is\n * called. Check out [these](https://camo.githubusercontent.com/6bbd36f4cf5b35a0f11a96dcd2e97711ffc2fb37/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130382f62626330636662302d356632392d313165322d393734662d3333393763363464633835382e676966) [animations](https://camo.githubusercontent.com/f4810e00e1c5f5f8addbe3e9f49064fd5d102699/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130312f38346339323036362d356632392d313165322d383134662d3964336430323431336266642e676966)\n * for how `cargo` and `queue` work.\n *\n * While [`queue`]{@link module:ControlFlow.queue} passes only one task to one of a group of workers\n * at a time, cargo passes an array of tasks to a single worker, repeating\n * when the worker is finished.\n *\n * @name cargo\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.queue]{@link module:ControlFlow.queue}\n * @category Control Flow\n * @param {AsyncFunction} worker - An asynchronous function for processing an array\n * of queued tasks. Invoked with `(tasks, callback)`.\n * @param {number} [payload=Infinity] - An optional `integer` for determining\n * how many tasks should be processed per round; if omitted, the default is\n * unlimited.\n * @returns {module:ControlFlow.QueueObject} A cargo object to manage the tasks. Callbacks can\n * attached as certain properties to listen for specific events during the\n * lifecycle of the cargo and inner queue.\n * @example\n *\n * // create a cargo object with payload 2\n * var cargo = async.cargo(function(tasks, callback) {\n *     for (var i=0; i<tasks.length; i++) {\n *         console.log('hello ' + tasks[i].name);\n *     }\n *     callback();\n * }, 2);\n *\n * // add some items\n * cargo.push({name: 'foo'}, function(err) {\n *     console.log('finished processing foo');\n * });\n * cargo.push({name: 'bar'}, function(err) {\n *     console.log('finished processing bar');\n * });\n * await cargo.push({name: 'baz'});\n * console.log('finished processing baz');\n */\nfunction cargo(worker, payload) {\n    return queue(worker, 1, payload);\n}\n\n/**\n * Creates a `cargoQueue` object with the specified payload. Tasks added to the\n * cargoQueue will be processed together (up to the `payload` limit) in `concurrency` parallel workers.\n * If the all `workers` are in progress, the task is queued until one becomes available. Once\n * a `worker` has completed some tasks, each callback of those tasks is\n * called. Check out [these](https://camo.githubusercontent.com/6bbd36f4cf5b35a0f11a96dcd2e97711ffc2fb37/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130382f62626330636662302d356632392d313165322d393734662d3333393763363464633835382e676966) [animations](https://camo.githubusercontent.com/f4810e00e1c5f5f8addbe3e9f49064fd5d102699/68747470733a2f2f662e636c6f75642e6769746875622e636f6d2f6173736574732f313637363837312f36383130312f38346339323036362d356632392d313165322d383134662d3964336430323431336266642e676966)\n * for how `cargo` and `queue` work.\n *\n * While [`queue`]{@link module:ControlFlow.queue} passes only one task to one of a group of workers\n * at a time, and [`cargo`]{@link module:ControlFlow.cargo} passes an array of tasks to a single worker,\n * the cargoQueue passes an array of tasks to multiple parallel workers.\n *\n * @name cargoQueue\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.queue]{@link module:ControlFlow.queue}\n * @see [async.cargo]{@link module:ControlFLow.cargo}\n * @category Control Flow\n * @param {AsyncFunction} worker - An asynchronous function for processing an array\n * of queued tasks. Invoked with `(tasks, callback)`.\n * @param {number} [concurrency=1] - An `integer` for determining how many\n * `worker` functions should be run in parallel.  If omitted, the concurrency\n * defaults to `1`.  If the concurrency is `0`, an error is thrown.\n * @param {number} [payload=Infinity] - An optional `integer` for determining\n * how many tasks should be processed per round; if omitted, the default is\n * unlimited.\n * @returns {module:ControlFlow.QueueObject} A cargoQueue object to manage the tasks. Callbacks can\n * attached as certain properties to listen for specific events during the\n * lifecycle of the cargoQueue and inner queue.\n * @example\n *\n * // create a cargoQueue object with payload 2 and concurrency 2\n * var cargoQueue = async.cargoQueue(function(tasks, callback) {\n *     for (var i=0; i<tasks.length; i++) {\n *         console.log('hello ' + tasks[i].name);\n *     }\n *     callback();\n * }, 2, 2);\n *\n * // add some items\n * cargoQueue.push({name: 'foo'}, function(err) {\n *     console.log('finished processing foo');\n * });\n * cargoQueue.push({name: 'bar'}, function(err) {\n *     console.log('finished processing bar');\n * });\n * cargoQueue.push({name: 'baz'}, function(err) {\n *     console.log('finished processing baz');\n * });\n * cargoQueue.push({name: 'boo'}, function(err) {\n *     console.log('finished processing boo');\n * });\n */\nfunction cargo$1(worker, concurrency, payload) {\n    return queue(worker, concurrency, payload);\n}\n\n/**\n * Reduces `coll` into a single value using an async `iteratee` to return each\n * successive step. `memo` is the initial state of the reduction. This function\n * only operates in series.\n *\n * For performance reasons, it may make sense to split a call to this function\n * into a parallel map, and then use the normal `Array.prototype.reduce` on the\n * results. This function is for situations where each step in the reduction\n * needs to be async; if you can get the data before reducing it, then it's\n * probably a good idea to do so.\n *\n * @name reduce\n * @static\n * @memberOf module:Collections\n * @method\n * @alias inject\n * @alias foldl\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {*} memo - The initial state of the reduction.\n * @param {AsyncFunction} iteratee - A function applied to each item in the\n * array to produce the next step in the reduction.\n * The `iteratee` should complete with the next state of the reduction.\n * If the iteratee complete with an error, the reduction is stopped and the\n * main `callback` is immediately called with the error.\n * Invoked with (memo, item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result is the reduced value. Invoked with\n * (err, result).\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * async.reduce([1,2,3], 0, function(memo, item, callback) {\n *     // pointless async:\n *     process.nextTick(function() {\n *         callback(null, memo + item)\n *     });\n * }, function(err, result) {\n *     // result is now equal to the last value of memo, which is 6\n * });\n */\nfunction reduce(coll, memo, iteratee, callback) {\n    callback = once(callback);\n    var _iteratee = wrapAsync(iteratee);\n    return eachOfSeries$1(coll, (x, i, iterCb) => {\n        _iteratee(memo, x, (err, v) => {\n            memo = v;\n            iterCb(err);\n        });\n    }, err => callback(err, memo));\n}\nvar reduce$1 = awaitify(reduce, 4);\n\n/**\n * Version of the compose function that is more natural to read. Each function\n * consumes the return value of the previous function. It is the equivalent of\n * [compose]{@link module:ControlFlow.compose} with the arguments reversed.\n *\n * Each function is executed with the `this` binding of the composed function.\n *\n * @name seq\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.compose]{@link module:ControlFlow.compose}\n * @category Control Flow\n * @param {...AsyncFunction} functions - the asynchronous functions to compose\n * @returns {Function} a function that composes the `functions` in order\n * @example\n *\n * // Requires lodash (or underscore), express3 and dresende's orm2.\n * // Part of an app, that fetches cats of the logged user.\n * // This example uses `seq` function to avoid overnesting and error\n * // handling clutter.\n * app.get('/cats', function(request, response) {\n *     var User = request.models.User;\n *     async.seq(\n *         _.bind(User.get, User),  // 'User.get' has signature (id, callback(err, data))\n *         function(user, fn) {\n *             user.getCats(fn);      // 'getCats' has signature (callback(err, data))\n *         }\n *     )(req.session.user_id, function (err, cats) {\n *         if (err) {\n *             console.error(err);\n *             response.json({ status: 'error', message: err.message });\n *         } else {\n *             response.json({ status: 'ok', message: 'Cats found', data: cats });\n *         }\n *     });\n * });\n */\nfunction seq(...functions) {\n    var _functions = functions.map(wrapAsync);\n    return function (...args) {\n        var that = this;\n\n        var cb = args[args.length - 1];\n        if (typeof cb == 'function') {\n            args.pop();\n        } else {\n            cb = promiseCallback();\n        }\n\n        reduce$1(_functions, args, (newargs, fn, iterCb) => {\n            fn.apply(that, newargs.concat((err, ...nextargs) => {\n                iterCb(err, nextargs);\n            }));\n        },\n        (err, results) => cb(err, ...results));\n\n        return cb[PROMISE_SYMBOL]\n    };\n}\n\n/**\n * Creates a function which is a composition of the passed asynchronous\n * functions. Each function consumes the return value of the function that\n * follows. Composing functions `f()`, `g()`, and `h()` would produce the result\n * of `f(g(h()))`, only this version uses callbacks to obtain the return values.\n *\n * If the last argument to the composed function is not a function, a promise\n * is returned when you call it.\n *\n * Each function is executed with the `this` binding of the composed function.\n *\n * @name compose\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {...AsyncFunction} functions - the asynchronous functions to compose\n * @returns {Function} an asynchronous function that is the composed\n * asynchronous `functions`\n * @example\n *\n * function add1(n, callback) {\n *     setTimeout(function () {\n *         callback(null, n + 1);\n *     }, 10);\n * }\n *\n * function mul3(n, callback) {\n *     setTimeout(function () {\n *         callback(null, n * 3);\n *     }, 10);\n * }\n *\n * var add1mul3 = async.compose(mul3, add1);\n * add1mul3(4, function (err, result) {\n *     // result now equals 15\n * });\n */\nfunction compose(...args) {\n    return seq(...args.reverse());\n}\n\n/**\n * The same as [`map`]{@link module:Collections.map} but runs a maximum of `limit` async operations at a time.\n *\n * @name mapLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.map]{@link module:Collections.map}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with the transformed item.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Results is an array of the\n * transformed items from the `coll`. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction mapLimit (coll, limit, iteratee, callback) {\n    return _asyncMap(eachOfLimit(limit), coll, iteratee, callback)\n}\nvar mapLimit$1 = awaitify(mapLimit, 4);\n\n/**\n * The same as [`concat`]{@link module:Collections.concat} but runs a maximum of `limit` async operations at a time.\n *\n * @name concatLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.concat]{@link module:Collections.concat}\n * @category Collection\n * @alias flatMapLimit\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - A function to apply to each item in `coll`,\n * which should use an array as its result. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is an array\n * containing the concatenated results of the `iteratee` function. Invoked with\n * (err, results).\n * @returns A Promise, if no callback is passed\n */\nfunction concatLimit(coll, limit, iteratee, callback) {\n    var _iteratee = wrapAsync(iteratee);\n    return mapLimit$1(coll, limit, (val, iterCb) => {\n        _iteratee(val, (err, ...args) => {\n            if (err) return iterCb(err);\n            return iterCb(err, args);\n        });\n    }, (err, mapResults) => {\n        var result = [];\n        for (var i = 0; i < mapResults.length; i++) {\n            if (mapResults[i]) {\n                result = result.concat(...mapResults[i]);\n            }\n        }\n\n        return callback(err, result);\n    });\n}\nvar concatLimit$1 = awaitify(concatLimit, 4);\n\n/**\n * Applies `iteratee` to each item in `coll`, concatenating the results. Returns\n * the concatenated list. The `iteratee`s are called in parallel, and the\n * results are concatenated as they return. The results array will be returned in\n * the original order of `coll` passed to the `iteratee` function.\n *\n * @name concat\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @alias flatMap\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each item in `coll`,\n * which should use an array as its result. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is an array\n * containing the concatenated results of the `iteratee` function. Invoked with\n * (err, results).\n * @returns A Promise, if no callback is passed\n * @example\n *\n * async.concat(['dir1','dir2','dir3'], fs.readdir, function(err, files) {\n *     // files is now a list of filenames that exist in the 3 directories\n * });\n */\nfunction concat(coll, iteratee, callback) {\n    return concatLimit$1(coll, Infinity, iteratee, callback)\n}\nvar concat$1 = awaitify(concat, 3);\n\n/**\n * The same as [`concat`]{@link module:Collections.concat} but runs only a single async operation at a time.\n *\n * @name concatSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.concat]{@link module:Collections.concat}\n * @category Collection\n * @alias flatMapSeries\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each item in `coll`.\n * The iteratee should complete with an array an array of results.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is an array\n * containing the concatenated results of the `iteratee` function. Invoked with\n * (err, results).\n * @returns A Promise, if no callback is passed\n */\nfunction concatSeries(coll, iteratee, callback) {\n    return concatLimit$1(coll, 1, iteratee, callback)\n}\nvar concatSeries$1 = awaitify(concatSeries, 3);\n\n/**\n * Returns a function that when called, calls-back with the values provided.\n * Useful as the first function in a [`waterfall`]{@link module:ControlFlow.waterfall}, or for plugging values in to\n * [`auto`]{@link module:ControlFlow.auto}.\n *\n * @name constant\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {...*} arguments... - Any number of arguments to automatically invoke\n * callback with.\n * @returns {AsyncFunction} Returns a function that when invoked, automatically\n * invokes the callback with the previous given arguments.\n * @example\n *\n * async.waterfall([\n *     async.constant(42),\n *     function (value, next) {\n *         // value === 42\n *     },\n *     //...\n * ], callback);\n *\n * async.waterfall([\n *     async.constant(filename, \"utf8\"),\n *     fs.readFile,\n *     function (fileData, next) {\n *         //...\n *     }\n *     //...\n * ], callback);\n *\n * async.auto({\n *     hostname: async.constant(\"https://server.net/\"),\n *     port: findFreePort,\n *     launchServer: [\"hostname\", \"port\", function (options, cb) {\n *         startServer(options, cb);\n *     }],\n *     //...\n * }, callback);\n */\nfunction constant(...args) {\n    return function (...ignoredArgs/*, callback*/) {\n        var callback = ignoredArgs.pop();\n        return callback(null, ...args);\n    };\n}\n\nfunction _createTester(check, getResult) {\n    return (eachfn, arr, _iteratee, cb) => {\n        var testPassed = false;\n        var testResult;\n        const iteratee = wrapAsync(_iteratee);\n        eachfn(arr, (value, _, callback) => {\n            iteratee(value, (err, result) => {\n                if (err || err === false) return callback(err);\n\n                if (check(result) && !testResult) {\n                    testPassed = true;\n                    testResult = getResult(true, value);\n                    return callback(null, breakLoop);\n                }\n                callback();\n            });\n        }, err => {\n            if (err) return cb(err);\n            cb(null, testPassed ? testResult : getResult(false));\n        });\n    };\n}\n\n/**\n * Returns the first value in `coll` that passes an async truth test. The\n * `iteratee` is applied in parallel, meaning the first iteratee to return\n * `true` will fire the detect `callback` with that result. That means the\n * result might not be the first item in the original `coll` (in terms of order)\n * that passes the test.\n\n * If order within the original `coll` is important, then look at\n * [`detectSeries`]{@link module:Collections.detectSeries}.\n *\n * @name detect\n * @static\n * @memberOf module:Collections\n * @method\n * @alias find\n * @category Collections\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A truth test to apply to each item in `coll`.\n * The iteratee must complete with a boolean value as its result.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the `iteratee` functions have finished.\n * Result will be the first item in the array that passes the truth test\n * (iteratee) or the value `undefined` if none passed. Invoked with\n * (err, result).\n * @returns A Promise, if no callback is passed\n * @example\n *\n * async.detect(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, result) {\n *     // result now equals the first file in the list that exists\n * });\n */\nfunction detect(coll, iteratee, callback) {\n    return _createTester(bool => bool, (res, item) => item)(eachOf$1, coll, iteratee, callback)\n}\nvar detect$1 = awaitify(detect, 3);\n\n/**\n * The same as [`detect`]{@link module:Collections.detect} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name detectLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.detect]{@link module:Collections.detect}\n * @alias findLimit\n * @category Collections\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - A truth test to apply to each item in `coll`.\n * The iteratee must complete with a boolean value as its result.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the `iteratee` functions have finished.\n * Result will be the first item in the array that passes the truth test\n * (iteratee) or the value `undefined` if none passed. Invoked with\n * (err, result).\n * @returns a Promise if no callback is passed\n */\nfunction detectLimit(coll, limit, iteratee, callback) {\n    return _createTester(bool => bool, (res, item) => item)(eachOfLimit(limit), coll, iteratee, callback)\n}\nvar detectLimit$1 = awaitify(detectLimit, 4);\n\n/**\n * The same as [`detect`]{@link module:Collections.detect} but runs only a single async operation at a time.\n *\n * @name detectSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.detect]{@link module:Collections.detect}\n * @alias findSeries\n * @category Collections\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A truth test to apply to each item in `coll`.\n * The iteratee must complete with a boolean value as its result.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the `iteratee` functions have finished.\n * Result will be the first item in the array that passes the truth test\n * (iteratee) or the value `undefined` if none passed. Invoked with\n * (err, result).\n * @returns a Promise if no callback is passed\n */\nfunction detectSeries(coll, iteratee, callback) {\n    return _createTester(bool => bool, (res, item) => item)(eachOfLimit(1), coll, iteratee, callback)\n}\n\nvar detectSeries$1 = awaitify(detectSeries, 3);\n\nfunction consoleFunc(name) {\n    return (fn, ...args) => wrapAsync(fn)(...args, (err, ...resultArgs) => {\n        if (typeof console === 'object') {\n            if (err) {\n                if (console.error) {\n                    console.error(err);\n                }\n            } else if (console[name]) {\n                resultArgs.forEach(x => console[name](x));\n            }\n        }\n    })\n}\n\n/**\n * Logs the result of an [`async` function]{@link AsyncFunction} to the\n * `console` using `console.dir` to display the properties of the resulting object.\n * Only works in Node.js or in browsers that support `console.dir` and\n * `console.error` (such as FF and Chrome).\n * If multiple arguments are returned from the async function,\n * `console.dir` is called on each argument in order.\n *\n * @name dir\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} function - The function you want to eventually apply\n * all arguments to.\n * @param {...*} arguments... - Any number of arguments to apply to the function.\n * @example\n *\n * // in a module\n * var hello = function(name, callback) {\n *     setTimeout(function() {\n *         callback(null, {hello: name});\n *     }, 1000);\n * };\n *\n * // in the node repl\n * node> async.dir(hello, 'world');\n * {hello: 'world'}\n */\nvar dir = consoleFunc('dir');\n\n/**\n * The post-check version of [`whilst`]{@link module:ControlFlow.whilst}. To reflect the difference in\n * the order of operations, the arguments `test` and `iteratee` are switched.\n *\n * `doWhilst` is to `whilst` as `do while` is to `while` in plain JavaScript.\n *\n * @name doWhilst\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.whilst]{@link module:ControlFlow.whilst}\n * @category Control Flow\n * @param {AsyncFunction} iteratee - A function which is called each time `test`\n * passes. Invoked with (callback).\n * @param {AsyncFunction} test - asynchronous truth test to perform after each\n * execution of `iteratee`. Invoked with (...args, callback), where `...args` are the\n * non-error args from the previous callback of `iteratee`.\n * @param {Function} [callback] - A callback which is called after the test\n * function has failed and repeated execution of `iteratee` has stopped.\n * `callback` will be passed an error and any arguments passed to the final\n * `iteratee`'s callback. Invoked with (err, [results]);\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction doWhilst(iteratee, test, callback) {\n    callback = onlyOnce(callback);\n    var _fn = wrapAsync(iteratee);\n    var _test = wrapAsync(test);\n    var results;\n\n    function next(err, ...args) {\n        if (err) return callback(err);\n        if (err === false) return;\n        results = args;\n        _test(...args, check);\n    }\n\n    function check(err, truth) {\n        if (err) return callback(err);\n        if (err === false) return;\n        if (!truth) return callback(null, ...results);\n        _fn(next);\n    }\n\n    return check(null, true);\n}\n\nvar doWhilst$1 = awaitify(doWhilst, 3);\n\n/**\n * Like ['doWhilst']{@link module:ControlFlow.doWhilst}, except the `test` is inverted. Note the\n * argument ordering differs from `until`.\n *\n * @name doUntil\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.doWhilst]{@link module:ControlFlow.doWhilst}\n * @category Control Flow\n * @param {AsyncFunction} iteratee - An async function which is called each time\n * `test` fails. Invoked with (callback).\n * @param {AsyncFunction} test - asynchronous truth test to perform after each\n * execution of `iteratee`. Invoked with (...args, callback), where `...args` are the\n * non-error args from the previous callback of `iteratee`\n * @param {Function} [callback] - A callback which is called after the test\n * function has passed and repeated execution of `iteratee` has stopped. `callback`\n * will be passed an error and any arguments passed to the final `iteratee`'s\n * callback. Invoked with (err, [results]);\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction doUntil(iteratee, test, callback) {\n    const _test = wrapAsync(test);\n    return doWhilst$1(iteratee, (...args) => {\n        const cb = args.pop();\n        _test(...args, (err, truth) => cb (err, !truth));\n    }, callback);\n}\n\nfunction _withoutIndex(iteratee) {\n    return (value, index, callback) => iteratee(value, callback);\n}\n\n/**\n * Applies the function `iteratee` to each item in `coll`, in parallel.\n * The `iteratee` is called with an item from the list, and a callback for when\n * it has finished. If the `iteratee` passes an error to its `callback`, the\n * main `callback` (for the `each` function) is immediately called with the\n * error.\n *\n * Note, that since this function applies `iteratee` to each item in parallel,\n * there is no guarantee that the iteratee functions will complete in order.\n *\n * @name each\n * @static\n * @memberOf module:Collections\n * @method\n * @alias forEach\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to\n * each item in `coll`. Invoked with (item, callback).\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOf`.\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n * @example\n *\n * // assuming openFiles is an array of file names and saveFile is a function\n * // to save the modified contents of that file:\n *\n * async.each(openFiles, saveFile, function(err){\n *   // if any of the saves produced an error, err would equal that error\n * });\n *\n * // assuming openFiles is an array of file names\n * async.each(openFiles, function(file, callback) {\n *\n *     // Perform operation on file here.\n *     console.log('Processing file ' + file);\n *\n *     if( file.length > 32 ) {\n *       console.log('This file name is too long');\n *       callback('File name too long');\n *     } else {\n *       // Do work to process file here\n *       console.log('File processed');\n *       callback();\n *     }\n * }, function(err) {\n *     // if any of the file processing produced an error, err would equal that error\n *     if( err ) {\n *       // One of the iterations produced an error.\n *       // All processing will now stop.\n *       console.log('A file failed to process');\n *     } else {\n *       console.log('All files have been processed successfully');\n *     }\n * });\n */\nfunction eachLimit(coll, iteratee, callback) {\n    return eachOf$1(coll, _withoutIndex(wrapAsync(iteratee)), callback);\n}\n\nvar each = awaitify(eachLimit, 3);\n\n/**\n * The same as [`each`]{@link module:Collections.each} but runs a maximum of `limit` async operations at a time.\n *\n * @name eachLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.each]{@link module:Collections.each}\n * @alias forEachLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOfLimit`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachLimit$1(coll, limit, iteratee, callback) {\n    return eachOfLimit(limit)(coll, _withoutIndex(wrapAsync(iteratee)), callback);\n}\nvar eachLimit$2 = awaitify(eachLimit$1, 4);\n\n/**\n * The same as [`each`]{@link module:Collections.each} but runs only a single async operation at a time.\n *\n * Note, that unlike [`each`]{@link module:Collections.each}, this function applies iteratee to each item\n * in series and therefore the iteratee functions will complete in order.\n\n * @name eachSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.each]{@link module:Collections.each}\n * @alias forEachSeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each\n * item in `coll`.\n * The array index is not passed to the iteratee.\n * If you need the index, use `eachOfSeries`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called when all\n * `iteratee` functions have finished, or an error occurs. Invoked with (err).\n * @returns {Promise} a promise, if a callback is omitted\n */\nfunction eachSeries(coll, iteratee, callback) {\n    return eachLimit$2(coll, 1, iteratee, callback)\n}\nvar eachSeries$1 = awaitify(eachSeries, 3);\n\n/**\n * Wrap an async function and ensure it calls its callback on a later tick of\n * the event loop.  If the function already calls its callback on a next tick,\n * no extra deferral is added. This is useful for preventing stack overflows\n * (`RangeError: Maximum call stack size exceeded`) and generally keeping\n * [Zalgo](http://blog.izs.me/post/59142742143/designing-apis-for-asynchrony)\n * contained. ES2017 `async` functions are returned as-is -- they are immune\n * to Zalgo's corrupting influences, as they always resolve on a later tick.\n *\n * @name ensureAsync\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} fn - an async function, one that expects a node-style\n * callback as its last argument.\n * @returns {AsyncFunction} Returns a wrapped function with the exact same call\n * signature as the function passed in.\n * @example\n *\n * function sometimesAsync(arg, callback) {\n *     if (cache[arg]) {\n *         return callback(null, cache[arg]); // this would be synchronous!!\n *     } else {\n *         doSomeIO(arg, callback); // this IO would be asynchronous\n *     }\n * }\n *\n * // this has a risk of stack overflows if many results are cached in a row\n * async.mapSeries(args, sometimesAsync, done);\n *\n * // this will defer sometimesAsync's callback if necessary,\n * // preventing stack overflows\n * async.mapSeries(args, async.ensureAsync(sometimesAsync), done);\n */\nfunction ensureAsync(fn) {\n    if (isAsync(fn)) return fn;\n    return function (...args/*, callback*/) {\n        var callback = args.pop();\n        var sync = true;\n        args.push((...innerArgs) => {\n            if (sync) {\n                setImmediate$1(() => callback(...innerArgs));\n            } else {\n                callback(...innerArgs);\n            }\n        });\n        fn.apply(this, args);\n        sync = false;\n    };\n}\n\n/**\n * Returns `true` if every element in `coll` satisfies an async test. If any\n * iteratee call returns `false`, the main `callback` is immediately called.\n *\n * @name every\n * @static\n * @memberOf module:Collections\n * @method\n * @alias all\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collection in parallel.\n * The iteratee must complete with a boolean result value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result will be either `true` or `false`\n * depending on the values of the async tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n * @example\n *\n * async.every(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, result) {\n *     // if result is true then every file exists\n * });\n */\nfunction every(coll, iteratee, callback) {\n    return _createTester(bool => !bool, res => !res)(eachOf$1, coll, iteratee, callback)\n}\nvar every$1 = awaitify(every, 3);\n\n/**\n * The same as [`every`]{@link module:Collections.every} but runs a maximum of `limit` async operations at a time.\n *\n * @name everyLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.every]{@link module:Collections.every}\n * @alias allLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collection in parallel.\n * The iteratee must complete with a boolean result value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result will be either `true` or `false`\n * depending on the values of the async tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n */\nfunction everyLimit(coll, limit, iteratee, callback) {\n    return _createTester(bool => !bool, res => !res)(eachOfLimit(limit), coll, iteratee, callback)\n}\nvar everyLimit$1 = awaitify(everyLimit, 4);\n\n/**\n * The same as [`every`]{@link module:Collections.every} but runs only a single async operation at a time.\n *\n * @name everySeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.every]{@link module:Collections.every}\n * @alias allSeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collection in series.\n * The iteratee must complete with a boolean result value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result will be either `true` or `false`\n * depending on the values of the async tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n */\nfunction everySeries(coll, iteratee, callback) {\n    return _createTester(bool => !bool, res => !res)(eachOfSeries$1, coll, iteratee, callback)\n}\nvar everySeries$1 = awaitify(everySeries, 3);\n\nfunction filterArray(eachfn, arr, iteratee, callback) {\n    var truthValues = new Array(arr.length);\n    eachfn(arr, (x, index, iterCb) => {\n        iteratee(x, (err, v) => {\n            truthValues[index] = !!v;\n            iterCb(err);\n        });\n    }, err => {\n        if (err) return callback(err);\n        var results = [];\n        for (var i = 0; i < arr.length; i++) {\n            if (truthValues[i]) results.push(arr[i]);\n        }\n        callback(null, results);\n    });\n}\n\nfunction filterGeneric(eachfn, coll, iteratee, callback) {\n    var results = [];\n    eachfn(coll, (x, index, iterCb) => {\n        iteratee(x, (err, v) => {\n            if (err) return iterCb(err);\n            if (v) {\n                results.push({index, value: x});\n            }\n            iterCb(err);\n        });\n    }, err => {\n        if (err) return callback(err);\n        callback(null, results\n            .sort((a, b) => a.index - b.index)\n            .map(v => v.value));\n    });\n}\n\nfunction _filter(eachfn, coll, iteratee, callback) {\n    var filter = isArrayLike(coll) ? filterArray : filterGeneric;\n    return filter(eachfn, coll, wrapAsync(iteratee), callback);\n}\n\n/**\n * Returns a new array of all the values in `coll` which pass an async truth\n * test. This operation is performed in parallel, but the results array will be\n * in the same order as the original.\n *\n * @name filter\n * @static\n * @memberOf module:Collections\n * @method\n * @alias select\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n * with a boolean argument once it has completed. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback provided\n * @example\n *\n * async.filter(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, results) {\n *     // results now equals an array of the existing files\n * });\n */\nfunction filter (coll, iteratee, callback) {\n    return _filter(eachOf$1, coll, iteratee, callback)\n}\nvar filter$1 = awaitify(filter, 3);\n\n/**\n * The same as [`filter`]{@link module:Collections.filter} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name filterLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.filter]{@link module:Collections.filter}\n * @alias selectLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n * with a boolean argument once it has completed. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback provided\n */\nfunction filterLimit (coll, limit, iteratee, callback) {\n    return _filter(eachOfLimit(limit), coll, iteratee, callback)\n}\nvar filterLimit$1 = awaitify(filterLimit, 4);\n\n/**\n * The same as [`filter`]{@link module:Collections.filter} but runs only a single async operation at a time.\n *\n * @name filterSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.filter]{@link module:Collections.filter}\n * @alias selectSeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - A truth test to apply to each item in `coll`.\n * The `iteratee` is passed a `callback(err, truthValue)`, which must be called\n * with a boolean argument once it has completed. Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results)\n * @returns {Promise} a promise, if no callback provided\n */\nfunction filterSeries (coll, iteratee, callback) {\n    return _filter(eachOfSeries$1, coll, iteratee, callback)\n}\nvar filterSeries$1 = awaitify(filterSeries, 3);\n\n/**\n * Calls the asynchronous function `fn` with a callback parameter that allows it\n * to call itself again, in series, indefinitely.\n\n * If an error is passed to the callback then `errback` is called with the\n * error, and execution stops, otherwise it will never be called.\n *\n * @name forever\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {AsyncFunction} fn - an async function to call repeatedly.\n * Invoked with (next).\n * @param {Function} [errback] - when `fn` passes an error to it's callback,\n * this function will be called, and execution stops. Invoked with (err).\n * @returns {Promise} a promise that rejects if an error occurs and an errback\n * is not passed\n * @example\n *\n * async.forever(\n *     function(next) {\n *         // next is suitable for passing to things that need a callback(err [, whatever]);\n *         // it will result in this function being called again.\n *     },\n *     function(err) {\n *         // if next is called with a value in its first parameter, it will appear\n *         // in here as 'err', and execution will stop.\n *     }\n * );\n */\nfunction forever(fn, errback) {\n    var done = onlyOnce(errback);\n    var task = wrapAsync(ensureAsync(fn));\n\n    function next(err) {\n        if (err) return done(err);\n        if (err === false) return;\n        task(next);\n    }\n    return next();\n}\nvar forever$1 = awaitify(forever, 2);\n\n/**\n * The same as [`groupBy`]{@link module:Collections.groupBy} but runs a maximum of `limit` async operations at a time.\n *\n * @name groupByLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.groupBy]{@link module:Collections.groupBy}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a `key` to group the value under.\n * Invoked with (value, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Result is an `Object` whoses\n * properties are arrays of values which returned the corresponding key.\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction groupByLimit(coll, limit, iteratee, callback) {\n    var _iteratee = wrapAsync(iteratee);\n    return mapLimit$1(coll, limit, (val, iterCb) => {\n        _iteratee(val, (err, key) => {\n            if (err) return iterCb(err);\n            return iterCb(err, {key, val});\n        });\n    }, (err, mapResults) => {\n        var result = {};\n        // from MDN, handle object having an `hasOwnProperty` prop\n        var {hasOwnProperty} = Object.prototype;\n\n        for (var i = 0; i < mapResults.length; i++) {\n            if (mapResults[i]) {\n                var {key} = mapResults[i];\n                var {val} = mapResults[i];\n\n                if (hasOwnProperty.call(result, key)) {\n                    result[key].push(val);\n                } else {\n                    result[key] = [val];\n                }\n            }\n        }\n\n        return callback(err, result);\n    });\n}\n\nvar groupByLimit$1 = awaitify(groupByLimit, 4);\n\n/**\n * Returns a new object, where each value corresponds to an array of items, from\n * `coll`, that returned the corresponding key. That is, the keys of the object\n * correspond to the values passed to the `iteratee` callback.\n *\n * Note: Since this function applies the `iteratee` to each item in parallel,\n * there is no guarantee that the `iteratee` functions will complete in order.\n * However, the values for each key in the `result` will be in the same order as\n * the original `coll`. For Objects, the values will roughly be in the order of\n * the original Objects' keys (but this can vary across JavaScript engines).\n *\n * @name groupBy\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a `key` to group the value under.\n * Invoked with (value, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Result is an `Object` whoses\n * properties are arrays of values which returned the corresponding key.\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * async.groupBy(['userId1', 'userId2', 'userId3'], function(userId, callback) {\n *     db.findById(userId, function(err, user) {\n *         if (err) return callback(err);\n *         return callback(null, user.age);\n *     });\n * }, function(err, result) {\n *     // result is object containing the userIds grouped by age\n *     // e.g. { 30: ['userId1', 'userId3'], 42: ['userId2']};\n * });\n */\nfunction groupBy (coll, iteratee, callback) {\n    return groupByLimit$1(coll, Infinity, iteratee, callback)\n}\n\n/**\n * The same as [`groupBy`]{@link module:Collections.groupBy} but runs only a single async operation at a time.\n *\n * @name groupBySeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.groupBy]{@link module:Collections.groupBy}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a `key` to group the value under.\n * Invoked with (value, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. Result is an `Object` whoses\n * properties are arrays of values which returned the corresponding key.\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction groupBySeries (coll, iteratee, callback) {\n    return groupByLimit$1(coll, 1, iteratee, callback)\n}\n\n/**\n * Logs the result of an `async` function to the `console`. Only works in\n * Node.js or in browsers that support `console.log` and `console.error` (such\n * as FF and Chrome). If multiple arguments are returned from the async\n * function, `console.log` is called on each argument in order.\n *\n * @name log\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} function - The function you want to eventually apply\n * all arguments to.\n * @param {...*} arguments... - Any number of arguments to apply to the function.\n * @example\n *\n * // in a module\n * var hello = function(name, callback) {\n *     setTimeout(function() {\n *         callback(null, 'hello ' + name);\n *     }, 1000);\n * };\n *\n * // in the node repl\n * node> async.log(hello, 'world');\n * 'hello world'\n */\nvar log = consoleFunc('log');\n\n/**\n * The same as [`mapValues`]{@link module:Collections.mapValues} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name mapValuesLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.mapValues]{@link module:Collections.mapValues}\n * @category Collection\n * @param {Object} obj - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - A function to apply to each value and key\n * in `coll`.\n * The iteratee should complete with the transformed value as its result.\n * Invoked with (value, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. `result` is a new object consisting\n * of each key from `obj`, with each transformed value on the right-hand side.\n * Invoked with (err, result).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction mapValuesLimit(obj, limit, iteratee, callback) {\n    callback = once(callback);\n    var newObj = {};\n    var _iteratee = wrapAsync(iteratee);\n    return eachOfLimit(limit)(obj, (val, key, next) => {\n        _iteratee(val, key, (err, result) => {\n            if (err) return next(err);\n            newObj[key] = result;\n            next(err);\n        });\n    }, err => callback(err, newObj));\n}\n\nvar mapValuesLimit$1 = awaitify(mapValuesLimit, 4);\n\n/**\n * A relative of [`map`]{@link module:Collections.map}, designed for use with objects.\n *\n * Produces a new Object by mapping each value of `obj` through the `iteratee`\n * function. The `iteratee` is called each `value` and `key` from `obj` and a\n * callback for when it has finished processing. Each of these callbacks takes\n * two arguments: an `error`, and the transformed item from `obj`. If `iteratee`\n * passes an error to its callback, the main `callback` (for the `mapValues`\n * function) is immediately called with the error.\n *\n * Note, the order of the keys in the result is not guaranteed.  The keys will\n * be roughly in the order they complete, (but this is very engine-specific)\n *\n * @name mapValues\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Object} obj - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each value and key\n * in `coll`.\n * The iteratee should complete with the transformed value as its result.\n * Invoked with (value, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. `result` is a new object consisting\n * of each key from `obj`, with each transformed value on the right-hand side.\n * Invoked with (err, result).\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * async.mapValues({\n *     f1: 'file1',\n *     f2: 'file2',\n *     f3: 'file3'\n * }, function (file, key, callback) {\n *   fs.stat(file, callback);\n * }, function(err, result) {\n *     // result is now a map of stats for each file, e.g.\n *     // {\n *     //     f1: [stats for file1],\n *     //     f2: [stats for file2],\n *     //     f3: [stats for file3]\n *     // }\n * });\n */\nfunction mapValues(obj, iteratee, callback) {\n    return mapValuesLimit$1(obj, Infinity, iteratee, callback)\n}\n\n/**\n * The same as [`mapValues`]{@link module:Collections.mapValues} but runs only a single async operation at a time.\n *\n * @name mapValuesSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.mapValues]{@link module:Collections.mapValues}\n * @category Collection\n * @param {Object} obj - A collection to iterate over.\n * @param {AsyncFunction} iteratee - A function to apply to each value and key\n * in `coll`.\n * The iteratee should complete with the transformed value as its result.\n * Invoked with (value, key, callback).\n * @param {Function} [callback] - A callback which is called when all `iteratee`\n * functions have finished, or an error occurs. `result` is a new object consisting\n * of each key from `obj`, with each transformed value on the right-hand side.\n * Invoked with (err, result).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction mapValuesSeries(obj, iteratee, callback) {\n    return mapValuesLimit$1(obj, 1, iteratee, callback)\n}\n\n/**\n * Caches the results of an async function. When creating a hash to store\n * function results against, the callback is omitted from the hash and an\n * optional hash function can be used.\n *\n * **Note: if the async function errs, the result will not be cached and\n * subsequent calls will call the wrapped function.**\n *\n * If no hash function is specified, the first argument is used as a hash key,\n * which may work reasonably if it is a string or a data type that converts to a\n * distinct string. Note that objects and arrays will not behave reasonably.\n * Neither will cases where the other arguments are significant. In such cases,\n * specify your own hash function.\n *\n * The cache of results is exposed as the `memo` property of the function\n * returned by `memoize`.\n *\n * @name memoize\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} fn - The async function to proxy and cache results from.\n * @param {Function} hasher - An optional function for generating a custom hash\n * for storing results. It has all the arguments applied to it apart from the\n * callback, and must be synchronous.\n * @returns {AsyncFunction} a memoized version of `fn`\n * @example\n *\n * var slow_fn = function(name, callback) {\n *     // do something\n *     callback(null, result);\n * };\n * var fn = async.memoize(slow_fn);\n *\n * // fn can now be used as if it were slow_fn\n * fn('some name', function() {\n *     // callback\n * });\n */\nfunction memoize(fn, hasher = v => v) {\n    var memo = Object.create(null);\n    var queues = Object.create(null);\n    var _fn = wrapAsync(fn);\n    var memoized = initialParams((args, callback) => {\n        var key = hasher(...args);\n        if (key in memo) {\n            setImmediate$1(() => callback(null, ...memo[key]));\n        } else if (key in queues) {\n            queues[key].push(callback);\n        } else {\n            queues[key] = [callback];\n            _fn(...args, (err, ...resultArgs) => {\n                // #1465 don't memoize if an error occurred\n                if (!err) {\n                    memo[key] = resultArgs;\n                }\n                var q = queues[key];\n                delete queues[key];\n                for (var i = 0, l = q.length; i < l; i++) {\n                    q[i](err, ...resultArgs);\n                }\n            });\n        }\n    });\n    memoized.memo = memo;\n    memoized.unmemoized = fn;\n    return memoized;\n}\n\n/**\n * Calls `callback` on a later loop around the event loop. In Node.js this just\n * calls `process.nextTick`.  In the browser it will use `setImmediate` if\n * available, otherwise `setTimeout(callback, 0)`, which means other higher\n * priority events may precede the execution of `callback`.\n *\n * This is used internally for browser-compatibility purposes.\n *\n * @name nextTick\n * @static\n * @memberOf module:Utils\n * @method\n * @see [async.setImmediate]{@link module:Utils.setImmediate}\n * @category Util\n * @param {Function} callback - The function to call on a later loop around\n * the event loop. Invoked with (args...).\n * @param {...*} args... - any number of additional arguments to pass to the\n * callback on the next tick.\n * @example\n *\n * var call_order = [];\n * async.nextTick(function() {\n *     call_order.push('two');\n *     // call_order now equals ['one','two']\n * });\n * call_order.push('one');\n *\n * async.setImmediate(function (a, b, c) {\n *     // a, b, and c equal 1, 2, and 3\n * }, 1, 2, 3);\n */\nvar _defer$1;\n\nif (hasNextTick) {\n    _defer$1 = process.nextTick;\n} else if (hasSetImmediate) {\n    _defer$1 = setImmediate;\n} else {\n    _defer$1 = fallback;\n}\n\nvar nextTick = wrap(_defer$1);\n\nvar _parallel = awaitify((eachfn, tasks, callback) => {\n    var results = isArrayLike(tasks) ? [] : {};\n\n    eachfn(tasks, (task, key, taskCb) => {\n        wrapAsync(task)((err, ...result) => {\n            if (result.length < 2) {\n                [result] = result;\n            }\n            results[key] = result;\n            taskCb(err);\n        });\n    }, err => callback(err, results));\n}, 3);\n\n/**\n * Run the `tasks` collection of functions in parallel, without waiting until\n * the previous function has completed. If any of the functions pass an error to\n * its callback, the main `callback` is immediately called with the value of the\n * error. Once the `tasks` have completed, the results are passed to the final\n * `callback` as an array.\n *\n * **Note:** `parallel` is about kicking-off I/O tasks in parallel, not about\n * parallel execution of code.  If your tasks do not use any timers or perform\n * any I/O, they will actually be executed in series.  Any synchronous setup\n * sections for each task will happen one after the other.  JavaScript remains\n * single-threaded.\n *\n * **Hint:** Use [`reflect`]{@link module:Utils.reflect} to continue the\n * execution of other tasks when a task fails.\n *\n * It is also possible to use an object instead of an array. Each property will\n * be run as a function and the results will be passed to the final `callback`\n * as an object instead of an array. This can be a more readable way of handling\n * results from {@link async.parallel}.\n *\n * @name parallel\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} tasks - A collection of\n * [async functions]{@link AsyncFunction} to run.\n * Each async function can complete with any number of optional `result` values.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed successfully. This function gets a results array\n * (or object) containing all the result arguments passed to the task callbacks.\n * Invoked with (err, results).\n * @returns {Promise} a promise, if a callback is not passed\n *\n * @example\n * async.parallel([\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ],\n * // optional callback\n * function(err, results) {\n *     // the results array will equal ['one','two'] even though\n *     // the second function had a shorter timeout.\n * });\n *\n * // an example using an object instead of an array\n * async.parallel({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }, function(err, results) {\n *     // results is now equals to: {one: 1, two: 2}\n * });\n */\nfunction parallel(tasks, callback) {\n    return _parallel(eachOf$1, tasks, callback);\n}\n\n/**\n * The same as [`parallel`]{@link module:ControlFlow.parallel} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name parallelLimit\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.parallel]{@link module:ControlFlow.parallel}\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} tasks - A collection of\n * [async functions]{@link AsyncFunction} to run.\n * Each async function can complete with any number of optional `result` values.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed successfully. This function gets a results array\n * (or object) containing all the result arguments passed to the task callbacks.\n * Invoked with (err, results).\n * @returns {Promise} a promise, if a callback is not passed\n */\nfunction parallelLimit(tasks, limit, callback) {\n    return _parallel(eachOfLimit(limit), tasks, callback);\n}\n\n/**\n * A queue of tasks for the worker function to complete.\n * @typedef {Iterable} QueueObject\n * @memberOf module:ControlFlow\n * @property {Function} length - a function returning the number of items\n * waiting to be processed. Invoke with `queue.length()`.\n * @property {boolean} started - a boolean indicating whether or not any\n * items have been pushed and processed by the queue.\n * @property {Function} running - a function returning the number of items\n * currently being processed. Invoke with `queue.running()`.\n * @property {Function} workersList - a function returning the array of items\n * currently being processed. Invoke with `queue.workersList()`.\n * @property {Function} idle - a function returning false if there are items\n * waiting or being processed, or true if not. Invoke with `queue.idle()`.\n * @property {number} concurrency - an integer for determining how many `worker`\n * functions should be run in parallel. This property can be changed after a\n * `queue` is created to alter the concurrency on-the-fly.\n * @property {number} payload - an integer that specifies how many items are\n * passed to the worker function at a time. only applies if this is a\n * [cargo]{@link module:ControlFlow.cargo} object\n * @property {AsyncFunction} push - add a new task to the `queue`. Calls `callback`\n * once the `worker` has finished processing the task. Instead of a single task,\n * a `tasks` array can be submitted. The respective callback is used for every\n * task in the list. Invoke with `queue.push(task, [callback])`,\n * @property {AsyncFunction} unshift - add a new task to the front of the `queue`.\n * Invoke with `queue.unshift(task, [callback])`.\n * @property {AsyncFunction} pushAsync - the same as `q.push`, except this returns\n * a promise that rejects if an error occurs.\n * @property {AsyncFunction} unshirtAsync - the same as `q.unshift`, except this returns\n * a promise that rejects if an error occurs.\n * @property {Function} remove - remove items from the queue that match a test\n * function.  The test function will be passed an object with a `data` property,\n * and a `priority` property, if this is a\n * [priorityQueue]{@link module:ControlFlow.priorityQueue} object.\n * Invoked with `queue.remove(testFn)`, where `testFn` is of the form\n * `function ({data, priority}) {}` and returns a Boolean.\n * @property {Function} saturated - a function that sets a callback that is\n * called when the number of running workers hits the `concurrency` limit, and\n * further tasks will be queued.  If the callback is omitted, `q.saturated()`\n * returns a promise for the next occurrence.\n * @property {Function} unsaturated - a function that sets a callback that is\n * called when the number of running workers is less than the `concurrency` &\n * `buffer` limits, and further tasks will not be queued. If the callback is\n * omitted, `q.unsaturated()` returns a promise for the next occurrence.\n * @property {number} buffer - A minimum threshold buffer in order to say that\n * the `queue` is `unsaturated`.\n * @property {Function} empty - a function that sets a callback that is called\n * when the last item from the `queue` is given to a `worker`. If the callback\n * is omitted, `q.empty()` returns a promise for the next occurrence.\n * @property {Function} drain - a function that sets a callback that is called\n * when the last item from the `queue` has returned from the `worker`. If the\n * callback is omitted, `q.drain()` returns a promise for the next occurrence.\n * @property {Function} error - a function that sets a callback that is called\n * when a task errors. Has the signature `function(error, task)`. If the\n * callback is omitted, `error()` returns a promise that rejects on the next\n * error.\n * @property {boolean} paused - a boolean for determining whether the queue is\n * in a paused state.\n * @property {Function} pause - a function that pauses the processing of tasks\n * until `resume()` is called. Invoke with `queue.pause()`.\n * @property {Function} resume - a function that resumes the processing of\n * queued tasks when the queue is paused. Invoke with `queue.resume()`.\n * @property {Function} kill - a function that removes the `drain` callback and\n * empties remaining tasks from the queue forcing it to go idle. No more tasks\n * should be pushed to the queue after calling this function. Invoke with `queue.kill()`.\n *\n * @example\n * const q = aync.queue(worker, 2)\n * q.push(item1)\n * q.push(item2)\n * q.push(item3)\n * // queues are iterable, spread into an array to inspect\n * const items = [...q] // [item1, item2, item3]\n * // or use for of\n * for (let item of q) {\n *     console.log(item)\n * }\n *\n * q.drain(() => {\n *     console.log('all done')\n * })\n * // or\n * await q.drain()\n */\n\n/**\n * Creates a `queue` object with the specified `concurrency`. Tasks added to the\n * `queue` are processed in parallel (up to the `concurrency` limit). If all\n * `worker`s are in progress, the task is queued until one becomes available.\n * Once a `worker` completes a `task`, that `task`'s callback is called.\n *\n * @name queue\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {AsyncFunction} worker - An async function for processing a queued task.\n * If you want to handle errors from an individual task, pass a callback to\n * `q.push()`. Invoked with (task, callback).\n * @param {number} [concurrency=1] - An `integer` for determining how many\n * `worker` functions should be run in parallel.  If omitted, the concurrency\n * defaults to `1`.  If the concurrency is `0`, an error is thrown.\n * @returns {module:ControlFlow.QueueObject} A queue object to manage the tasks. Callbacks can be\n * attached as certain properties to listen for specific events during the\n * lifecycle of the queue.\n * @example\n *\n * // create a queue object with concurrency 2\n * var q = async.queue(function(task, callback) {\n *     console.log('hello ' + task.name);\n *     callback();\n * }, 2);\n *\n * // assign a callback\n * q.drain(function() {\n *     console.log('all items have been processed');\n * });\n * // or await the end\n * await q.drain()\n *\n * // assign an error callback\n * q.error(function(err, task) {\n *     console.error('task experienced an error');\n * });\n *\n * // add some items to the queue\n * q.push({name: 'foo'}, function(err) {\n *     console.log('finished processing foo');\n * });\n * // callback is optional\n * q.push({name: 'bar'});\n *\n * // add some items to the queue (batch-wise)\n * q.push([{name: 'baz'},{name: 'bay'},{name: 'bax'}], function(err) {\n *     console.log('finished processing item');\n * });\n *\n * // add some items to the front of the queue\n * q.unshift({name: 'bar'}, function (err) {\n *     console.log('finished processing bar');\n * });\n */\nfunction queue$1 (worker, concurrency) {\n    var _worker = wrapAsync(worker);\n    return queue((items, cb) => {\n        _worker(items[0], cb);\n    }, concurrency, 1);\n}\n\n// Binary min-heap implementation used for priority queue.\n// Implementation is stable, i.e. push time is considered for equal priorities\nclass Heap {\n    constructor() {\n        this.heap = [];\n        this.pushCount = Number.MIN_SAFE_INTEGER;\n    }\n\n    get length() {\n        return this.heap.length;\n    }\n\n    empty () {\n        this.heap = [];\n        return this;\n    }\n\n    percUp(index) {\n        let p;\n\n        while (index > 0 && smaller(this.heap[index], this.heap[p=parent(index)])) {\n            let t = this.heap[index];\n            this.heap[index] = this.heap[p];\n            this.heap[p] = t;\n\n            index = p;\n        }\n    }\n\n    percDown(index) {\n        let l;\n\n        while ((l=leftChi(index)) < this.heap.length) {\n            if (l+1 < this.heap.length && smaller(this.heap[l+1], this.heap[l])) {\n                l = l+1;\n            }\n\n            if (smaller(this.heap[index], this.heap[l])) {\n                break;\n            }\n\n            let t = this.heap[index];\n            this.heap[index] = this.heap[l];\n            this.heap[l] = t;\n\n            index = l;\n        }\n    }\n\n    push(node) {\n        node.pushCount = ++this.pushCount;\n        this.heap.push(node);\n        this.percUp(this.heap.length-1);\n    }\n\n    unshift(node) {\n        return this.heap.push(node);\n    }\n\n    shift() {\n        let [top] = this.heap;\n\n        this.heap[0] = this.heap[this.heap.length-1];\n        this.heap.pop();\n        this.percDown(0);\n\n        return top;\n    }\n\n    toArray() {\n        return [...this];\n    }\n\n    *[Symbol.iterator] () {\n        for (let i = 0; i < this.heap.length; i++) {\n            yield this.heap[i].data;\n        }\n    }\n\n    remove (testFn) {\n        let j = 0;\n        for (let i = 0; i < this.heap.length; i++) {\n            if (!testFn(this.heap[i])) {\n                this.heap[j] = this.heap[i];\n                j++;\n            }\n        }\n\n        this.heap.splice(j);\n\n        for (let i = parent(this.heap.length-1); i >= 0; i--) {\n            this.percDown(i);\n        }\n\n        return this;\n    }\n}\n\nfunction leftChi(i) {\n    return (i<<1)+1;\n}\n\nfunction parent(i) {\n    return ((i+1)>>1)-1;\n}\n\nfunction smaller(x, y) {\n    if (x.priority !== y.priority) {\n        return x.priority < y.priority;\n    }\n    else {\n        return x.pushCount < y.pushCount;\n    }\n}\n\n/**\n * The same as [async.queue]{@link module:ControlFlow.queue} only tasks are assigned a priority and\n * completed in ascending priority order.\n *\n * @name priorityQueue\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.queue]{@link module:ControlFlow.queue}\n * @category Control Flow\n * @param {AsyncFunction} worker - An async function for processing a queued task.\n * If you want to handle errors from an individual task, pass a callback to\n * `q.push()`.\n * Invoked with (task, callback).\n * @param {number} concurrency - An `integer` for determining how many `worker`\n * functions should be run in parallel.  If omitted, the concurrency defaults to\n * `1`.  If the concurrency is `0`, an error is thrown.\n * @returns {module:ControlFlow.QueueObject} A priorityQueue object to manage the tasks. There are two\n * differences between `queue` and `priorityQueue` objects:\n * * `push(task, priority, [callback])` - `priority` should be a number. If an\n *   array of `tasks` is given, all tasks will be assigned the same priority.\n * * The `unshift` method was removed.\n */\nfunction priorityQueue(worker, concurrency) {\n    // Start with a normal queue\n    var q = queue$1(worker, concurrency);\n\n    q._tasks = new Heap();\n\n    // Override push to accept second parameter representing priority\n    q.push = function(data, priority = 0, callback = () => {}) {\n        if (typeof callback !== 'function') {\n            throw new Error('task callback must be a function');\n        }\n        q.started = true;\n        if (!Array.isArray(data)) {\n            data = [data];\n        }\n        if (data.length === 0 && q.idle()) {\n            // call drain immediately if there are no tasks\n            return setImmediate$1(() => q.drain());\n        }\n\n        for (var i = 0, l = data.length; i < l; i++) {\n            var item = {\n                data: data[i],\n                priority,\n                callback\n            };\n\n            q._tasks.push(item);\n        }\n\n        setImmediate$1(q.process);\n    };\n\n    // Remove unshift function\n    delete q.unshift;\n\n    return q;\n}\n\n/**\n * Runs the `tasks` array of functions in parallel, without waiting until the\n * previous function has completed. Once any of the `tasks` complete or pass an\n * error to its callback, the main `callback` is immediately called. It's\n * equivalent to `Promise.race()`.\n *\n * @name race\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array} tasks - An array containing [async functions]{@link AsyncFunction}\n * to run. Each function can complete with an optional `result` value.\n * @param {Function} callback - A callback to run once any of the functions have\n * completed. This function gets an error or result from the first function that\n * completed. Invoked with (err, result).\n * @returns undefined\n * @example\n *\n * async.race([\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ],\n * // main callback\n * function(err, result) {\n *     // the result will be equal to 'two' as it finishes earlier\n * });\n */\nfunction race(tasks, callback) {\n    callback = once(callback);\n    if (!Array.isArray(tasks)) return callback(new TypeError('First argument to race must be an array of functions'));\n    if (!tasks.length) return callback();\n    for (var i = 0, l = tasks.length; i < l; i++) {\n        wrapAsync(tasks[i])(callback);\n    }\n}\n\nvar race$1 = awaitify(race, 2);\n\n/**\n * Same as [`reduce`]{@link module:Collections.reduce}, only operates on `array` in reverse order.\n *\n * @name reduceRight\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.reduce]{@link module:Collections.reduce}\n * @alias foldr\n * @category Collection\n * @param {Array} array - A collection to iterate over.\n * @param {*} memo - The initial state of the reduction.\n * @param {AsyncFunction} iteratee - A function applied to each item in the\n * array to produce the next step in the reduction.\n * The `iteratee` should complete with the next state of the reduction.\n * If the iteratee complete with an error, the reduction is stopped and the\n * main `callback` is immediately called with the error.\n * Invoked with (memo, item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result is the reduced value. Invoked with\n * (err, result).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction reduceRight (array, memo, iteratee, callback) {\n    var reversed = [...array].reverse();\n    return reduce$1(reversed, memo, iteratee, callback);\n}\n\n/**\n * Wraps the async function in another function that always completes with a\n * result object, even when it errors.\n *\n * The result object has either the property `error` or `value`.\n *\n * @name reflect\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} fn - The async function you want to wrap\n * @returns {Function} - A function that always passes null to it's callback as\n * the error. The second argument to the callback will be an `object` with\n * either an `error` or a `value` property.\n * @example\n *\n * async.parallel([\n *     async.reflect(function(callback) {\n *         // do some stuff ...\n *         callback(null, 'one');\n *     }),\n *     async.reflect(function(callback) {\n *         // do some more stuff but error ...\n *         callback('bad stuff happened');\n *     }),\n *     async.reflect(function(callback) {\n *         // do some more stuff ...\n *         callback(null, 'two');\n *     })\n * ],\n * // optional callback\n * function(err, results) {\n *     // values\n *     // results[0].value = 'one'\n *     // results[1].error = 'bad stuff happened'\n *     // results[2].value = 'two'\n * });\n */\nfunction reflect(fn) {\n    var _fn = wrapAsync(fn);\n    return initialParams(function reflectOn(args, reflectCallback) {\n        args.push((error, ...cbArgs) => {\n            let retVal = {};\n            if (error) {\n                retVal.error = error;\n            }\n            if (cbArgs.length > 0){\n                var value = cbArgs;\n                if (cbArgs.length <= 1) {\n                    [value] = cbArgs;\n                }\n                retVal.value = value;\n            }\n            reflectCallback(null, retVal);\n        });\n\n        return _fn.apply(this, args);\n    });\n}\n\n/**\n * A helper function that wraps an array or an object of functions with `reflect`.\n *\n * @name reflectAll\n * @static\n * @memberOf module:Utils\n * @method\n * @see [async.reflect]{@link module:Utils.reflect}\n * @category Util\n * @param {Array|Object|Iterable} tasks - The collection of\n * [async functions]{@link AsyncFunction} to wrap in `async.reflect`.\n * @returns {Array} Returns an array of async functions, each wrapped in\n * `async.reflect`\n * @example\n *\n * let tasks = [\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     function(callback) {\n *         // do some more stuff but error ...\n *         callback(new Error('bad stuff happened'));\n *     },\n *     function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'two');\n *         }, 100);\n *     }\n * ];\n *\n * async.parallel(async.reflectAll(tasks),\n * // optional callback\n * function(err, results) {\n *     // values\n *     // results[0].value = 'one'\n *     // results[1].error = Error('bad stuff happened')\n *     // results[2].value = 'two'\n * });\n *\n * // an example using an object instead of an array\n * let tasks = {\n *     one: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'one');\n *         }, 200);\n *     },\n *     two: function(callback) {\n *         callback('two');\n *     },\n *     three: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 'three');\n *         }, 100);\n *     }\n * };\n *\n * async.parallel(async.reflectAll(tasks),\n * // optional callback\n * function(err, results) {\n *     // values\n *     // results.one.value = 'one'\n *     // results.two.error = 'two'\n *     // results.three.value = 'three'\n * });\n */\nfunction reflectAll(tasks) {\n    var results;\n    if (Array.isArray(tasks)) {\n        results = tasks.map(reflect);\n    } else {\n        results = {};\n        Object.keys(tasks).forEach(key => {\n            results[key] = reflect.call(this, tasks[key]);\n        });\n    }\n    return results;\n}\n\nfunction reject(eachfn, arr, _iteratee, callback) {\n    const iteratee = wrapAsync(_iteratee);\n    return _filter(eachfn, arr, (value, cb) => {\n        iteratee(value, (err, v) => {\n            cb(err, !v);\n        });\n    }, callback);\n}\n\n/**\n * The opposite of [`filter`]{@link module:Collections.filter}. Removes values that pass an `async` truth test.\n *\n * @name reject\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.filter]{@link module:Collections.filter}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - An async truth test to apply to each item in\n * `coll`.\n * The should complete with a boolean value as its `result`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * async.reject(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, results) {\n *     // results now equals an array of missing files\n *     createFiles(results);\n * });\n */\nfunction reject$1 (coll, iteratee, callback) {\n    return reject(eachOf$1, coll, iteratee, callback)\n}\nvar reject$2 = awaitify(reject$1, 3);\n\n/**\n * The same as [`reject`]{@link module:Collections.reject} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name rejectLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.reject]{@link module:Collections.reject}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {Function} iteratee - An async truth test to apply to each item in\n * `coll`.\n * The should complete with a boolean value as its `result`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction rejectLimit (coll, limit, iteratee, callback) {\n    return reject(eachOfLimit(limit), coll, iteratee, callback)\n}\nvar rejectLimit$1 = awaitify(rejectLimit, 4);\n\n/**\n * The same as [`reject`]{@link module:Collections.reject} but runs only a single async operation at a time.\n *\n * @name rejectSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.reject]{@link module:Collections.reject}\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {Function} iteratee - An async truth test to apply to each item in\n * `coll`.\n * The should complete with a boolean value as its `result`.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback is passed\n */\nfunction rejectSeries (coll, iteratee, callback) {\n    return reject(eachOfSeries$1, coll, iteratee, callback)\n}\nvar rejectSeries$1 = awaitify(rejectSeries, 3);\n\nfunction constant$1(value) {\n    return function () {\n        return value;\n    }\n}\n\n/**\n * Attempts to get a successful response from `task` no more than `times` times\n * before returning an error. If the task is successful, the `callback` will be\n * passed the result of the successful task. If all attempts fail, the callback\n * will be passed the error and result (if any) of the final attempt.\n *\n * @name retry\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @see [async.retryable]{@link module:ControlFlow.retryable}\n * @param {Object|number} [opts = {times: 5, interval: 0}| 5] - Can be either an\n * object with `times` and `interval` or a number.\n * * `times` - The number of attempts to make before giving up.  The default\n *   is `5`.\n * * `interval` - The time to wait between retries, in milliseconds.  The\n *   default is `0`. The interval may also be specified as a function of the\n *   retry count (see example).\n * * `errorFilter` - An optional synchronous function that is invoked on\n *   erroneous result. If it returns `true` the retry attempts will continue;\n *   if the function returns `false` the retry flow is aborted with the current\n *   attempt's error and result being returned to the final callback.\n *   Invoked with (err).\n * * If `opts` is a number, the number specifies the number of times to retry,\n *   with the default interval of `0`.\n * @param {AsyncFunction} task - An async function to retry.\n * Invoked with (callback).\n * @param {Function} [callback] - An optional callback which is called when the\n * task has succeeded, or after the final failed attempt. It receives the `err`\n * and `result` arguments of the last attempt at completing the `task`. Invoked\n * with (err, results).\n * @returns {Promise} a promise if no callback provided\n *\n * @example\n *\n * // The `retry` function can be used as a stand-alone control flow by passing\n * // a callback, as shown below:\n *\n * // try calling apiMethod 3 times\n * async.retry(3, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod 3 times, waiting 200 ms between each retry\n * async.retry({times: 3, interval: 200}, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod 10 times with exponential backoff\n * // (i.e. intervals of 100, 200, 400, 800, 1600, ... milliseconds)\n * async.retry({\n *   times: 10,\n *   interval: function(retryCount) {\n *     return 50 * Math.pow(2, retryCount);\n *   }\n * }, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod the default 5 times no delay between each retry\n * async.retry(apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // try calling apiMethod only when error condition satisfies, all other\n * // errors will abort the retry control flow and return to final callback\n * async.retry({\n *   errorFilter: function(err) {\n *     return err.message === 'Temporary error'; // only retry on a specific error\n *   }\n * }, apiMethod, function(err, result) {\n *     // do something with the result\n * });\n *\n * // to retry individual methods that are not as reliable within other\n * // control flow functions, use the `retryable` wrapper:\n * async.auto({\n *     users: api.getUsers.bind(api),\n *     payments: async.retryable(3, api.getPayments.bind(api))\n * }, function(err, results) {\n *     // do something with the results\n * });\n *\n */\nconst DEFAULT_TIMES = 5;\nconst DEFAULT_INTERVAL = 0;\n\nfunction retry(opts, task, callback) {\n    var options = {\n        times: DEFAULT_TIMES,\n        intervalFunc: constant$1(DEFAULT_INTERVAL)\n    };\n\n    if (arguments.length < 3 && typeof opts === 'function') {\n        callback = task || promiseCallback();\n        task = opts;\n    } else {\n        parseTimes(options, opts);\n        callback = callback || promiseCallback();\n    }\n\n    if (typeof task !== 'function') {\n        throw new Error(\"Invalid arguments for async.retry\");\n    }\n\n    var _task = wrapAsync(task);\n\n    var attempt = 1;\n    function retryAttempt() {\n        _task((err, ...args) => {\n            if (err === false) return\n            if (err && attempt++ < options.times &&\n                (typeof options.errorFilter != 'function' ||\n                    options.errorFilter(err))) {\n                setTimeout(retryAttempt, options.intervalFunc(attempt - 1));\n            } else {\n                callback(err, ...args);\n            }\n        });\n    }\n\n    retryAttempt();\n    return callback[PROMISE_SYMBOL]\n}\n\nfunction parseTimes(acc, t) {\n    if (typeof t === 'object') {\n        acc.times = +t.times || DEFAULT_TIMES;\n\n        acc.intervalFunc = typeof t.interval === 'function' ?\n            t.interval :\n            constant$1(+t.interval || DEFAULT_INTERVAL);\n\n        acc.errorFilter = t.errorFilter;\n    } else if (typeof t === 'number' || typeof t === 'string') {\n        acc.times = +t || DEFAULT_TIMES;\n    } else {\n        throw new Error(\"Invalid arguments for async.retry\");\n    }\n}\n\n/**\n * A close relative of [`retry`]{@link module:ControlFlow.retry}.  This method\n * wraps a task and makes it retryable, rather than immediately calling it\n * with retries.\n *\n * @name retryable\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.retry]{@link module:ControlFlow.retry}\n * @category Control Flow\n * @param {Object|number} [opts = {times: 5, interval: 0}| 5] - optional\n * options, exactly the same as from `retry`, except for a `opts.arity` that\n * is the arity of the `task` function, defaulting to `task.length`\n * @param {AsyncFunction} task - the asynchronous function to wrap.\n * This function will be passed any arguments passed to the returned wrapper.\n * Invoked with (...args, callback).\n * @returns {AsyncFunction} The wrapped function, which when invoked, will\n * retry on an error, based on the parameters specified in `opts`.\n * This function will accept the same parameters as `task`.\n * @example\n *\n * async.auto({\n *     dep1: async.retryable(3, getFromFlakyService),\n *     process: [\"dep1\", async.retryable(3, function (results, cb) {\n *         maybeProcessData(results.dep1, cb);\n *     })]\n * }, callback);\n */\nfunction retryable (opts, task) {\n    if (!task) {\n        task = opts;\n        opts = null;\n    }\n    let arity = (opts && opts.arity) || task.length;\n    if (isAsync(task)) {\n        arity += 1;\n    }\n    var _task = wrapAsync(task);\n    return initialParams((args, callback) => {\n        if (args.length < arity - 1 || callback == null) {\n            args.push(callback);\n            callback = promiseCallback();\n        }\n        function taskFn(cb) {\n            _task(...args, cb);\n        }\n\n        if (opts) retry(opts, taskFn, callback);\n        else retry(taskFn, callback);\n\n        return callback[PROMISE_SYMBOL]\n    });\n}\n\n/**\n * Run the functions in the `tasks` collection in series, each one running once\n * the previous function has completed. If any functions in the series pass an\n * error to its callback, no more functions are run, and `callback` is\n * immediately called with the value of the error. Otherwise, `callback`\n * receives an array of results when `tasks` have completed.\n *\n * It is also possible to use an object instead of an array. Each property will\n * be run as a function, and the results will be passed to the final `callback`\n * as an object instead of an array. This can be a more readable way of handling\n *  results from {@link async.series}.\n *\n * **Note** that while many implementations preserve the order of object\n * properties, the [ECMAScript Language Specification](http://www.ecma-international.org/ecma-262/5.1/#sec-8.6)\n * explicitly states that\n *\n * > The mechanics and order of enumerating the properties is not specified.\n *\n * So if you rely on the order in which your series of functions are executed,\n * and want this to work on all platforms, consider using an array.\n *\n * @name series\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} tasks - A collection containing\n * [async functions]{@link AsyncFunction} to run in series.\n * Each function can complete with any number of optional `result` values.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed. This function gets a results array (or object)\n * containing all the result arguments passed to the `task` callbacks. Invoked\n * with (err, result).\n * @return {Promise} a promise, if no callback is passed\n * @example\n * async.series([\n *     function(callback) {\n *         // do some stuff ...\n *         callback(null, 'one');\n *     },\n *     function(callback) {\n *         // do some more stuff ...\n *         callback(null, 'two');\n *     }\n * ],\n * // optional callback\n * function(err, results) {\n *     // results is now equal to ['one', 'two']\n * });\n *\n * async.series({\n *     one: function(callback) {\n *         setTimeout(function() {\n *             callback(null, 1);\n *         }, 200);\n *     },\n *     two: function(callback){\n *         setTimeout(function() {\n *             callback(null, 2);\n *         }, 100);\n *     }\n * }, function(err, results) {\n *     // results is now equal to: {one: 1, two: 2}\n * });\n */\nfunction series(tasks, callback) {\n    return _parallel(eachOfSeries$1, tasks, callback);\n}\n\n/**\n * Returns `true` if at least one element in the `coll` satisfies an async test.\n * If any iteratee call returns `true`, the main `callback` is immediately\n * called.\n *\n * @name some\n * @static\n * @memberOf module:Collections\n * @method\n * @alias any\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collections in parallel.\n * The iteratee should complete with a boolean `result` value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the iteratee functions have finished.\n * Result will be either `true` or `false` depending on the values of the async\n * tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n * @example\n *\n * async.some(['file1','file2','file3'], function(filePath, callback) {\n *     fs.access(filePath, function(err) {\n *         callback(null, !err)\n *     });\n * }, function(err, result) {\n *     // if result is true then at least one of the files exists\n * });\n */\nfunction some(coll, iteratee, callback) {\n    return _createTester(Boolean, res => res)(eachOf$1, coll, iteratee, callback)\n}\nvar some$1 = awaitify(some, 3);\n\n/**\n * The same as [`some`]{@link module:Collections.some} but runs a maximum of `limit` async operations at a time.\n *\n * @name someLimit\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.some]{@link module:Collections.some}\n * @alias anyLimit\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collections in parallel.\n * The iteratee should complete with a boolean `result` value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the iteratee functions have finished.\n * Result will be either `true` or `false` depending on the values of the async\n * tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n */\nfunction someLimit(coll, limit, iteratee, callback) {\n    return _createTester(Boolean, res => res)(eachOfLimit(limit), coll, iteratee, callback)\n}\nvar someLimit$1 = awaitify(someLimit, 4);\n\n/**\n * The same as [`some`]{@link module:Collections.some} but runs only a single async operation at a time.\n *\n * @name someSeries\n * @static\n * @memberOf module:Collections\n * @method\n * @see [async.some]{@link module:Collections.some}\n * @alias anySeries\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async truth test to apply to each item\n * in the collections in series.\n * The iteratee should complete with a boolean `result` value.\n * Invoked with (item, callback).\n * @param {Function} [callback] - A callback which is called as soon as any\n * iteratee returns `true`, or after all the iteratee functions have finished.\n * Result will be either `true` or `false` depending on the values of the async\n * tests. Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n */\nfunction someSeries(coll, iteratee, callback) {\n    return _createTester(Boolean, res => res)(eachOfSeries$1, coll, iteratee, callback)\n}\nvar someSeries$1 = awaitify(someSeries, 3);\n\n/**\n * Sorts a list by the results of running each `coll` value through an async\n * `iteratee`.\n *\n * @name sortBy\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {AsyncFunction} iteratee - An async function to apply to each item in\n * `coll`.\n * The iteratee should complete with a value to use as the sort criteria as\n * its `result`.\n * Invoked with (item, callback).\n * @param {Function} callback - A callback which is called after all the\n * `iteratee` functions have finished, or an error occurs. Results is the items\n * from the original `coll` sorted by the values returned by the `iteratee`\n * calls. Invoked with (err, results).\n * @returns {Promise} a promise, if no callback passed\n * @example\n *\n * async.sortBy(['file1','file2','file3'], function(file, callback) {\n *     fs.stat(file, function(err, stats) {\n *         callback(err, stats.mtime);\n *     });\n * }, function(err, results) {\n *     // results is now the original array of files sorted by\n *     // modified date\n * });\n *\n * // By modifying the callback parameter the\n * // sorting order can be influenced:\n *\n * // ascending order\n * async.sortBy([1,9,3,5], function(x, callback) {\n *     callback(null, x);\n * }, function(err,result) {\n *     // result callback\n * });\n *\n * // descending order\n * async.sortBy([1,9,3,5], function(x, callback) {\n *     callback(null, x*-1);    //<- x*-1 instead of x, turns the order around\n * }, function(err,result) {\n *     // result callback\n * });\n */\nfunction sortBy (coll, iteratee, callback) {\n    var _iteratee = wrapAsync(iteratee);\n    return map$1(coll, (x, iterCb) => {\n        _iteratee(x, (err, criteria) => {\n            if (err) return iterCb(err);\n            iterCb(err, {value: x, criteria});\n        });\n    }, (err, results) => {\n        if (err) return callback(err);\n        callback(null, results.sort(comparator).map(v => v.value));\n    });\n\n    function comparator(left, right) {\n        var a = left.criteria, b = right.criteria;\n        return a < b ? -1 : a > b ? 1 : 0;\n    }\n}\nvar sortBy$1 = awaitify(sortBy, 3);\n\n/**\n * Sets a time limit on an asynchronous function. If the function does not call\n * its callback within the specified milliseconds, it will be called with a\n * timeout error. The code property for the error object will be `'ETIMEDOUT'`.\n *\n * @name timeout\n * @static\n * @memberOf module:Utils\n * @method\n * @category Util\n * @param {AsyncFunction} asyncFn - The async function to limit in time.\n * @param {number} milliseconds - The specified time limit.\n * @param {*} [info] - Any variable you want attached (`string`, `object`, etc)\n * to timeout Error for more information..\n * @returns {AsyncFunction} Returns a wrapped function that can be used with any\n * of the control flow functions.\n * Invoke this function with the same parameters as you would `asyncFunc`.\n * @example\n *\n * function myFunction(foo, callback) {\n *     doAsyncTask(foo, function(err, data) {\n *         // handle errors\n *         if (err) return callback(err);\n *\n *         // do some stuff ...\n *\n *         // return processed data\n *         return callback(null, data);\n *     });\n * }\n *\n * var wrapped = async.timeout(myFunction, 1000);\n *\n * // call `wrapped` as you would `myFunction`\n * wrapped({ bar: 'bar' }, function(err, data) {\n *     // if `myFunction` takes < 1000 ms to execute, `err`\n *     // and `data` will have their expected values\n *\n *     // else `err` will be an Error with the code 'ETIMEDOUT'\n * });\n */\nfunction timeout(asyncFn, milliseconds, info) {\n    var fn = wrapAsync(asyncFn);\n\n    return initialParams((args, callback) => {\n        var timedOut = false;\n        var timer;\n\n        function timeoutCallback() {\n            var name = asyncFn.name || 'anonymous';\n            var error  = new Error('Callback function \"' + name + '\" timed out.');\n            error.code = 'ETIMEDOUT';\n            if (info) {\n                error.info = info;\n            }\n            timedOut = true;\n            callback(error);\n        }\n\n        args.push((...cbArgs) => {\n            if (!timedOut) {\n                callback(...cbArgs);\n                clearTimeout(timer);\n            }\n        });\n\n        // setup timer and call original function\n        timer = setTimeout(timeoutCallback, milliseconds);\n        fn(...args);\n    });\n}\n\nfunction range(size) {\n    var result = Array(size);\n    while (size--) {\n        result[size] = size;\n    }\n    return result;\n}\n\n/**\n * The same as [times]{@link module:ControlFlow.times} but runs a maximum of `limit` async operations at a\n * time.\n *\n * @name timesLimit\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.times]{@link module:ControlFlow.times}\n * @category Control Flow\n * @param {number} count - The number of times to run the function.\n * @param {number} limit - The maximum number of async operations at a time.\n * @param {AsyncFunction} iteratee - The async function to call `n` times.\n * Invoked with the iteration index and a callback: (n, next).\n * @param {Function} callback - see [async.map]{@link module:Collections.map}.\n * @returns {Promise} a promise, if no callback is provided\n */\nfunction timesLimit(count, limit, iteratee, callback) {\n    var _iteratee = wrapAsync(iteratee);\n    return mapLimit$1(range(count), limit, _iteratee, callback);\n}\n\n/**\n * Calls the `iteratee` function `n` times, and accumulates results in the same\n * manner you would use with [map]{@link module:Collections.map}.\n *\n * @name times\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.map]{@link module:Collections.map}\n * @category Control Flow\n * @param {number} n - The number of times to run the function.\n * @param {AsyncFunction} iteratee - The async function to call `n` times.\n * Invoked with the iteration index and a callback: (n, next).\n * @param {Function} callback - see {@link module:Collections.map}.\n * @returns {Promise} a promise, if no callback is provided\n * @example\n *\n * // Pretend this is some complicated async factory\n * var createUser = function(id, callback) {\n *     callback(null, {\n *         id: 'user' + id\n *     });\n * };\n *\n * // generate 5 users\n * async.times(5, function(n, next) {\n *     createUser(n, function(err, user) {\n *         next(err, user);\n *     });\n * }, function(err, users) {\n *     // we should now have 5 users\n * });\n */\nfunction times (n, iteratee, callback) {\n    return timesLimit(n, Infinity, iteratee, callback)\n}\n\n/**\n * The same as [times]{@link module:ControlFlow.times} but runs only a single async operation at a time.\n *\n * @name timesSeries\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.times]{@link module:ControlFlow.times}\n * @category Control Flow\n * @param {number} n - The number of times to run the function.\n * @param {AsyncFunction} iteratee - The async function to call `n` times.\n * Invoked with the iteration index and a callback: (n, next).\n * @param {Function} callback - see {@link module:Collections.map}.\n * @returns {Promise} a promise, if no callback is provided\n */\nfunction timesSeries (n, iteratee, callback) {\n    return timesLimit(n, 1, iteratee, callback)\n}\n\n/**\n * A relative of `reduce`.  Takes an Object or Array, and iterates over each\n * element in parallel, each step potentially mutating an `accumulator` value.\n * The type of the accumulator defaults to the type of collection passed in.\n *\n * @name transform\n * @static\n * @memberOf module:Collections\n * @method\n * @category Collection\n * @param {Array|Iterable|AsyncIterable|Object} coll - A collection to iterate over.\n * @param {*} [accumulator] - The initial state of the transform.  If omitted,\n * it will default to an empty Object or Array, depending on the type of `coll`\n * @param {AsyncFunction} iteratee - A function applied to each item in the\n * collection that potentially modifies the accumulator.\n * Invoked with (accumulator, item, key, callback).\n * @param {Function} [callback] - A callback which is called after all the\n * `iteratee` functions have finished. Result is the transformed accumulator.\n * Invoked with (err, result).\n * @returns {Promise} a promise, if no callback provided\n * @example\n *\n * async.transform([1,2,3], function(acc, item, index, callback) {\n *     // pointless async:\n *     process.nextTick(function() {\n *         acc[index] = item * 2\n *         callback(null)\n *     });\n * }, function(err, result) {\n *     // result is now equal to [2, 4, 6]\n * });\n *\n * @example\n *\n * async.transform({a: 1, b: 2, c: 3}, function (obj, val, key, callback) {\n *     setImmediate(function () {\n *         obj[key] = val * 2;\n *         callback();\n *     })\n * }, function (err, result) {\n *     // result is equal to {a: 2, b: 4, c: 6}\n * })\n */\nfunction transform (coll, accumulator, iteratee, callback) {\n    if (arguments.length <= 3 && typeof accumulator === 'function') {\n        callback = iteratee;\n        iteratee = accumulator;\n        accumulator = Array.isArray(coll) ? [] : {};\n    }\n    callback = once(callback || promiseCallback());\n    var _iteratee = wrapAsync(iteratee);\n\n    eachOf$1(coll, (v, k, cb) => {\n        _iteratee(accumulator, v, k, cb);\n    }, err => callback(err, accumulator));\n    return callback[PROMISE_SYMBOL]\n}\n\n/**\n * It runs each task in series but stops whenever any of the functions were\n * successful. If one of the tasks were successful, the `callback` will be\n * passed the result of the successful task. If all tasks fail, the callback\n * will be passed the error and result (if any) of the final attempt.\n *\n * @name tryEach\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array|Iterable|AsyncIterable|Object} tasks - A collection containing functions to\n * run, each function is passed a `callback(err, result)` it must call on\n * completion with an error `err` (which can be `null`) and an optional `result`\n * value.\n * @param {Function} [callback] - An optional callback which is called when one\n * of the tasks has succeeded, or all have failed. It receives the `err` and\n * `result` arguments of the last attempt at completing the `task`. Invoked with\n * (err, results).\n * @returns {Promise} a promise, if no callback is passed\n * @example\n * async.tryEach([\n *     function getDataFromFirstWebsite(callback) {\n *         // Try getting the data from the first website\n *         callback(err, data);\n *     },\n *     function getDataFromSecondWebsite(callback) {\n *         // First website failed,\n *         // Try getting the data from the backup website\n *         callback(err, data);\n *     }\n * ],\n * // optional callback\n * function(err, results) {\n *     Now do something with the data.\n * });\n *\n */\nfunction tryEach(tasks, callback) {\n    var error = null;\n    var result;\n    return eachSeries$1(tasks, (task, taskCb) => {\n        wrapAsync(task)((err, ...args) => {\n            if (err === false) return taskCb(err);\n\n            if (args.length < 2) {\n                [result] = args;\n            } else {\n                result = args;\n            }\n            error = err;\n            taskCb(err ? null : {});\n        });\n    }, () => callback(error, result));\n}\n\nvar tryEach$1 = awaitify(tryEach);\n\n/**\n * Undoes a [memoize]{@link module:Utils.memoize}d function, reverting it to the original,\n * unmemoized form. Handy for testing.\n *\n * @name unmemoize\n * @static\n * @memberOf module:Utils\n * @method\n * @see [async.memoize]{@link module:Utils.memoize}\n * @category Util\n * @param {AsyncFunction} fn - the memoized function\n * @returns {AsyncFunction} a function that calls the original unmemoized function\n */\nfunction unmemoize(fn) {\n    return (...args) => {\n        return (fn.unmemoized || fn)(...args);\n    };\n}\n\n/**\n * Repeatedly call `iteratee`, while `test` returns `true`. Calls `callback` when\n * stopped, or an error occurs.\n *\n * @name whilst\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {AsyncFunction} test - asynchronous truth test to perform before each\n * execution of `iteratee`. Invoked with ().\n * @param {AsyncFunction} iteratee - An async function which is called each time\n * `test` passes. Invoked with (callback).\n * @param {Function} [callback] - A callback which is called after the test\n * function has failed and repeated execution of `iteratee` has stopped. `callback`\n * will be passed an error and any arguments passed to the final `iteratee`'s\n * callback. Invoked with (err, [results]);\n * @returns {Promise} a promise, if no callback is passed\n * @example\n *\n * var count = 0;\n * async.whilst(\n *     function test(cb) { cb(null, count < 5); },\n *     function iter(callback) {\n *         count++;\n *         setTimeout(function() {\n *             callback(null, count);\n *         }, 1000);\n *     },\n *     function (err, n) {\n *         // 5 seconds have passed, n = 5\n *     }\n * );\n */\nfunction whilst(test, iteratee, callback) {\n    callback = onlyOnce(callback);\n    var _fn = wrapAsync(iteratee);\n    var _test = wrapAsync(test);\n    var results = [];\n\n    function next(err, ...rest) {\n        if (err) return callback(err);\n        results = rest;\n        if (err === false) return;\n        _test(check);\n    }\n\n    function check(err, truth) {\n        if (err) return callback(err);\n        if (err === false) return;\n        if (!truth) return callback(null, ...results);\n        _fn(next);\n    }\n\n    return _test(check);\n}\nvar whilst$1 = awaitify(whilst, 3);\n\n/**\n * Repeatedly call `iteratee` until `test` returns `true`. Calls `callback` when\n * stopped, or an error occurs. `callback` will be passed an error and any\n * arguments passed to the final `iteratee`'s callback.\n *\n * The inverse of [whilst]{@link module:ControlFlow.whilst}.\n *\n * @name until\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @see [async.whilst]{@link module:ControlFlow.whilst}\n * @category Control Flow\n * @param {AsyncFunction} test - asynchronous truth test to perform before each\n * execution of `iteratee`. Invoked with (callback).\n * @param {AsyncFunction} iteratee - An async function which is called each time\n * `test` fails. Invoked with (callback).\n * @param {Function} [callback] - A callback which is called after the test\n * function has passed and repeated execution of `iteratee` has stopped. `callback`\n * will be passed an error and any arguments passed to the final `iteratee`'s\n * callback. Invoked with (err, [results]);\n * @returns {Promise} a promise, if a callback is not passed\n *\n * @example\n * const results = []\n * let finished = false\n * async.until(function test(page, cb) {\n *     cb(null, finished)\n * }, function iter(next) {\n *     fetchPage(url, (err, body) => {\n *         if (err) return next(err)\n *         results = results.concat(body.objects)\n *         finished = !!body.next\n *         next(err)\n *     })\n * }, function done (err) {\n *     // all pages have been fetched\n * })\n */\nfunction until(test, iteratee, callback) {\n    const _test = wrapAsync(test);\n    return whilst$1((cb) => _test((err, truth) => cb (err, !truth)), iteratee, callback);\n}\n\n/**\n * Runs the `tasks` array of functions in series, each passing their results to\n * the next in the array. However, if any of the `tasks` pass an error to their\n * own callback, the next function is not executed, and the main `callback` is\n * immediately called with the error.\n *\n * @name waterfall\n * @static\n * @memberOf module:ControlFlow\n * @method\n * @category Control Flow\n * @param {Array} tasks - An array of [async functions]{@link AsyncFunction}\n * to run.\n * Each function should complete with any number of `result` values.\n * The `result` values will be passed as arguments, in order, to the next task.\n * @param {Function} [callback] - An optional callback to run once all the\n * functions have completed. This will be passed the results of the last task's\n * callback. Invoked with (err, [results]).\n * @returns undefined\n * @example\n *\n * async.waterfall([\n *     function(callback) {\n *         callback(null, 'one', 'two');\n *     },\n *     function(arg1, arg2, callback) {\n *         // arg1 now equals 'one' and arg2 now equals 'two'\n *         callback(null, 'three');\n *     },\n *     function(arg1, callback) {\n *         // arg1 now equals 'three'\n *         callback(null, 'done');\n *     }\n * ], function (err, result) {\n *     // result now equals 'done'\n * });\n *\n * // Or, with named functions:\n * async.waterfall([\n *     myFirstFunction,\n *     mySecondFunction,\n *     myLastFunction,\n * ], function (err, result) {\n *     // result now equals 'done'\n * });\n * function myFirstFunction(callback) {\n *     callback(null, 'one', 'two');\n * }\n * function mySecondFunction(arg1, arg2, callback) {\n *     // arg1 now equals 'one' and arg2 now equals 'two'\n *     callback(null, 'three');\n * }\n * function myLastFunction(arg1, callback) {\n *     // arg1 now equals 'three'\n *     callback(null, 'done');\n * }\n */\nfunction waterfall (tasks, callback) {\n    callback = once(callback);\n    if (!Array.isArray(tasks)) return callback(new Error('First argument to waterfall must be an array of functions'));\n    if (!tasks.length) return callback();\n    var taskIndex = 0;\n\n    function nextTask(args) {\n        var task = wrapAsync(tasks[taskIndex++]);\n        task(...args, onlyOnce(next));\n    }\n\n    function next(err, ...args) {\n        if (err === false) return\n        if (err || taskIndex === tasks.length) {\n            return callback(err, ...args);\n        }\n        nextTask(args);\n    }\n\n    nextTask([]);\n}\n\nvar waterfall$1 = awaitify(waterfall);\n\n/**\n * An \"async function\" in the context of Async is an asynchronous function with\n * a variable number of parameters, with the final parameter being a callback.\n * (`function (arg1, arg2, ..., callback) {}`)\n * The final callback is of the form `callback(err, results...)`, which must be\n * called once the function is completed.  The callback should be called with a\n * Error as its first argument to signal that an error occurred.\n * Otherwise, if no error occurred, it should be called with `null` as the first\n * argument, and any additional `result` arguments that may apply, to signal\n * successful completion.\n * The callback must be called exactly once, ideally on a later tick of the\n * JavaScript event loop.\n *\n * This type of function is also referred to as a \"Node-style async function\",\n * or a \"continuation passing-style function\" (CPS). Most of the methods of this\n * library are themselves CPS/Node-style async functions, or functions that\n * return CPS/Node-style async functions.\n *\n * Wherever we accept a Node-style async function, we also directly accept an\n * [ES2017 `async` function]{@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function}.\n * In this case, the `async` function will not be passed a final callback\n * argument, and any thrown error will be used as the `err` argument of the\n * implicit callback, and the return value will be used as the `result` value.\n * (i.e. a `rejected` of the returned Promise becomes the `err` callback\n * argument, and a `resolved` value becomes the `result`.)\n *\n * Note, due to JavaScript limitations, we can only detect native `async`\n * functions and not transpilied implementations.\n * Your environment must have `async`/`await` support for this to work.\n * (e.g. Node > v7.6, or a recent version of a modern browser).\n * If you are using `async` functions through a transpiler (e.g. Babel), you\n * must still wrap the function with [asyncify]{@link module:Utils.asyncify},\n * because the `async function` will be compiled to an ordinary function that\n * returns a promise.\n *\n * @typedef {Function} AsyncFunction\n * @static\n */\n\nvar index = {\n    apply,\n    applyEach: applyEach$1,\n    applyEachSeries,\n    asyncify,\n    auto,\n    autoInject,\n    cargo,\n    cargoQueue: cargo$1,\n    compose,\n    concat: concat$1,\n    concatLimit: concatLimit$1,\n    concatSeries: concatSeries$1,\n    constant,\n    detect: detect$1,\n    detectLimit: detectLimit$1,\n    detectSeries: detectSeries$1,\n    dir,\n    doUntil,\n    doWhilst: doWhilst$1,\n    each,\n    eachLimit: eachLimit$2,\n    eachOf: eachOf$1,\n    eachOfLimit: eachOfLimit$2,\n    eachOfSeries: eachOfSeries$1,\n    eachSeries: eachSeries$1,\n    ensureAsync,\n    every: every$1,\n    everyLimit: everyLimit$1,\n    everySeries: everySeries$1,\n    filter: filter$1,\n    filterLimit: filterLimit$1,\n    filterSeries: filterSeries$1,\n    forever: forever$1,\n    groupBy,\n    groupByLimit: groupByLimit$1,\n    groupBySeries,\n    log,\n    map: map$1,\n    mapLimit: mapLimit$1,\n    mapSeries: mapSeries$1,\n    mapValues,\n    mapValuesLimit: mapValuesLimit$1,\n    mapValuesSeries,\n    memoize,\n    nextTick,\n    parallel,\n    parallelLimit,\n    priorityQueue,\n    queue: queue$1,\n    race: race$1,\n    reduce: reduce$1,\n    reduceRight,\n    reflect,\n    reflectAll,\n    reject: reject$2,\n    rejectLimit: rejectLimit$1,\n    rejectSeries: rejectSeries$1,\n    retry,\n    retryable,\n    seq,\n    series,\n    setImmediate: setImmediate$1,\n    some: some$1,\n    someLimit: someLimit$1,\n    someSeries: someSeries$1,\n    sortBy: sortBy$1,\n    timeout,\n    times,\n    timesLimit,\n    timesSeries,\n    transform,\n    tryEach: tryEach$1,\n    unmemoize,\n    until,\n    waterfall: waterfall$1,\n    whilst: whilst$1,\n\n    // aliases\n    all: every$1,\n    allLimit: everyLimit$1,\n    allSeries: everySeries$1,\n    any: some$1,\n    anyLimit: someLimit$1,\n    anySeries: someSeries$1,\n    find: detect$1,\n    findLimit: detectLimit$1,\n    findSeries: detectSeries$1,\n    flatMap: concat$1,\n    flatMapLimit: concatLimit$1,\n    flatMapSeries: concatSeries$1,\n    forEach: each,\n    forEachSeries: eachSeries$1,\n    forEachLimit: eachLimit$2,\n    forEachOf: eachOf$1,\n    forEachOfSeries: eachOfSeries$1,\n    forEachOfLimit: eachOfLimit$2,\n    inject: reduce$1,\n    foldl: reduce$1,\n    foldr: reduceRight,\n    select: filter$1,\n    selectLimit: filterLimit$1,\n    selectSeries: filterSeries$1,\n    wrapSync: asyncify,\n    during: whilst$1,\n    doDuring: doWhilst$1\n};\n\nexport default index;\nexport { apply, applyEach$1 as applyEach, applyEachSeries, asyncify, auto, autoInject, cargo, cargo$1 as cargoQueue, compose, concat$1 as concat, concatLimit$1 as concatLimit, concatSeries$1 as concatSeries, constant, detect$1 as detect, detectLimit$1 as detectLimit, detectSeries$1 as detectSeries, dir, doUntil, doWhilst$1 as doWhilst, each, eachLimit$2 as eachLimit, eachOf$1 as eachOf, eachOfLimit$2 as eachOfLimit, eachOfSeries$1 as eachOfSeries, eachSeries$1 as eachSeries, ensureAsync, every$1 as every, everyLimit$1 as everyLimit, everySeries$1 as everySeries, filter$1 as filter, filterLimit$1 as filterLimit, filterSeries$1 as filterSeries, forever$1 as forever, groupBy, groupByLimit$1 as groupByLimit, groupBySeries, log, map$1 as map, mapLimit$1 as mapLimit, mapSeries$1 as mapSeries, mapValues, mapValuesLimit$1 as mapValuesLimit, mapValuesSeries, memoize, nextTick, parallel, parallelLimit, priorityQueue, queue$1 as queue, race$1 as race, reduce$1 as reduce, reduceRight, reflect, reflectAll, reject$2 as reject, rejectLimit$1 as rejectLimit, rejectSeries$1 as rejectSeries, retry, retryable, seq, series, setImmediate$1 as setImmediate, some$1 as some, someLimit$1 as someLimit, someSeries$1 as someSeries, sortBy$1 as sortBy, timeout, times, timesLimit, timesSeries, transform, tryEach$1 as tryEach, unmemoize, until, waterfall$1 as waterfall, whilst$1 as whilst, every$1 as all, everyLimit$1 as allLimit, everySeries$1 as allSeries, some$1 as any, someLimit$1 as anyLimit, someSeries$1 as anySeries, detect$1 as find, detectLimit$1 as findLimit, detectSeries$1 as findSeries, concat$1 as flatMap, concatLimit$1 as flatMapLimit, concatSeries$1 as flatMapSeries, each as forEach, eachSeries$1 as forEachSeries, eachLimit$2 as forEachLimit, eachOf$1 as forEachOf, eachOfSeries$1 as forEachOfSeries, eachOfLimit$2 as forEachOfLimit, reduce$1 as inject, reduce$1 as foldl, reduceRight as foldr, filter$1 as select, filterLimit$1 as selectLimit, filterSeries$1 as selectSeries, asyncify as wrapSync, whilst$1 as during, doWhilst$1 as doDuring };\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['cognitoidentity'] = {};\nAWS.CognitoIdentity = Service.defineService('cognitoidentity', ['2014-06-30']);\nObject.defineProperty(apiLoader.services['cognitoidentity'], '2014-06-30', {\n  get: function get() {\n    var model = require('../apis/cognito-identity-2014-06-30.min.json');\n    model.paginators = require('../apis/cognito-identity-2014-06-30.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.CognitoIdentity;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['dynamodb'] = {};\nAWS.DynamoDB = Service.defineService('dynamodb', ['2011-12-05', '2012-08-10']);\nrequire('../lib/services/dynamodb');\nObject.defineProperty(apiLoader.services['dynamodb'], '2011-12-05', {\n  get: function get() {\n    var model = require('../apis/dynamodb-2011-12-05.min.json');\n    model.paginators = require('../apis/dynamodb-2011-12-05.paginators.json').pagination;\n    model.waiters = require('../apis/dynamodb-2011-12-05.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\nObject.defineProperty(apiLoader.services['dynamodb'], '2012-08-10', {\n  get: function get() {\n    var model = require('../apis/dynamodb-2012-08-10.min.json');\n    model.paginators = require('../apis/dynamodb-2012-08-10.paginators.json').pagination;\n    model.waiters = require('../apis/dynamodb-2012-08-10.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.DynamoDB;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['s3'] = {};\nAWS.S3 = Service.defineService('s3', ['2006-03-01']);\nrequire('../lib/services/s3');\nObject.defineProperty(apiLoader.services['s3'], '2006-03-01', {\n  get: function get() {\n    var model = require('../apis/s3-2006-03-01.min.json');\n    model.paginators = require('../apis/s3-2006-03-01.paginators.json').pagination;\n    model.waiters = require('../apis/s3-2006-03-01.waiters2.json').waiters;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.S3;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['sns'] = {};\nAWS.SNS = Service.defineService('sns', ['2010-03-31']);\nObject.defineProperty(apiLoader.services['sns'], '2010-03-31', {\n  get: function get() {\n    var model = require('../apis/sns-2010-03-31.min.json');\n    model.paginators = require('../apis/sns-2010-03-31.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.SNS;\n","require('../lib/node_loader');\nvar AWS = require('../lib/core');\nvar Service = AWS.Service;\nvar apiLoader = AWS.apiLoader;\n\napiLoader.services['sts'] = {};\nAWS.STS = Service.defineService('sts', ['2011-06-15']);\nrequire('../lib/services/sts');\nObject.defineProperty(apiLoader.services['sts'], '2011-06-15', {\n  get: function get() {\n    var model = require('../apis/sts-2011-06-15.min.json');\n    model.paginators = require('../apis/sts-2011-06-15.paginators.json').pagination;\n    return model;\n  },\n  enumerable: true,\n  configurable: true\n});\n\nmodule.exports = AWS.STS;\n","function apiLoader(svc, version) {\n  if (!apiLoader.services.hasOwnProperty(svc)) {\n    throw new Error('InvalidService: Failed to load api for ' + svc);\n  }\n  return apiLoader.services[svc][version];\n}\n\n/**\n * @api private\n *\n * This member of AWS.apiLoader is private, but changing it will necessitate a\n * change to ../scripts/services-table-generator.ts\n */\napiLoader.services = {};\n\n/**\n * @api private\n */\nmodule.exports = apiLoader;\n","var AWS = require('./core');\nrequire('./credentials');\nrequire('./credentials/credential_provider_chain');\nvar PromisesDependency;\n\n/**\n * The main configuration class used by all service objects to set\n * the region, credentials, and other options for requests.\n *\n * By default, credentials and region settings are left unconfigured.\n * This should be configured by the application before using any\n * AWS service APIs.\n *\n * In order to set global configuration options, properties should\n * be assigned to the global {AWS.config} object.\n *\n * @see AWS.config\n *\n * @!group General Configuration Options\n *\n * @!attribute credentials\n *   @return [AWS.Credentials] the AWS credentials to sign requests with.\n *\n * @!attribute region\n *   @example Set the global region setting to us-west-2\n *     AWS.config.update({region: 'us-west-2'});\n *   @return [AWS.Credentials] The region to send service requests to.\n *   @see http://docs.amazonwebservices.com/general/latest/gr/rande.html\n *     A list of available endpoints for each AWS service\n *\n * @!attribute maxRetries\n *   @return [Integer] the maximum amount of retries to perform for a\n *     service request. By default this value is calculated by the specific\n *     service object that the request is being made to.\n *\n * @!attribute maxRedirects\n *   @return [Integer] the maximum amount of redirects to follow for a\n *     service request. Defaults to 10.\n *\n * @!attribute paramValidation\n *   @return [Boolean|map] whether input parameters should be validated against\n *     the operation description before sending the request. Defaults to true.\n *     Pass a map to enable any of the following specific validation features:\n *\n *     * **min** [Boolean] &mdash; Validates that a value meets the min\n *       constraint. This is enabled by default when paramValidation is set\n *       to `true`.\n *     * **max** [Boolean] &mdash; Validates that a value meets the max\n *       constraint.\n *     * **pattern** [Boolean] &mdash; Validates that a string value matches a\n *       regular expression.\n *     * **enum** [Boolean] &mdash; Validates that a string value matches one\n *       of the allowable enum values.\n *\n * @!attribute computeChecksums\n *   @return [Boolean] whether to compute checksums for payload bodies when\n *     the service accepts it (currently supported in S3 only).\n *\n * @!attribute convertResponseTypes\n *   @return [Boolean] whether types are converted when parsing response data.\n *     Currently only supported for JSON based services. Turning this off may\n *     improve performance on large response payloads. Defaults to `true`.\n *\n * @!attribute correctClockSkew\n *   @return [Boolean] whether to apply a clock skew correction and retry\n *     requests that fail because of an skewed client clock. Defaults to\n *     `false`.\n *\n * @!attribute sslEnabled\n *   @return [Boolean] whether SSL is enabled for requests\n *\n * @!attribute s3ForcePathStyle\n *   @return [Boolean] whether to force path style URLs for S3 objects\n *\n * @!attribute s3BucketEndpoint\n *   @note Setting this configuration option requires an `endpoint` to be\n *     provided explicitly to the service constructor.\n *   @return [Boolean] whether the provided endpoint addresses an individual\n *     bucket (false if it addresses the root API endpoint).\n *\n * @!attribute s3DisableBodySigning\n *   @return [Boolean] whether to disable S3 body signing when using signature version `v4`.\n *     Body signing can only be disabled when using https. Defaults to `true`.\n *\n * @!attribute s3UsEast1RegionalEndpoint\n *   @return ['legacy'|'regional'] when region is set to 'us-east-1', whether to send s3\n *     request to global endpoints or 'us-east-1' regional endpoints. This config is only\n *     applicable to S3 client;\n *     Defaults to 'legacy'\n * @!attribute s3UseArnRegion\n *   @return [Boolean] whether to override the request region with the region inferred\n *     from requested resource's ARN. Only available for S3 buckets\n *     Defaults to `true`\n *\n * @!attribute useAccelerateEndpoint\n *   @note This configuration option is only compatible with S3 while accessing\n *     dns-compatible buckets.\n *   @return [Boolean] Whether to use the Accelerate endpoint with the S3 service.\n *     Defaults to `false`.\n *\n * @!attribute retryDelayOptions\n *   @example Set the base retry delay for all services to 300 ms\n *     AWS.config.update({retryDelayOptions: {base: 300}});\n *     // Delays with maxRetries = 3: 300, 600, 1200\n *   @example Set a custom backoff function to provide delay values on retries\n *     AWS.config.update({retryDelayOptions: {customBackoff: function(retryCount, err) {\n *       // returns delay in ms\n *     }}});\n *   @return [map] A set of options to configure the retry delay on retryable errors.\n *     Currently supported options are:\n *\n *     * **base** [Integer] &mdash; The base number of milliseconds to use in the\n *       exponential backoff for operation retries. Defaults to 100 ms for all services except\n *       DynamoDB, where it defaults to 50ms.\n *\n *     * **customBackoff ** [function] &mdash; A custom function that accepts a\n *       retry count and error and returns the amount of time to delay in\n *       milliseconds. If the result is a non-zero negative value, no further\n *       retry attempts will be made. The `base` option will be ignored if this\n *       option is supplied. The function is only called for retryable errors.\n *\n * @!attribute httpOptions\n *   @return [map] A set of options to pass to the low-level HTTP request.\n *     Currently supported options are:\n *\n *     * **proxy** [String] &mdash; the URL to proxy requests through\n *     * **agent** [http.Agent, https.Agent] &mdash; the Agent object to perform\n *       HTTP requests with. Used for connection pooling. Note that for\n *       SSL connections, a special Agent object is used in order to enable\n *       peer certificate verification. This feature is only supported in the\n *       Node.js environment.\n *     * **connectTimeout** [Integer] &mdash; Sets the socket to timeout after\n *       failing to establish a connection with the server after\n *       `connectTimeout` milliseconds. This timeout has no effect once a socket\n *       connection has been established.\n *     * **timeout** [Integer] &mdash; The number of milliseconds a request can\n *       take before automatically being terminated.\n *       Defaults to two minutes (120000).\n *     * **xhrAsync** [Boolean] &mdash; Whether the SDK will send asynchronous\n *       HTTP requests. Used in the browser environment only. Set to false to\n *       send requests synchronously. Defaults to true (async on).\n *     * **xhrWithCredentials** [Boolean] &mdash; Sets the \"withCredentials\"\n *       property of an XMLHttpRequest object. Used in the browser environment\n *       only. Defaults to false.\n * @!attribute logger\n *   @return [#write,#log] an object that responds to .write() (like a stream)\n *     or .log() (like the console object) in order to log information about\n *     requests\n *\n * @!attribute systemClockOffset\n *   @return [Number] an offset value in milliseconds to apply to all signing\n *     times. Use this to compensate for clock skew when your system may be\n *     out of sync with the service time. Note that this configuration option\n *     can only be applied to the global `AWS.config` object and cannot be\n *     overridden in service-specific configuration. Defaults to 0 milliseconds.\n *\n * @!attribute signatureVersion\n *   @return [String] the signature version to sign requests with (overriding\n *     the API configuration). Possible values are: 'v2', 'v3', 'v4'.\n *\n * @!attribute signatureCache\n *   @return [Boolean] whether the signature to sign requests with (overriding\n *     the API configuration) is cached. Only applies to the signature version 'v4'.\n *     Defaults to `true`.\n *\n * @!attribute endpointDiscoveryEnabled\n *   @return [Boolean|undefined] whether to call operations with endpoints\n *     given by service dynamically. Setting this config to `true` will enable\n *     endpoint discovery for all applicable operations. Setting it to `false`\n *     will explicitly disable endpoint discovery even though operations that\n *     require endpoint discovery will presumably fail. Leaving it to\n *     `undefined` means SDK only do endpoint discovery when it's required.\n *     Defaults to `undefined`\n *\n * @!attribute endpointCacheSize\n *   @return [Number] the size of the global cache storing endpoints from endpoint\n *     discovery operations. Once endpoint cache is created, updating this setting\n *     cannot change existing cache size.\n *     Defaults to 1000\n *\n * @!attribute hostPrefixEnabled\n *   @return [Boolean] whether to marshal request parameters to the prefix of\n *     hostname. Defaults to `true`.\n *\n * @!attribute stsRegionalEndpoints\n *   @return ['legacy'|'regional'] whether to send sts request to global endpoints or\n *     regional endpoints.\n *     Defaults to 'legacy'\n */\nAWS.Config = AWS.util.inherit({\n  /**\n   * @!endgroup\n   */\n\n  /**\n   * Creates a new configuration object. This is the object that passes\n   * option data along to service requests, including credentials, security,\n   * region information, and some service specific settings.\n   *\n   * @example Creating a new configuration object with credentials and region\n   *   var config = new AWS.Config({\n   *     accessKeyId: 'AKID', secretAccessKey: 'SECRET', region: 'us-west-2'\n   *   });\n   * @option options accessKeyId [String] your AWS access key ID.\n   * @option options secretAccessKey [String] your AWS secret access key.\n   * @option options sessionToken [AWS.Credentials] the optional AWS\n   *   session token to sign requests with.\n   * @option options credentials [AWS.Credentials] the AWS credentials\n   *   to sign requests with. You can either specify this object, or\n   *   specify the accessKeyId and secretAccessKey options directly.\n   * @option options credentialProvider [AWS.CredentialProviderChain] the\n   *   provider chain used to resolve credentials if no static `credentials`\n   *   property is set.\n   * @option options region [String] the region to send service requests to.\n   *   See {region} for more information.\n   * @option options maxRetries [Integer] the maximum amount of retries to\n   *   attempt with a request. See {maxRetries} for more information.\n   * @option options maxRedirects [Integer] the maximum amount of redirects to\n   *   follow with a request. See {maxRedirects} for more information.\n   * @option options sslEnabled [Boolean] whether to enable SSL for\n   *   requests.\n   * @option options paramValidation [Boolean|map] whether input parameters\n   *   should be validated against the operation description before sending\n   *   the request. Defaults to true. Pass a map to enable any of the\n   *   following specific validation features:\n   *\n   *   * **min** [Boolean] &mdash; Validates that a value meets the min\n   *     constraint. This is enabled by default when paramValidation is set\n   *     to `true`.\n   *   * **max** [Boolean] &mdash; Validates that a value meets the max\n   *     constraint.\n   *   * **pattern** [Boolean] &mdash; Validates that a string value matches a\n   *     regular expression.\n   *   * **enum** [Boolean] &mdash; Validates that a string value matches one\n   *     of the allowable enum values.\n   * @option options computeChecksums [Boolean] whether to compute checksums\n   *   for payload bodies when the service accepts it (currently supported\n   *   in S3 only)\n   * @option options convertResponseTypes [Boolean] whether types are converted\n   *     when parsing response data. Currently only supported for JSON based\n   *     services. Turning this off may improve performance on large response\n   *     payloads. Defaults to `true`.\n   * @option options correctClockSkew [Boolean] whether to apply a clock skew\n   *     correction and retry requests that fail because of an skewed client\n   *     clock. Defaults to `false`.\n   * @option options s3ForcePathStyle [Boolean] whether to force path\n   *   style URLs for S3 objects.\n   * @option options s3BucketEndpoint [Boolean] whether the provided endpoint\n   *   addresses an individual bucket (false if it addresses the root API\n   *   endpoint). Note that setting this configuration option requires an\n   *   `endpoint` to be provided explicitly to the service constructor.\n   * @option options s3DisableBodySigning [Boolean] whether S3 body signing\n   *   should be disabled when using signature version `v4`. Body signing\n   *   can only be disabled when using https. Defaults to `true`.\n   * @option options s3UsEast1RegionalEndpoint ['legacy'|'regional'] when region\n   *   is set to 'us-east-1', whether to send s3 request to global endpoints or\n   *   'us-east-1' regional endpoints. This config is only applicable to S3 client.\n   *   Defaults to `legacy`\n   * @option options s3UseArnRegion [Boolean] whether to override the request region\n   *   with the region inferred from requested resource's ARN. Only available for S3 buckets\n   *   Defaults to `true`\n   *\n   * @option options retryDelayOptions [map] A set of options to configure\n   *   the retry delay on retryable errors. Currently supported options are:\n   *\n   *   * **base** [Integer] &mdash; The base number of milliseconds to use in the\n   *     exponential backoff for operation retries. Defaults to 100 ms for all\n   *     services except DynamoDB, where it defaults to 50ms.\n   *   * **customBackoff ** [function] &mdash; A custom function that accepts a\n   *     retry count and error and returns the amount of time to delay in\n   *     milliseconds. If the result is a non-zero negative value, no further\n   *     retry attempts will be made. The `base` option will be ignored if this\n   *     option is supplied. The function is only called for retryable errors.\n   * @option options httpOptions [map] A set of options to pass to the low-level\n   *   HTTP request. Currently supported options are:\n   *\n   *   * **proxy** [String] &mdash; the URL to proxy requests through\n   *   * **agent** [http.Agent, https.Agent] &mdash; the Agent object to perform\n   *     HTTP requests with. Used for connection pooling. Defaults to the global\n   *     agent (`http.globalAgent`) for non-SSL connections. Note that for\n   *     SSL connections, a special Agent object is used in order to enable\n   *     peer certificate verification. This feature is only available in the\n   *     Node.js environment.\n   *   * **connectTimeout** [Integer] &mdash; Sets the socket to timeout after\n   *     failing to establish a connection with the server after\n   *     `connectTimeout` milliseconds. This timeout has no effect once a socket\n   *     connection has been established.\n   *   * **timeout** [Integer] &mdash; Sets the socket to timeout after timeout\n   *     milliseconds of inactivity on the socket. Defaults to two minutes\n   *     (120000).\n   *   * **xhrAsync** [Boolean] &mdash; Whether the SDK will send asynchronous\n   *     HTTP requests. Used in the browser environment only. Set to false to\n   *     send requests synchronously. Defaults to true (async on).\n   *   * **xhrWithCredentials** [Boolean] &mdash; Sets the \"withCredentials\"\n   *     property of an XMLHttpRequest object. Used in the browser environment\n   *     only. Defaults to false.\n   * @option options apiVersion [String, Date] a String in YYYY-MM-DD format\n   *   (or a date) that represents the latest possible API version that can be\n   *   used in all services (unless overridden by `apiVersions`). Specify\n   *   'latest' to use the latest possible version.\n   * @option options apiVersions [map<String, String|Date>] a map of service\n   *   identifiers (the lowercase service class name) with the API version to\n   *   use when instantiating a service. Specify 'latest' for each individual\n   *   that can use the latest available version.\n   * @option options logger [#write,#log] an object that responds to .write()\n   *   (like a stream) or .log() (like the console object) in order to log\n   *   information about requests\n   * @option options systemClockOffset [Number] an offset value in milliseconds\n   *   to apply to all signing times. Use this to compensate for clock skew\n   *   when your system may be out of sync with the service time. Note that\n   *   this configuration option can only be applied to the global `AWS.config`\n   *   object and cannot be overridden in service-specific configuration.\n   *   Defaults to 0 milliseconds.\n   * @option options signatureVersion [String] the signature version to sign\n   *   requests with (overriding the API configuration). Possible values are:\n   *   'v2', 'v3', 'v4'.\n   * @option options signatureCache [Boolean] whether the signature to sign\n   *   requests with (overriding the API configuration) is cached. Only applies\n   *   to the signature version 'v4'. Defaults to `true`.\n   * @option options dynamoDbCrc32 [Boolean] whether to validate the CRC32\n   *   checksum of HTTP response bodies returned by DynamoDB. Default: `true`.\n   * @option options useAccelerateEndpoint [Boolean] Whether to use the\n   *   S3 Transfer Acceleration endpoint with the S3 service. Default: `false`.\n   * @option options clientSideMonitoring [Boolean] whether to collect and\n   *   publish this client's performance metrics of all its API requests.\n   * @option options endpointDiscoveryEnabled [Boolean|undefined] whether to\n   *   call operations with endpoints given by service dynamically. Setting this\n   * config to `true` will enable endpoint discovery for all applicable operations.\n   *   Setting it to `false` will explicitly disable endpoint discovery even though\n   *   operations that require endpoint discovery will presumably fail. Leaving it\n   *   to `undefined` means SDK will only do endpoint discovery when it's required.\n   *   Defaults to `undefined`\n   * @option options endpointCacheSize [Number] the size of the global cache storing\n   *   endpoints from endpoint discovery operations. Once endpoint cache is created,\n   *   updating this setting cannot change existing cache size.\n   *   Defaults to 1000\n   * @option options hostPrefixEnabled [Boolean] whether to marshal request\n   *   parameters to the prefix of hostname.\n   *   Defaults to `true`.\n   * @option options stsRegionalEndpoints ['legacy'|'regional'] whether to send sts request\n   *   to global endpoints or regional endpoints.\n   *   Defaults to 'legacy'.\n   */\n  constructor: function Config(options) {\n    if (options === undefined) options = {};\n    options = this.extractCredentials(options);\n\n    AWS.util.each.call(this, this.keys, function (key, value) {\n      this.set(key, options[key], value);\n    });\n  },\n\n  /**\n   * @!group Managing Credentials\n   */\n\n  /**\n   * Loads credentials from the configuration object. This is used internally\n   * by the SDK to ensure that refreshable {Credentials} objects are properly\n   * refreshed and loaded when sending a request. If you want to ensure that\n   * your credentials are loaded prior to a request, you can use this method\n   * directly to provide accurate credential data stored in the object.\n   *\n   * @note If you configure the SDK with static or environment credentials,\n   *   the credential data should already be present in {credentials} attribute.\n   *   This method is primarily necessary to load credentials from asynchronous\n   *   sources, or sources that can refresh credentials periodically.\n   * @example Getting your access key\n   *   AWS.config.getCredentials(function(err) {\n   *     if (err) console.log(err.stack); // credentials not loaded\n   *     else console.log(\"Access Key:\", AWS.config.credentials.accessKeyId);\n   *   })\n   * @callback callback function(err)\n   *   Called when the {credentials} have been properly set on the configuration\n   *   object.\n   *\n   *   @param err [Error] if this is set, credentials were not successfully\n   *     loaded and this error provides information why.\n   * @see credentials\n   * @see Credentials\n   */\n  getCredentials: function getCredentials(callback) {\n    var self = this;\n\n    function finish(err) {\n      callback(err, err ? null : self.credentials);\n    }\n\n    function credError(msg, err) {\n      return new AWS.util.error(err || new Error(), {\n        code: 'CredentialsError',\n        message: msg,\n        name: 'CredentialsError'\n      });\n    }\n\n    function getAsyncCredentials() {\n      self.credentials.get(function(err) {\n        if (err) {\n          var msg = 'Could not load credentials from ' +\n            self.credentials.constructor.name;\n          err = credError(msg, err);\n        }\n        finish(err);\n      });\n    }\n\n    function getStaticCredentials() {\n      var err = null;\n      if (!self.credentials.accessKeyId || !self.credentials.secretAccessKey) {\n        err = credError('Missing credentials');\n      }\n      finish(err);\n    }\n\n    if (self.credentials) {\n      if (typeof self.credentials.get === 'function') {\n        getAsyncCredentials();\n      } else { // static credentials\n        getStaticCredentials();\n      }\n    } else if (self.credentialProvider) {\n      self.credentialProvider.resolve(function(err, creds) {\n        if (err) {\n          err = credError('Could not load credentials from any providers', err);\n        }\n        self.credentials = creds;\n        finish(err);\n      });\n    } else {\n      finish(credError('No credentials to load'));\n    }\n  },\n\n  /**\n   * @!group Loading and Setting Configuration Options\n   */\n\n  /**\n   * @overload update(options, allowUnknownKeys = false)\n   *   Updates the current configuration object with new options.\n   *\n   *   @example Update maxRetries property of a configuration object\n   *     config.update({maxRetries: 10});\n   *   @param [Object] options a map of option keys and values.\n   *   @param [Boolean] allowUnknownKeys whether unknown keys can be set on\n   *     the configuration object. Defaults to `false`.\n   *   @see constructor\n   */\n  update: function update(options, allowUnknownKeys) {\n    allowUnknownKeys = allowUnknownKeys || false;\n    options = this.extractCredentials(options);\n    AWS.util.each.call(this, options, function (key, value) {\n      if (allowUnknownKeys || Object.prototype.hasOwnProperty.call(this.keys, key) ||\n          AWS.Service.hasService(key)) {\n        this.set(key, value);\n      }\n    });\n  },\n\n  /**\n   * Loads configuration data from a JSON file into this config object.\n   * @note Loading configuration will reset all existing configuration\n   *   on the object.\n   * @!macro nobrowser\n   * @param path [String] the path relative to your process's current\n   *    working directory to load configuration from.\n   * @return [AWS.Config] the same configuration object\n   */\n  loadFromPath: function loadFromPath(path) {\n    this.clear();\n\n    var options = JSON.parse(AWS.util.readFileSync(path));\n    var fileSystemCreds = new AWS.FileSystemCredentials(path);\n    var chain = new AWS.CredentialProviderChain();\n    chain.providers.unshift(fileSystemCreds);\n    chain.resolve(function (err, creds) {\n      if (err) throw err;\n      else options.credentials = creds;\n    });\n\n    this.constructor(options);\n\n    return this;\n  },\n\n  /**\n   * Clears configuration data on this object\n   *\n   * @api private\n   */\n  clear: function clear() {\n    /*jshint forin:false */\n    AWS.util.each.call(this, this.keys, function (key) {\n      delete this[key];\n    });\n\n    // reset credential provider\n    this.set('credentials', undefined);\n    this.set('credentialProvider', undefined);\n  },\n\n  /**\n   * Sets a property on the configuration object, allowing for a\n   * default value\n   * @api private\n   */\n  set: function set(property, value, defaultValue) {\n    if (value === undefined) {\n      if (defaultValue === undefined) {\n        defaultValue = this.keys[property];\n      }\n      if (typeof defaultValue === 'function') {\n        this[property] = defaultValue.call(this);\n      } else {\n        this[property] = defaultValue;\n      }\n    } else if (property === 'httpOptions' && this[property]) {\n      // deep merge httpOptions\n      this[property] = AWS.util.merge(this[property], value);\n    } else {\n      this[property] = value;\n    }\n  },\n\n  /**\n   * All of the keys with their default values.\n   *\n   * @constant\n   * @api private\n   */\n  keys: {\n    credentials: null,\n    credentialProvider: null,\n    region: null,\n    logger: null,\n    apiVersions: {},\n    apiVersion: null,\n    endpoint: undefined,\n    httpOptions: {\n      timeout: 120000\n    },\n    maxRetries: undefined,\n    maxRedirects: 10,\n    paramValidation: true,\n    sslEnabled: true,\n    s3ForcePathStyle: false,\n    s3BucketEndpoint: false,\n    s3DisableBodySigning: true,\n    s3UsEast1RegionalEndpoint: 'legacy',\n    s3UseArnRegion: undefined,\n    computeChecksums: true,\n    convertResponseTypes: true,\n    correctClockSkew: false,\n    customUserAgent: null,\n    dynamoDbCrc32: true,\n    systemClockOffset: 0,\n    signatureVersion: null,\n    signatureCache: true,\n    retryDelayOptions: {},\n    useAccelerateEndpoint: false,\n    clientSideMonitoring: false,\n    endpointDiscoveryEnabled: undefined,\n    endpointCacheSize: 1000,\n    hostPrefixEnabled: true,\n    stsRegionalEndpoints: 'legacy'\n  },\n\n  /**\n   * Extracts accessKeyId, secretAccessKey and sessionToken\n   * from a configuration hash.\n   *\n   * @api private\n   */\n  extractCredentials: function extractCredentials(options) {\n    if (options.accessKeyId && options.secretAccessKey) {\n      options = AWS.util.copy(options);\n      options.credentials = new AWS.Credentials(options);\n    }\n    return options;\n  },\n\n  /**\n   * Sets the promise dependency the SDK will use wherever Promises are returned.\n   * Passing `null` will force the SDK to use native Promises if they are available.\n   * If native Promises are not available, passing `null` will have no effect.\n   * @param [Constructor] dep A reference to a Promise constructor\n   */\n  setPromisesDependency: function setPromisesDependency(dep) {\n    PromisesDependency = dep;\n    // if null was passed in, we should try to use native promises\n    if (dep === null && typeof Promise === 'function') {\n      PromisesDependency = Promise;\n    }\n    var constructors = [AWS.Request, AWS.Credentials, AWS.CredentialProviderChain];\n    if (AWS.S3) {\n      constructors.push(AWS.S3);\n      if (AWS.S3.ManagedUpload) {\n        constructors.push(AWS.S3.ManagedUpload);\n      }\n    }\n    AWS.util.addPromises(constructors, PromisesDependency);\n  },\n\n  /**\n   * Gets the promise dependency set by `AWS.config.setPromisesDependency`.\n   */\n  getPromisesDependency: function getPromisesDependency() {\n    return PromisesDependency;\n  }\n});\n\n/**\n * @return [AWS.Config] The global configuration object singleton instance\n * @readonly\n * @see AWS.Config\n */\nAWS.config = new AWS.Config();\n","var AWS = require('./core');\n/**\n * @api private\n */\nfunction validateRegionalEndpointsFlagValue(configValue, errorOptions) {\n  if (typeof configValue !== 'string') return undefined;\n  else if (['legacy', 'regional'].indexOf(configValue.toLowerCase()) >= 0) {\n    return configValue.toLowerCase();\n  } else {\n    throw AWS.util.error(new Error(), errorOptions);\n  }\n}\n\n/**\n * Resolve the configuration value for regional endpoint from difference sources: client\n * config, environmental variable, shared config file. Value can be case-insensitive\n * 'legacy' or 'reginal'.\n * @param originalConfig user-supplied config object to resolve\n * @param options a map of config property names from individual configuration source\n *  - env: name of environmental variable that refers to the config\n *  - sharedConfig: name of shared configuration file property that refers to the config\n *  - clientConfig: name of client configuration property that refers to the config\n *\n * @api private\n */\nfunction resolveRegionalEndpointsFlag(originalConfig, options) {\n  originalConfig = originalConfig || {};\n  //validate config value\n  var resolved;\n  if (originalConfig[options.clientConfig]) {\n    resolved = validateRegionalEndpointsFlagValue(originalConfig[options.clientConfig], {\n      code: 'InvalidConfiguration',\n      message: 'invalid \"' + options.clientConfig + '\" configuration. Expect \"legacy\" ' +\n      ' or \"regional\". Got \"' + originalConfig[options.clientConfig] + '\".'\n    });\n    if (resolved) return resolved;\n  }\n  if (!AWS.util.isNode()) return resolved;\n  //validate environmental variable\n  if (Object.prototype.hasOwnProperty.call(process.env, options.env)) {\n    var envFlag = process.env[options.env];\n    resolved = validateRegionalEndpointsFlagValue(envFlag, {\n      code: 'InvalidEnvironmentalVariable',\n      message: 'invalid ' + options.env + ' environmental variable. Expect \"legacy\" ' +\n      ' or \"regional\". Got \"' + process.env[options.env] + '\".'\n    });\n    if (resolved) return resolved;\n  }\n  //validate shared config file\n  var profile = {};\n  try {\n    var profiles = AWS.util.getProfilesFromSharedConfig(AWS.util.iniLoader);\n    profile = profiles[process.env.AWS_PROFILE || AWS.util.defaultProfile];\n  } catch (e) {};\n  if (profile && Object.prototype.hasOwnProperty.call(profile, options.sharedConfig)) {\n    var fileFlag = profile[options.sharedConfig];\n    resolved = validateRegionalEndpointsFlagValue(fileFlag, {\n      code: 'InvalidConfiguration',\n      message: 'invalid ' + options.sharedConfig + ' profile config. Expect \"legacy\" ' +\n      ' or \"regional\". Got \"' + profile[options.sharedConfig] + '\".'\n    });\n    if (resolved) return resolved;\n  }\n  return resolved;\n}\n\nmodule.exports = resolveRegionalEndpointsFlag;\n","/**\n * The main AWS namespace\n */\nvar AWS = { util: require('./util') };\n\n/**\n * @api private\n * @!macro [new] nobrowser\n *   @note This feature is not supported in the browser environment of the SDK.\n */\nvar _hidden = {}; _hidden.toString(); // hack to parse macro\n\n/**\n * @api private\n */\nmodule.exports = AWS;\n\nAWS.util.update(AWS, {\n\n  /**\n   * @constant\n   */\n  VERSION: '2.814.0',\n\n  /**\n   * @api private\n   */\n  Signers: {},\n\n  /**\n   * @api private\n   */\n  Protocol: {\n    Json: require('./protocol/json'),\n    Query: require('./protocol/query'),\n    Rest: require('./protocol/rest'),\n    RestJson: require('./protocol/rest_json'),\n    RestXml: require('./protocol/rest_xml')\n  },\n\n  /**\n   * @api private\n   */\n  XML: {\n    Builder: require('./xml/builder'),\n    Parser: null // conditionally set based on environment\n  },\n\n  /**\n   * @api private\n   */\n  JSON: {\n    Builder: require('./json/builder'),\n    Parser: require('./json/parser')\n  },\n\n  /**\n   * @api private\n   */\n  Model: {\n    Api: require('./model/api'),\n    Operation: require('./model/operation'),\n    Shape: require('./model/shape'),\n    Paginator: require('./model/paginator'),\n    ResourceWaiter: require('./model/resource_waiter')\n  },\n\n  /**\n   * @api private\n   */\n  apiLoader: require('./api_loader'),\n\n  /**\n   * @api private\n   */\n  EndpointCache: require('../vendor/endpoint-cache').EndpointCache\n});\nrequire('./sequential_executor');\nrequire('./service');\nrequire('./config');\nrequire('./http');\nrequire('./event_listeners');\nrequire('./request');\nrequire('./response');\nrequire('./resource_waiter');\nrequire('./signers/request_signer');\nrequire('./param_validator');\n\n/**\n * @readonly\n * @return [AWS.SequentialExecutor] a collection of global event listeners that\n *   are attached to every sent request.\n * @see AWS.Request AWS.Request for a list of events to listen for\n * @example Logging the time taken to send a request\n *   AWS.events.on('send', function startSend(resp) {\n *     resp.startTime = new Date().getTime();\n *   }).on('complete', function calculateTime(resp) {\n *     var time = (new Date().getTime() - resp.startTime) / 1000;\n *     console.log('Request took ' + time + ' seconds');\n *   });\n *\n *   new AWS.S3().listBuckets(); // prints 'Request took 0.285 seconds'\n */\nAWS.events = new AWS.SequentialExecutor();\n\n//create endpoint cache lazily\nAWS.util.memoizedProperty(AWS, 'endpointCache', function() {\n  return new AWS.EndpointCache(AWS.config.endpointCacheSize);\n}, true);\n","var AWS = require('./core');\n\n/**\n * Represents your AWS security credentials, specifically the\n * {accessKeyId}, {secretAccessKey}, and optional {sessionToken}.\n * Creating a `Credentials` object allows you to pass around your\n * security information to configuration and service objects.\n *\n * Note that this class typically does not need to be constructed manually,\n * as the {AWS.Config} and {AWS.Service} classes both accept simple\n * options hashes with the three keys. These structures will be converted\n * into Credentials objects automatically.\n *\n * ## Expiring and Refreshing Credentials\n *\n * Occasionally credentials can expire in the middle of a long-running\n * application. In this case, the SDK will automatically attempt to\n * refresh the credentials from the storage location if the Credentials\n * class implements the {refresh} method.\n *\n * If you are implementing a credential storage location, you\n * will want to create a subclass of the `Credentials` class and\n * override the {refresh} method. This method allows credentials to be\n * retrieved from the backing store, be it a file system, database, or\n * some network storage. The method should reset the credential attributes\n * on the object.\n *\n * @!attribute expired\n *   @return [Boolean] whether the credentials have been expired and\n *     require a refresh. Used in conjunction with {expireTime}.\n * @!attribute expireTime\n *   @return [Date] a time when credentials should be considered expired. Used\n *     in conjunction with {expired}.\n * @!attribute accessKeyId\n *   @return [String] the AWS access key ID\n * @!attribute secretAccessKey\n *   @return [String] the AWS secret access key\n * @!attribute sessionToken\n *   @return [String] an optional AWS session token\n */\nAWS.Credentials = AWS.util.inherit({\n  /**\n   * A credentials object can be created using positional arguments or an options\n   * hash.\n   *\n   * @overload AWS.Credentials(accessKeyId, secretAccessKey, sessionToken=null)\n   *   Creates a Credentials object with a given set of credential information\n   *   as positional arguments.\n   *   @param accessKeyId [String] the AWS access key ID\n   *   @param secretAccessKey [String] the AWS secret access key\n   *   @param sessionToken [String] the optional AWS session token\n   *   @example Create a credentials object with AWS credentials\n   *     var creds = new AWS.Credentials('akid', 'secret', 'session');\n   * @overload AWS.Credentials(options)\n   *   Creates a Credentials object with a given set of credential information\n   *   as an options hash.\n   *   @option options accessKeyId [String] the AWS access key ID\n   *   @option options secretAccessKey [String] the AWS secret access key\n   *   @option options sessionToken [String] the optional AWS session token\n   *   @example Create a credentials object with AWS credentials\n   *     var creds = new AWS.Credentials({\n   *       accessKeyId: 'akid', secretAccessKey: 'secret', sessionToken: 'session'\n   *     });\n   */\n  constructor: function Credentials() {\n    // hide secretAccessKey from being displayed with util.inspect\n    AWS.util.hideProperties(this, ['secretAccessKey']);\n\n    this.expired = false;\n    this.expireTime = null;\n    this.refreshCallbacks = [];\n    if (arguments.length === 1 && typeof arguments[0] === 'object') {\n      var creds = arguments[0].credentials || arguments[0];\n      this.accessKeyId = creds.accessKeyId;\n      this.secretAccessKey = creds.secretAccessKey;\n      this.sessionToken = creds.sessionToken;\n    } else {\n      this.accessKeyId = arguments[0];\n      this.secretAccessKey = arguments[1];\n      this.sessionToken = arguments[2];\n    }\n  },\n\n  /**\n   * @return [Integer] the number of seconds before {expireTime} during which\n   *   the credentials will be considered expired.\n   */\n  expiryWindow: 15,\n\n  /**\n   * @return [Boolean] whether the credentials object should call {refresh}\n   * @note Subclasses should override this method to provide custom refresh\n   *   logic.\n   */\n  needsRefresh: function needsRefresh() {\n    var currentTime = AWS.util.date.getDate().getTime();\n    var adjustedTime = new Date(currentTime + this.expiryWindow * 1000);\n\n    if (this.expireTime && adjustedTime > this.expireTime) {\n      return true;\n    } else {\n      return this.expired || !this.accessKeyId || !this.secretAccessKey;\n    }\n  },\n\n  /**\n   * Gets the existing credentials, refreshing them if they are not yet loaded\n   * or have expired. Users should call this method before using {refresh},\n   * as this will not attempt to reload credentials when they are already\n   * loaded into the object.\n   *\n   * @callback callback function(err)\n   *   When this callback is called with no error, it means either credentials\n   *   do not need to be refreshed or refreshed credentials information has\n   *   been loaded into the object (as the `accessKeyId`, `secretAccessKey`,\n   *   and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   */\n  get: function get(callback) {\n    var self = this;\n    if (this.needsRefresh()) {\n      this.refresh(function(err) {\n        if (!err) self.expired = false; // reset expired flag\n        if (callback) callback(err);\n      });\n    } else if (callback) {\n      callback();\n    }\n  },\n\n  /**\n   * @!method  getPromise()\n   *   Returns a 'thenable' promise.\n   *   Gets the existing credentials, refreshing them if they are not yet loaded\n   *   or have expired. Users should call this method before using {refresh},\n   *   as this will not attempt to reload credentials when they are already\n   *   loaded into the object.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @callback fulfilledCallback function()\n   *     Called if the promise is fulfilled. When this callback is called, it\n   *     means either credentials do not need to be refreshed or refreshed\n   *     credentials information has been loaded into the object (as the\n   *     `accessKeyId`, `secretAccessKey`, and `sessionToken` properties).\n   *   @callback rejectedCallback function(err)\n   *     Called if the promise is rejected.\n   *     @param err [Error] if an error occurred, this value will be filled\n   *   @return [Promise] A promise that represents the state of the `get` call.\n   *   @example Calling the `getPromise` method.\n   *     var promise = credProvider.getPromise();\n   *     promise.then(function() { ... }, function(err) { ... });\n   */\n\n  /**\n   * @!method  refreshPromise()\n   *   Returns a 'thenable' promise.\n   *   Refreshes the credentials. Users should call {get} before attempting\n   *   to forcibly refresh credentials.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @callback fulfilledCallback function()\n   *     Called if the promise is fulfilled. When this callback is called, it\n   *     means refreshed credentials information has been loaded into the object\n   *     (as the `accessKeyId`, `secretAccessKey`, and `sessionToken` properties).\n   *   @callback rejectedCallback function(err)\n   *     Called if the promise is rejected.\n   *     @param err [Error] if an error occurred, this value will be filled\n   *   @return [Promise] A promise that represents the state of the `refresh` call.\n   *   @example Calling the `refreshPromise` method.\n   *     var promise = credProvider.refreshPromise();\n   *     promise.then(function() { ... }, function(err) { ... });\n   */\n\n  /**\n   * Refreshes the credentials. Users should call {get} before attempting\n   * to forcibly refresh credentials.\n   *\n   * @callback callback function(err)\n   *   When this callback is called with no error, it means refreshed\n   *   credentials information has been loaded into the object (as the\n   *   `accessKeyId`, `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @note Subclasses should override this class to reset the\n   *   {accessKeyId}, {secretAccessKey} and optional {sessionToken}\n   *   on the credentials object and then call the callback with\n   *   any error information.\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    this.expired = false;\n    callback();\n  },\n\n  /**\n   * @api private\n   * @param callback\n   */\n  coalesceRefresh: function coalesceRefresh(callback, sync) {\n    var self = this;\n    if (self.refreshCallbacks.push(callback) === 1) {\n      self.load(function onLoad(err) {\n        AWS.util.arrayEach(self.refreshCallbacks, function(callback) {\n          if (sync) {\n            callback(err);\n          } else {\n            // callback could throw, so defer to ensure all callbacks are notified\n            AWS.util.defer(function () {\n              callback(err);\n            });\n          }\n        });\n        self.refreshCallbacks.length = 0;\n      });\n    }\n  },\n\n  /**\n   * @api private\n   * @param callback\n   */\n  load: function load(callback) {\n    callback();\n  }\n});\n\n/**\n * @api private\n */\nAWS.Credentials.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n  this.prototype.getPromise = AWS.util.promisifyMethod('get', PromiseDependency);\n  this.prototype.refreshPromise = AWS.util.promisifyMethod('refresh', PromiseDependency);\n};\n\n/**\n * @api private\n */\nAWS.Credentials.deletePromisesFromClass = function deletePromisesFromClass() {\n  delete this.prototype.getPromise;\n  delete this.prototype.refreshPromise;\n};\n\nAWS.util.addPromises(AWS.Credentials);\n","var AWS = require('../core');\nvar STS = require('../../clients/sts');\n\n/**\n * Represents temporary credentials retrieved from {AWS.STS}. Without any\n * extra parameters, credentials will be fetched from the\n * {AWS.STS.getSessionToken} operation. If an IAM role is provided, the\n * {AWS.STS.assumeRole} operation will be used to fetch credentials for the\n * role instead.\n *\n * AWS.ChainableTemporaryCredentials differs from AWS.TemporaryCredentials in\n * the way masterCredentials and refreshes are handled.\n * AWS.ChainableTemporaryCredentials refreshes expired credentials using the\n * masterCredentials passed by the user to support chaining of STS credentials.\n * However, AWS.TemporaryCredentials recursively collapses the masterCredentials\n * during instantiation, precluding the ability to refresh credentials which\n * require intermediate, temporary credentials.\n *\n * For example, if the application should use RoleA, which must be assumed from\n * RoleB, and the environment provides credentials which can assume RoleB, then\n * AWS.ChainableTemporaryCredentials must be used to support refreshing the\n * temporary credentials for RoleA:\n *\n * ```javascript\n * var roleACreds = new AWS.ChainableTemporaryCredentials({\n *   params: {RoleArn: 'RoleA'},\n *   masterCredentials: new AWS.ChainableTemporaryCredentials({\n *     params: {RoleArn: 'RoleB'},\n *     masterCredentials: new AWS.EnvironmentCredentials('AWS')\n *   })\n * });\n * ```\n *\n * If AWS.TemporaryCredentials had been used in the previous example,\n * `roleACreds` would fail to refresh because `roleACreds` would\n * use the environment credentials for the AssumeRole request.\n *\n * Another difference is that AWS.ChainableTemporaryCredentials creates the STS\n * service instance during instantiation while AWS.TemporaryCredentials creates\n * the STS service instance during the first refresh. Creating the service\n * instance during instantiation effectively captures the master credentials\n * from the global config, so that subsequent changes to the global config do\n * not affect the master credentials used to refresh the temporary credentials.\n *\n * This allows an instance of AWS.ChainableTemporaryCredentials to be assigned\n * to AWS.config.credentials:\n *\n * ```javascript\n * var envCreds = new AWS.EnvironmentCredentials('AWS');\n * AWS.config.credentials = envCreds;\n * // masterCredentials will be envCreds\n * AWS.config.credentials = new AWS.ChainableTemporaryCredentials({\n *   params: {RoleArn: '...'}\n * });\n * ```\n *\n * Similarly, to use the CredentialProviderChain's default providers as the\n * master credentials, simply create a new instance of\n * AWS.ChainableTemporaryCredentials:\n *\n * ```javascript\n * AWS.config.credentials = new ChainableTemporaryCredentials({\n *   params: {RoleArn: '...'}\n * });\n * ```\n *\n * @!attribute service\n *   @return [AWS.STS] the STS service instance used to\n *     get and refresh temporary credentials from AWS STS.\n * @note (see constructor)\n */\nAWS.ChainableTemporaryCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * Creates a new temporary credentials object.\n   *\n   * @param options [map] a set of options\n   * @option options params [map] ({}) a map of options that are passed to the\n   *   {AWS.STS.assumeRole} or {AWS.STS.getSessionToken} operations.\n   *   If a `RoleArn` parameter is passed in, credentials will be based on the\n   *   IAM role. If a `SerialNumber` parameter is passed in, {tokenCodeFn} must\n   *   also be passed in or an error will be thrown.\n   * @option options masterCredentials [AWS.Credentials] the master credentials\n   *   used to get and refresh temporary credentials from AWS STS. By default,\n   *   AWS.config.credentials or AWS.config.credentialProvider will be used.\n   * @option options tokenCodeFn [Function] (null) Function to provide\n   *   `TokenCode`, if `SerialNumber` is provided for profile in {params}. Function\n   *   is called with value of `SerialNumber` and `callback`, and should provide\n   *   the `TokenCode` or an error to the callback in the format\n   *   `callback(err, token)`.\n   * @example Creating a new credentials object for generic temporary credentials\n   *   AWS.config.credentials = new AWS.ChainableTemporaryCredentials();\n   * @example Creating a new credentials object for an IAM role\n   *   AWS.config.credentials = new AWS.ChainableTemporaryCredentials({\n   *     params: {\n   *       RoleArn: 'arn:aws:iam::1234567890:role/TemporaryCredentials'\n   *     }\n   *   });\n   * @see AWS.STS.assumeRole\n   * @see AWS.STS.getSessionToken\n   */\n  constructor: function ChainableTemporaryCredentials(options) {\n    AWS.Credentials.call(this);\n    options = options || {};\n    this.errorCode = 'ChainableTemporaryCredentialsProviderFailure';\n    this.expired = true;\n    this.tokenCodeFn = null;\n\n    var params = AWS.util.copy(options.params) || {};\n    if (params.RoleArn) {\n      params.RoleSessionName = params.RoleSessionName || 'temporary-credentials';\n    }\n    if (params.SerialNumber) {\n      if (!options.tokenCodeFn || (typeof options.tokenCodeFn !== 'function')) {\n        throw new AWS.util.error(\n          new Error('tokenCodeFn must be a function when params.SerialNumber is given'),\n          {code: this.errorCode}\n        );\n      } else {\n        this.tokenCodeFn = options.tokenCodeFn;\n      }\n    }\n    var config = AWS.util.merge(\n      {\n        params: params,\n        credentials: options.masterCredentials || AWS.config.credentials\n      },\n      options.stsConfig || {}\n    );\n    this.service = new STS(config);\n  },\n\n  /**\n   * Refreshes credentials using {AWS.STS.assumeRole} or\n   * {AWS.STS.getSessionToken}, depending on whether an IAM role ARN was passed\n   * to the credentials {constructor}.\n   *\n   * @callback callback function(err)\n   *   Called when the STS service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see AWS.Credentials.get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   * @param callback\n   */\n  load: function load(callback) {\n    var self = this;\n    var operation = self.service.config.params.RoleArn ? 'assumeRole' : 'getSessionToken';\n    this.getTokenCode(function (err, tokenCode) {\n      var params = {};\n      if (err) {\n        callback(err);\n        return;\n      }\n      if (tokenCode) {\n        params.TokenCode = tokenCode;\n      }\n      self.service[operation](params, function (err, data) {\n        if (!err) {\n          self.service.credentialsFrom(data, self);\n        }\n        callback(err);\n      });\n    });\n  },\n\n  /**\n   * @api private\n   */\n  getTokenCode: function getTokenCode(callback) {\n    var self = this;\n    if (this.tokenCodeFn) {\n      this.tokenCodeFn(this.service.config.params.SerialNumber, function (err, token) {\n        if (err) {\n          var message = err;\n          if (err instanceof Error) {\n            message = err.message;\n          }\n          callback(\n            AWS.util.error(\n              new Error('Error fetching MFA token: ' + message),\n              { code: self.errorCode}\n            )\n          );\n          return;\n        }\n        callback(null, token);\n      });\n    } else {\n      callback(null);\n    }\n  }\n});\n","var AWS = require('../core');\nvar CognitoIdentity = require('../../clients/cognitoidentity');\nvar STS = require('../../clients/sts');\n\n/**\n * Represents credentials retrieved from STS Web Identity Federation using\n * the Amazon Cognito Identity service.\n *\n * By default this provider gets credentials using the\n * {AWS.CognitoIdentity.getCredentialsForIdentity} service operation, which\n * requires either an `IdentityId` or an `IdentityPoolId` (Amazon Cognito\n * Identity Pool ID), which is used to call {AWS.CognitoIdentity.getId} to\n * obtain an `IdentityId`. If the identity or identity pool is not configured in\n * the Amazon Cognito Console to use IAM roles with the appropriate permissions,\n * then additionally a `RoleArn` is required containing the ARN of the IAM trust\n * policy for the Amazon Cognito role that the user will log into. If a `RoleArn`\n * is provided, then this provider gets credentials using the\n * {AWS.STS.assumeRoleWithWebIdentity} service operation, after first getting an\n * Open ID token from {AWS.CognitoIdentity.getOpenIdToken}.\n *\n * In addition, if this credential provider is used to provide authenticated\n * login, the `Logins` map may be set to the tokens provided by the respective\n * identity providers. See {constructor} for an example on creating a credentials\n * object with proper property values.\n *\n * ## Refreshing Credentials from Identity Service\n *\n * In addition to AWS credentials expiring after a given amount of time, the\n * login token from the identity provider will also expire. Once this token\n * expires, it will not be usable to refresh AWS credentials, and another\n * token will be needed. The SDK does not manage refreshing of the token value,\n * but this can be done through a \"refresh token\" supported by most identity\n * providers. Consult the documentation for the identity provider for refreshing\n * tokens. Once the refreshed token is acquired, you should make sure to update\n * this new token in the credentials object's {params} property. The following\n * code will update the WebIdentityToken, assuming you have retrieved an updated\n * token from the identity provider:\n *\n * ```javascript\n * AWS.config.credentials.params.Logins['graph.facebook.com'] = updatedToken;\n * ```\n *\n * Future calls to `credentials.refresh()` will now use the new token.\n *\n * @!attribute params\n *   @return [map] the map of params passed to\n *     {AWS.CognitoIdentity.getId},\n *     {AWS.CognitoIdentity.getOpenIdToken}, and\n *     {AWS.STS.assumeRoleWithWebIdentity}. To update the token, set the\n *     `params.WebIdentityToken` property.\n * @!attribute data\n *   @return [map] the raw data response from the call to\n *     {AWS.CognitoIdentity.getCredentialsForIdentity}, or\n *     {AWS.STS.assumeRoleWithWebIdentity}. Use this if you want to get\n *     access to other properties from the response.\n * @!attribute identityId\n *   @return [String] the Cognito ID returned by the last call to\n *     {AWS.CognitoIdentity.getOpenIdToken}. This ID represents the actual\n *     final resolved identity ID from Amazon Cognito.\n */\nAWS.CognitoIdentityCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * @api private\n   */\n  localStorageKey: {\n    id: 'aws.cognito.identity-id.',\n    providers: 'aws.cognito.identity-providers.'\n  },\n\n  /**\n   * Creates a new credentials object.\n   * @example Creating a new credentials object\n   *   AWS.config.credentials = new AWS.CognitoIdentityCredentials({\n   *\n   *     // either IdentityPoolId or IdentityId is required\n   *     // See the IdentityPoolId param for AWS.CognitoIdentity.getID (linked below)\n   *     // See the IdentityId param for AWS.CognitoIdentity.getCredentialsForIdentity\n   *     // or AWS.CognitoIdentity.getOpenIdToken (linked below)\n   *     IdentityPoolId: 'us-east-1:1699ebc0-7900-4099-b910-2df94f52a030',\n   *     IdentityId: 'us-east-1:128d0a74-c82f-4553-916d-90053e4a8b0f'\n   *\n   *     // optional, only necessary when the identity pool is not configured\n   *     // to use IAM roles in the Amazon Cognito Console\n   *     // See the RoleArn param for AWS.STS.assumeRoleWithWebIdentity (linked below)\n   *     RoleArn: 'arn:aws:iam::1234567890:role/MYAPP-CognitoIdentity',\n   *\n   *     // optional tokens, used for authenticated login\n   *     // See the Logins param for AWS.CognitoIdentity.getID (linked below)\n   *     Logins: {\n   *       'graph.facebook.com': 'FBTOKEN',\n   *       'www.amazon.com': 'AMAZONTOKEN',\n   *       'accounts.google.com': 'GOOGLETOKEN',\n   *       'api.twitter.com': 'TWITTERTOKEN',\n   *       'www.digits.com': 'DIGITSTOKEN'\n   *     },\n   *\n   *     // optional name, defaults to web-identity\n   *     // See the RoleSessionName param for AWS.STS.assumeRoleWithWebIdentity (linked below)\n   *     RoleSessionName: 'web',\n   *\n   *     // optional, only necessary when application runs in a browser\n   *     // and multiple users are signed in at once, used for caching\n   *     LoginId: 'example@gmail.com'\n   *\n   *   }, {\n   *      // optionally provide configuration to apply to the underlying service clients\n   *      // if configuration is not provided, then configuration will be pulled from AWS.config\n   *\n   *      // region should match the region your identity pool is located in\n   *      region: 'us-east-1',\n   *\n   *      // specify timeout options\n   *      httpOptions: {\n   *        timeout: 100\n   *      }\n   *   });\n   * @see AWS.CognitoIdentity.getId\n   * @see AWS.CognitoIdentity.getCredentialsForIdentity\n   * @see AWS.STS.assumeRoleWithWebIdentity\n   * @see AWS.CognitoIdentity.getOpenIdToken\n   * @see AWS.Config\n   * @note If a region is not provided in the global AWS.config, or\n   *   specified in the `clientConfig` to the CognitoIdentityCredentials\n   *   constructor, you may encounter a 'Missing credentials in config' error\n   *   when calling making a service call.\n   */\n  constructor: function CognitoIdentityCredentials(params, clientConfig) {\n    AWS.Credentials.call(this);\n    this.expired = true;\n    this.params = params;\n    this.data = null;\n    this._identityId = null;\n    this._clientConfig = AWS.util.copy(clientConfig || {});\n    this.loadCachedId();\n    var self = this;\n    Object.defineProperty(this, 'identityId', {\n      get: function() {\n        self.loadCachedId();\n        return self._identityId || self.params.IdentityId;\n      },\n      set: function(identityId) {\n        self._identityId = identityId;\n      }\n    });\n  },\n\n  /**\n   * Refreshes credentials using {AWS.CognitoIdentity.getCredentialsForIdentity},\n   * or {AWS.STS.assumeRoleWithWebIdentity}.\n   *\n   * @callback callback function(err)\n   *   Called when the STS service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see AWS.Credentials.get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   * @param callback\n   */\n  load: function load(callback) {\n    var self = this;\n    self.createClients();\n    self.data = null;\n    self._identityId = null;\n    self.getId(function(err) {\n      if (!err) {\n        if (!self.params.RoleArn) {\n          self.getCredentialsForIdentity(callback);\n        } else {\n          self.getCredentialsFromSTS(callback);\n        }\n      } else {\n        self.clearIdOnNotAuthorized(err);\n        callback(err);\n      }\n    });\n  },\n\n  /**\n   * Clears the cached Cognito ID associated with the currently configured\n   * identity pool ID. Use this to manually invalidate your cache if\n   * the identity pool ID was deleted.\n   */\n  clearCachedId: function clearCache() {\n    this._identityId = null;\n    delete this.params.IdentityId;\n\n    var poolId = this.params.IdentityPoolId;\n    var loginId = this.params.LoginId || '';\n    delete this.storage[this.localStorageKey.id + poolId + loginId];\n    delete this.storage[this.localStorageKey.providers + poolId + loginId];\n  },\n\n  /**\n   * @api private\n   */\n  clearIdOnNotAuthorized: function clearIdOnNotAuthorized(err) {\n    var self = this;\n    if (err.code == 'NotAuthorizedException') {\n      self.clearCachedId();\n    }\n  },\n\n  /**\n   * Retrieves a Cognito ID, loading from cache if it was already retrieved\n   * on this device.\n   *\n   * @callback callback function(err, identityId)\n   *   @param err [Error, null] an error object if the call failed or null if\n   *     it succeeded.\n   *   @param identityId [String, null] if successful, the callback will return\n   *     the Cognito ID.\n   * @note If not loaded explicitly, the Cognito ID is loaded and stored in\n   *   localStorage in the browser environment of a device.\n   * @api private\n   */\n  getId: function getId(callback) {\n    var self = this;\n    if (typeof self.params.IdentityId === 'string') {\n      return callback(null, self.params.IdentityId);\n    }\n\n    self.cognito.getId(function(err, data) {\n      if (!err && data.IdentityId) {\n        self.params.IdentityId = data.IdentityId;\n        callback(null, data.IdentityId);\n      } else {\n        callback(err);\n      }\n    });\n  },\n\n\n  /**\n   * @api private\n   */\n  loadCredentials: function loadCredentials(data, credentials) {\n    if (!data || !credentials) return;\n    credentials.expired = false;\n    credentials.accessKeyId = data.Credentials.AccessKeyId;\n    credentials.secretAccessKey = data.Credentials.SecretKey;\n    credentials.sessionToken = data.Credentials.SessionToken;\n    credentials.expireTime = data.Credentials.Expiration;\n  },\n\n  /**\n   * @api private\n   */\n  getCredentialsForIdentity: function getCredentialsForIdentity(callback) {\n    var self = this;\n    self.cognito.getCredentialsForIdentity(function(err, data) {\n      if (!err) {\n        self.cacheId(data);\n        self.data = data;\n        self.loadCredentials(self.data, self);\n      } else {\n        self.clearIdOnNotAuthorized(err);\n      }\n      callback(err);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  getCredentialsFromSTS: function getCredentialsFromSTS(callback) {\n    var self = this;\n    self.cognito.getOpenIdToken(function(err, data) {\n      if (!err) {\n        self.cacheId(data);\n        self.params.WebIdentityToken = data.Token;\n        self.webIdentityCredentials.refresh(function(webErr) {\n          if (!webErr) {\n            self.data = self.webIdentityCredentials.data;\n            self.sts.credentialsFrom(self.data, self);\n          }\n          callback(webErr);\n        });\n      } else {\n        self.clearIdOnNotAuthorized(err);\n        callback(err);\n      }\n    });\n  },\n\n  /**\n   * @api private\n   */\n  loadCachedId: function loadCachedId() {\n    var self = this;\n\n    // in the browser we source default IdentityId from localStorage\n    if (AWS.util.isBrowser() && !self.params.IdentityId) {\n      var id = self.getStorage('id');\n      if (id && self.params.Logins) {\n        var actualProviders = Object.keys(self.params.Logins);\n        var cachedProviders =\n          (self.getStorage('providers') || '').split(',');\n\n        // only load ID if at least one provider used this ID before\n        var intersect = cachedProviders.filter(function(n) {\n          return actualProviders.indexOf(n) !== -1;\n        });\n        if (intersect.length !== 0) {\n          self.params.IdentityId = id;\n        }\n      } else if (id) {\n        self.params.IdentityId = id;\n      }\n    }\n  },\n\n  /**\n   * @api private\n   */\n  createClients: function() {\n    var clientConfig = this._clientConfig;\n    this.webIdentityCredentials = this.webIdentityCredentials ||\n      new AWS.WebIdentityCredentials(this.params, clientConfig);\n    if (!this.cognito) {\n      var cognitoConfig = AWS.util.merge({}, clientConfig);\n      cognitoConfig.params = this.params;\n      this.cognito = new CognitoIdentity(cognitoConfig);\n    }\n    this.sts = this.sts || new STS(clientConfig);\n  },\n\n  /**\n   * @api private\n   */\n  cacheId: function cacheId(data) {\n    this._identityId = data.IdentityId;\n    this.params.IdentityId = this._identityId;\n\n    // cache this IdentityId in browser localStorage if possible\n    if (AWS.util.isBrowser()) {\n      this.setStorage('id', data.IdentityId);\n\n      if (this.params.Logins) {\n        this.setStorage('providers', Object.keys(this.params.Logins).join(','));\n      }\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getStorage: function getStorage(key) {\n    return this.storage[this.localStorageKey[key] + this.params.IdentityPoolId + (this.params.LoginId || '')];\n  },\n\n  /**\n   * @api private\n   */\n  setStorage: function setStorage(key, val) {\n    try {\n      this.storage[this.localStorageKey[key] + this.params.IdentityPoolId + (this.params.LoginId || '')] = val;\n    } catch (_) {}\n  },\n\n  /**\n   * @api private\n   */\n  storage: (function() {\n    try {\n      var storage = AWS.util.isBrowser() && window.localStorage !== null && typeof window.localStorage === 'object' ?\n          window.localStorage : {};\n\n      // Test set/remove which would throw an error in Safari's private browsing\n      storage['aws.test-storage'] = 'foobar';\n      delete storage['aws.test-storage'];\n\n      return storage;\n    } catch (_) {\n      return {};\n    }\n  })()\n});\n","var AWS = require('../core');\n\n/**\n * Creates a credential provider chain that searches for AWS credentials\n * in a list of credential providers specified by the {providers} property.\n *\n * By default, the chain will use the {defaultProviders} to resolve credentials.\n * These providers will look in the environment using the\n * {AWS.EnvironmentCredentials} class with the 'AWS' and 'AMAZON' prefixes.\n *\n * ## Setting Providers\n *\n * Each provider in the {providers} list should be a function that returns\n * a {AWS.Credentials} object, or a hardcoded credentials object. The function\n * form allows for delayed execution of the credential construction.\n *\n * ## Resolving Credentials from a Chain\n *\n * Call {resolve} to return the first valid credential object that can be\n * loaded by the provider chain.\n *\n * For example, to resolve a chain with a custom provider that checks a file\n * on disk after the set of {defaultProviders}:\n *\n * ```javascript\n * var diskProvider = new AWS.FileSystemCredentials('./creds.json');\n * var chain = new AWS.CredentialProviderChain();\n * chain.providers.push(diskProvider);\n * chain.resolve();\n * ```\n *\n * The above code will return the `diskProvider` object if the\n * file contains credentials and the `defaultProviders` do not contain\n * any credential settings.\n *\n * @!attribute providers\n *   @return [Array<AWS.Credentials, Function>]\n *     a list of credentials objects or functions that return credentials\n *     objects. If the provider is a function, the function will be\n *     executed lazily when the provider needs to be checked for valid\n *     credentials. By default, this object will be set to the\n *     {defaultProviders}.\n *   @see defaultProviders\n */\nAWS.CredentialProviderChain = AWS.util.inherit(AWS.Credentials, {\n\n  /**\n   * Creates a new CredentialProviderChain with a default set of providers\n   * specified by {defaultProviders}.\n   */\n  constructor: function CredentialProviderChain(providers) {\n    if (providers) {\n      this.providers = providers;\n    } else {\n      this.providers = AWS.CredentialProviderChain.defaultProviders.slice(0);\n    }\n    this.resolveCallbacks = [];\n  },\n\n  /**\n   * @!method  resolvePromise()\n   *   Returns a 'thenable' promise.\n   *   Resolves the provider chain by searching for the first set of\n   *   credentials in {providers}.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @callback fulfilledCallback function(credentials)\n   *     Called if the promise is fulfilled and the provider resolves the chain\n   *     to a credentials object\n   *     @param credentials [AWS.Credentials] the credentials object resolved\n   *       by the provider chain.\n   *   @callback rejectedCallback function(error)\n   *     Called if the promise is rejected.\n   *     @param err [Error] the error object returned if no credentials are found.\n   *   @return [Promise] A promise that represents the state of the `resolve` method call.\n   *   @example Calling the `resolvePromise` method.\n   *     var promise = chain.resolvePromise();\n   *     promise.then(function(credentials) { ... }, function(err) { ... });\n   */\n\n  /**\n   * Resolves the provider chain by searching for the first set of\n   * credentials in {providers}.\n   *\n   * @callback callback function(err, credentials)\n   *   Called when the provider resolves the chain to a credentials object\n   *   or null if no credentials can be found.\n   *\n   *   @param err [Error] the error object returned if no credentials are\n   *     found.\n   *   @param credentials [AWS.Credentials] the credentials object resolved\n   *     by the provider chain.\n   * @return [AWS.CredentialProviderChain] the provider, for chaining.\n   */\n  resolve: function resolve(callback) {\n    var self = this;\n    if (self.providers.length === 0) {\n      callback(new Error('No providers'));\n      return self;\n    }\n\n    if (self.resolveCallbacks.push(callback) === 1) {\n      var index = 0;\n      var providers = self.providers.slice(0);\n\n      function resolveNext(err, creds) {\n        if ((!err && creds) || index === providers.length) {\n          AWS.util.arrayEach(self.resolveCallbacks, function (callback) {\n            callback(err, creds);\n          });\n          self.resolveCallbacks.length = 0;\n          return;\n        }\n\n        var provider = providers[index++];\n        if (typeof provider === 'function') {\n          creds = provider.call();\n        } else {\n          creds = provider;\n        }\n\n        if (creds.get) {\n          creds.get(function (getErr) {\n            resolveNext(getErr, getErr ? null : creds);\n          });\n        } else {\n          resolveNext(null, creds);\n        }\n      }\n\n      resolveNext();\n    }\n\n    return self;\n  }\n});\n\n/**\n * The default set of providers used by a vanilla CredentialProviderChain.\n *\n * In the browser:\n *\n * ```javascript\n * AWS.CredentialProviderChain.defaultProviders = []\n * ```\n *\n * In Node.js:\n *\n * ```javascript\n * AWS.CredentialProviderChain.defaultProviders = [\n *   function () { return new AWS.EnvironmentCredentials('AWS'); },\n *   function () { return new AWS.EnvironmentCredentials('AMAZON'); },\n *   function () { return new AWS.SharedIniFileCredentials(); },\n *   function () { return new AWS.ECSCredentials(); },\n *   function () { return new AWS.ProcessCredentials(); },\n *   function () { return new AWS.TokenFileWebIdentityCredentials(); },\n *   function () { return new AWS.EC2MetadataCredentials() }\n * ]\n * ```\n */\nAWS.CredentialProviderChain.defaultProviders = [];\n\n/**\n * @api private\n */\nAWS.CredentialProviderChain.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n  this.prototype.resolvePromise = AWS.util.promisifyMethod('resolve', PromiseDependency);\n};\n\n/**\n * @api private\n */\nAWS.CredentialProviderChain.deletePromisesFromClass = function deletePromisesFromClass() {\n  delete this.prototype.resolvePromise;\n};\n\nAWS.util.addPromises(AWS.CredentialProviderChain);\n","var AWS = require('../core');\nrequire('../metadata_service');\n\n/**\n * Represents credentials received from the metadata service on an EC2 instance.\n *\n * By default, this class will connect to the metadata service using\n * {AWS.MetadataService} and attempt to load any available credentials. If it\n * can connect, and credentials are available, these will be used with zero\n * configuration.\n *\n * This credentials class will by default timeout after 1 second of inactivity\n * and retry 3 times.\n * If your requests to the EC2 metadata service are timing out, you can increase\n * these values by configuring them directly:\n *\n * ```javascript\n * AWS.config.credentials = new AWS.EC2MetadataCredentials({\n *   httpOptions: { timeout: 5000 }, // 5 second timeout\n *   maxRetries: 10, // retry 10 times\n *   retryDelayOptions: { base: 200 } // see AWS.Config for information\n * });\n *\n * If your requests are timing out in connecting to the metadata service, such\n * as when testing on a development machine, you can use the connectTimeout\n * option, specified in milliseconds, which also defaults to 1 second.\n * ```\n *\n * @see AWS.Config.retryDelayOptions\n *\n * @!macro nobrowser\n */\nAWS.EC2MetadataCredentials = AWS.util.inherit(AWS.Credentials, {\n  constructor: function EC2MetadataCredentials(options) {\n    AWS.Credentials.call(this);\n\n    options = options ? AWS.util.copy(options) : {};\n    options = AWS.util.merge(\n      {maxRetries: this.defaultMaxRetries}, options);\n    if (!options.httpOptions) options.httpOptions = {};\n    options.httpOptions = AWS.util.merge(\n      {timeout: this.defaultTimeout,\n        connectTimeout: this.defaultConnectTimeout},\n       options.httpOptions);\n\n    this.metadataService = new AWS.MetadataService(options);\n    this.metadata = {};\n  },\n\n  /**\n   * @api private\n   */\n  defaultTimeout: 1000,\n\n   /**\n   * @api private\n   */\n  defaultConnectTimeout: 1000,\n\n  /**\n   * @api private\n   */\n  defaultMaxRetries: 3,\n\n  /**\n   * Loads the credentials from the instance metadata service\n   *\n   * @callback callback function(err)\n   *   Called when the instance metadata service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   * @param callback\n   */\n  load: function load(callback) {\n    var self = this;\n    self.metadataService.loadCredentials(function(err, creds) {\n      if (!err) {\n        var currentTime = AWS.util.date.getDate();\n        var expireTime = new Date(creds.Expiration);\n        if (expireTime < currentTime) {\n          err = AWS.util.error(\n            new Error('EC2 Instance Metadata Serivce provided expired credentials'),\n            { code: 'EC2MetadataCredentialsProviderFailure' }\n          );\n        } else {\n          self.expired = false;\n          self.metadata = creds;\n          self.accessKeyId = creds.AccessKeyId;\n          self.secretAccessKey = creds.SecretAccessKey;\n          self.sessionToken = creds.Token;\n          self.expireTime = expireTime;\n        }\n      }\n      callback(err);\n    });\n  }\n});\n","var AWS = require('../core');\n\n/**\n * Represents credentials received from relative URI specified in the ECS container.\n *\n * This class will request refreshable credentials from the relative URI\n * specified by the AWS_CONTAINER_CREDENTIALS_RELATIVE_URI or the\n * AWS_CONTAINER_CREDENTIALS_FULL_URI environment variable. If valid credentials\n * are returned in the response, these will be used with zero configuration.\n *\n * This credentials class will by default timeout after 1 second of inactivity\n * and retry 3 times.\n * If your requests to the relative URI are timing out, you can increase\n * the value by configuring them directly:\n *\n * ```javascript\n * AWS.config.credentials = new AWS.ECSCredentials({\n *   httpOptions: { timeout: 5000 }, // 5 second timeout\n *   maxRetries: 10, // retry 10 times\n *   retryDelayOptions: { base: 200 } // see AWS.Config for information\n * });\n * ```\n *\n * @see AWS.Config.retryDelayOptions\n *\n * @!macro nobrowser\n */\nAWS.ECSCredentials = AWS.RemoteCredentials;\n","var AWS = require('../core');\n\n/**\n * Represents credentials from the environment.\n *\n * By default, this class will look for the matching environment variables\n * prefixed by a given {envPrefix}. The un-prefixed environment variable names\n * for each credential value is listed below:\n *\n * ```javascript\n * accessKeyId: ACCESS_KEY_ID\n * secretAccessKey: SECRET_ACCESS_KEY\n * sessionToken: SESSION_TOKEN\n * ```\n *\n * With the default prefix of 'AWS', the environment variables would be:\n *\n *     AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY, AWS_SESSION_TOKEN\n *\n * @!attribute envPrefix\n *   @readonly\n *   @return [String] the prefix for the environment variable names excluding\n *     the separating underscore ('_').\n */\nAWS.EnvironmentCredentials = AWS.util.inherit(AWS.Credentials, {\n\n  /**\n   * Creates a new EnvironmentCredentials class with a given variable\n   * prefix {envPrefix}. For example, to load credentials using the 'AWS'\n   * prefix:\n   *\n   * ```javascript\n   * var creds = new AWS.EnvironmentCredentials('AWS');\n   * creds.accessKeyId == 'AKID' // from AWS_ACCESS_KEY_ID env var\n   * ```\n   *\n   * @param envPrefix [String] the prefix to use (e.g., 'AWS') for environment\n   *   variables. Do not include the separating underscore.\n   */\n  constructor: function EnvironmentCredentials(envPrefix) {\n    AWS.Credentials.call(this);\n    this.envPrefix = envPrefix;\n    this.get(function() {});\n  },\n\n  /**\n   * Loads credentials from the environment using the prefixed\n   * environment variables.\n   *\n   * @callback callback function(err)\n   *   Called after the (prefixed) ACCESS_KEY_ID, SECRET_ACCESS_KEY, and\n   *   SESSION_TOKEN environment variables are read. When this callback is\n   *   called with no error, it means that the credentials information has\n   *   been loaded into the object (as the `accessKeyId`, `secretAccessKey`,\n   *   and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    if (!callback) callback = AWS.util.fn.callback;\n\n    if (!process || !process.env) {\n      callback(AWS.util.error(\n        new Error('No process info or environment variables available'),\n        { code: 'EnvironmentCredentialsProviderFailure' }\n      ));\n      return;\n    }\n\n    var keys = ['ACCESS_KEY_ID', 'SECRET_ACCESS_KEY', 'SESSION_TOKEN'];\n    var values = [];\n\n    for (var i = 0; i < keys.length; i++) {\n      var prefix = '';\n      if (this.envPrefix) prefix = this.envPrefix + '_';\n      values[i] = process.env[prefix + keys[i]];\n      if (!values[i] && keys[i] !== 'SESSION_TOKEN') {\n        callback(AWS.util.error(\n          new Error('Variable ' + prefix + keys[i] + ' not set.'),\n        { code: 'EnvironmentCredentialsProviderFailure' }\n        ));\n        return;\n      }\n    }\n\n    this.expired = false;\n    AWS.Credentials.apply(this, values);\n    callback();\n  }\n\n});\n","var AWS = require('../core');\n\n/**\n * Represents credentials from a JSON file on disk.\n * If the credentials expire, the SDK can {refresh} the credentials\n * from the file.\n *\n * The format of the file should be similar to the options passed to\n * {AWS.Config}:\n *\n * ```javascript\n * {accessKeyId: 'akid', secretAccessKey: 'secret', sessionToken: 'optional'}\n * ```\n *\n * @example Loading credentials from disk\n *   var creds = new AWS.FileSystemCredentials('./configuration.json');\n *   creds.accessKeyId == 'AKID'\n *\n * @!attribute filename\n *   @readonly\n *   @return [String] the path to the JSON file on disk containing the\n *     credentials.\n * @!macro nobrowser\n */\nAWS.FileSystemCredentials = AWS.util.inherit(AWS.Credentials, {\n\n  /**\n   * @overload AWS.FileSystemCredentials(filename)\n   *   Creates a new FileSystemCredentials object from a filename\n   *\n   *   @param filename [String] the path on disk to the JSON file to load.\n   */\n  constructor: function FileSystemCredentials(filename) {\n    AWS.Credentials.call(this);\n    this.filename = filename;\n    this.get(function() {});\n  },\n\n  /**\n   * Loads the credentials from the {filename} on disk.\n   *\n   * @callback callback function(err)\n   *   Called after the JSON file on disk is read and parsed. When this callback\n   *   is called with no error, it means that the credentials information\n   *   has been loaded into the object (as the `accessKeyId`, `secretAccessKey`,\n   *   and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    if (!callback) callback = AWS.util.fn.callback;\n    try {\n      var creds = JSON.parse(AWS.util.readFileSync(this.filename));\n      AWS.Credentials.call(this, creds);\n      if (!this.accessKeyId || !this.secretAccessKey) {\n        throw AWS.util.error(\n          new Error('Credentials not set in ' + this.filename),\n        { code: 'FileSystemCredentialsProviderFailure' }\n        );\n      }\n      this.expired = false;\n      callback();\n    } catch (err) {\n      callback(err);\n    }\n  }\n\n});\n","var AWS = require('../core');\nvar proc = require('child_process');\nvar iniLoader = AWS.util.iniLoader;\n\n/**\n * Represents credentials loaded from shared credentials file\n * (defaulting to ~/.aws/credentials or defined by the\n * `AWS_SHARED_CREDENTIALS_FILE` environment variable).\n *\n * ## Using process credentials\n *\n * The credentials file can specify a credential provider that executes\n * a given process and attempts to read its stdout to recieve a JSON payload\n * containing the credentials:\n *\n *     [default]\n *     credential_process = /usr/bin/credential_proc\n *\n * Automatically handles refreshing credentials if an Expiration time is\n * provided in the credentials payload. Credentials supplied in the same profile\n * will take precedence over the credential_process.\n *\n * Sourcing credentials from an external process can potentially be dangerous,\n * so proceed with caution. Other credential providers should be preferred if\n * at all possible. If using this option, you should make sure that the shared\n * credentials file is as locked down as possible using security best practices\n * for your operating system.\n *\n * ## Using custom profiles\n *\n * The SDK supports loading credentials for separate profiles. This can be done\n * in two ways:\n *\n * 1. Set the `AWS_PROFILE` environment variable in your process prior to\n *    loading the SDK.\n * 2. Directly load the AWS.ProcessCredentials provider:\n *\n * ```javascript\n * var creds = new AWS.ProcessCredentials({profile: 'myprofile'});\n * AWS.config.credentials = creds;\n * ```\n *\n * @!macro nobrowser\n */\nAWS.ProcessCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * Creates a new ProcessCredentials object.\n   *\n   * @param options [map] a set of options\n   * @option options profile [String] (AWS_PROFILE env var or 'default')\n   *   the name of the profile to load.\n   * @option options filename [String] ('~/.aws/credentials' or defined by\n   *   AWS_SHARED_CREDENTIALS_FILE process env var)\n   *   the filename to use when loading credentials.\n   * @option options callback [Function] (err) Credentials are eagerly loaded\n   *   by the constructor. When the callback is called with no error, the\n   *   credentials have been loaded successfully.\n   */\n  constructor: function ProcessCredentials(options) {\n    AWS.Credentials.call(this);\n\n    options = options || {};\n\n    this.filename = options.filename;\n    this.profile = options.profile || process.env.AWS_PROFILE || AWS.util.defaultProfile;\n    this.get(options.callback || AWS.util.fn.noop);\n  },\n\n  /**\n   * @api private\n   */\n  load: function load(callback) {\n    var self = this;\n    try {\n      var profiles = AWS.util.getProfilesFromSharedConfig(iniLoader, this.filename);\n      var profile = profiles[this.profile] || {};\n\n      if (Object.keys(profile).length === 0) {\n        throw AWS.util.error(\n          new Error('Profile ' + this.profile + ' not found'),\n          { code: 'ProcessCredentialsProviderFailure' }\n        );\n      }\n\n      if (profile['credential_process']) {\n        this.loadViaCredentialProcess(profile, function(err, data) {\n          if (err) {\n            callback(err, null);\n          } else {\n            self.expired = false;\n            self.accessKeyId = data.AccessKeyId;\n            self.secretAccessKey = data.SecretAccessKey;\n            self.sessionToken = data.SessionToken;\n            if (data.Expiration) {\n              self.expireTime = new Date(data.Expiration);\n            }\n            callback(null);\n          }\n        });\n      } else {\n        throw AWS.util.error(\n          new Error('Profile ' + this.profile + ' did not include credential process'),\n          { code: 'ProcessCredentialsProviderFailure' }\n        );\n      }\n    } catch (err) {\n      callback(err);\n    }\n  },\n\n  /**\n  * Executes the credential_process and retrieves\n  * credentials from the output\n  * @api private\n  * @param profile [map] credentials profile\n  * @throws ProcessCredentialsProviderFailure\n  */\n  loadViaCredentialProcess: function loadViaCredentialProcess(profile, callback) {\n    proc.exec(profile['credential_process'], function(err, stdOut, stdErr) {\n      if (err) {\n        callback(AWS.util.error(\n          new Error('credential_process returned error'),\n          { code: 'ProcessCredentialsProviderFailure'}\n        ), null);\n      } else {\n        try {\n          var credData = JSON.parse(stdOut);\n          if (credData.Expiration) {\n            var currentTime = AWS.util.date.getDate();\n            var expireTime = new Date(credData.Expiration);\n            if (expireTime < currentTime) {\n              throw Error('credential_process returned expired credentials');\n            }\n          }\n\n          if (credData.Version !== 1) {\n            throw Error('credential_process does not return Version == 1');\n          }\n          callback(null, credData);\n        } catch (err) {\n          callback(AWS.util.error(\n            new Error(err.message),\n            { code: 'ProcessCredentialsProviderFailure'}\n          ), null);\n        }\n      }\n    });\n  },\n\n  /**\n   * Loads the credentials from the credential process\n   *\n   * @callback callback function(err)\n   *   Called after the credential process has been executed. When this\n   *   callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    iniLoader.clearCachedFiles();\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  }\n});\n","var AWS = require('../core'),\n  ENV_RELATIVE_URI = 'AWS_CONTAINER_CREDENTIALS_RELATIVE_URI',\n  ENV_FULL_URI = 'AWS_CONTAINER_CREDENTIALS_FULL_URI',\n  ENV_AUTH_TOKEN = 'AWS_CONTAINER_AUTHORIZATION_TOKEN',\n  FULL_URI_UNRESTRICTED_PROTOCOLS = ['https:'],\n  FULL_URI_ALLOWED_PROTOCOLS = ['http:', 'https:'],\n  FULL_URI_ALLOWED_HOSTNAMES = ['localhost', '127.0.0.1'],\n  RELATIVE_URI_HOST = '169.254.170.2';\n\n/**\n * Represents credentials received from specified URI.\n *\n * This class will request refreshable credentials from the relative URI\n * specified by the AWS_CONTAINER_CREDENTIALS_RELATIVE_URI or the\n * AWS_CONTAINER_CREDENTIALS_FULL_URI environment variable. If valid credentials\n * are returned in the response, these will be used with zero configuration.\n *\n * This credentials class will by default timeout after 1 second of inactivity\n * and retry 3 times.\n * If your requests to the relative URI are timing out, you can increase\n * the value by configuring them directly:\n *\n * ```javascript\n * AWS.config.credentials = new AWS.RemoteCredentials({\n *   httpOptions: { timeout: 5000 }, // 5 second timeout\n *   maxRetries: 10, // retry 10 times\n *   retryDelayOptions: { base: 200 } // see AWS.Config for information\n * });\n * ```\n *\n * @see AWS.Config.retryDelayOptions\n *\n * @!macro nobrowser\n */\nAWS.RemoteCredentials = AWS.util.inherit(AWS.Credentials, {\n  constructor: function RemoteCredentials(options) {\n    AWS.Credentials.call(this);\n    options = options ? AWS.util.copy(options) : {};\n    if (!options.httpOptions) options.httpOptions = {};\n    options.httpOptions = AWS.util.merge(\n      this.httpOptions, options.httpOptions);\n    AWS.util.update(this, options);\n  },\n\n  /**\n   * @api private\n   */\n  httpOptions: { timeout: 1000 },\n\n  /**\n   * @api private\n   */\n  maxRetries: 3,\n\n  /**\n   * @api private\n   */\n  isConfiguredForEcsCredentials: function isConfiguredForEcsCredentials() {\n    return Boolean(\n        process &&\n        process.env &&\n        (process.env[ENV_RELATIVE_URI] || process.env[ENV_FULL_URI])\n    );\n  },\n\n  /**\n   * @api private\n   */\n  getECSFullUri: function getECSFullUri() {\n    if (process && process.env) {\n      var relative = process.env[ENV_RELATIVE_URI],\n          full = process.env[ENV_FULL_URI];\n      if (relative) {\n        return 'http://' + RELATIVE_URI_HOST + relative;\n      } else if (full) {\n        var parsed = AWS.util.urlParse(full);\n        if (FULL_URI_ALLOWED_PROTOCOLS.indexOf(parsed.protocol) < 0) {\n          throw AWS.util.error(\n            new Error('Unsupported protocol:  AWS.RemoteCredentials supports '\n              + FULL_URI_ALLOWED_PROTOCOLS.join(',') + ' only; '\n              + parsed.protocol + ' requested.'),\n            { code: 'ECSCredentialsProviderFailure' }\n          );\n        }\n\n        if (FULL_URI_UNRESTRICTED_PROTOCOLS.indexOf(parsed.protocol) < 0 &&\n            FULL_URI_ALLOWED_HOSTNAMES.indexOf(parsed.hostname) < 0) {\n          throw AWS.util.error(\n            new Error('Unsupported hostname: AWS.RemoteCredentials only supports '\n              + FULL_URI_ALLOWED_HOSTNAMES.join(',') + ' for ' + parsed.protocol + '; '\n              + parsed.protocol + '//' + parsed.hostname + ' requested.'),\n            { code: 'ECSCredentialsProviderFailure' }\n          );\n        }\n\n        return full;\n      } else {\n        throw AWS.util.error(\n          new Error('Variable ' + ENV_RELATIVE_URI + ' or ' + ENV_FULL_URI +\n            ' must be set to use AWS.RemoteCredentials.'),\n          { code: 'ECSCredentialsProviderFailure' }\n        );\n      }\n    } else {\n      throw AWS.util.error(\n        new Error('No process info available'),\n        { code: 'ECSCredentialsProviderFailure' }\n      );\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getECSAuthToken: function getECSAuthToken() {\n    if (process && process.env && process.env[ENV_FULL_URI]) {\n      return process.env[ENV_AUTH_TOKEN];\n    }\n  },\n\n  /**\n   * @api private\n   */\n  credsFormatIsValid: function credsFormatIsValid(credData) {\n    return (!!credData.accessKeyId && !!credData.secretAccessKey &&\n      !!credData.sessionToken && !!credData.expireTime);\n  },\n\n  /**\n   * @api private\n   */\n  formatCreds: function formatCreds(credData) {\n    if (!!credData.credentials) {\n      credData = credData.credentials;\n    }\n\n    return {\n      expired: false,\n      accessKeyId: credData.accessKeyId || credData.AccessKeyId,\n      secretAccessKey: credData.secretAccessKey || credData.SecretAccessKey,\n      sessionToken: credData.sessionToken || credData.Token,\n      expireTime: new Date(credData.expiration || credData.Expiration)\n    };\n  },\n\n  /**\n   * @api private\n   */\n  request: function request(url, callback) {\n    var httpRequest = new AWS.HttpRequest(url);\n    httpRequest.method = 'GET';\n    httpRequest.headers.Accept = 'application/json';\n    var token = this.getECSAuthToken();\n    if (token) {\n      httpRequest.headers.Authorization = token;\n    }\n    AWS.util.handleRequestWithRetries(httpRequest, this, callback);\n  },\n\n  /**\n   * Loads the credentials from the relative URI specified by container\n   *\n   * @callback callback function(err)\n   *   Called when the request to the relative URI responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, `sessionToken`, and `expireTime` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   */\n  load: function load(callback) {\n    var self = this;\n    var fullUri;\n\n    try {\n      fullUri = this.getECSFullUri();\n    } catch (err) {\n      callback(err);\n      return;\n    }\n\n    this.request(fullUri, function(err, data) {\n      if (!err) {\n        try {\n          data = JSON.parse(data);\n          var creds = self.formatCreds(data);\n          if (!self.credsFormatIsValid(creds)) {\n            throw AWS.util.error(\n              new Error('Response data is not in valid format'),\n              { code: 'ECSCredentialsProviderFailure' }\n            );\n          }\n          AWS.util.update(self, creds);\n        } catch (dataError) {\n          err = dataError;\n        }\n      }\n      callback(err, creds);\n    });\n  }\n});\n","var AWS = require('../core');\nvar STS = require('../../clients/sts');\n\n/**\n * Represents credentials retrieved from STS SAML support.\n *\n * By default this provider gets credentials using the\n * {AWS.STS.assumeRoleWithSAML} service operation. This operation\n * requires a `RoleArn` containing the ARN of the IAM trust policy for the\n * application for which credentials will be given, as well as a `PrincipalArn`\n * representing the ARN for the SAML identity provider. In addition, the\n * `SAMLAssertion` must be set to the token provided by the identity\n * provider. See {constructor} for an example on creating a credentials\n * object with proper `RoleArn`, `PrincipalArn`, and `SAMLAssertion` values.\n *\n * ## Refreshing Credentials from Identity Service\n *\n * In addition to AWS credentials expiring after a given amount of time, the\n * login token from the identity provider will also expire. Once this token\n * expires, it will not be usable to refresh AWS credentials, and another\n * token will be needed. The SDK does not manage refreshing of the token value,\n * but this can be done through a \"refresh token\" supported by most identity\n * providers. Consult the documentation for the identity provider for refreshing\n * tokens. Once the refreshed token is acquired, you should make sure to update\n * this new token in the credentials object's {params} property. The following\n * code will update the SAMLAssertion, assuming you have retrieved an updated\n * token from the identity provider:\n *\n * ```javascript\n * AWS.config.credentials.params.SAMLAssertion = updatedToken;\n * ```\n *\n * Future calls to `credentials.refresh()` will now use the new token.\n *\n * @!attribute params\n *   @return [map] the map of params passed to\n *     {AWS.STS.assumeRoleWithSAML}. To update the token, set the\n *     `params.SAMLAssertion` property.\n */\nAWS.SAMLCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * Creates a new credentials object.\n   * @param (see AWS.STS.assumeRoleWithSAML)\n   * @example Creating a new credentials object\n   *   AWS.config.credentials = new AWS.SAMLCredentials({\n   *     RoleArn: 'arn:aws:iam::1234567890:role/SAMLRole',\n   *     PrincipalArn: 'arn:aws:iam::1234567890:role/SAMLPrincipal',\n   *     SAMLAssertion: 'base64-token', // base64-encoded token from IdP\n   *   });\n   * @see AWS.STS.assumeRoleWithSAML\n   */\n  constructor: function SAMLCredentials(params) {\n    AWS.Credentials.call(this);\n    this.expired = true;\n    this.params = params;\n  },\n\n  /**\n   * Refreshes credentials using {AWS.STS.assumeRoleWithSAML}\n   *\n   * @callback callback function(err)\n   *   Called when the STS service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   */\n  load: function load(callback) {\n    var self = this;\n    self.createClients();\n    self.service.assumeRoleWithSAML(function (err, data) {\n      if (!err) {\n        self.service.credentialsFrom(data, self);\n      }\n      callback(err);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  createClients: function() {\n    this.service = this.service || new STS({params: this.params});\n  }\n\n});\n","var AWS = require('../core');\nvar STS = require('../../clients/sts');\nvar iniLoader = AWS.util.iniLoader;\n\nvar ASSUME_ROLE_DEFAULT_REGION = 'us-east-1';\n\n/**\n * Represents credentials loaded from shared credentials file\n * (defaulting to ~/.aws/credentials or defined by the\n * `AWS_SHARED_CREDENTIALS_FILE` environment variable).\n *\n * ## Using the shared credentials file\n *\n * This provider is checked by default in the Node.js environment. To use the\n * credentials file provider, simply add your access and secret keys to the\n * ~/.aws/credentials file in the following format:\n *\n *     [default]\n *     aws_access_key_id = AKID...\n *     aws_secret_access_key = YOUR_SECRET_KEY\n *\n * ## Using custom profiles\n *\n * The SDK supports loading credentials for separate profiles. This can be done\n * in two ways:\n *\n * 1. Set the `AWS_PROFILE` environment variable in your process prior to\n *    loading the SDK.\n * 2. Directly load the AWS.SharedIniFileCredentials provider:\n *\n * ```javascript\n * var creds = new AWS.SharedIniFileCredentials({profile: 'myprofile'});\n * AWS.config.credentials = creds;\n * ```\n *\n * @!macro nobrowser\n */\nAWS.SharedIniFileCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * Creates a new SharedIniFileCredentials object.\n   *\n   * @param options [map] a set of options\n   * @option options profile [String] (AWS_PROFILE env var or 'default')\n   *   the name of the profile to load.\n   * @option options filename [String] ('~/.aws/credentials' or defined by\n   *   AWS_SHARED_CREDENTIALS_FILE process env var)\n   *   the filename to use when loading credentials.\n   * @option options disableAssumeRole [Boolean] (false) True to disable\n   *   support for profiles that assume an IAM role. If true, and an assume\n   *   role profile is selected, an error is raised.\n   * @option options preferStaticCredentials [Boolean] (false) True to\n   *   prefer static credentials to role_arn if both are present.\n   * @option options tokenCodeFn [Function] (null) Function to provide\n   *   STS Assume Role TokenCode, if mfa_serial is provided for profile in ini\n   *   file. Function is called with value of mfa_serial and callback, and\n   *   should provide the TokenCode or an error to the callback in the format\n   *   callback(err, token)\n   * @option options callback [Function] (err) Credentials are eagerly loaded\n   *   by the constructor. When the callback is called with no error, the\n   *   credentials have been loaded successfully.\n   * @option options httpOptions [map] A set of options to pass to the low-level\n   *   HTTP request. Currently supported options are:\n   *   * **proxy** [String] &mdash; the URL to proxy requests through\n   *   * **agent** [http.Agent, https.Agent] &mdash; the Agent object to perform\n   *     HTTP requests with. Used for connection pooling. Defaults to the global\n   *     agent (`http.globalAgent`) for non-SSL connections. Note that for\n   *     SSL connections, a special Agent object is used in order to enable\n   *     peer certificate verification. This feature is only available in the\n   *     Node.js environment.\n   *   * **connectTimeout** [Integer] &mdash; Sets the socket to timeout after\n   *     failing to establish a connection with the server after\n   *     `connectTimeout` milliseconds. This timeout has no effect once a socket\n   *     connection has been established.\n   *   * **timeout** [Integer] &mdash; The number of milliseconds a request can\n   *     take before automatically being terminated.\n   *     Defaults to two minutes (120000).\n   */\n  constructor: function SharedIniFileCredentials(options) {\n    AWS.Credentials.call(this);\n\n    options = options || {};\n\n    this.filename = options.filename;\n    this.profile = options.profile || process.env.AWS_PROFILE || AWS.util.defaultProfile;\n    this.disableAssumeRole = Boolean(options.disableAssumeRole);\n    this.preferStaticCredentials = Boolean(options.preferStaticCredentials);\n    this.tokenCodeFn = options.tokenCodeFn || null;\n    this.httpOptions = options.httpOptions || null;\n    this.get(options.callback || AWS.util.fn.noop);\n  },\n\n  /**\n   * @api private\n   */\n  load: function load(callback) {\n    var self = this;\n    try {\n      var profiles = AWS.util.getProfilesFromSharedConfig(iniLoader, this.filename);\n      var profile = profiles[this.profile] || {};\n\n      if (Object.keys(profile).length === 0) {\n        throw AWS.util.error(\n          new Error('Profile ' + this.profile + ' not found'),\n          { code: 'SharedIniFileCredentialsProviderFailure' }\n        );\n      }\n\n      /*\n      In the CLI, the presence of both a role_arn and static credentials have\n      different meanings depending on how many profiles have been visited. For\n      the first profile processed, role_arn takes precedence over any static\n      credentials, but for all subsequent profiles, static credentials are\n      used if present, and only in their absence will the profile's\n      source_profile and role_arn keys be used to load another set of\n      credentials. This var is intended to yield compatible behaviour in this\n      sdk.\n      */\n      var preferStaticCredentialsToRoleArn = Boolean(\n        this.preferStaticCredentials\n        && profile['aws_access_key_id']\n        && profile['aws_secret_access_key']\n      );\n\n      if (profile['role_arn'] && !preferStaticCredentialsToRoleArn) {\n        this.loadRoleProfile(profiles, profile, function(err, data) {\n          if (err) {\n            callback(err);\n          } else {\n            self.expired = false;\n            self.accessKeyId = data.Credentials.AccessKeyId;\n            self.secretAccessKey = data.Credentials.SecretAccessKey;\n            self.sessionToken = data.Credentials.SessionToken;\n            self.expireTime = data.Credentials.Expiration;\n            callback(null);\n          }\n        });\n        return;\n      }\n\n      this.accessKeyId = profile['aws_access_key_id'];\n      this.secretAccessKey = profile['aws_secret_access_key'];\n      this.sessionToken = profile['aws_session_token'];\n\n      if (!this.accessKeyId || !this.secretAccessKey) {\n        throw AWS.util.error(\n          new Error('Credentials not set for profile ' + this.profile),\n          { code: 'SharedIniFileCredentialsProviderFailure' }\n        );\n      }\n      this.expired = false;\n      callback(null);\n    } catch (err) {\n      callback(err);\n    }\n  },\n\n  /**\n   * Loads the credentials from the shared credentials file\n   *\n   * @callback callback function(err)\n   *   Called after the shared INI file on disk is read and parsed. When this\n   *   callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    iniLoader.clearCachedFiles();\n    this.coalesceRefresh(\n      callback || AWS.util.fn.callback,\n      this.disableAssumeRole\n    );\n  },\n\n  /**\n   * @api private\n   */\n  loadRoleProfile: function loadRoleProfile(creds, roleProfile, callback) {\n    if (this.disableAssumeRole) {\n      throw AWS.util.error(\n        new Error('Role assumption profiles are disabled. ' +\n                  'Failed to load profile ' + this.profile +\n                  ' from ' + creds.filename),\n        { code: 'SharedIniFileCredentialsProviderFailure' }\n      );\n    }\n\n    var self = this;\n    var roleArn = roleProfile['role_arn'];\n    var roleSessionName = roleProfile['role_session_name'];\n    var externalId = roleProfile['external_id'];\n    var mfaSerial = roleProfile['mfa_serial'];\n    var sourceProfileName = roleProfile['source_profile'];\n\n    // From experimentation, the following behavior mimics the AWS CLI:\n    //\n    // 1. Use region from the profile if present.\n    // 2. Otherwise fall back to N. Virginia (global endpoint).\n    //\n    // It is necessary to do the fallback explicitly, because if\n    // 'AWS_STS_REGIONAL_ENDPOINTS=regional', the underlying STS client will\n    // otherwise throw an error if region is left 'undefined'.\n    //\n    // Experimentation shows that the AWS CLI (tested at version 1.18.136)\n    // ignores the following potential sources of a region for the purposes of\n    // this AssumeRole call:\n    //\n    // - The [default] profile\n    // - The AWS_REGION environment variable\n    //\n    // Ignoring the [default] profile for the purposes of AssumeRole is arguably\n    // a bug in the CLI since it does use the [default] region for service\n    // calls... but right now we're matching behavior of the other tool.\n    var profileRegion = roleProfile['region'] || ASSUME_ROLE_DEFAULT_REGION;\n\n    if (!sourceProfileName) {\n      throw AWS.util.error(\n        new Error('source_profile is not set using profile ' + this.profile),\n        { code: 'SharedIniFileCredentialsProviderFailure' }\n      );\n    }\n\n    var sourceProfileExistanceTest = creds[sourceProfileName];\n\n    if (typeof sourceProfileExistanceTest !== 'object') {\n      throw AWS.util.error(\n        new Error('source_profile ' + sourceProfileName + ' using profile '\n          + this.profile + ' does not exist'),\n        { code: 'SharedIniFileCredentialsProviderFailure' }\n      );\n    }\n\n    var sourceCredentials = new AWS.SharedIniFileCredentials(\n      AWS.util.merge(this.options || {}, {\n        profile: sourceProfileName,\n        preferStaticCredentials: true\n      })\n    );\n\n    this.roleArn = roleArn;\n    var sts = new STS({\n      credentials: sourceCredentials,\n      region: profileRegion,\n      httpOptions: this.httpOptions\n    });\n\n    var roleParams = {\n      RoleArn: roleArn,\n      RoleSessionName: roleSessionName || 'aws-sdk-js-' + Date.now()\n    };\n\n    if (externalId) {\n      roleParams.ExternalId = externalId;\n    }\n\n    if (mfaSerial && self.tokenCodeFn) {\n      roleParams.SerialNumber = mfaSerial;\n      self.tokenCodeFn(mfaSerial, function(err, token) {\n        if (err) {\n          var message;\n          if (err instanceof Error) {\n            message = err.message;\n          } else {\n            message = err;\n          }\n          callback(\n            AWS.util.error(\n              new Error('Error fetching MFA token: ' + message),\n              { code: 'SharedIniFileCredentialsProviderFailure' }\n            ));\n          return;\n        }\n\n        roleParams.TokenCode = token;\n        sts.assumeRole(roleParams, callback);\n      });\n      return;\n    }\n    sts.assumeRole(roleParams, callback);\n  }\n});\n","var AWS = require('../core');\nvar STS = require('../../clients/sts');\n\n/**\n * Represents temporary credentials retrieved from {AWS.STS}. Without any\n * extra parameters, credentials will be fetched from the\n * {AWS.STS.getSessionToken} operation. If an IAM role is provided, the\n * {AWS.STS.assumeRole} operation will be used to fetch credentials for the\n * role instead.\n *\n * @note AWS.TemporaryCredentials is deprecated, but remains available for\n *   backwards compatibility. {AWS.ChainableTemporaryCredentials} is the\n *   preferred class for temporary credentials.\n *\n * To setup temporary credentials, configure a set of master credentials\n * using the standard credentials providers (environment, EC2 instance metadata,\n * or from the filesystem), then set the global credentials to a new\n * temporary credentials object:\n *\n * ```javascript\n * // Note that environment credentials are loaded by default,\n * // the following line is shown for clarity:\n * AWS.config.credentials = new AWS.EnvironmentCredentials('AWS');\n *\n * // Now set temporary credentials seeded from the master credentials\n * AWS.config.credentials = new AWS.TemporaryCredentials();\n *\n * // subsequent requests will now use temporary credentials from AWS STS.\n * new AWS.S3().listBucket(function(err, data) { ... });\n * ```\n *\n * @!attribute masterCredentials\n *   @return [AWS.Credentials] the master (non-temporary) credentials used to\n *     get and refresh temporary credentials from AWS STS.\n * @note (see constructor)\n */\nAWS.TemporaryCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * Creates a new temporary credentials object.\n   *\n   * @note In order to create temporary credentials, you first need to have\n   *   \"master\" credentials configured in {AWS.Config.credentials}. These\n   *   master credentials are necessary to retrieve the temporary credentials,\n   *   as well as refresh the credentials when they expire.\n   * @param params [map] a map of options that are passed to the\n   *   {AWS.STS.assumeRole} or {AWS.STS.getSessionToken} operations.\n   *   If a `RoleArn` parameter is passed in, credentials will be based on the\n   *   IAM role.\n   * @param masterCredentials [AWS.Credentials] the master (non-temporary) credentials\n   *  used to get and refresh temporary credentials from AWS STS.\n   * @example Creating a new credentials object for generic temporary credentials\n   *   AWS.config.credentials = new AWS.TemporaryCredentials();\n   * @example Creating a new credentials object for an IAM role\n   *   AWS.config.credentials = new AWS.TemporaryCredentials({\n   *     RoleArn: 'arn:aws:iam::1234567890:role/TemporaryCredentials',\n   *   });\n   * @see AWS.STS.assumeRole\n   * @see AWS.STS.getSessionToken\n   */\n  constructor: function TemporaryCredentials(params, masterCredentials) {\n    AWS.Credentials.call(this);\n    this.loadMasterCredentials(masterCredentials);\n    this.expired = true;\n\n    this.params = params || {};\n    if (this.params.RoleArn) {\n      this.params.RoleSessionName =\n        this.params.RoleSessionName || 'temporary-credentials';\n    }\n  },\n\n  /**\n   * Refreshes credentials using {AWS.STS.assumeRole} or\n   * {AWS.STS.getSessionToken}, depending on whether an IAM role ARN was passed\n   * to the credentials {constructor}.\n   *\n   * @callback callback function(err)\n   *   Called when the STS service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh (callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   */\n  load: function load (callback) {\n    var self = this;\n    self.createClients();\n    self.masterCredentials.get(function () {\n      self.service.config.credentials = self.masterCredentials;\n      var operation = self.params.RoleArn ?\n        self.service.assumeRole : self.service.getSessionToken;\n      operation.call(self.service, function (err, data) {\n        if (!err) {\n          self.service.credentialsFrom(data, self);\n        }\n        callback(err);\n      });\n    });\n  },\n\n  /**\n   * @api private\n   */\n  loadMasterCredentials: function loadMasterCredentials (masterCredentials) {\n    this.masterCredentials = masterCredentials || AWS.config.credentials;\n    while (this.masterCredentials.masterCredentials) {\n      this.masterCredentials = this.masterCredentials.masterCredentials;\n    }\n\n    if (typeof this.masterCredentials.get !== 'function') {\n      this.masterCredentials = new AWS.Credentials(this.masterCredentials);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  createClients: function () {\n    this.service = this.service || new STS({params: this.params});\n  }\n\n});\n","var AWS = require('../core');\nvar fs = require('fs');\nvar STS = require('../../clients/sts');\nvar iniLoader = AWS.util.iniLoader;\n\n/**\n * Represents OIDC credentials from a file on disk\n * If the credentials expire, the SDK can {refresh} the credentials\n * from the file.\n *\n * ## Using the web identity token file\n *\n * This provider is checked by default in the Node.js environment. To use\n * the provider simply add your OIDC token to a file (ASCII encoding) and\n * share the filename in either AWS_WEB_IDENTITY_TOKEN_FILE environment\n * variable or web_identity_token_file shared config variable\n *\n * The file contains encoded OIDC token and the characters are\n * ASCII encoded. OIDC tokens are JSON Web Tokens (JWT).\n * JWT's are 3 base64 encoded strings joined by the '.' character.\n *\n * This class will read filename from AWS_WEB_IDENTITY_TOKEN_FILE\n * environment variable or web_identity_token_file shared config variable,\n * and get the OIDC token from filename.\n * It will also read IAM role to be assumed from AWS_ROLE_ARN\n * environment variable or role_arn shared config variable.\n * This provider gets credetials using the {AWS.STS.assumeRoleWithWebIdentity}\n * service operation\n *\n * @!macro nobrowser\n */\nAWS.TokenFileWebIdentityCredentials = AWS.util.inherit(AWS.Credentials, {\n\n  /**\n   * @example Creating a new credentials object\n   *  AWS.config.credentials = new AWS.TokenFileWebIdentityCredentials(\n   *   // optionally provide configuration to apply to the underlying AWS.STS service client\n   *   // if configuration is not provided, then configuration will be pulled from AWS.config\n   *   {\n   *     // specify timeout options\n   *     httpOptions: {\n   *       timeout: 100\n   *     }\n   *   });\n   * @see AWS.Config\n   */\n  constructor: function TokenFileWebIdentityCredentials(clientConfig) {\n    AWS.Credentials.call(this);\n    this.data = null;\n    this.clientConfig = AWS.util.copy(clientConfig || {});\n  },\n\n  /**\n   * Returns params from environment variables\n   *\n   * @api private\n   */\n  getParamsFromEnv: function getParamsFromEnv() {\n    var ENV_TOKEN_FILE = 'AWS_WEB_IDENTITY_TOKEN_FILE',\n        ENV_ROLE_ARN = 'AWS_ROLE_ARN';\n    if (process.env[ENV_TOKEN_FILE] && process.env[ENV_ROLE_ARN]) {\n      return [{\n        envTokenFile: process.env[ENV_TOKEN_FILE],\n        roleArn: process.env[ENV_ROLE_ARN],\n        roleSessionName: process.env['AWS_ROLE_SESSION_NAME']\n      }];\n    }\n  },\n\n  /**\n   * Returns params from shared config variables\n   *\n   * @api private\n   */\n  getParamsFromSharedConfig: function getParamsFromSharedConfig() {\n    var profiles = AWS.util.getProfilesFromSharedConfig(iniLoader);\n    var profileName = process.env.AWS_PROFILE || AWS.util.defaultProfile;\n    var profile = profiles[profileName] || {};\n\n    if (Object.keys(profile).length === 0) {\n      throw AWS.util.error(\n        new Error('Profile ' + profileName + ' not found'),\n        { code: 'TokenFileWebIdentityCredentialsProviderFailure' }\n      );\n    }\n\n    var paramsArray = [];\n\n    while (!profile['web_identity_token_file'] && profile['source_profile']) {\n      paramsArray.unshift({\n        roleArn: profile['role_arn'],\n        roleSessionName: profile['role_session_name']\n      });\n      var sourceProfile = profile['source_profile'];\n      profile = profiles[sourceProfile];\n    }\n\n    paramsArray.unshift({\n      envTokenFile: profile['web_identity_token_file'],\n      roleArn: profile['role_arn'],\n      roleSessionName: profile['role_session_name']\n    });\n\n    return paramsArray;\n  },\n\n  /**\n   * Refreshes credentials using {AWS.STS.assumeRoleWithWebIdentity}\n   *\n   * @callback callback function(err)\n   *   Called when the STS service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see AWS.Credentials.get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n  */\n  assumeRoleChaining: function assumeRoleChaining(paramsArray, callback) {\n    var self = this;\n    if (paramsArray.length === 0) {\n      self.service.credentialsFrom(self.data, self);\n      callback();\n    } else {\n      var params = paramsArray.shift();\n      self.service.config.credentials = self.service.credentialsFrom(self.data, self);\n      self.service.assumeRole(\n        {\n          RoleArn: params.roleArn,\n          RoleSessionName: params.roleSessionName || 'token-file-web-identity'\n        },\n        function (err, data) {\n          self.data = null;\n          if (err) {\n            callback(err);\n          } else {\n            self.data = data;\n            self.assumeRoleChaining(paramsArray, callback);\n          }\n        }\n      );\n    }\n  },\n\n  /**\n   * @api private\n   */\n  load: function load(callback) {\n    var self = this;\n    try {\n      var paramsArray = self.getParamsFromEnv();\n      if (!paramsArray) {\n        paramsArray = self.getParamsFromSharedConfig();\n      }\n      if (paramsArray) {\n        var params = paramsArray.shift();\n        var oidcToken = fs.readFileSync(params.envTokenFile, {encoding: 'ascii'});\n        if (!self.service) {\n          self.createClients();\n        }\n        self.service.assumeRoleWithWebIdentity(\n          {\n            WebIdentityToken: oidcToken,\n            RoleArn: params.roleArn,\n            RoleSessionName: params.roleSessionName || 'token-file-web-identity'\n          },\n          function (err, data) {\n            self.data = null;\n            if (err) {\n              callback(err);\n            } else {\n              self.data = data;\n              self.assumeRoleChaining(paramsArray, callback);\n            }\n          }\n        );\n      }\n    } catch (err) {\n      callback(err);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  createClients: function() {\n    if (!this.service) {\n      var stsConfig = AWS.util.merge({}, this.clientConfig);\n      this.service = new STS(stsConfig);\n\n      // Retry in case of IDPCommunicationErrorException or InvalidIdentityToken\n      this.service.retryableError = function(error) {\n        if (error.code === 'IDPCommunicationErrorException' || error.code === 'InvalidIdentityToken') {\n          return true;\n        } else {\n          return AWS.Service.prototype.retryableError.call(this, error);\n        }\n      };\n    }\n  }\n});\n","var AWS = require('../core');\nvar STS = require('../../clients/sts');\n\n/**\n * Represents credentials retrieved from STS Web Identity Federation support.\n *\n * By default this provider gets credentials using the\n * {AWS.STS.assumeRoleWithWebIdentity} service operation. This operation\n * requires a `RoleArn` containing the ARN of the IAM trust policy for the\n * application for which credentials will be given. In addition, the\n * `WebIdentityToken` must be set to the token provided by the identity\n * provider. See {constructor} for an example on creating a credentials\n * object with proper `RoleArn` and `WebIdentityToken` values.\n *\n * ## Refreshing Credentials from Identity Service\n *\n * In addition to AWS credentials expiring after a given amount of time, the\n * login token from the identity provider will also expire. Once this token\n * expires, it will not be usable to refresh AWS credentials, and another\n * token will be needed. The SDK does not manage refreshing of the token value,\n * but this can be done through a \"refresh token\" supported by most identity\n * providers. Consult the documentation for the identity provider for refreshing\n * tokens. Once the refreshed token is acquired, you should make sure to update\n * this new token in the credentials object's {params} property. The following\n * code will update the WebIdentityToken, assuming you have retrieved an updated\n * token from the identity provider:\n *\n * ```javascript\n * AWS.config.credentials.params.WebIdentityToken = updatedToken;\n * ```\n *\n * Future calls to `credentials.refresh()` will now use the new token.\n *\n * @!attribute params\n *   @return [map] the map of params passed to\n *     {AWS.STS.assumeRoleWithWebIdentity}. To update the token, set the\n *     `params.WebIdentityToken` property.\n * @!attribute data\n *   @return [map] the raw data response from the call to\n *     {AWS.STS.assumeRoleWithWebIdentity}. Use this if you want to get\n *     access to other properties from the response.\n */\nAWS.WebIdentityCredentials = AWS.util.inherit(AWS.Credentials, {\n  /**\n   * Creates a new credentials object.\n   * @param (see AWS.STS.assumeRoleWithWebIdentity)\n   * @example Creating a new credentials object\n   *   AWS.config.credentials = new AWS.WebIdentityCredentials({\n   *     RoleArn: 'arn:aws:iam::1234567890:role/WebIdentity',\n   *     WebIdentityToken: 'ABCDEFGHIJKLMNOP', // token from identity service\n   *     RoleSessionName: 'web' // optional name, defaults to web-identity\n   *   }, {\n   *     // optionally provide configuration to apply to the underlying AWS.STS service client\n   *     // if configuration is not provided, then configuration will be pulled from AWS.config\n   *\n   *     // specify timeout options\n   *     httpOptions: {\n   *       timeout: 100\n   *     }\n   *   });\n   * @see AWS.STS.assumeRoleWithWebIdentity\n   * @see AWS.Config\n   */\n  constructor: function WebIdentityCredentials(params, clientConfig) {\n    AWS.Credentials.call(this);\n    this.expired = true;\n    this.params = params;\n    this.params.RoleSessionName = this.params.RoleSessionName || 'web-identity';\n    this.data = null;\n    this._clientConfig = AWS.util.copy(clientConfig || {});\n  },\n\n  /**\n   * Refreshes credentials using {AWS.STS.assumeRoleWithWebIdentity}\n   *\n   * @callback callback function(err)\n   *   Called when the STS service responds (or fails). When\n   *   this callback is called with no error, it means that the credentials\n   *   information has been loaded into the object (as the `accessKeyId`,\n   *   `secretAccessKey`, and `sessionToken` properties).\n   *   @param err [Error] if an error occurred, this value will be filled\n   * @see get\n   */\n  refresh: function refresh(callback) {\n    this.coalesceRefresh(callback || AWS.util.fn.callback);\n  },\n\n  /**\n   * @api private\n   */\n  load: function load(callback) {\n    var self = this;\n    self.createClients();\n    self.service.assumeRoleWithWebIdentity(function (err, data) {\n      self.data = null;\n      if (!err) {\n        self.data = data;\n        self.service.credentialsFrom(data, self);\n      }\n      callback(err);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  createClients: function() {\n    if (!this.service) {\n      var stsConfig = AWS.util.merge({}, this._clientConfig);\n      stsConfig.params = this.params;\n      this.service = new STS(stsConfig);\n    }\n  }\n\n});\n","var AWS = require('./core');\nvar util = require('./util');\nvar endpointDiscoveryEnabledEnvs = ['AWS_ENABLE_ENDPOINT_DISCOVERY', 'AWS_ENDPOINT_DISCOVERY_ENABLED'];\n\n/**\n * Generate key (except resources and operation part) to index the endpoints in the cache\n * If input shape has endpointdiscoveryid trait then use\n *   accessKey + operation + resources + region + service as cache key\n * If input shape doesn't have endpointdiscoveryid trait then use\n *   accessKey + region + service as cache key\n * @return [map<String,String>] object with keys to index endpoints.\n * @api private\n */\nfunction getCacheKey(request) {\n  var service = request.service;\n  var api = service.api || {};\n  var operations = api.operations;\n  var identifiers = {};\n  if (service.config.region) {\n    identifiers.region = service.config.region;\n  }\n  if (api.serviceId) {\n    identifiers.serviceId = api.serviceId;\n  }\n  if (service.config.credentials.accessKeyId) {\n    identifiers.accessKeyId = service.config.credentials.accessKeyId;\n  }\n  return identifiers;\n}\n\n/**\n * Recursive helper for marshallCustomIdentifiers().\n * Looks for required string input members that have 'endpointdiscoveryid' trait.\n * @api private\n */\nfunction marshallCustomIdentifiersHelper(result, params, shape) {\n  if (!shape || params === undefined || params === null) return;\n  if (shape.type === 'structure' && shape.required && shape.required.length > 0) {\n    util.arrayEach(shape.required, function(name) {\n      var memberShape = shape.members[name];\n      if (memberShape.endpointDiscoveryId === true) {\n        var locationName = memberShape.isLocationName ? memberShape.name : name;\n        result[locationName] = String(params[name]);\n      } else {\n        marshallCustomIdentifiersHelper(result, params[name], memberShape);\n      }\n    });\n  }\n}\n\n/**\n * Get custom identifiers for cache key.\n * Identifies custom identifiers by checking each shape's `endpointDiscoveryId` trait.\n * @param [object] request object\n * @param [object] input shape of the given operation's api\n * @api private\n */\nfunction marshallCustomIdentifiers(request, shape) {\n  var identifiers = {};\n  marshallCustomIdentifiersHelper(identifiers, request.params, shape);\n  return identifiers;\n}\n\n/**\n * Call endpoint discovery operation when it's optional.\n * When endpoint is available in cache then use the cached endpoints. If endpoints\n * are unavailable then use regional endpoints and call endpoint discovery operation\n * asynchronously. This is turned off by default.\n * @param [object] request object\n * @api private\n */\nfunction optionalDiscoverEndpoint(request) {\n  var service = request.service;\n  var api = service.api;\n  var operationModel = api.operations ? api.operations[request.operation] : undefined;\n  var inputShape = operationModel ? operationModel.input : undefined;\n\n  var identifiers = marshallCustomIdentifiers(request, inputShape);\n  var cacheKey = getCacheKey(request);\n  if (Object.keys(identifiers).length > 0) {\n    cacheKey = util.update(cacheKey, identifiers);\n    if (operationModel) cacheKey.operation = operationModel.name;\n  }\n  var endpoints = AWS.endpointCache.get(cacheKey);\n  if (endpoints && endpoints.length === 1 && endpoints[0].Address === '') {\n    //endpoint operation is being made but response not yet received\n    //or endpoint operation just failed in 1 minute\n    return;\n  } else if (endpoints && endpoints.length > 0) {\n    //found endpoint record from cache\n    request.httpRequest.updateEndpoint(endpoints[0].Address);\n  } else {\n    //endpoint record not in cache or outdated. make discovery operation\n    var endpointRequest = service.makeRequest(api.endpointOperation, {\n      Operation: operationModel.name,\n      Identifiers: identifiers,\n    });\n    addApiVersionHeader(endpointRequest);\n    endpointRequest.removeListener('validate', AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n    endpointRequest.removeListener('retry', AWS.EventListeners.Core.RETRY_CHECK);\n    //put in a placeholder for endpoints already requested, prevent\n    //too much in-flight calls\n    AWS.endpointCache.put(cacheKey, [{\n      Address: '',\n      CachePeriodInMinutes: 1\n    }]);\n    endpointRequest.send(function(err, data) {\n      if (data && data.Endpoints) {\n        AWS.endpointCache.put(cacheKey, data.Endpoints);\n      } else if (err) {\n        AWS.endpointCache.put(cacheKey, [{\n          Address: '',\n          CachePeriodInMinutes: 1 //not to make more endpoint operation in next 1 minute\n        }]);\n      }\n    });\n  }\n}\n\nvar requestQueue = {};\n\n/**\n * Call endpoint discovery operation when it's required.\n * When endpoint is available in cache then use cached ones. If endpoints are\n * unavailable then SDK should call endpoint operation then use returned new\n * endpoint for the api call. SDK will automatically attempt to do endpoint\n * discovery. This is turned off by default\n * @param [object] request object\n * @api private\n */\nfunction requiredDiscoverEndpoint(request, done) {\n  var service = request.service;\n  var api = service.api;\n  var operationModel = api.operations ? api.operations[request.operation] : undefined;\n  var inputShape = operationModel ? operationModel.input : undefined;\n\n  var identifiers = marshallCustomIdentifiers(request, inputShape);\n  var cacheKey = getCacheKey(request);\n  if (Object.keys(identifiers).length > 0) {\n    cacheKey = util.update(cacheKey, identifiers);\n    if (operationModel) cacheKey.operation = operationModel.name;\n  }\n  var cacheKeyStr = AWS.EndpointCache.getKeyString(cacheKey);\n  var endpoints = AWS.endpointCache.get(cacheKeyStr); //endpoint cache also accepts string keys\n  if (endpoints && endpoints.length === 1 && endpoints[0].Address === '') {\n    //endpoint operation is being made but response not yet received\n    //push request object to a pending queue\n    if (!requestQueue[cacheKeyStr]) requestQueue[cacheKeyStr] = [];\n    requestQueue[cacheKeyStr].push({request: request, callback: done});\n    return;\n  } else if (endpoints && endpoints.length > 0) {\n    request.httpRequest.updateEndpoint(endpoints[0].Address);\n    done();\n  } else {\n    var endpointRequest = service.makeRequest(api.endpointOperation, {\n      Operation: operationModel.name,\n      Identifiers: identifiers,\n    });\n    endpointRequest.removeListener('validate', AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n    addApiVersionHeader(endpointRequest);\n\n    //put in a placeholder for endpoints already requested, prevent\n    //too much in-flight calls\n    AWS.endpointCache.put(cacheKeyStr, [{\n      Address: '',\n      CachePeriodInMinutes: 60 //long-live cache\n    }]);\n    endpointRequest.send(function(err, data) {\n      if (err) {\n        request.response.error = util.error(err, { retryable: false });\n        AWS.endpointCache.remove(cacheKey);\n\n        //fail all the pending requests in batch\n        if (requestQueue[cacheKeyStr]) {\n          var pendingRequests = requestQueue[cacheKeyStr];\n          util.arrayEach(pendingRequests, function(requestContext) {\n            requestContext.request.response.error = util.error(err, { retryable: false });\n            requestContext.callback();\n          });\n          delete requestQueue[cacheKeyStr];\n        }\n      } else if (data) {\n        AWS.endpointCache.put(cacheKeyStr, data.Endpoints);\n        request.httpRequest.updateEndpoint(data.Endpoints[0].Address);\n\n        //update the endpoint for all the pending requests in batch\n        if (requestQueue[cacheKeyStr]) {\n          var pendingRequests = requestQueue[cacheKeyStr];\n          util.arrayEach(pendingRequests, function(requestContext) {\n            requestContext.request.httpRequest.updateEndpoint(data.Endpoints[0].Address);\n            requestContext.callback();\n          });\n          delete requestQueue[cacheKeyStr];\n        }\n      }\n      done();\n    });\n  }\n}\n\n/**\n * add api version header to endpoint operation\n * @api private\n */\nfunction addApiVersionHeader(endpointRequest) {\n  var api = endpointRequest.service.api;\n  var apiVersion = api.apiVersion;\n  if (apiVersion && !endpointRequest.httpRequest.headers['x-amz-api-version']) {\n    endpointRequest.httpRequest.headers['x-amz-api-version'] = apiVersion;\n  }\n}\n\n/**\n * If api call gets invalid endpoint exception, SDK should attempt to remove the invalid\n * endpoint from cache.\n * @api private\n */\nfunction invalidateCachedEndpoints(response) {\n  var error = response.error;\n  var httpResponse = response.httpResponse;\n  if (error &&\n    (error.code === 'InvalidEndpointException' || httpResponse.statusCode === 421)\n  ) {\n    var request = response.request;\n    var operations = request.service.api.operations || {};\n    var inputShape = operations[request.operation] ? operations[request.operation].input : undefined;\n    var identifiers = marshallCustomIdentifiers(request, inputShape);\n    var cacheKey = getCacheKey(request);\n    if (Object.keys(identifiers).length > 0) {\n      cacheKey = util.update(cacheKey, identifiers);\n      if (operations[request.operation]) cacheKey.operation = operations[request.operation].name;\n    }\n    AWS.endpointCache.remove(cacheKey);\n  }\n}\n\n/**\n * If endpoint is explicitly configured, SDK should not do endpoint discovery in anytime.\n * @param [object] client Service client object.\n * @api private\n */\nfunction hasCustomEndpoint(client) {\n  //if set endpoint is set for specific client, enable endpoint discovery will raise an error.\n  if (client._originalConfig && client._originalConfig.endpoint && client._originalConfig.endpointDiscoveryEnabled === true) {\n    throw util.error(new Error(), {\n      code: 'ConfigurationException',\n      message: 'Custom endpoint is supplied; endpointDiscoveryEnabled must not be true.'\n    });\n  };\n  var svcConfig = AWS.config[client.serviceIdentifier] || {};\n  return Boolean(AWS.config.endpoint || svcConfig.endpoint || (client._originalConfig && client._originalConfig.endpoint));\n}\n\n/**\n * @api private\n */\nfunction isFalsy(value) {\n  return ['false', '0'].indexOf(value) >= 0;\n}\n\n/**\n * If endpoint discovery should perform for this request when no operation requires endpoint\n * discovery for the given service.\n * SDK performs config resolution in order like below:\n * 1. If set in client configuration.\n * 2. If set in env AWS_ENABLE_ENDPOINT_DISCOVERY.\n * 3. If set in shared ini config file with key 'endpoint_discovery_enabled'.\n * @param [object] request request object.\n * @returns [boolean|undefined] if endpoint discovery config is not set in any source, this\n *  function returns undefined\n * @api private\n */\nfunction resolveEndpointDiscoveryConfig(request) {\n  var service = request.service || {};\n  if (service.config.endpointDiscoveryEnabled !== undefined) {\n    return service.config.endpointDiscoveryEnabled;\n  }\n\n  //shared ini file is only available in Node\n  //not to check env in browser\n  if (util.isBrowser()) return undefined;\n\n  // If any of recognized endpoint discovery config env is set\n  for (var i = 0; i < endpointDiscoveryEnabledEnvs.length; i++) {\n    var env = endpointDiscoveryEnabledEnvs[i];\n    if (Object.prototype.hasOwnProperty.call(process.env, env)) {\n      if (process.env[env] === '' || process.env[env] === undefined) {\n        throw util.error(new Error(), {\n          code: 'ConfigurationException',\n          message: 'environmental variable ' + env + ' cannot be set to nothing'\n        });\n      }\n      return !isFalsy(process.env[env]);\n    }\n  }\n\n  var configFile = {};\n  try {\n    configFile = AWS.util.iniLoader ? AWS.util.iniLoader.loadFrom({\n      isConfig: true,\n      filename: process.env[AWS.util.sharedConfigFileEnv]\n    }) : {};\n  } catch (e) {}\n  var sharedFileConfig = configFile[\n    process.env.AWS_PROFILE || AWS.util.defaultProfile\n  ] || {};\n  if (Object.prototype.hasOwnProperty.call(sharedFileConfig, 'endpoint_discovery_enabled')) {\n    if (sharedFileConfig.endpoint_discovery_enabled === undefined) {\n      throw util.error(new Error(), {\n        code: 'ConfigurationException',\n        message: 'config file entry \\'endpoint_discovery_enabled\\' cannot be set to nothing'\n      });\n    }\n    return !isFalsy(sharedFileConfig.endpoint_discovery_enabled);\n  }\n  return undefined;\n}\n\n/**\n * attach endpoint discovery logic to request object\n * @param [object] request\n * @api private\n */\nfunction discoverEndpoint(request, done) {\n  var service = request.service || {};\n  if (hasCustomEndpoint(service) || request.isPresigned()) return done();\n\n  var operations = service.api.operations || {};\n  var operationModel = operations[request.operation];\n  var isEndpointDiscoveryRequired = operationModel ? operationModel.endpointDiscoveryRequired : 'NULL';\n  var isEnabled = resolveEndpointDiscoveryConfig(request);\n  var hasRequiredEndpointDiscovery = service.api.hasRequiredEndpointDiscovery;\n  if (isEnabled || hasRequiredEndpointDiscovery) {\n    // Once a customer enables endpoint discovery, the SDK should start appending\n    // the string endpoint-discovery to the user-agent on all requests.\n    request.httpRequest.appendToUserAgent('endpoint-discovery');\n  }\n  switch (isEndpointDiscoveryRequired) {\n    case 'OPTIONAL':\n      if (isEnabled || hasRequiredEndpointDiscovery) {\n        // For a given service; if at least one operation requires endpoint discovery then the SDK must enable endpoint discovery\n        // by default for all operations of that service, including operations where endpoint discovery is optional.\n        optionalDiscoverEndpoint(request);\n        request.addNamedListener('INVALIDATE_CACHED_ENDPOINTS', 'extractError', invalidateCachedEndpoints);\n      }\n      done();\n      break;\n    case 'REQUIRED':\n      if (isEnabled === false) {\n        // For a given operation; if endpoint discovery is required and it has been disabled on the SDK client,\n        // then the SDK must return a clear and actionable exception.\n        request.response.error = util.error(new Error(), {\n          code: 'ConfigurationException',\n          message: 'Endpoint Discovery is disabled but ' + service.api.className + '.' + request.operation +\n                    '() requires it. Please check your configurations.'\n        });\n        done();\n        break;\n      }\n      request.addNamedListener('INVALIDATE_CACHED_ENDPOINTS', 'extractError', invalidateCachedEndpoints);\n      requiredDiscoverEndpoint(request, done);\n      break;\n    case 'NULL':\n    default:\n      done();\n      break;\n  }\n}\n\nmodule.exports = {\n  discoverEndpoint: discoverEndpoint,\n  requiredDiscoverEndpoint: requiredDiscoverEndpoint,\n  optionalDiscoverEndpoint: optionalDiscoverEndpoint,\n  marshallCustomIdentifiers: marshallCustomIdentifiers,\n  getCacheKey: getCacheKey,\n  invalidateCachedEndpoint: invalidateCachedEndpoints,\n};\n","var AWS = require('../core');\nvar util = AWS.util;\nvar typeOf = require('./types').typeOf;\nvar DynamoDBSet = require('./set');\nvar NumberValue = require('./numberValue');\n\nAWS.DynamoDB.Converter = {\n  /**\n   * Convert a JavaScript value to its equivalent DynamoDB AttributeValue type\n   *\n   * @param data [any] The data to convert to a DynamoDB AttributeValue\n   * @param options [map]\n   * @option options convertEmptyValues [Boolean] Whether to automatically\n   *                                              convert empty strings, blobs,\n   *                                              and sets to `null`\n   * @option options wrapNumbers [Boolean]  Whether to return numbers as a\n   *                                        NumberValue object instead of\n   *                                        converting them to native JavaScript\n   *                                        numbers. This allows for the safe\n   *                                        round-trip transport of numbers of\n   *                                        arbitrary size.\n   * @return [map] An object in the Amazon DynamoDB AttributeValue format\n   *\n   * @see AWS.DynamoDB.Converter.marshall AWS.DynamoDB.Converter.marshall to\n   *    convert entire records (rather than individual attributes)\n   */\n  input: function convertInput(data, options) {\n    options = options || {};\n    var type = typeOf(data);\n    if (type === 'Object') {\n      return formatMap(data, options);\n    } else if (type === 'Array') {\n      return formatList(data, options);\n    } else if (type === 'Set') {\n      return formatSet(data, options);\n    } else if (type === 'String') {\n      if (data.length === 0 && options.convertEmptyValues) {\n        return convertInput(null);\n      }\n      return { S: data };\n    } else if (type === 'Number' || type === 'NumberValue') {\n      return { N: data.toString() };\n    } else if (type === 'Binary') {\n      if (data.length === 0 && options.convertEmptyValues) {\n        return convertInput(null);\n      }\n      return { B: data };\n    } else if (type === 'Boolean') {\n      return { BOOL: data };\n    } else if (type === 'null') {\n      return { NULL: true };\n    } else if (type !== 'undefined' && type !== 'Function') {\n      // this value has a custom constructor\n      return formatMap(data, options);\n    }\n  },\n\n  /**\n   * Convert a JavaScript object into a DynamoDB record.\n   *\n   * @param data [any] The data to convert to a DynamoDB record\n   * @param options [map]\n   * @option options convertEmptyValues [Boolean] Whether to automatically\n   *                                              convert empty strings, blobs,\n   *                                              and sets to `null`\n   * @option options wrapNumbers [Boolean]  Whether to return numbers as a\n   *                                        NumberValue object instead of\n   *                                        converting them to native JavaScript\n   *                                        numbers. This allows for the safe\n   *                                        round-trip transport of numbers of\n   *                                        arbitrary size.\n   *\n   * @return [map] An object in the DynamoDB record format.\n   *\n   * @example Convert a JavaScript object into a DynamoDB record\n   *  var marshalled = AWS.DynamoDB.Converter.marshall({\n   *    string: 'foo',\n   *    list: ['fizz', 'buzz', 'pop'],\n   *    map: {\n   *      nestedMap: {\n   *        key: 'value',\n   *      }\n   *    },\n   *    number: 123,\n   *    nullValue: null,\n   *    boolValue: true,\n   *    stringSet: new DynamoDBSet(['foo', 'bar', 'baz'])\n   *  });\n   */\n  marshall: function marshallItem(data, options) {\n    return AWS.DynamoDB.Converter.input(data, options).M;\n  },\n\n  /**\n   * Convert a DynamoDB AttributeValue object to its equivalent JavaScript type.\n   *\n   * @param data [map] An object in the Amazon DynamoDB AttributeValue format\n   * @param options [map]\n   * @option options convertEmptyValues [Boolean] Whether to automatically\n   *                                              convert empty strings, blobs,\n   *                                              and sets to `null`\n   * @option options wrapNumbers [Boolean]  Whether to return numbers as a\n   *                                        NumberValue object instead of\n   *                                        converting them to native JavaScript\n   *                                        numbers. This allows for the safe\n   *                                        round-trip transport of numbers of\n   *                                        arbitrary size.\n   *\n   * @return [Object|Array|String|Number|Boolean|null]\n   *\n   * @see AWS.DynamoDB.Converter.unmarshall AWS.DynamoDB.Converter.unmarshall to\n   *    convert entire records (rather than individual attributes)\n   */\n  output: function convertOutput(data, options) {\n    options = options || {};\n    var list, map, i;\n    for (var type in data) {\n      var values = data[type];\n      if (type === 'M') {\n        map = {};\n        for (var key in values) {\n          map[key] = convertOutput(values[key], options);\n        }\n        return map;\n      } else if (type === 'L') {\n        list = [];\n        for (i = 0; i < values.length; i++) {\n          list.push(convertOutput(values[i], options));\n        }\n        return list;\n      } else if (type === 'SS') {\n        list = [];\n        for (i = 0; i < values.length; i++) {\n          list.push(values[i] + '');\n        }\n        return new DynamoDBSet(list);\n      } else if (type === 'NS') {\n        list = [];\n        for (i = 0; i < values.length; i++) {\n          list.push(convertNumber(values[i], options.wrapNumbers));\n        }\n        return new DynamoDBSet(list);\n      } else if (type === 'BS') {\n        list = [];\n        for (i = 0; i < values.length; i++) {\n          list.push(AWS.util.buffer.toBuffer(values[i]));\n        }\n        return new DynamoDBSet(list);\n      } else if (type === 'S') {\n        return values + '';\n      } else if (type === 'N') {\n        return convertNumber(values, options.wrapNumbers);\n      } else if (type === 'B') {\n        return util.buffer.toBuffer(values);\n      } else if (type === 'BOOL') {\n        return (values === 'true' || values === 'TRUE' || values === true);\n      } else if (type === 'NULL') {\n        return null;\n      }\n    }\n  },\n\n  /**\n   * Convert a DynamoDB record into a JavaScript object.\n   *\n   * @param data [any] The DynamoDB record\n   * @param options [map]\n   * @option options convertEmptyValues [Boolean] Whether to automatically\n   *                                              convert empty strings, blobs,\n   *                                              and sets to `null`\n   * @option options wrapNumbers [Boolean]  Whether to return numbers as a\n   *                                        NumberValue object instead of\n   *                                        converting them to native JavaScript\n   *                                        numbers. This allows for the safe\n   *                                        round-trip transport of numbers of\n   *                                        arbitrary size.\n   *\n   * @return [map] An object whose properties have been converted from\n   *    DynamoDB's AttributeValue format into their corresponding native\n   *    JavaScript types.\n   *\n   * @example Convert a record received from a DynamoDB stream\n   *  var unmarshalled = AWS.DynamoDB.Converter.unmarshall({\n   *    string: {S: 'foo'},\n   *    list: {L: [{S: 'fizz'}, {S: 'buzz'}, {S: 'pop'}]},\n   *    map: {\n   *      M: {\n   *        nestedMap: {\n   *          M: {\n   *            key: {S: 'value'}\n   *          }\n   *        }\n   *      }\n   *    },\n   *    number: {N: '123'},\n   *    nullValue: {NULL: true},\n   *    boolValue: {BOOL: true}\n   *  });\n   */\n  unmarshall: function unmarshall(data, options) {\n    return AWS.DynamoDB.Converter.output({M: data}, options);\n  }\n};\n\n/**\n * @api private\n * @param data [Array]\n * @param options [map]\n */\nfunction formatList(data, options) {\n  var list = {L: []};\n  for (var i = 0; i < data.length; i++) {\n    list['L'].push(AWS.DynamoDB.Converter.input(data[i], options));\n  }\n  return list;\n}\n\n/**\n * @api private\n * @param value [String]\n * @param wrapNumbers [Boolean]\n */\nfunction convertNumber(value, wrapNumbers) {\n  return wrapNumbers ? new NumberValue(value) : Number(value);\n}\n\n/**\n * @api private\n * @param data [map]\n * @param options [map]\n */\nfunction formatMap(data, options) {\n  var map = {M: {}};\n  for (var key in data) {\n    var formatted = AWS.DynamoDB.Converter.input(data[key], options);\n    if (formatted !== void 0) {\n      map['M'][key] = formatted;\n    }\n  }\n  return map;\n}\n\n/**\n * @api private\n */\nfunction formatSet(data, options) {\n  options = options || {};\n  var values = data.values;\n  if (options.convertEmptyValues) {\n    values = filterEmptySetValues(data);\n    if (values.length === 0) {\n      return AWS.DynamoDB.Converter.input(null);\n    }\n  }\n\n  var map = {};\n  switch (data.type) {\n    case 'String': map['SS'] = values; break;\n    case 'Binary': map['BS'] = values; break;\n    case 'Number': map['NS'] = values.map(function (value) {\n      return value.toString();\n    });\n  }\n  return map;\n}\n\n/**\n * @api private\n */\nfunction filterEmptySetValues(set) {\n    var nonEmptyValues = [];\n    var potentiallyEmptyTypes = {\n        String: true,\n        Binary: true,\n        Number: false\n    };\n    if (potentiallyEmptyTypes[set.type]) {\n        for (var i = 0; i < set.values.length; i++) {\n            if (set.values[i].length === 0) {\n                continue;\n            }\n            nonEmptyValues.push(set.values[i]);\n        }\n\n        return nonEmptyValues;\n    }\n\n    return set.values;\n}\n\n/**\n * @api private\n */\nmodule.exports = AWS.DynamoDB.Converter;\n","var AWS = require('../core');\nvar Translator = require('./translator');\nvar DynamoDBSet = require('./set');\n\n/**\n * The document client simplifies working with items in Amazon DynamoDB\n * by abstracting away the notion of attribute values. This abstraction\n * annotates native JavaScript types supplied as input parameters, as well\n * as converts annotated response data to native JavaScript types.\n *\n * ## Marshalling Input and Unmarshalling Response Data\n *\n * The document client affords developers the use of native JavaScript types\n * instead of `AttributeValue`s to simplify the JavaScript development\n * experience with Amazon DynamoDB. JavaScript objects passed in as parameters\n * are marshalled into `AttributeValue` shapes required by Amazon DynamoDB.\n * Responses from DynamoDB are unmarshalled into plain JavaScript objects\n * by the `DocumentClient`. The `DocumentClient`, does not accept\n * `AttributeValue`s in favor of native JavaScript types.\n *\n * |                             JavaScript Type                            | DynamoDB AttributeValue |\n * |:----------------------------------------------------------------------:|-------------------------|\n * | String                                                                 | S                       |\n * | Number                                                                 | N                       |\n * | Boolean                                                                | BOOL                    |\n * | null                                                                   | NULL                    |\n * | Array                                                                  | L                       |\n * | Object                                                                 | M                       |\n * | Buffer, File, Blob, ArrayBuffer, DataView, and JavaScript typed arrays | B                       |\n *\n * ## Support for Sets\n *\n * The `DocumentClient` offers a convenient way to create sets from\n * JavaScript Arrays. The type of set is inferred from the first element\n * in the array. DynamoDB supports string, number, and binary sets. To\n * learn more about supported types see the\n * [Amazon DynamoDB Data Model Documentation](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DataModel.html)\n * For more information see {AWS.DynamoDB.DocumentClient.createSet}\n *\n */\nAWS.DynamoDB.DocumentClient = AWS.util.inherit({\n\n  /**\n   * Creates a DynamoDB document client with a set of configuration options.\n   *\n   * @option options params [map] An optional map of parameters to bind to every\n   *   request sent by this service object.\n   * @option options service [AWS.DynamoDB] An optional pre-configured instance\n   *  of the AWS.DynamoDB service object to use for requests. The object may\n   *  bound parameters used by the document client.\n   * @option options convertEmptyValues [Boolean] set to true if you would like\n   *  the document client to convert empty values (0-length strings, binary\n   *  buffers, and sets) to be converted to NULL types when persisting to\n   *  DynamoDB.\n   * @option options wrapNumbers [Boolean] Set to true to return numbers as a\n   *  NumberValue object instead of converting them to native JavaScript numbers.\n   *  This allows for the safe round-trip transport of numbers of arbitrary size.\n   * @see AWS.DynamoDB.constructor\n   *\n   */\n  constructor: function DocumentClient(options) {\n    var self = this;\n    self.options = options || {};\n    self.configure(self.options);\n  },\n\n  /**\n   * @api private\n   */\n  configure: function configure(options) {\n    var self = this;\n    self.service = options.service;\n    self.bindServiceObject(options);\n    self.attrValue = options.attrValue =\n      self.service.api.operations.putItem.input.members.Item.value.shape;\n  },\n\n  /**\n   * @api private\n   */\n  bindServiceObject: function bindServiceObject(options) {\n    var self = this;\n    options = options || {};\n\n    if (!self.service) {\n      self.service = new AWS.DynamoDB(options);\n    } else {\n      var config = AWS.util.copy(self.service.config);\n      self.service = new self.service.constructor.__super__(config);\n      self.service.config.params =\n        AWS.util.merge(self.service.config.params || {}, options.params);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  makeServiceRequest: function(operation, params, callback) {\n    var self = this;\n    var request = self.service[operation](params);\n    self.setupRequest(request);\n    self.setupResponse(request);\n    if (typeof callback === 'function') {\n      request.send(callback);\n    }\n    return request;\n  },\n\n  /**\n   * @api private\n   */\n  serviceClientOperationsMap: {\n    batchGet: 'batchGetItem',\n    batchWrite: 'batchWriteItem',\n    delete: 'deleteItem',\n    get: 'getItem',\n    put: 'putItem',\n    query: 'query',\n    scan: 'scan',\n    update: 'updateItem',\n    transactGet: 'transactGetItems',\n    transactWrite: 'transactWriteItems'\n  },\n\n  /**\n   * Returns the attributes of one or more items from one or more tables\n   * by delegating to `AWS.DynamoDB.batchGetItem()`.\n   *\n   * Supply the same parameters as {AWS.DynamoDB.batchGetItem} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.batchGetItem\n   * @example Get items from multiple tables\n   *  var params = {\n   *    RequestItems: {\n   *      'Table-1': {\n   *        Keys: [\n   *          {\n   *             HashKey: 'haskey',\n   *             NumberRangeKey: 1\n   *          }\n   *        ]\n   *      },\n   *      'Table-2': {\n   *        Keys: [\n   *          { foo: 'bar' },\n   *        ]\n   *      }\n   *    }\n   *  };\n   *\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\n   *\n   *  documentClient.batchGet(params, function(err, data) {\n   *    if (err) console.log(err);\n   *    else console.log(data);\n   *  });\n   *\n   */\n  batchGet: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['batchGet'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Puts or deletes multiple items in one or more tables by delegating\n   * to `AWS.DynamoDB.batchWriteItem()`.\n   *\n   * Supply the same parameters as {AWS.DynamoDB.batchWriteItem} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.batchWriteItem\n   * @example Write to and delete from a table\n   *  var params = {\n   *    RequestItems: {\n   *      'Table-1': [\n   *        {\n   *          DeleteRequest: {\n   *            Key: { HashKey: 'someKey' }\n   *          }\n   *        },\n   *        {\n   *          PutRequest: {\n   *            Item: {\n   *              HashKey: 'anotherKey',\n   *              NumAttribute: 1,\n   *              BoolAttribute: true,\n   *              ListAttribute: [1, 'two', false],\n   *              MapAttribute: { foo: 'bar' }\n   *            }\n   *          }\n   *        }\n   *      ]\n   *    }\n   *  };\n   *\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\n   *\n   *  documentClient.batchWrite(params, function(err, data) {\n   *    if (err) console.log(err);\n   *    else console.log(data);\n   *  });\n   *\n   */\n  batchWrite: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['batchWrite'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Deletes a single item in a table by primary key by delegating to\n   * `AWS.DynamoDB.deleteItem()`\n   *\n   * Supply the same parameters as {AWS.DynamoDB.deleteItem} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.deleteItem\n   * @example Delete an item from a table\n   *  var params = {\n   *    TableName : 'Table',\n   *    Key: {\n   *      HashKey: 'hashkey',\n   *      NumberRangeKey: 1\n   *    }\n   *  };\n   *\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\n   *\n   *  documentClient.delete(params, function(err, data) {\n   *    if (err) console.log(err);\n   *    else console.log(data);\n   *  });\n   *\n   */\n  delete: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['delete'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Returns a set of attributes for the item with the given primary key\n   * by delegating to `AWS.DynamoDB.getItem()`.\n   *\n   * Supply the same parameters as {AWS.DynamoDB.getItem} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.getItem\n   * @example Get an item from a table\n   *  var params = {\n   *    TableName : 'Table',\n   *    Key: {\n   *      HashKey: 'hashkey'\n   *    }\n   *  };\n   *\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\n   *\n   *  documentClient.get(params, function(err, data) {\n   *    if (err) console.log(err);\n   *    else console.log(data);\n   *  });\n   *\n   */\n  get: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['get'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Creates a new item, or replaces an old item with a new item by\n   * delegating to `AWS.DynamoDB.putItem()`.\n   *\n   * Supply the same parameters as {AWS.DynamoDB.putItem} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.putItem\n   * @example Create a new item in a table\n   *  var params = {\n   *    TableName : 'Table',\n   *    Item: {\n   *       HashKey: 'haskey',\n   *       NumAttribute: 1,\n   *       BoolAttribute: true,\n   *       ListAttribute: [1, 'two', false],\n   *       MapAttribute: { foo: 'bar'},\n   *       NullAttribute: null\n   *    }\n   *  };\n   *\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\n   *\n   *  documentClient.put(params, function(err, data) {\n   *    if (err) console.log(err);\n   *    else console.log(data);\n   *  });\n   *\n   */\n  put: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['put'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Edits an existing item's attributes, or adds a new item to the table if\n   * it does not already exist by delegating to `AWS.DynamoDB.updateItem()`.\n   *\n   * Supply the same parameters as {AWS.DynamoDB.updateItem} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.updateItem\n   * @example Update an item with expressions\n   *  var params = {\n   *    TableName: 'Table',\n   *    Key: { HashKey : 'hashkey' },\n   *    UpdateExpression: 'set #a = :x + :y',\n   *    ConditionExpression: '#a < :MAX',\n   *    ExpressionAttributeNames: {'#a' : 'Sum'},\n   *    ExpressionAttributeValues: {\n   *      ':x' : 20,\n   *      ':y' : 45,\n   *      ':MAX' : 100,\n   *    }\n   *  };\n   *\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\n   *\n   *  documentClient.update(params, function(err, data) {\n   *     if (err) console.log(err);\n   *     else console.log(data);\n   *  });\n   *\n   */\n  update: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['update'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Returns one or more items and item attributes by accessing every item\n   * in a table or a secondary index.\n   *\n   * Supply the same parameters as {AWS.DynamoDB.scan} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.scan\n   * @example Scan the table with a filter expression\n   *  var params = {\n   *    TableName : 'Table',\n   *    FilterExpression : 'Year = :this_year',\n   *    ExpressionAttributeValues : {':this_year' : 2015}\n   *  };\n   *\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\n   *\n   *  documentClient.scan(params, function(err, data) {\n   *     if (err) console.log(err);\n   *     else console.log(data);\n   *  });\n   *\n   */\n  scan: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['scan'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n   /**\n    * Directly access items from a table by primary key or a secondary index.\n    *\n    * Supply the same parameters as {AWS.DynamoDB.query} with\n    * `AttributeValue`s substituted by native JavaScript types.\n    *\n    * @see AWS.DynamoDB.query\n    * @example Query an index\n    *  var params = {\n    *    TableName: 'Table',\n    *    IndexName: 'Index',\n    *    KeyConditionExpression: 'HashKey = :hkey and RangeKey > :rkey',\n    *    ExpressionAttributeValues: {\n    *      ':hkey': 'key',\n    *      ':rkey': 2015\n    *    }\n    *  };\n    *\n    *  var documentClient = new AWS.DynamoDB.DocumentClient();\n    *\n    *  documentClient.query(params, function(err, data) {\n    *     if (err) console.log(err);\n    *     else console.log(data);\n    *  });\n    *\n    */\n  query: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['query'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Synchronous write operation that groups up to 10 action requests\n   *\n   * Supply the same parameters as {AWS.DynamoDB.transactWriteItems} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.transactWriteItems\n   * @example Get items from multiple tables\n   *  var params = {\n   *    TransactItems: [{\n   *      Put: {\n   *        TableName : 'Table0',\n   *        Item: {\n   *          HashKey: 'haskey',\n   *          NumAttribute: 1,\n   *          BoolAttribute: true,\n   *          ListAttribute: [1, 'two', false],\n   *          MapAttribute: { foo: 'bar'},\n   *          NullAttribute: null\n   *        }\n   *      }\n   *    }, {\n   *      Update: {\n   *        TableName: 'Table1',\n   *        Key: { HashKey : 'hashkey' },\n   *        UpdateExpression: 'set #a = :x + :y',\n   *        ConditionExpression: '#a < :MAX',\n   *        ExpressionAttributeNames: {'#a' : 'Sum'},\n   *        ExpressionAttributeValues: {\n   *          ':x' : 20,\n   *          ':y' : 45,\n   *          ':MAX' : 100,\n   *        }\n   *      }\n   *    }]\n   *  };\n   *\n   *  documentClient.transactWrite(params, function(err, data) {\n   *    if (err) console.log(err);\n   *    else console.log(data);\n   *  });\n   */\n  transactWrite: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['transactWrite'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Atomically retrieves multiple items from one or more tables (but not from indexes)\n   * in a single account and region.\n   *\n   * Supply the same parameters as {AWS.DynamoDB.transactGetItems} with\n   * `AttributeValue`s substituted by native JavaScript types.\n   *\n   * @see AWS.DynamoDB.transactGetItems\n   * @example Get items from multiple tables\n   *  var params = {\n   *    TransactItems: [{\n   *      Get: {\n   *        TableName : 'Table0',\n   *        Key: {\n   *          HashKey: 'hashkey0'\n   *        }\n   *      }\n   *    }, {\n   *      Get: {\n   *        TableName : 'Table1',\n   *        Key: {\n   *          HashKey: 'hashkey1'\n   *        }\n   *      }\n   *    }]\n   *  };\n   *\n   *  documentClient.transactGet(params, function(err, data) {\n   *    if (err) console.log(err);\n   *    else console.log(data);\n   *  });\n   */\n  transactGet: function(params, callback) {\n    var operation = this.serviceClientOperationsMap['transactGet'];\n    return this.makeServiceRequest(operation, params, callback);\n  },\n\n  /**\n   * Creates a set of elements inferring the type of set from\n   * the type of the first element. Amazon DynamoDB currently supports\n   * the number sets, string sets, and binary sets. For more information\n   * about DynamoDB data types see the documentation on the\n   * [Amazon DynamoDB Data Model](http://docs.aws.amazon.com/amazondynamodb/latest/developerguide/DataModel.html#DataModel.DataTypes).\n   *\n   * @param list [Array] Collection to represent your DynamoDB Set\n   * @param options [map]\n   *  * **validate** [Boolean] set to true if you want to validate the type\n   *    of each element in the set. Defaults to `false`.\n   * @example Creating a number set\n   *  var documentClient = new AWS.DynamoDB.DocumentClient();\n   *\n   *  var params = {\n   *    Item: {\n   *      hashkey: 'hashkey'\n   *      numbers: documentClient.createSet([1, 2, 3]);\n   *    }\n   *  };\n   *\n   *  documentClient.put(params, function(err, data) {\n   *    if (err) console.log(err);\n   *    else console.log(data);\n   *  });\n   *\n   */\n  createSet: function(list, options) {\n    options = options || {};\n    return new DynamoDBSet(list, options);\n  },\n\n  /**\n   * @api private\n   */\n  getTranslator: function() {\n    return new Translator(this.options);\n  },\n\n  /**\n   * @api private\n   */\n  setupRequest: function setupRequest(request) {\n    var self = this;\n    var translator = self.getTranslator();\n    var operation = request.operation;\n    var inputShape = request.service.api.operations[operation].input;\n    request._events.validate.unshift(function(req) {\n      req.rawParams = AWS.util.copy(req.params);\n      req.params = translator.translateInput(req.rawParams, inputShape);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  setupResponse: function setupResponse(request) {\n    var self = this;\n    var translator = self.getTranslator();\n    var outputShape = self.service.api.operations[request.operation].output;\n    request.on('extractData', function(response) {\n      response.data = translator.translateOutput(response.data, outputShape);\n    });\n\n    var response = request.response;\n    response.nextPage = function(cb) {\n      var resp = this;\n      var req = resp.request;\n      var config;\n      var service = req.service;\n      var operation = req.operation;\n      try {\n        config = service.paginationConfig(operation, true);\n      } catch (e) { resp.error = e; }\n\n      if (!resp.hasNextPage()) {\n        if (cb) cb(resp.error, null);\n        else if (resp.error) throw resp.error;\n        return null;\n      }\n\n      var params = AWS.util.copy(req.rawParams);\n      if (!resp.nextPageTokens) {\n        return cb ? cb(null, null) : null;\n      } else {\n        var inputTokens = config.inputToken;\n        if (typeof inputTokens === 'string') inputTokens = [inputTokens];\n        for (var i = 0; i < inputTokens.length; i++) {\n          params[inputTokens[i]] = resp.nextPageTokens[i];\n        }\n        return self[operation](params, cb);\n      }\n    };\n  }\n\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.DynamoDB.DocumentClient;\n","var util = require('../core').util;\n\n/**\n * An object recognizable as a numeric value that stores the underlying number\n * as a string.\n *\n * Intended to be a deserialization target for the DynamoDB Document Client when\n * the `wrapNumbers` flag is set. This allows for numeric values that lose\n * precision when converted to JavaScript's `number` type.\n */\nvar DynamoDBNumberValue = util.inherit({\n  constructor: function NumberValue(value) {\n    this.wrapperName = 'NumberValue';\n    this.value = value.toString();\n  },\n\n  /**\n   * Render the underlying value as a number when converting to JSON.\n   */\n  toJSON: function () {\n    return this.toNumber();\n  },\n\n  /**\n   * Convert the underlying value to a JavaScript number.\n   */\n  toNumber: function () {\n    return Number(this.value);\n  },\n\n  /**\n   * Return a string representing the unaltered value provided to the\n   * constructor.\n   */\n  toString: function () {\n    return this.value;\n  }\n});\n\n/**\n * @api private\n */\nmodule.exports = DynamoDBNumberValue;\n","var util = require('../core').util;\nvar typeOf = require('./types').typeOf;\n\n/**\n * @api private\n */\nvar memberTypeToSetType = {\n  'String': 'String',\n  'Number': 'Number',\n  'NumberValue': 'Number',\n  'Binary': 'Binary'\n};\n\n/**\n * @api private\n */\nvar DynamoDBSet = util.inherit({\n\n  constructor: function Set(list, options) {\n    options = options || {};\n    this.wrapperName = 'Set';\n    this.initialize(list, options.validate);\n  },\n\n  initialize: function(list, validate) {\n    var self = this;\n    self.values = [].concat(list);\n    self.detectType();\n    if (validate) {\n      self.validate();\n    }\n  },\n\n  detectType: function() {\n    this.type = memberTypeToSetType[typeOf(this.values[0])];\n    if (!this.type) {\n      throw util.error(new Error(), {\n        code: 'InvalidSetType',\n        message: 'Sets can contain string, number, or binary values'\n      });\n    }\n  },\n\n  validate: function() {\n    var self = this;\n    var length = self.values.length;\n    var values = self.values;\n    for (var i = 0; i < length; i++) {\n      if (memberTypeToSetType[typeOf(values[i])] !== self.type) {\n        throw util.error(new Error(), {\n          code: 'InvalidType',\n          message: self.type + ' Set contains ' + typeOf(values[i]) + ' value'\n        });\n      }\n    }\n  },\n\n  /**\n   * Render the underlying values only when converting to JSON.\n   */\n  toJSON: function() {\n    var self = this;\n    return self.values;\n  }\n\n});\n\n/**\n * @api private\n */\nmodule.exports = DynamoDBSet;\n","var util = require('../core').util;\nvar convert = require('./converter');\n\nvar Translator = function(options) {\n  options = options || {};\n  this.attrValue = options.attrValue;\n  this.convertEmptyValues = Boolean(options.convertEmptyValues);\n  this.wrapNumbers = Boolean(options.wrapNumbers);\n};\n\nTranslator.prototype.translateInput = function(value, shape) {\n  this.mode = 'input';\n  return this.translate(value, shape);\n};\n\nTranslator.prototype.translateOutput = function(value, shape) {\n  this.mode = 'output';\n  return this.translate(value, shape);\n};\n\nTranslator.prototype.translate = function(value, shape) {\n  var self = this;\n  if (!shape || value === undefined) return undefined;\n\n  if (shape.shape === self.attrValue) {\n    return convert[self.mode](value, {\n      convertEmptyValues: self.convertEmptyValues,\n      wrapNumbers: self.wrapNumbers,\n    });\n  }\n  switch (shape.type) {\n    case 'structure': return self.translateStructure(value, shape);\n    case 'map': return self.translateMap(value, shape);\n    case 'list': return self.translateList(value, shape);\n    default: return self.translateScalar(value, shape);\n  }\n};\n\nTranslator.prototype.translateStructure = function(structure, shape) {\n  var self = this;\n  if (structure == null) return undefined;\n\n  var struct = {};\n  util.each(structure, function(name, value) {\n    var memberShape = shape.members[name];\n    if (memberShape) {\n      var result = self.translate(value, memberShape);\n      if (result !== undefined) struct[name] = result;\n    }\n  });\n  return struct;\n};\n\nTranslator.prototype.translateList = function(list, shape) {\n  var self = this;\n  if (list == null) return undefined;\n\n  var out = [];\n  util.arrayEach(list, function(value) {\n    var result = self.translate(value, shape.member);\n    if (result === undefined) out.push(null);\n    else out.push(result);\n  });\n  return out;\n};\n\nTranslator.prototype.translateMap = function(map, shape) {\n  var self = this;\n  if (map == null) return undefined;\n\n  var out = {};\n  util.each(map, function(key, value) {\n    var result = self.translate(value, shape.value);\n    if (result === undefined) out[key] = null;\n    else out[key] = result;\n  });\n  return out;\n};\n\nTranslator.prototype.translateScalar = function(value, shape) {\n  return shape.toType(value);\n};\n\n/**\n * @api private\n */\nmodule.exports = Translator;\n","var util = require('../core').util;\n\nfunction typeOf(data) {\n  if (data === null && typeof data === 'object') {\n    return 'null';\n  } else if (data !== undefined && isBinary(data)) {\n    return 'Binary';\n  } else if (data !== undefined && data.constructor) {\n    return data.wrapperName || util.typeName(data.constructor);\n  } else if (data !== undefined && typeof data === 'object') {\n    // this object is the result of Object.create(null), hence the absence of a\n    // defined constructor\n    return 'Object';\n  } else {\n    return 'undefined';\n  }\n}\n\nfunction isBinary(data) {\n  var types = [\n    'Buffer', 'File', 'Blob', 'ArrayBuffer', 'DataView',\n    'Int8Array', 'Uint8Array', 'Uint8ClampedArray',\n    'Int16Array', 'Uint16Array', 'Int32Array', 'Uint32Array',\n    'Float32Array', 'Float64Array'\n  ];\n  if (util.isNode()) {\n    var Stream = util.stream.Stream;\n    if (util.Buffer.isBuffer(data) || data instanceof Stream) {\n      return true;\n    }\n  }\n\n  for (var i = 0; i < types.length; i++) {\n    if (data !== undefined && data.constructor) {\n      if (util.isType(data, types[i])) return true;\n      if (util.typeName(data.constructor) === types[i]) return true;\n    }\n  }\n\n  return false;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  typeOf: typeOf,\n  isBinary: isBinary\n};\n","var eventMessageChunker = require('../event-stream/event-message-chunker').eventMessageChunker;\nvar parseEvent = require('./parse-event').parseEvent;\n\nfunction createEventStream(body, parser, model) {\n    var eventMessages = eventMessageChunker(body);\n\n    var events = [];\n\n    for (var i = 0; i < eventMessages.length; i++) {\n        events.push(parseEvent(parser, eventMessages[i], model));\n    }\n\n    return events;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    createEventStream: createEventStream\n};\n","var util = require('../core').util;\nvar Transform = require('stream').Transform;\nvar allocBuffer = util.buffer.alloc;\n\n/** @type {Transform} */\nfunction EventMessageChunkerStream(options) {\n    Transform.call(this, options);\n\n    this.currentMessageTotalLength = 0;\n    this.currentMessagePendingLength = 0;\n    /** @type {Buffer} */\n    this.currentMessage = null;\n\n    /** @type {Buffer} */\n    this.messageLengthBuffer = null;\n}\n\nEventMessageChunkerStream.prototype = Object.create(Transform.prototype);\n\n/**\n *\n * @param {Buffer} chunk\n * @param {string} encoding\n * @param {*} callback\n */\nEventMessageChunkerStream.prototype._transform = function(chunk, encoding, callback) {\n    var chunkLength = chunk.length;\n    var currentOffset = 0;\n\n    while (currentOffset < chunkLength) {\n        // create new message if necessary\n        if (!this.currentMessage) {\n            // working on a new message, determine total length\n            var bytesRemaining = chunkLength - currentOffset;\n            // prevent edge case where total length spans 2 chunks\n            if (!this.messageLengthBuffer) {\n                this.messageLengthBuffer = allocBuffer(4);\n            }\n            var numBytesForTotal = Math.min(\n                4 - this.currentMessagePendingLength, // remaining bytes to fill the messageLengthBuffer\n                bytesRemaining // bytes left in chunk\n            );\n\n            chunk.copy(\n                this.messageLengthBuffer,\n                this.currentMessagePendingLength,\n                currentOffset,\n                currentOffset + numBytesForTotal\n            );\n\n            this.currentMessagePendingLength += numBytesForTotal;\n            currentOffset += numBytesForTotal;\n\n            if (this.currentMessagePendingLength < 4) {\n                // not enough information to create the current message\n                break;\n            }\n            this.allocateMessage(this.messageLengthBuffer.readUInt32BE(0));\n            this.messageLengthBuffer = null;\n        }\n\n        // write data into current message\n        var numBytesToWrite = Math.min(\n            this.currentMessageTotalLength - this.currentMessagePendingLength, // number of bytes left to complete message\n            chunkLength - currentOffset // number of bytes left in the original chunk\n        );\n        chunk.copy(\n            this.currentMessage, // target buffer\n            this.currentMessagePendingLength, // target offset\n            currentOffset, // chunk offset\n            currentOffset + numBytesToWrite // chunk end to write\n        );\n        this.currentMessagePendingLength += numBytesToWrite;\n        currentOffset += numBytesToWrite;\n\n        // check if a message is ready to be pushed\n        if (this.currentMessageTotalLength && this.currentMessageTotalLength === this.currentMessagePendingLength) {\n            // push out the message\n            this.push(this.currentMessage);\n            // cleanup\n            this.currentMessage = null;\n            this.currentMessageTotalLength = 0;\n            this.currentMessagePendingLength = 0;\n        }\n    }\n\n    callback();\n};\n\nEventMessageChunkerStream.prototype._flush = function(callback) {\n    if (this.currentMessageTotalLength) {\n        if (this.currentMessageTotalLength === this.currentMessagePendingLength) {\n            callback(null, this.currentMessage);\n        } else {\n            callback(new Error('Truncated event message received.'));\n        }\n    } else {\n        callback();\n    }\n};\n\n/**\n * @param {number} size Size of the message to be allocated.\n * @api private\n */\nEventMessageChunkerStream.prototype.allocateMessage = function(size) {\n    if (typeof size !== 'number') {\n        throw new Error('Attempted to allocate an event message where size was not a number: ' + size);\n    }\n    this.currentMessageTotalLength = size;\n    this.currentMessagePendingLength = 4;\n    this.currentMessage = allocBuffer(size);\n    this.currentMessage.writeUInt32BE(size, 0);\n};\n\n/**\n * @api private\n */\nmodule.exports = {\n    EventMessageChunkerStream: EventMessageChunkerStream\n};\n","/**\n * Takes in a buffer of event messages and splits them into individual messages.\n * @param {Buffer} buffer\n * @api private\n */\nfunction eventMessageChunker(buffer) {\n    /** @type Buffer[] */\n    var messages = [];\n    var offset = 0;\n\n    while (offset < buffer.length) {\n        var totalLength = buffer.readInt32BE(offset);\n\n        // create new buffer for individual message (shares memory with original)\n        var message = buffer.slice(offset, totalLength + offset);\n        // increment offset to it starts at the next message\n        offset += totalLength;\n\n        messages.push(message);\n    }\n\n    return messages;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    eventMessageChunker: eventMessageChunker\n};\n","var Transform = require('stream').Transform;\nvar parseEvent = require('./parse-event').parseEvent;\n\n/** @type {Transform} */\nfunction EventUnmarshallerStream(options) {\n    options = options || {};\n    // set output to object mode\n    options.readableObjectMode = true;\n    Transform.call(this, options);\n    this._readableState.objectMode = true;\n\n    this.parser = options.parser;\n    this.eventStreamModel = options.eventStreamModel;\n}\n\nEventUnmarshallerStream.prototype = Object.create(Transform.prototype);\n\n/**\n *\n * @param {Buffer} chunk\n * @param {string} encoding\n * @param {*} callback\n */\nEventUnmarshallerStream.prototype._transform = function(chunk, encoding, callback) {\n    try {\n        var event = parseEvent(this.parser, chunk, this.eventStreamModel);\n        this.push(event);\n        return callback();\n    } catch (err) {\n        callback(err);\n    }\n};\n\n/**\n * @api private\n */\nmodule.exports = {\n    EventUnmarshallerStream: EventUnmarshallerStream\n};\n","var util = require('../core').util;\nvar toBuffer = util.buffer.toBuffer;\n\n/**\n * A lossless representation of a signed, 64-bit integer. Instances of this\n * class may be used in arithmetic expressions as if they were numeric\n * primitives, but the binary representation will be preserved unchanged as the\n * `bytes` property of the object. The bytes should be encoded as big-endian,\n * two's complement integers.\n * @param {Buffer} bytes\n *\n * @api private\n */\nfunction Int64(bytes) {\n    if (bytes.length !== 8) {\n        throw new Error('Int64 buffers must be exactly 8 bytes');\n    }\n    if (!util.Buffer.isBuffer(bytes)) bytes = toBuffer(bytes);\n\n    this.bytes = bytes;\n}\n\n/**\n * @param {number} number\n * @returns {Int64}\n *\n * @api private\n */\nInt64.fromNumber = function(number) {\n    if (number > 9223372036854775807 || number < -9223372036854775808) {\n        throw new Error(\n            number + ' is too large (or, if negative, too small) to represent as an Int64'\n        );\n    }\n\n    var bytes = new Uint8Array(8);\n    for (\n        var i = 7, remaining = Math.abs(Math.round(number));\n        i > -1 && remaining > 0;\n        i--, remaining /= 256\n    ) {\n        bytes[i] = remaining;\n    }\n\n    if (number < 0) {\n        negate(bytes);\n    }\n\n    return new Int64(bytes);\n};\n\n/**\n * @returns {number}\n *\n * @api private\n */\nInt64.prototype.valueOf = function() {\n    var bytes = this.bytes.slice(0);\n    var negative = bytes[0] & 128;\n    if (negative) {\n        negate(bytes);\n    }\n\n    return parseInt(bytes.toString('hex'), 16) * (negative ? -1 : 1);\n};\n\nInt64.prototype.toString = function() {\n    return String(this.valueOf());\n};\n\n/**\n * @param {Buffer} bytes\n *\n * @api private\n */\nfunction negate(bytes) {\n    for (var i = 0; i < 8; i++) {\n        bytes[i] ^= 0xFF;\n    }\n    for (var i = 7; i > -1; i--) {\n        bytes[i]++;\n        if (bytes[i] !== 0) {\n            break;\n        }\n    }\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    Int64: Int64\n};\n","var parseMessage = require('./parse-message').parseMessage;\n\n/**\n *\n * @param {*} parser\n * @param {Buffer} message\n * @param {*} shape\n * @api private\n */\nfunction parseEvent(parser, message, shape) {\n    var parsedMessage = parseMessage(message);\n\n    // check if message is an event or error\n    var messageType = parsedMessage.headers[':message-type'];\n    if (messageType) {\n        if (messageType.value === 'error') {\n            throw parseError(parsedMessage);\n        } else if (messageType.value !== 'event') {\n            // not sure how to parse non-events/non-errors, ignore for now\n            return;\n        }\n    }\n\n    // determine event type\n    var eventType = parsedMessage.headers[':event-type'];\n    // check that the event type is modeled\n    var eventModel = shape.members[eventType.value];\n    if (!eventModel) {\n        return;\n    }\n\n    var result = {};\n    // check if an event payload exists\n    var eventPayloadMemberName = eventModel.eventPayloadMemberName;\n    if (eventPayloadMemberName) {\n        var payloadShape = eventModel.members[eventPayloadMemberName];\n        // if the shape is binary, return the byte array\n        if (payloadShape.type === 'binary') {\n            result[eventPayloadMemberName] = parsedMessage.body;\n        } else {\n            result[eventPayloadMemberName] = parser.parse(parsedMessage.body.toString(), payloadShape);\n        }\n    }\n\n    // read event headers\n    var eventHeaderNames = eventModel.eventHeaderMemberNames;\n    for (var i = 0; i < eventHeaderNames.length; i++) {\n        var name = eventHeaderNames[i];\n        if (parsedMessage.headers[name]) {\n            // parse the header!\n            result[name] = eventModel.members[name].toType(parsedMessage.headers[name].value);\n        }\n    }\n\n    var output = {};\n    output[eventType.value] = result;\n    return output;\n}\n\nfunction parseError(message) {\n    var errorCode = message.headers[':error-code'];\n    var errorMessage = message.headers[':error-message'];\n    var error = new Error(errorMessage.value || errorMessage);\n    error.code = error.name = errorCode.value || errorCode;\n    return error;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    parseEvent: parseEvent\n};\n","var Int64 = require('./int64').Int64;\n\nvar splitMessage = require('./split-message').splitMessage;\n\nvar BOOLEAN_TAG = 'boolean';\nvar BYTE_TAG = 'byte';\nvar SHORT_TAG = 'short';\nvar INT_TAG = 'integer';\nvar LONG_TAG = 'long';\nvar BINARY_TAG = 'binary';\nvar STRING_TAG = 'string';\nvar TIMESTAMP_TAG = 'timestamp';\nvar UUID_TAG = 'uuid';\n\n/**\n * @api private\n *\n * @param {Buffer} headers\n */\nfunction parseHeaders(headers) {\n    var out = {};\n    var position = 0;\n    while (position < headers.length) {\n        var nameLength = headers.readUInt8(position++);\n        var name = headers.slice(position, position + nameLength).toString();\n        position += nameLength;\n        switch (headers.readUInt8(position++)) {\n            case 0 /* boolTrue */:\n                out[name] = {\n                    type: BOOLEAN_TAG,\n                    value: true\n                };\n                break;\n            case 1 /* boolFalse */:\n                out[name] = {\n                    type: BOOLEAN_TAG,\n                    value: false\n                };\n                break;\n            case 2 /* byte */:\n                out[name] = {\n                    type: BYTE_TAG,\n                    value: headers.readInt8(position++)\n                };\n                break;\n            case 3 /* short */:\n                out[name] = {\n                    type: SHORT_TAG,\n                    value: headers.readInt16BE(position)\n                };\n                position += 2;\n                break;\n            case 4 /* integer */:\n                out[name] = {\n                    type: INT_TAG,\n                    value: headers.readInt32BE(position)\n                };\n                position += 4;\n                break;\n            case 5 /* long */:\n                out[name] = {\n                    type: LONG_TAG,\n                    value: new Int64(headers.slice(position, position + 8))\n                };\n                position += 8;\n                break;\n            case 6 /* byteArray */:\n                var binaryLength = headers.readUInt16BE(position);\n                position += 2;\n                out[name] = {\n                    type: BINARY_TAG,\n                    value: headers.slice(position, position + binaryLength)\n                };\n                position += binaryLength;\n                break;\n            case 7 /* string */:\n                var stringLength = headers.readUInt16BE(position);\n                position += 2;\n                out[name] = {\n                    type: STRING_TAG,\n                    value: headers.slice(\n                        position,\n                        position + stringLength\n                    ).toString()\n                };\n                position += stringLength;\n                break;\n            case 8 /* timestamp */:\n                out[name] = {\n                    type: TIMESTAMP_TAG,\n                    value: new Date(\n                        new Int64(headers.slice(position, position + 8))\n                            .valueOf()\n                    )\n                };\n                position += 8;\n                break;\n            case 9 /* uuid */:\n                var uuidChars = headers.slice(position, position + 16)\n                    .toString('hex');\n                position += 16;\n                out[name] = {\n                    type: UUID_TAG,\n                    value: uuidChars.substr(0, 8) + '-' +\n                        uuidChars.substr(8, 4) + '-' +\n                        uuidChars.substr(12, 4) + '-' +\n                        uuidChars.substr(16, 4) + '-' +\n                        uuidChars.substr(20)\n                };\n                break;\n            default:\n                throw new Error('Unrecognized header type tag');\n        }\n    }\n    return out;\n}\n\nfunction parseMessage(message) {\n    var parsed = splitMessage(message);\n    return { headers: parseHeaders(parsed.headers), body: parsed.body };\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    parseMessage: parseMessage\n};\n","var util = require('../core').util;\nvar toBuffer = util.buffer.toBuffer;\n\n// All prelude components are unsigned, 32-bit integers\nvar PRELUDE_MEMBER_LENGTH = 4;\n// The prelude consists of two components\nvar PRELUDE_LENGTH = PRELUDE_MEMBER_LENGTH * 2;\n// Checksums are always CRC32 hashes.\nvar CHECKSUM_LENGTH = 4;\n// Messages must include a full prelude, a prelude checksum, and a message checksum\nvar MINIMUM_MESSAGE_LENGTH = PRELUDE_LENGTH + CHECKSUM_LENGTH * 2;\n\n/**\n * @api private\n *\n * @param {Buffer} message\n */\nfunction splitMessage(message) {\n    if (!util.Buffer.isBuffer(message)) message = toBuffer(message);\n\n    if (message.length < MINIMUM_MESSAGE_LENGTH) {\n        throw new Error('Provided message too short to accommodate event stream message overhead');\n    }\n\n    if (message.length !== message.readUInt32BE(0)) {\n        throw new Error('Reported message length does not match received message length');\n    }\n\n    var expectedPreludeChecksum = message.readUInt32BE(PRELUDE_LENGTH);\n\n    if (\n        expectedPreludeChecksum !== util.crypto.crc32(\n            message.slice(0, PRELUDE_LENGTH)\n        )\n    ) {\n        throw new Error(\n            'The prelude checksum specified in the message (' +\n            expectedPreludeChecksum +\n            ') does not match the calculated CRC32 checksum.'\n        );\n    }\n\n    var expectedMessageChecksum = message.readUInt32BE(message.length - CHECKSUM_LENGTH);\n\n    if (\n        expectedMessageChecksum !== util.crypto.crc32(\n            message.slice(0, message.length - CHECKSUM_LENGTH)\n        )\n    ) {\n        throw new Error(\n            'The message checksum did not match the expected value of ' +\n                expectedMessageChecksum\n        );\n    }\n\n    var headersStart = PRELUDE_LENGTH + CHECKSUM_LENGTH;\n    var headersEnd = headersStart + message.readUInt32BE(PRELUDE_MEMBER_LENGTH);\n\n    return {\n        headers: message.slice(headersStart, headersEnd),\n        body: message.slice(headersEnd, message.length - CHECKSUM_LENGTH),\n    };\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    splitMessage: splitMessage\n};\n","/**\n * What is necessary to create an event stream in node?\n *  - http response stream\n *  - parser\n *  - event stream model\n */\n\nvar EventMessageChunkerStream = require('../event-stream/event-message-chunker-stream').EventMessageChunkerStream;\nvar EventUnmarshallerStream = require('../event-stream/event-message-unmarshaller-stream').EventUnmarshallerStream;\n\nfunction createEventStream(stream, parser, model) {\n    var eventStream = new EventUnmarshallerStream({\n        parser: parser,\n        eventStreamModel: model\n    });\n\n    var eventMessageChunker = new EventMessageChunkerStream();\n\n    stream.pipe(\n        eventMessageChunker\n    ).pipe(eventStream);\n\n    stream.on('error', function(err) {\n        eventMessageChunker.emit('error', err);\n    });\n\n    eventMessageChunker.on('error', function(err) {\n        eventStream.emit('error', err);\n    });\n\n    return eventStream;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    createEventStream: createEventStream\n};\n","var AWS = require('./core');\nvar SequentialExecutor = require('./sequential_executor');\nvar DISCOVER_ENDPOINT = require('./discover_endpoint').discoverEndpoint;\n/**\n * The namespace used to register global event listeners for request building\n * and sending.\n */\nAWS.EventListeners = {\n  /**\n   * @!attribute VALIDATE_CREDENTIALS\n   *   A request listener that validates whether the request is being\n   *   sent with credentials.\n   *   Handles the {AWS.Request~validate 'validate' Request event}\n   *   @example Sending a request without validating credentials\n   *     var listener = AWS.EventListeners.Core.VALIDATE_CREDENTIALS;\n   *     request.removeListener('validate', listener);\n   *   @readonly\n   *   @return [Function]\n   * @!attribute VALIDATE_REGION\n   *   A request listener that validates whether the region is set\n   *   for a request.\n   *   Handles the {AWS.Request~validate 'validate' Request event}\n   *   @example Sending a request without validating region configuration\n   *     var listener = AWS.EventListeners.Core.VALIDATE_REGION;\n   *     request.removeListener('validate', listener);\n   *   @readonly\n   *   @return [Function]\n   * @!attribute VALIDATE_PARAMETERS\n   *   A request listener that validates input parameters in a request.\n   *   Handles the {AWS.Request~validate 'validate' Request event}\n   *   @example Sending a request without validating parameters\n   *     var listener = AWS.EventListeners.Core.VALIDATE_PARAMETERS;\n   *     request.removeListener('validate', listener);\n   *   @example Disable parameter validation globally\n   *     AWS.EventListeners.Core.removeListener('validate',\n   *       AWS.EventListeners.Core.VALIDATE_REGION);\n   *   @readonly\n   *   @return [Function]\n   * @!attribute SEND\n   *   A request listener that initiates the HTTP connection for a\n   *   request being sent. Handles the {AWS.Request~send 'send' Request event}\n   *   @example Replacing the HTTP handler\n   *     var listener = AWS.EventListeners.Core.SEND;\n   *     request.removeListener('send', listener);\n   *     request.on('send', function(response) {\n   *       customHandler.send(response);\n   *     });\n   *   @return [Function]\n   *   @readonly\n   * @!attribute HTTP_DATA\n   *   A request listener that reads data from the HTTP connection in order\n   *   to build the response data.\n   *   Handles the {AWS.Request~httpData 'httpData' Request event}.\n   *   Remove this handler if you are overriding the 'httpData' event and\n   *   do not want extra data processing and buffering overhead.\n   *   @example Disabling default data processing\n   *     var listener = AWS.EventListeners.Core.HTTP_DATA;\n   *     request.removeListener('httpData', listener);\n   *   @return [Function]\n   *   @readonly\n   */\n  Core: {} /* doc hack */\n};\n\n/**\n * @api private\n */\nfunction getOperationAuthtype(req) {\n  if (!req.service.api.operations) {\n    return '';\n  }\n  var operation = req.service.api.operations[req.operation];\n  return operation ? operation.authtype : '';\n}\n\nAWS.EventListeners = {\n  Core: new SequentialExecutor().addNamedListeners(function(add, addAsync) {\n    addAsync('VALIDATE_CREDENTIALS', 'validate',\n        function VALIDATE_CREDENTIALS(req, done) {\n      if (!req.service.api.signatureVersion && !req.service.config.signatureVersion) return done(); // none\n      req.service.config.getCredentials(function(err) {\n        if (err) {\n          req.response.error = AWS.util.error(err,\n            {code: 'CredentialsError', message: 'Missing credentials in config, if using AWS_CONFIG_FILE, set AWS_SDK_LOAD_CONFIG=1'});\n        }\n        done();\n      });\n    });\n\n    add('VALIDATE_REGION', 'validate', function VALIDATE_REGION(req) {\n      if (!req.service.isGlobalEndpoint) {\n        var dnsHostRegex = new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/);\n        if (!req.service.config.region) {\n          req.response.error = AWS.util.error(new Error(),\n            {code: 'ConfigError', message: 'Missing region in config'});\n        } else if (!dnsHostRegex.test(req.service.config.region)) {\n          req.response.error = AWS.util.error(new Error(),\n            {code: 'ConfigError', message: 'Invalid region in config'});\n        }\n      }\n    });\n\n    add('BUILD_IDEMPOTENCY_TOKENS', 'validate', function BUILD_IDEMPOTENCY_TOKENS(req) {\n      if (!req.service.api.operations) {\n        return;\n      }\n      var operation = req.service.api.operations[req.operation];\n      if (!operation) {\n        return;\n      }\n      var idempotentMembers = operation.idempotentMembers;\n      if (!idempotentMembers.length) {\n        return;\n      }\n      // creates a copy of params so user's param object isn't mutated\n      var params = AWS.util.copy(req.params);\n      for (var i = 0, iLen = idempotentMembers.length; i < iLen; i++) {\n        if (!params[idempotentMembers[i]]) {\n          // add the member\n          params[idempotentMembers[i]] = AWS.util.uuid.v4();\n        }\n      }\n      req.params = params;\n    });\n\n    add('VALIDATE_PARAMETERS', 'validate', function VALIDATE_PARAMETERS(req) {\n      if (!req.service.api.operations) {\n        return;\n      }\n      var rules = req.service.api.operations[req.operation].input;\n      var validation = req.service.config.paramValidation;\n      new AWS.ParamValidator(validation).validate(rules, req.params);\n    });\n\n    addAsync('COMPUTE_SHA256', 'afterBuild', function COMPUTE_SHA256(req, done) {\n      req.haltHandlersOnError();\n      if (!req.service.api.operations) {\n        return;\n      }\n      var operation = req.service.api.operations[req.operation];\n      var authtype = operation ? operation.authtype : '';\n      if (!req.service.api.signatureVersion && !authtype && !req.service.config.signatureVersion) return done(); // none\n      if (req.service.getSignerClass(req) === AWS.Signers.V4) {\n        var body = req.httpRequest.body || '';\n        if (authtype.indexOf('unsigned-body') >= 0) {\n          req.httpRequest.headers['X-Amz-Content-Sha256'] = 'UNSIGNED-PAYLOAD';\n          return done();\n        }\n        AWS.util.computeSha256(body, function(err, sha) {\n          if (err) {\n            done(err);\n          }\n          else {\n            req.httpRequest.headers['X-Amz-Content-Sha256'] = sha;\n            done();\n          }\n        });\n      } else {\n        done();\n      }\n    });\n\n    add('SET_CONTENT_LENGTH', 'afterBuild', function SET_CONTENT_LENGTH(req) {\n      var authtype = getOperationAuthtype(req);\n      var payloadMember = AWS.util.getRequestPayloadShape(req);\n      if (req.httpRequest.headers['Content-Length'] === undefined) {\n        try {\n          var length = AWS.util.string.byteLength(req.httpRequest.body);\n          req.httpRequest.headers['Content-Length'] = length;\n        } catch (err) {\n          if (payloadMember && payloadMember.isStreaming) {\n            if (payloadMember.requiresLength) {\n              //streaming payload requires length(s3, glacier)\n              throw err;\n            } else if (authtype.indexOf('unsigned-body') >= 0) {\n              //unbounded streaming payload(lex, mediastore)\n              req.httpRequest.headers['Transfer-Encoding'] = 'chunked';\n              return;\n            } else {\n              throw err;\n            }\n          }\n          throw err;\n        }\n      }\n    });\n\n    add('SET_HTTP_HOST', 'afterBuild', function SET_HTTP_HOST(req) {\n      req.httpRequest.headers['Host'] = req.httpRequest.endpoint.host;\n    });\n\n    add('RESTART', 'restart', function RESTART() {\n      var err = this.response.error;\n      if (!err || !err.retryable) return;\n\n      this.httpRequest = new AWS.HttpRequest(\n        this.service.endpoint,\n        this.service.region\n      );\n\n      if (this.response.retryCount < this.service.config.maxRetries) {\n        this.response.retryCount++;\n      } else {\n        this.response.error = null;\n      }\n    });\n\n    var addToHead = true;\n    addAsync('DISCOVER_ENDPOINT', 'sign', DISCOVER_ENDPOINT, addToHead);\n\n    addAsync('SIGN', 'sign', function SIGN(req, done) {\n      var service = req.service;\n      var operations = req.service.api.operations || {};\n      var operation = operations[req.operation];\n      var authtype = operation ? operation.authtype : '';\n      if (!service.api.signatureVersion && !authtype && !service.config.signatureVersion) return done(); // none\n\n      service.config.getCredentials(function (err, credentials) {\n        if (err) {\n          req.response.error = err;\n          return done();\n        }\n\n        try {\n          var date = service.getSkewCorrectedDate();\n          var SignerClass = service.getSignerClass(req);\n          var signer = new SignerClass(req.httpRequest,\n            service.getSigningName(),\n            {\n              signatureCache: service.config.signatureCache,\n              operation: operation,\n              signatureVersion: service.api.signatureVersion\n            });\n          signer.setServiceClientId(service._clientId);\n\n          // clear old authorization headers\n          delete req.httpRequest.headers['Authorization'];\n          delete req.httpRequest.headers['Date'];\n          delete req.httpRequest.headers['X-Amz-Date'];\n\n          // add new authorization\n          signer.addAuthorization(credentials, date);\n          req.signedAt = date;\n        } catch (e) {\n          req.response.error = e;\n        }\n        done();\n      });\n    });\n\n    add('VALIDATE_RESPONSE', 'validateResponse', function VALIDATE_RESPONSE(resp) {\n      if (this.service.successfulResponse(resp, this)) {\n        resp.data = {};\n        resp.error = null;\n      } else {\n        resp.data = null;\n        resp.error = AWS.util.error(new Error(),\n          {code: 'UnknownError', message: 'An unknown error occurred.'});\n      }\n    });\n\n    addAsync('SEND', 'send', function SEND(resp, done) {\n      resp.httpResponse._abortCallback = done;\n      resp.error = null;\n      resp.data = null;\n\n      function callback(httpResp) {\n        resp.httpResponse.stream = httpResp;\n        var stream = resp.request.httpRequest.stream;\n        var service = resp.request.service;\n        var api = service.api;\n        var operationName = resp.request.operation;\n        var operation = api.operations[operationName] || {};\n\n        httpResp.on('headers', function onHeaders(statusCode, headers, statusMessage) {\n          resp.request.emit(\n            'httpHeaders',\n            [statusCode, headers, resp, statusMessage]\n          );\n\n          if (!resp.httpResponse.streaming) {\n            if (AWS.HttpClient.streamsApiVersion === 2) { // streams2 API check\n              // if we detect event streams, we're going to have to\n              // return the stream immediately\n              if (operation.hasEventOutput && service.successfulResponse(resp)) {\n                // skip reading the IncomingStream\n                resp.request.emit('httpDone');\n                done();\n                return;\n              }\n\n              httpResp.on('readable', function onReadable() {\n                var data = httpResp.read();\n                if (data !== null) {\n                  resp.request.emit('httpData', [data, resp]);\n                }\n              });\n            } else { // legacy streams API\n              httpResp.on('data', function onData(data) {\n                resp.request.emit('httpData', [data, resp]);\n              });\n            }\n          }\n        });\n\n        httpResp.on('end', function onEnd() {\n          if (!stream || !stream.didCallback) {\n            if (AWS.HttpClient.streamsApiVersion === 2 && (operation.hasEventOutput && service.successfulResponse(resp))) {\n              // don't concatenate response chunks when streaming event stream data when response is successful\n              return;\n            }\n            resp.request.emit('httpDone');\n            done();\n          }\n        });\n      }\n\n      function progress(httpResp) {\n        httpResp.on('sendProgress', function onSendProgress(value) {\n          resp.request.emit('httpUploadProgress', [value, resp]);\n        });\n\n        httpResp.on('receiveProgress', function onReceiveProgress(value) {\n          resp.request.emit('httpDownloadProgress', [value, resp]);\n        });\n      }\n\n      function error(err) {\n        if (err.code !== 'RequestAbortedError') {\n          var errCode = err.code === 'TimeoutError' ? err.code : 'NetworkingError';\n          err = AWS.util.error(err, {\n            code: errCode,\n            region: resp.request.httpRequest.region,\n            hostname: resp.request.httpRequest.endpoint.hostname,\n            retryable: true\n          });\n        }\n        resp.error = err;\n        resp.request.emit('httpError', [resp.error, resp], function() {\n          done();\n        });\n      }\n\n      function executeSend() {\n        var http = AWS.HttpClient.getInstance();\n        var httpOptions = resp.request.service.config.httpOptions || {};\n        try {\n          var stream = http.handleRequest(resp.request.httpRequest, httpOptions,\n                                          callback, error);\n          progress(stream);\n        } catch (err) {\n          error(err);\n        }\n      }\n      var timeDiff = (resp.request.service.getSkewCorrectedDate() - this.signedAt) / 1000;\n      if (timeDiff >= 60 * 10) { // if we signed 10min ago, re-sign\n        this.emit('sign', [this], function(err) {\n          if (err) done(err);\n          else executeSend();\n        });\n      } else {\n        executeSend();\n      }\n    });\n\n    add('HTTP_HEADERS', 'httpHeaders',\n        function HTTP_HEADERS(statusCode, headers, resp, statusMessage) {\n      resp.httpResponse.statusCode = statusCode;\n      resp.httpResponse.statusMessage = statusMessage;\n      resp.httpResponse.headers = headers;\n      resp.httpResponse.body = AWS.util.buffer.toBuffer('');\n      resp.httpResponse.buffers = [];\n      resp.httpResponse.numBytes = 0;\n      var dateHeader = headers.date || headers.Date;\n      var service = resp.request.service;\n      if (dateHeader) {\n        var serverTime = Date.parse(dateHeader);\n        if (service.config.correctClockSkew\n            && service.isClockSkewed(serverTime)) {\n          service.applyClockOffset(serverTime);\n        }\n      }\n    });\n\n    add('HTTP_DATA', 'httpData', function HTTP_DATA(chunk, resp) {\n      if (chunk) {\n        if (AWS.util.isNode()) {\n          resp.httpResponse.numBytes += chunk.length;\n\n          var total = resp.httpResponse.headers['content-length'];\n          var progress = { loaded: resp.httpResponse.numBytes, total: total };\n          resp.request.emit('httpDownloadProgress', [progress, resp]);\n        }\n\n        resp.httpResponse.buffers.push(AWS.util.buffer.toBuffer(chunk));\n      }\n    });\n\n    add('HTTP_DONE', 'httpDone', function HTTP_DONE(resp) {\n      // convert buffers array into single buffer\n      if (resp.httpResponse.buffers && resp.httpResponse.buffers.length > 0) {\n        var body = AWS.util.buffer.concat(resp.httpResponse.buffers);\n        resp.httpResponse.body = body;\n      }\n      delete resp.httpResponse.numBytes;\n      delete resp.httpResponse.buffers;\n    });\n\n    add('FINALIZE_ERROR', 'retry', function FINALIZE_ERROR(resp) {\n      if (resp.httpResponse.statusCode) {\n        resp.error.statusCode = resp.httpResponse.statusCode;\n        if (resp.error.retryable === undefined) {\n          resp.error.retryable = this.service.retryableError(resp.error, this);\n        }\n      }\n    });\n\n    add('INVALIDATE_CREDENTIALS', 'retry', function INVALIDATE_CREDENTIALS(resp) {\n      if (!resp.error) return;\n      switch (resp.error.code) {\n        case 'RequestExpired': // EC2 only\n        case 'ExpiredTokenException':\n        case 'ExpiredToken':\n          resp.error.retryable = true;\n          resp.request.service.config.credentials.expired = true;\n      }\n    });\n\n    add('EXPIRED_SIGNATURE', 'retry', function EXPIRED_SIGNATURE(resp) {\n      var err = resp.error;\n      if (!err) return;\n      if (typeof err.code === 'string' && typeof err.message === 'string') {\n        if (err.code.match(/Signature/) && err.message.match(/expired/)) {\n          resp.error.retryable = true;\n        }\n      }\n    });\n\n    add('CLOCK_SKEWED', 'retry', function CLOCK_SKEWED(resp) {\n      if (!resp.error) return;\n      if (this.service.clockSkewError(resp.error)\n          && this.service.config.correctClockSkew) {\n        resp.error.retryable = true;\n      }\n    });\n\n    add('REDIRECT', 'retry', function REDIRECT(resp) {\n      if (resp.error && resp.error.statusCode >= 300 &&\n          resp.error.statusCode < 400 && resp.httpResponse.headers['location']) {\n        this.httpRequest.endpoint =\n          new AWS.Endpoint(resp.httpResponse.headers['location']);\n        this.httpRequest.headers['Host'] = this.httpRequest.endpoint.host;\n        resp.error.redirect = true;\n        resp.error.retryable = true;\n      }\n    });\n\n    add('RETRY_CHECK', 'retry', function RETRY_CHECK(resp) {\n      if (resp.error) {\n        if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n          resp.error.retryDelay = 0;\n        } else if (resp.retryCount < resp.maxRetries) {\n          resp.error.retryDelay = this.service.retryDelays(resp.retryCount, resp.error) || 0;\n        }\n      }\n    });\n\n    addAsync('RESET_RETRY_STATE', 'afterRetry', function RESET_RETRY_STATE(resp, done) {\n      var delay, willRetry = false;\n\n      if (resp.error) {\n        delay = resp.error.retryDelay || 0;\n        if (resp.error.retryable && resp.retryCount < resp.maxRetries) {\n          resp.retryCount++;\n          willRetry = true;\n        } else if (resp.error.redirect && resp.redirectCount < resp.maxRedirects) {\n          resp.redirectCount++;\n          willRetry = true;\n        }\n      }\n\n      // delay < 0 is a signal from customBackoff to skip retries\n      if (willRetry && delay >= 0) {\n        resp.error = null;\n        setTimeout(done, delay);\n      } else {\n        done();\n      }\n    });\n  }),\n\n  CorePost: new SequentialExecutor().addNamedListeners(function(add) {\n    add('EXTRACT_REQUEST_ID', 'extractData', AWS.util.extractRequestId);\n    add('EXTRACT_REQUEST_ID', 'extractError', AWS.util.extractRequestId);\n\n    add('ENOTFOUND_ERROR', 'httpError', function ENOTFOUND_ERROR(err) {\n      function isDNSError(err) {\n        return err.errno === 'ENOTFOUND' ||\n          typeof err.errno === 'number' &&\n          typeof AWS.util.getSystemErrorName === 'function' &&\n          ['EAI_NONAME', 'EAI_NODATA'].indexOf(AWS.util.getSystemErrorName(err.errno) >= 0);\n      }\n      if (err.code === 'NetworkingError' && isDNSError(err)) {\n        var message = 'Inaccessible host: `' + err.hostname +\n          '\\'. This service may not be available in the `' + err.region +\n          '\\' region.';\n        this.response.error = AWS.util.error(new Error(message), {\n          code: 'UnknownEndpoint',\n          region: err.region,\n          hostname: err.hostname,\n          retryable: true,\n          originalError: err\n        });\n      }\n    });\n  }),\n\n  Logger: new SequentialExecutor().addNamedListeners(function(add) {\n    add('LOG_REQUEST', 'complete', function LOG_REQUEST(resp) {\n      var req = resp.request;\n      var logger = req.service.config.logger;\n      if (!logger) return;\n      function filterSensitiveLog(inputShape, shape) {\n        if (!shape) {\n          return shape;\n        }\n        if (inputShape.isSensitive) {\n          return '***SensitiveInformation***';\n        }\n        switch (inputShape.type) {\n          case 'structure':\n            var struct = {};\n            AWS.util.each(shape, function(subShapeName, subShape) {\n              if (Object.prototype.hasOwnProperty.call(inputShape.members, subShapeName)) {\n                struct[subShapeName] = filterSensitiveLog(inputShape.members[subShapeName], subShape);\n              } else {\n                struct[subShapeName] = subShape;\n              }\n            });\n            return struct;\n          case 'list':\n            var list = [];\n            AWS.util.arrayEach(shape, function(subShape, index) {\n              list.push(filterSensitiveLog(inputShape.member, subShape));\n            });\n            return list;\n          case 'map':\n            var map = {};\n            AWS.util.each(shape, function(key, value) {\n              map[key] = filterSensitiveLog(inputShape.value, value);\n            });\n            return map;\n          default:\n            return shape;\n        }\n      }\n\n      function buildMessage() {\n        var time = resp.request.service.getSkewCorrectedDate().getTime();\n        var delta = (time - req.startTime.getTime()) / 1000;\n        var ansi = logger.isTTY ? true : false;\n        var status = resp.httpResponse.statusCode;\n        var censoredParams = req.params;\n        if (\n          req.service.api.operations &&\n              req.service.api.operations[req.operation] &&\n              req.service.api.operations[req.operation].input\n        ) {\n          var inputShape = req.service.api.operations[req.operation].input;\n          censoredParams = filterSensitiveLog(inputShape, req.params);\n        }\n        var params = require('util').inspect(censoredParams, true, null);\n        var message = '';\n        if (ansi) message += '\\x1B[33m';\n        message += '[AWS ' + req.service.serviceIdentifier + ' ' + status;\n        message += ' ' + delta.toString() + 's ' + resp.retryCount + ' retries]';\n        if (ansi) message += '\\x1B[0;1m';\n        message += ' ' + AWS.util.string.lowerFirst(req.operation);\n        message += '(' + params + ')';\n        if (ansi) message += '\\x1B[0m';\n        return message;\n      }\n\n      var line = buildMessage();\n      if (typeof logger.log === 'function') {\n        logger.log(line);\n      } else if (typeof logger.write === 'function') {\n        logger.write(line + '\\n');\n      }\n    });\n  }),\n\n  Json: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/json');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n\n  Rest: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/rest');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n\n  RestJson: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/rest_json');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n\n  RestXml: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/rest_xml');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  }),\n\n  Query: new SequentialExecutor().addNamedListeners(function(add) {\n    var svc = require('./protocol/query');\n    add('BUILD', 'build', svc.buildRequest);\n    add('EXTRACT_DATA', 'extractData', svc.extractData);\n    add('EXTRACT_ERROR', 'extractError', svc.extractError);\n  })\n};\n","var AWS = require('./core');\nvar inherit = AWS.util.inherit;\n\n/**\n * The endpoint that a service will talk to, for example,\n * `'https://ec2.ap-southeast-1.amazonaws.com'`. If\n * you need to override an endpoint for a service, you can\n * set the endpoint on a service by passing the endpoint\n * object with the `endpoint` option key:\n *\n * ```javascript\n * var ep = new AWS.Endpoint('awsproxy.example.com');\n * var s3 = new AWS.S3({endpoint: ep});\n * s3.service.endpoint.hostname == 'awsproxy.example.com'\n * ```\n *\n * Note that if you do not specify a protocol, the protocol will\n * be selected based on your current {AWS.config} configuration.\n *\n * @!attribute protocol\n *   @return [String] the protocol (http or https) of the endpoint\n *     URL\n * @!attribute hostname\n *   @return [String] the host portion of the endpoint, e.g.,\n *     example.com\n * @!attribute host\n *   @return [String] the host portion of the endpoint including\n *     the port, e.g., example.com:80\n * @!attribute port\n *   @return [Integer] the port of the endpoint\n * @!attribute href\n *   @return [String] the full URL of the endpoint\n */\nAWS.Endpoint = inherit({\n\n  /**\n   * @overload Endpoint(endpoint)\n   *   Constructs a new endpoint given an endpoint URL. If the\n   *   URL omits a protocol (http or https), the default protocol\n   *   set in the global {AWS.config} will be used.\n   *   @param endpoint [String] the URL to construct an endpoint from\n   */\n  constructor: function Endpoint(endpoint, config) {\n    AWS.util.hideProperties(this, ['slashes', 'auth', 'hash', 'search', 'query']);\n\n    if (typeof endpoint === 'undefined' || endpoint === null) {\n      throw new Error('Invalid endpoint: ' + endpoint);\n    } else if (typeof endpoint !== 'string') {\n      return AWS.util.copy(endpoint);\n    }\n\n    if (!endpoint.match(/^http/)) {\n      var useSSL = config && config.sslEnabled !== undefined ?\n        config.sslEnabled : AWS.config.sslEnabled;\n      endpoint = (useSSL ? 'https' : 'http') + '://' + endpoint;\n    }\n\n    AWS.util.update(this, AWS.util.urlParse(endpoint));\n\n    // Ensure the port property is set as an integer\n    if (this.port) {\n      this.port = parseInt(this.port, 10);\n    } else {\n      this.port = this.protocol === 'https:' ? 443 : 80;\n    }\n  }\n\n});\n\n/**\n * The low level HTTP request object, encapsulating all HTTP header\n * and body data sent by a service request.\n *\n * @!attribute method\n *   @return [String] the HTTP method of the request\n * @!attribute path\n *   @return [String] the path portion of the URI, e.g.,\n *     \"/list/?start=5&num=10\"\n * @!attribute headers\n *   @return [map<String,String>]\n *     a map of header keys and their respective values\n * @!attribute body\n *   @return [String] the request body payload\n * @!attribute endpoint\n *   @return [AWS.Endpoint] the endpoint for the request\n * @!attribute region\n *   @api private\n *   @return [String] the region, for signing purposes only.\n */\nAWS.HttpRequest = inherit({\n\n  /**\n   * @api private\n   */\n  constructor: function HttpRequest(endpoint, region) {\n    endpoint = new AWS.Endpoint(endpoint);\n    this.method = 'POST';\n    this.path = endpoint.path || '/';\n    this.headers = {};\n    this.body = '';\n    this.endpoint = endpoint;\n    this.region = region;\n    this._userAgent = '';\n    this.setUserAgent();\n  },\n\n  /**\n   * @api private\n   */\n  setUserAgent: function setUserAgent() {\n    this._userAgent = this.headers[this.getUserAgentHeaderName()] = AWS.util.userAgent();\n  },\n\n  getUserAgentHeaderName: function getUserAgentHeaderName() {\n    var prefix = AWS.util.isBrowser() ? 'X-Amz-' : '';\n    return prefix + 'User-Agent';\n  },\n\n  /**\n   * @api private\n   */\n  appendToUserAgent: function appendToUserAgent(agentPartial) {\n    if (typeof agentPartial === 'string' && agentPartial) {\n      this._userAgent += ' ' + agentPartial;\n    }\n    this.headers[this.getUserAgentHeaderName()] = this._userAgent;\n  },\n\n  /**\n   * @api private\n   */\n  getUserAgent: function getUserAgent() {\n    return this._userAgent;\n  },\n\n  /**\n   * @return [String] the part of the {path} excluding the\n   *   query string\n   */\n  pathname: function pathname() {\n    return this.path.split('?', 1)[0];\n  },\n\n  /**\n   * @return [String] the query string portion of the {path}\n   */\n  search: function search() {\n    var query = this.path.split('?', 2)[1];\n    if (query) {\n      query = AWS.util.queryStringParse(query);\n      return AWS.util.queryParamsToString(query);\n    }\n    return '';\n  },\n\n  /**\n   * @api private\n   * update httpRequest endpoint with endpoint string\n   */\n  updateEndpoint: function updateEndpoint(endpointStr) {\n    var newEndpoint = new AWS.Endpoint(endpointStr);\n    this.endpoint = newEndpoint;\n    this.path = newEndpoint.path || '/';\n    if (this.headers['Host']) {\n      this.headers['Host'] = newEndpoint.host;\n    }\n  }\n});\n\n/**\n * The low level HTTP response object, encapsulating all HTTP header\n * and body data returned from the request.\n *\n * @!attribute statusCode\n *   @return [Integer] the HTTP status code of the response (e.g., 200, 404)\n * @!attribute headers\n *   @return [map<String,String>]\n *      a map of response header keys and their respective values\n * @!attribute body\n *   @return [String] the response body payload\n * @!attribute [r] streaming\n *   @return [Boolean] whether this response is being streamed at a low-level.\n *     Defaults to `false` (buffered reads). Do not modify this manually, use\n *     {createUnbufferedStream} to convert the stream to unbuffered mode\n *     instead.\n */\nAWS.HttpResponse = inherit({\n\n  /**\n   * @api private\n   */\n  constructor: function HttpResponse() {\n    this.statusCode = undefined;\n    this.headers = {};\n    this.body = undefined;\n    this.streaming = false;\n    this.stream = null;\n  },\n\n  /**\n   * Disables buffering on the HTTP response and returns the stream for reading.\n   * @return [Stream, XMLHttpRequest, null] the underlying stream object.\n   *   Use this object to directly read data off of the stream.\n   * @note This object is only available after the {AWS.Request~httpHeaders}\n   *   event has fired. This method must be called prior to\n   *   {AWS.Request~httpData}.\n   * @example Taking control of a stream\n   *   request.on('httpHeaders', function(statusCode, headers) {\n   *     if (statusCode < 300) {\n   *       if (headers.etag === 'xyz') {\n   *         // pipe the stream, disabling buffering\n   *         var stream = this.response.httpResponse.createUnbufferedStream();\n   *         stream.pipe(process.stdout);\n   *       } else { // abort this request and set a better error message\n   *         this.abort();\n   *         this.response.error = new Error('Invalid ETag');\n   *       }\n   *     }\n   *   }).send(console.log);\n   */\n  createUnbufferedStream: function createUnbufferedStream() {\n    this.streaming = true;\n    return this.stream;\n  }\n});\n\n\nAWS.HttpClient = inherit({});\n\n/**\n * @api private\n */\nAWS.HttpClient.getInstance = function getInstance() {\n  if (this.singleton === undefined) {\n    this.singleton = new this();\n  }\n  return this.singleton;\n};\n","var AWS = require('../core');\nvar Stream = AWS.util.stream.Stream;\nvar TransformStream = AWS.util.stream.Transform;\nvar ReadableStream = AWS.util.stream.Readable;\nrequire('../http');\nvar CONNECTION_REUSE_ENV_NAME = 'AWS_NODEJS_CONNECTION_REUSE_ENABLED';\n\n/**\n * @api private\n */\nAWS.NodeHttpClient = AWS.util.inherit({\n  handleRequest: function handleRequest(httpRequest, httpOptions, callback, errCallback) {\n    var self = this;\n    var endpoint = httpRequest.endpoint;\n    var pathPrefix = '';\n    if (!httpOptions) httpOptions = {};\n    if (httpOptions.proxy) {\n      pathPrefix = endpoint.protocol + '//' + endpoint.hostname;\n      if (endpoint.port !== 80 && endpoint.port !== 443) {\n        pathPrefix += ':' + endpoint.port;\n      }\n      endpoint = new AWS.Endpoint(httpOptions.proxy);\n    }\n\n    var useSSL = endpoint.protocol === 'https:';\n    var http = useSSL ? require('https') : require('http');\n    var options = {\n      host: endpoint.hostname,\n      port: endpoint.port,\n      method: httpRequest.method,\n      headers: httpRequest.headers,\n      path: pathPrefix + httpRequest.path\n    };\n\n    if (!httpOptions.agent) {\n      options.agent = this.getAgent(useSSL, {\n        keepAlive: process.env[CONNECTION_REUSE_ENV_NAME] === '1' ? true : false\n      });\n    }\n\n    AWS.util.update(options, httpOptions);\n    delete options.proxy; // proxy isn't an HTTP option\n    delete options.timeout; // timeout isn't an HTTP option\n\n    var stream = http.request(options, function (httpResp) {\n      if (stream.didCallback) return;\n\n      callback(httpResp);\n      httpResp.emit(\n        'headers',\n        httpResp.statusCode,\n        httpResp.headers,\n        httpResp.statusMessage\n      );\n    });\n    httpRequest.stream = stream; // attach stream to httpRequest\n    stream.didCallback = false;\n\n    // connection timeout support\n    if (httpOptions.connectTimeout) {\n      var connectTimeoutId;\n      stream.on('socket', function(socket) {\n        if (socket.connecting) {\n          connectTimeoutId = setTimeout(function connectTimeout() {\n            if (stream.didCallback) return; stream.didCallback = true;\n\n            stream.abort();\n            errCallback(AWS.util.error(\n              new Error('Socket timed out without establishing a connection'),\n              {code: 'TimeoutError'}\n            ));\n          }, httpOptions.connectTimeout);\n          socket.on('connect', function() {\n            clearTimeout(connectTimeoutId);\n            connectTimeoutId = null;\n          });\n        }\n      });\n    }\n\n    // timeout support\n    stream.setTimeout(httpOptions.timeout || 0, function() {\n      if (stream.didCallback) return; stream.didCallback = true;\n\n      var msg = 'Connection timed out after ' + httpOptions.timeout + 'ms';\n      errCallback(AWS.util.error(new Error(msg), {code: 'TimeoutError'}));\n      stream.abort();\n    });\n\n    stream.on('error', function() {\n      if (connectTimeoutId) {\n        clearTimeout(connectTimeoutId);\n        connectTimeoutId = null;\n      }\n      if (stream.didCallback) return; stream.didCallback = true;\n      errCallback.apply(stream, arguments);\n    });\n\n    var expect = httpRequest.headers.Expect || httpRequest.headers.expect;\n    if (expect === '100-continue') {\n      stream.on('continue', function() {\n        self.writeBody(stream, httpRequest);\n      });\n    } else {\n      this.writeBody(stream, httpRequest);\n    }\n\n    return stream;\n  },\n\n  writeBody: function writeBody(stream, httpRequest) {\n    var body = httpRequest.body;\n    var totalBytes = parseInt(httpRequest.headers['Content-Length'], 10);\n\n    if (body instanceof Stream) {\n      // For progress support of streaming content -\n      // pipe the data through a transform stream to emit 'sendProgress' events\n      var progressStream = this.progressStream(stream, totalBytes);\n      if (progressStream) {\n        body.pipe(progressStream).pipe(stream);\n      } else {\n        body.pipe(stream);\n      }\n    } else if (body) {\n      // The provided body is a buffer/string and is already fully available in memory -\n      // For performance it's best to send it as a whole by calling stream.end(body),\n      // Callers expect a 'sendProgress' event which is best emitted once\n      // the http request stream has been fully written and all data flushed.\n      // The use of totalBytes is important over body.length for strings where\n      // length is char length and not byte length.\n      stream.once('finish', function() {\n        stream.emit('sendProgress', {\n          loaded: totalBytes,\n          total: totalBytes\n        });\n      });\n      stream.end(body);\n    } else {\n      // no request body\n      stream.end();\n    }\n  },\n\n  /**\n   * Create the https.Agent or http.Agent according to the request schema.\n   */\n  getAgent: function getAgent(useSSL, agentOptions) {\n    var http = useSSL ? require('https') : require('http');\n    if (useSSL) {\n      if (!AWS.NodeHttpClient.sslAgent) {\n        AWS.NodeHttpClient.sslAgent = new http.Agent(AWS.util.merge({\n          rejectUnauthorized: process.env.NODE_TLS_REJECT_UNAUTHORIZED === '0' ? false : true\n        }, agentOptions || {}));\n        AWS.NodeHttpClient.sslAgent.setMaxListeners(0);\n\n        // delegate maxSockets to globalAgent, set a default limit of 50 if current value is Infinity.\n        // Users can bypass this default by supplying their own Agent as part of SDK configuration.\n        Object.defineProperty(AWS.NodeHttpClient.sslAgent, 'maxSockets', {\n          enumerable: true,\n          get: function() {\n            var defaultMaxSockets = 50;\n            var globalAgent = http.globalAgent;\n            if (globalAgent && globalAgent.maxSockets !== Infinity && typeof globalAgent.maxSockets === 'number') {\n              return globalAgent.maxSockets;\n            }\n            return defaultMaxSockets;\n          }\n        });\n      }\n      return AWS.NodeHttpClient.sslAgent;\n    } else {\n      if (!AWS.NodeHttpClient.agent) {\n        AWS.NodeHttpClient.agent = new http.Agent(agentOptions);\n      }\n      return AWS.NodeHttpClient.agent;\n    }\n  },\n\n  progressStream: function progressStream(stream, totalBytes) {\n    if (typeof TransformStream === 'undefined') {\n      // for node 0.8 there is no streaming progress\n      return;\n    }\n    var loadedBytes = 0;\n    var reporter = new TransformStream();\n    reporter._transform = function(chunk, encoding, callback) {\n      if (chunk) {\n        loadedBytes += chunk.length;\n        stream.emit('sendProgress', {\n          loaded: loadedBytes,\n          total: totalBytes\n        });\n      }\n      callback(null, chunk);\n    };\n    return reporter;\n  },\n\n  emitter: null\n});\n\n/**\n * @!ignore\n */\n\n/**\n * @api private\n */\nAWS.HttpClient.prototype = AWS.NodeHttpClient.prototype;\n\n/**\n * @api private\n */\nAWS.HttpClient.streamsApiVersion = ReadableStream ? 2 : 1;\n","var util = require('../util');\n\nfunction JsonBuilder() { }\n\nJsonBuilder.prototype.build = function(value, shape) {\n  return JSON.stringify(translate(value, shape));\n};\n\nfunction translate(value, shape) {\n  if (!shape || value === undefined || value === null) return undefined;\n\n  switch (shape.type) {\n    case 'structure': return translateStructure(value, shape);\n    case 'map': return translateMap(value, shape);\n    case 'list': return translateList(value, shape);\n    default: return translateScalar(value, shape);\n  }\n}\n\nfunction translateStructure(structure, shape) {\n  var struct = {};\n  util.each(structure, function(name, value) {\n    var memberShape = shape.members[name];\n    if (memberShape) {\n      if (memberShape.location !== 'body') return;\n      var locationName = memberShape.isLocationName ? memberShape.name : name;\n      var result = translate(value, memberShape);\n      if (result !== undefined) struct[locationName] = result;\n    }\n  });\n  return struct;\n}\n\nfunction translateList(list, shape) {\n  var out = [];\n  util.arrayEach(list, function(value) {\n    var result = translate(value, shape.member);\n    if (result !== undefined) out.push(result);\n  });\n  return out;\n}\n\nfunction translateMap(map, shape) {\n  var out = {};\n  util.each(map, function(key, value) {\n    var result = translate(value, shape.value);\n    if (result !== undefined) out[key] = result;\n  });\n  return out;\n}\n\nfunction translateScalar(value, shape) {\n  return shape.toWireFormat(value);\n}\n\n/**\n * @api private\n */\nmodule.exports = JsonBuilder;\n","var util = require('../util');\n\nfunction JsonParser() { }\n\nJsonParser.prototype.parse = function(value, shape) {\n  return translate(JSON.parse(value), shape);\n};\n\nfunction translate(value, shape) {\n  if (!shape || value === undefined) return undefined;\n\n  switch (shape.type) {\n    case 'structure': return translateStructure(value, shape);\n    case 'map': return translateMap(value, shape);\n    case 'list': return translateList(value, shape);\n    default: return translateScalar(value, shape);\n  }\n}\n\nfunction translateStructure(structure, shape) {\n  if (structure == null) return undefined;\n\n  var struct = {};\n  var shapeMembers = shape.members;\n  util.each(shapeMembers, function(name, memberShape) {\n    var locationName = memberShape.isLocationName ? memberShape.name : name;\n    if (Object.prototype.hasOwnProperty.call(structure, locationName)) {\n      var value = structure[locationName];\n      var result = translate(value, memberShape);\n      if (result !== undefined) struct[name] = result;\n    }\n  });\n  return struct;\n}\n\nfunction translateList(list, shape) {\n  if (list == null) return undefined;\n\n  var out = [];\n  util.arrayEach(list, function(value) {\n    var result = translate(value, shape.member);\n    if (result === undefined) out.push(null);\n    else out.push(result);\n  });\n  return out;\n}\n\nfunction translateMap(map, shape) {\n  if (map == null) return undefined;\n\n  var out = {};\n  util.each(map, function(key, value) {\n    var result = translate(value, shape.value);\n    if (result === undefined) out[key] = null;\n    else out[key] = result;\n  });\n  return out;\n}\n\nfunction translateScalar(value, shape) {\n  return shape.toType(value);\n}\n\n/**\n * @api private\n */\nmodule.exports = JsonParser;\n","var AWS = require('./core');\nrequire('./http');\nvar inherit = AWS.util.inherit;\n\n/**\n * Represents a metadata service available on EC2 instances. Using the\n * {request} method, you can receieve metadata about any available resource\n * on the metadata service.\n *\n * You can disable the use of the IMDS by setting the AWS_EC2_METADATA_DISABLED\n * environment variable to a truthy value.\n *\n * @!attribute [r] httpOptions\n *   @return [map] a map of options to pass to the underlying HTTP request:\n *\n *     * **timeout** (Number) &mdash; a timeout value in milliseconds to wait\n *       before aborting the connection. Set to 0 for no timeout.\n *\n * @!macro nobrowser\n */\nAWS.MetadataService = inherit({\n  /**\n   * @return [String] the hostname of the instance metadata service\n   */\n  host: '169.254.169.254',\n\n  /**\n   * @!ignore\n   */\n\n  /**\n   * Default HTTP options. By default, the metadata service is set to not\n   * timeout on long requests. This means that on non-EC2 machines, this\n   * request will never return. If you are calling this operation from an\n   * environment that may not always run on EC2, set a `timeout` value so\n   * the SDK will abort the request after a given number of milliseconds.\n   */\n  httpOptions: { timeout: 0 },\n\n  /**\n   * when enabled, metadata service will not fetch token\n   */\n  disableFetchToken: false,\n\n  /**\n   * Creates a new MetadataService object with a given set of options.\n   *\n   * @option options host [String] the hostname of the instance metadata\n   *   service\n   * @option options httpOptions [map] a map of options to pass to the\n   *   underlying HTTP request:\n   *\n   *   * **timeout** (Number) &mdash; a timeout value in milliseconds to wait\n   *     before aborting the connection. Set to 0 for no timeout.\n   * @option options maxRetries [Integer] the maximum number of retries to\n   *   perform for timeout errors\n   * @option options retryDelayOptions [map] A set of options to configure the\n   *   retry delay on retryable errors. See AWS.Config for details.\n   */\n  constructor: function MetadataService(options) {\n    AWS.util.update(this, options);\n  },\n\n  /**\n   * Sends a request to the instance metadata service for a given resource.\n   *\n   * @param path [String] the path of the resource to get\n   *\n   * @param options [map] an optional map used to make request\n   *\n   *   * **method** (String) &mdash; HTTP request method\n   *\n   *   * **headers** (map<String,String>) &mdash; a map of response header keys and their respective values\n   *\n   * @callback callback function(err, data)\n   *   Called when a response is available from the service.\n   *   @param err [Error, null] if an error occurred, this value will be set\n   *   @param data [String, null] if the request was successful, the body of\n   *     the response\n   */\n  request: function request(path, options, callback) {\n    if (arguments.length === 2) {\n      callback = options;\n      options = {};\n    }\n\n    if (process.env[AWS.util.imdsDisabledEnv]) {\n      callback(new Error('EC2 Instance Metadata Service access disabled'));\n      return;\n    }\n\n    path = path || '/';\n    var httpRequest = new AWS.HttpRequest('http://' + this.host + path);\n    httpRequest.method = options.method || 'GET';\n    if (options.headers) {\n      httpRequest.headers = options.headers;\n    }\n    AWS.util.handleRequestWithRetries(httpRequest, this, callback);\n  },\n\n  /**\n  * @api private\n  */\n  loadCredentialsCallbacks: [],\n\n  /**\n   * Fetches metadata token used for getting credentials\n   *\n   * @api private\n   * @callback callback function(err, token)\n   *   Called when token is loaded from the resource\n   */\n  fetchMetadataToken: function fetchMetadataToken(callback) {\n    var self = this;\n    var tokenFetchPath = '/latest/api/token';\n    self.request(\n      tokenFetchPath,\n      {\n        'method': 'PUT',\n        'headers': {\n          'x-aws-ec2-metadata-token-ttl-seconds': '21600'\n        }\n      },\n      callback\n    );\n  },\n\n  /**\n   * Fetches credentials\n   *\n   * @api private\n   * @callback cb function(err, creds)\n   *   Called when credentials are loaded from the resource\n   */\n  fetchCredentials: function fetchCredentials(options, cb) {\n    var self = this;\n    var basePath = '/latest/meta-data/iam/security-credentials/';\n\n    self.request(basePath, options, function (err, roleName) {\n      if (err) {\n        self.disableFetchToken = !(err.statusCode === 401);\n        cb(AWS.util.error(\n          err,\n          {\n            message: 'EC2 Metadata roleName request returned error'\n          }\n        ));\n        return;\n      }\n      roleName = roleName.split('\\n')[0]; // grab first (and only) role\n      self.request(basePath + roleName, options, function (credErr, credData) {\n        if (credErr) {\n          self.disableFetchToken = !(credErr.statusCode === 401);\n          cb(AWS.util.error(\n            credErr,\n            {\n              message: 'EC2 Metadata creds request returned error'\n            }\n          ));\n          return;\n        }\n        try {\n          var credentials = JSON.parse(credData);\n          cb(null, credentials);\n        } catch (parseError) {\n          cb(parseError);\n        }\n      });\n    });\n  },\n\n  /**\n   * Loads a set of credentials stored in the instance metadata service\n   *\n   * @api private\n   * @callback callback function(err, credentials)\n   *   Called when credentials are loaded from the resource\n   *   @param err [Error] if an error occurred, this value will be set\n   *   @param credentials [Object] the raw JSON object containing all\n   *     metadata from the credentials resource\n   */\n  loadCredentials: function loadCredentials(callback) {\n    var self = this;\n    self.loadCredentialsCallbacks.push(callback);\n    if (self.loadCredentialsCallbacks.length > 1) { return; }\n\n    function callbacks(err, creds) {\n      var cb;\n      while ((cb = self.loadCredentialsCallbacks.shift()) !== undefined) {\n        cb(err, creds);\n      }\n    }\n\n    if (self.disableFetchToken) {\n      self.fetchCredentials({}, callbacks);\n    } else {\n      self.fetchMetadataToken(function(tokenError, token) {\n        if (tokenError) {\n          if (tokenError.code === 'TimeoutError') {\n            self.disableFetchToken = true;\n          } else if (tokenError.retryable === true) {\n            callbacks(AWS.util.error(\n              tokenError,\n              {\n                message: 'EC2 Metadata token request returned error'\n              }\n            ));\n            return;\n          } else if (tokenError.statusCode === 400) {\n            callbacks(AWS.util.error(\n              tokenError,\n              {\n                message: 'EC2 Metadata token request returned 400'\n              }\n            ));\n            return;\n          }\n        }\n        var options = {};\n        if (token) {\n          options.headers = {\n            'x-aws-ec2-metadata-token': token\n          };\n        }\n        self.fetchCredentials(options, callbacks);\n      });\n\n    }\n  }\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.MetadataService;\n","var Collection = require('./collection');\nvar Operation = require('./operation');\nvar Shape = require('./shape');\nvar Paginator = require('./paginator');\nvar ResourceWaiter = require('./resource_waiter');\nvar metadata = require('../../apis/metadata.json');\n\nvar util = require('../util');\nvar property = util.property;\nvar memoizedProperty = util.memoizedProperty;\n\nfunction Api(api, options) {\n  var self = this;\n  api = api || {};\n  options = options || {};\n  options.api = this;\n\n  api.metadata = api.metadata || {};\n\n  var serviceIdentifier = options.serviceIdentifier;\n  delete options.serviceIdentifier;\n\n  property(this, 'isApi', true, false);\n  property(this, 'apiVersion', api.metadata.apiVersion);\n  property(this, 'endpointPrefix', api.metadata.endpointPrefix);\n  property(this, 'signingName', api.metadata.signingName);\n  property(this, 'globalEndpoint', api.metadata.globalEndpoint);\n  property(this, 'signatureVersion', api.metadata.signatureVersion);\n  property(this, 'jsonVersion', api.metadata.jsonVersion);\n  property(this, 'targetPrefix', api.metadata.targetPrefix);\n  property(this, 'protocol', api.metadata.protocol);\n  property(this, 'timestampFormat', api.metadata.timestampFormat);\n  property(this, 'xmlNamespaceUri', api.metadata.xmlNamespace);\n  property(this, 'abbreviation', api.metadata.serviceAbbreviation);\n  property(this, 'fullName', api.metadata.serviceFullName);\n  property(this, 'serviceId', api.metadata.serviceId);\n  if (serviceIdentifier && metadata[serviceIdentifier]) {\n      property(this, 'xmlNoDefaultLists', metadata[serviceIdentifier].xmlNoDefaultLists, false);\n  }\n\n  memoizedProperty(this, 'className', function() {\n    var name = api.metadata.serviceAbbreviation || api.metadata.serviceFullName;\n    if (!name) return null;\n\n    name = name.replace(/^Amazon|AWS\\s*|\\(.*|\\s+|\\W+/g, '');\n    if (name === 'ElasticLoadBalancing') name = 'ELB';\n    return name;\n  });\n\n  function addEndpointOperation(name, operation) {\n    if (operation.endpointoperation === true) {\n      property(self, 'endpointOperation', util.string.lowerFirst(name));\n    }\n    if (operation.endpointdiscovery && !self.hasRequiredEndpointDiscovery) {\n      property(\n        self,\n        'hasRequiredEndpointDiscovery',\n        operation.endpointdiscovery.required === true\n      );\n    }\n  }\n\n  property(this, 'operations', new Collection(api.operations, options, function(name, operation) {\n    return new Operation(name, operation, options);\n  }, util.string.lowerFirst, addEndpointOperation));\n\n  property(this, 'shapes', new Collection(api.shapes, options, function(name, shape) {\n    return Shape.create(shape, options);\n  }));\n\n  property(this, 'paginators', new Collection(api.paginators, options, function(name, paginator) {\n    return new Paginator(name, paginator, options);\n  }));\n\n  property(this, 'waiters', new Collection(api.waiters, options, function(name, waiter) {\n    return new ResourceWaiter(name, waiter, options);\n  }, util.string.lowerFirst));\n\n  if (options.documentation) {\n    property(this, 'documentation', api.documentation);\n    property(this, 'documentationUrl', api.documentationUrl);\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = Api;\n","var memoizedProperty = require('../util').memoizedProperty;\n\nfunction memoize(name, value, factory, nameTr) {\n  memoizedProperty(this, nameTr(name), function() {\n    return factory(name, value);\n  });\n}\n\nfunction Collection(iterable, options, factory, nameTr, callback) {\n  nameTr = nameTr || String;\n  var self = this;\n\n  for (var id in iterable) {\n    if (Object.prototype.hasOwnProperty.call(iterable, id)) {\n      memoize.call(self, id, iterable[id], factory, nameTr);\n      if (callback) callback(id, iterable[id]);\n    }\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = Collection;\n","var Shape = require('./shape');\n\nvar util = require('../util');\nvar property = util.property;\nvar memoizedProperty = util.memoizedProperty;\n\nfunction Operation(name, operation, options) {\n  var self = this;\n  options = options || {};\n\n  property(this, 'name', operation.name || name);\n  property(this, 'api', options.api, false);\n\n  operation.http = operation.http || {};\n  property(this, 'endpoint', operation.endpoint);\n  property(this, 'httpMethod', operation.http.method || 'POST');\n  property(this, 'httpPath', operation.http.requestUri || '/');\n  property(this, 'authtype', operation.authtype || '');\n  property(\n    this,\n    'endpointDiscoveryRequired',\n    operation.endpointdiscovery ?\n      (operation.endpointdiscovery.required ? 'REQUIRED' : 'OPTIONAL') :\n    'NULL'\n  );\n\n  memoizedProperty(this, 'input', function() {\n    if (!operation.input) {\n      return new Shape.create({type: 'structure'}, options);\n    }\n    return Shape.create(operation.input, options);\n  });\n\n  memoizedProperty(this, 'output', function() {\n    if (!operation.output) {\n      return new Shape.create({type: 'structure'}, options);\n    }\n    return Shape.create(operation.output, options);\n  });\n\n  memoizedProperty(this, 'errors', function() {\n    var list = [];\n    if (!operation.errors) return null;\n\n    for (var i = 0; i < operation.errors.length; i++) {\n      list.push(Shape.create(operation.errors[i], options));\n    }\n\n    return list;\n  });\n\n  memoizedProperty(this, 'paginator', function() {\n    return options.api.paginators[name];\n  });\n\n  if (options.documentation) {\n    property(this, 'documentation', operation.documentation);\n    property(this, 'documentationUrl', operation.documentationUrl);\n  }\n\n  // idempotentMembers only tracks top-level input shapes\n  memoizedProperty(this, 'idempotentMembers', function() {\n    var idempotentMembers = [];\n    var input = self.input;\n    var members = input.members;\n    if (!input.members) {\n      return idempotentMembers;\n    }\n    for (var name in members) {\n      if (!members.hasOwnProperty(name)) {\n        continue;\n      }\n      if (members[name].isIdempotent === true) {\n        idempotentMembers.push(name);\n      }\n    }\n    return idempotentMembers;\n  });\n\n  memoizedProperty(this, 'hasEventOutput', function() {\n    var output = self.output;\n    return hasEventStream(output);\n  });\n}\n\nfunction hasEventStream(topLevelShape) {\n  var members = topLevelShape.members;\n  var payload = topLevelShape.payload;\n\n  if (!topLevelShape.members) {\n    return false;\n  }\n\n  if (payload) {\n    var payloadMember = members[payload];\n    return payloadMember.isEventStream;\n  }\n\n  // check if any member is an event stream\n  for (var name in members) {\n    if (!members.hasOwnProperty(name)) {\n      if (members[name].isEventStream === true) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\n/**\n * @api private\n */\nmodule.exports = Operation;\n","var property = require('../util').property;\n\nfunction Paginator(name, paginator) {\n  property(this, 'inputToken', paginator.input_token);\n  property(this, 'limitKey', paginator.limit_key);\n  property(this, 'moreResults', paginator.more_results);\n  property(this, 'outputToken', paginator.output_token);\n  property(this, 'resultKey', paginator.result_key);\n}\n\n/**\n * @api private\n */\nmodule.exports = Paginator;\n","var util = require('../util');\nvar property = util.property;\n\nfunction ResourceWaiter(name, waiter, options) {\n  options = options || {};\n  property(this, 'name', name);\n  property(this, 'api', options.api, false);\n\n  if (waiter.operation) {\n    property(this, 'operation', util.string.lowerFirst(waiter.operation));\n  }\n\n  var self = this;\n  var keys = [\n    'type',\n    'description',\n    'delay',\n    'maxAttempts',\n    'acceptors'\n  ];\n\n  keys.forEach(function(key) {\n    var value = waiter[key];\n    if (value) {\n      property(self, key, value);\n    }\n  });\n}\n\n/**\n * @api private\n */\nmodule.exports = ResourceWaiter;\n","var Collection = require('./collection');\n\nvar util = require('../util');\n\nfunction property(obj, name, value) {\n  if (value !== null && value !== undefined) {\n    util.property.apply(this, arguments);\n  }\n}\n\nfunction memoizedProperty(obj, name) {\n  if (!obj.constructor.prototype[name]) {\n    util.memoizedProperty.apply(this, arguments);\n  }\n}\n\nfunction Shape(shape, options, memberName) {\n  options = options || {};\n\n  property(this, 'shape', shape.shape);\n  property(this, 'api', options.api, false);\n  property(this, 'type', shape.type);\n  property(this, 'enum', shape.enum);\n  property(this, 'min', shape.min);\n  property(this, 'max', shape.max);\n  property(this, 'pattern', shape.pattern);\n  property(this, 'location', shape.location || this.location || 'body');\n  property(this, 'name', this.name || shape.xmlName || shape.queryName ||\n    shape.locationName || memberName);\n  property(this, 'isStreaming', shape.streaming || this.isStreaming || false);\n  property(this, 'requiresLength', shape.requiresLength, false);\n  property(this, 'isComposite', shape.isComposite || false);\n  property(this, 'isShape', true, false);\n  property(this, 'isQueryName', Boolean(shape.queryName), false);\n  property(this, 'isLocationName', Boolean(shape.locationName), false);\n  property(this, 'isIdempotent', shape.idempotencyToken === true);\n  property(this, 'isJsonValue', shape.jsonvalue === true);\n  property(this, 'isSensitive', shape.sensitive === true || shape.prototype && shape.prototype.sensitive === true);\n  property(this, 'isEventStream', Boolean(shape.eventstream), false);\n  property(this, 'isEvent', Boolean(shape.event), false);\n  property(this, 'isEventPayload', Boolean(shape.eventpayload), false);\n  property(this, 'isEventHeader', Boolean(shape.eventheader), false);\n  property(this, 'isTimestampFormatSet', Boolean(shape.timestampFormat) || shape.prototype && shape.prototype.isTimestampFormatSet === true, false);\n  property(this, 'endpointDiscoveryId', Boolean(shape.endpointdiscoveryid), false);\n  property(this, 'hostLabel', Boolean(shape.hostLabel), false);\n\n  if (options.documentation) {\n    property(this, 'documentation', shape.documentation);\n    property(this, 'documentationUrl', shape.documentationUrl);\n  }\n\n  if (shape.xmlAttribute) {\n    property(this, 'isXmlAttribute', shape.xmlAttribute || false);\n  }\n\n  // type conversion and parsing\n  property(this, 'defaultValue', null);\n  this.toWireFormat = function(value) {\n    if (value === null || value === undefined) return '';\n    return value;\n  };\n  this.toType = function(value) { return value; };\n}\n\n/**\n * @api private\n */\nShape.normalizedTypes = {\n  character: 'string',\n  double: 'float',\n  long: 'integer',\n  short: 'integer',\n  biginteger: 'integer',\n  bigdecimal: 'float',\n  blob: 'binary'\n};\n\n/**\n * @api private\n */\nShape.types = {\n  'structure': StructureShape,\n  'list': ListShape,\n  'map': MapShape,\n  'boolean': BooleanShape,\n  'timestamp': TimestampShape,\n  'float': FloatShape,\n  'integer': IntegerShape,\n  'string': StringShape,\n  'base64': Base64Shape,\n  'binary': BinaryShape\n};\n\nShape.resolve = function resolve(shape, options) {\n  if (shape.shape) {\n    var refShape = options.api.shapes[shape.shape];\n    if (!refShape) {\n      throw new Error('Cannot find shape reference: ' + shape.shape);\n    }\n\n    return refShape;\n  } else {\n    return null;\n  }\n};\n\nShape.create = function create(shape, options, memberName) {\n  if (shape.isShape) return shape;\n\n  var refShape = Shape.resolve(shape, options);\n  if (refShape) {\n    var filteredKeys = Object.keys(shape);\n    if (!options.documentation) {\n      filteredKeys = filteredKeys.filter(function(name) {\n        return !name.match(/documentation/);\n      });\n    }\n\n    // create an inline shape with extra members\n    var InlineShape = function() {\n      refShape.constructor.call(this, shape, options, memberName);\n    };\n    InlineShape.prototype = refShape;\n    return new InlineShape();\n  } else {\n    // set type if not set\n    if (!shape.type) {\n      if (shape.members) shape.type = 'structure';\n      else if (shape.member) shape.type = 'list';\n      else if (shape.key) shape.type = 'map';\n      else shape.type = 'string';\n    }\n\n    // normalize types\n    var origType = shape.type;\n    if (Shape.normalizedTypes[shape.type]) {\n      shape.type = Shape.normalizedTypes[shape.type];\n    }\n\n    if (Shape.types[shape.type]) {\n      return new Shape.types[shape.type](shape, options, memberName);\n    } else {\n      throw new Error('Unrecognized shape type: ' + origType);\n    }\n  }\n};\n\nfunction CompositeShape(shape) {\n  Shape.apply(this, arguments);\n  property(this, 'isComposite', true);\n\n  if (shape.flattened) {\n    property(this, 'flattened', shape.flattened || false);\n  }\n}\n\nfunction StructureShape(shape, options) {\n  var self = this;\n  var requiredMap = null, firstInit = !this.isShape;\n\n  CompositeShape.apply(this, arguments);\n\n  if (firstInit) {\n    property(this, 'defaultValue', function() { return {}; });\n    property(this, 'members', {});\n    property(this, 'memberNames', []);\n    property(this, 'required', []);\n    property(this, 'isRequired', function() { return false; });\n  }\n\n  if (shape.members) {\n    property(this, 'members', new Collection(shape.members, options, function(name, member) {\n      return Shape.create(member, options, name);\n    }));\n    memoizedProperty(this, 'memberNames', function() {\n      return shape.xmlOrder || Object.keys(shape.members);\n    });\n\n    if (shape.event) {\n      memoizedProperty(this, 'eventPayloadMemberName', function() {\n        var members = self.members;\n        var memberNames = self.memberNames;\n        // iterate over members to find ones that are event payloads\n        for (var i = 0, iLen = memberNames.length; i < iLen; i++) {\n          if (members[memberNames[i]].isEventPayload) {\n            return memberNames[i];\n          }\n        }\n      });\n\n      memoizedProperty(this, 'eventHeaderMemberNames', function() {\n        var members = self.members;\n        var memberNames = self.memberNames;\n        var eventHeaderMemberNames = [];\n        // iterate over members to find ones that are event headers\n        for (var i = 0, iLen = memberNames.length; i < iLen; i++) {\n          if (members[memberNames[i]].isEventHeader) {\n            eventHeaderMemberNames.push(memberNames[i]);\n          }\n        }\n        return eventHeaderMemberNames;\n      });\n    }\n  }\n\n  if (shape.required) {\n    property(this, 'required', shape.required);\n    property(this, 'isRequired', function(name) {\n      if (!requiredMap) {\n        requiredMap = {};\n        for (var i = 0; i < shape.required.length; i++) {\n          requiredMap[shape.required[i]] = true;\n        }\n      }\n\n      return requiredMap[name];\n    }, false, true);\n  }\n\n  property(this, 'resultWrapper', shape.resultWrapper || null);\n\n  if (shape.payload) {\n    property(this, 'payload', shape.payload);\n  }\n\n  if (typeof shape.xmlNamespace === 'string') {\n    property(this, 'xmlNamespaceUri', shape.xmlNamespace);\n  } else if (typeof shape.xmlNamespace === 'object') {\n    property(this, 'xmlNamespacePrefix', shape.xmlNamespace.prefix);\n    property(this, 'xmlNamespaceUri', shape.xmlNamespace.uri);\n  }\n}\n\nfunction ListShape(shape, options) {\n  var self = this, firstInit = !this.isShape;\n  CompositeShape.apply(this, arguments);\n\n  if (firstInit) {\n    property(this, 'defaultValue', function() { return []; });\n  }\n\n  if (shape.member) {\n    memoizedProperty(this, 'member', function() {\n      return Shape.create(shape.member, options);\n    });\n  }\n\n  if (this.flattened) {\n    var oldName = this.name;\n    memoizedProperty(this, 'name', function() {\n      return self.member.name || oldName;\n    });\n  }\n}\n\nfunction MapShape(shape, options) {\n  var firstInit = !this.isShape;\n  CompositeShape.apply(this, arguments);\n\n  if (firstInit) {\n    property(this, 'defaultValue', function() { return {}; });\n    property(this, 'key', Shape.create({type: 'string'}, options));\n    property(this, 'value', Shape.create({type: 'string'}, options));\n  }\n\n  if (shape.key) {\n    memoizedProperty(this, 'key', function() {\n      return Shape.create(shape.key, options);\n    });\n  }\n  if (shape.value) {\n    memoizedProperty(this, 'value', function() {\n      return Shape.create(shape.value, options);\n    });\n  }\n}\n\nfunction TimestampShape(shape) {\n  var self = this;\n  Shape.apply(this, arguments);\n\n  if (shape.timestampFormat) {\n    property(this, 'timestampFormat', shape.timestampFormat);\n  } else if (self.isTimestampFormatSet && this.timestampFormat) {\n    property(this, 'timestampFormat', this.timestampFormat);\n  } else if (this.location === 'header') {\n    property(this, 'timestampFormat', 'rfc822');\n  } else if (this.location === 'querystring') {\n    property(this, 'timestampFormat', 'iso8601');\n  } else if (this.api) {\n    switch (this.api.protocol) {\n      case 'json':\n      case 'rest-json':\n        property(this, 'timestampFormat', 'unixTimestamp');\n        break;\n      case 'rest-xml':\n      case 'query':\n      case 'ec2':\n        property(this, 'timestampFormat', 'iso8601');\n        break;\n    }\n  }\n\n  this.toType = function(value) {\n    if (value === null || value === undefined) return null;\n    if (typeof value.toUTCString === 'function') return value;\n    return typeof value === 'string' || typeof value === 'number' ?\n           util.date.parseTimestamp(value) : null;\n  };\n\n  this.toWireFormat = function(value) {\n    return util.date.format(value, self.timestampFormat);\n  };\n}\n\nfunction StringShape() {\n  Shape.apply(this, arguments);\n\n  var nullLessProtocols = ['rest-xml', 'query', 'ec2'];\n  this.toType = function(value) {\n    value = this.api && nullLessProtocols.indexOf(this.api.protocol) > -1 ?\n      value || '' : value;\n    if (this.isJsonValue) {\n      return JSON.parse(value);\n    }\n\n    return value && typeof value.toString === 'function' ?\n      value.toString() : value;\n  };\n\n  this.toWireFormat = function(value) {\n    return this.isJsonValue ? JSON.stringify(value) : value;\n  };\n}\n\nfunction FloatShape() {\n  Shape.apply(this, arguments);\n\n  this.toType = function(value) {\n    if (value === null || value === undefined) return null;\n    return parseFloat(value);\n  };\n  this.toWireFormat = this.toType;\n}\n\nfunction IntegerShape() {\n  Shape.apply(this, arguments);\n\n  this.toType = function(value) {\n    if (value === null || value === undefined) return null;\n    return parseInt(value, 10);\n  };\n  this.toWireFormat = this.toType;\n}\n\nfunction BinaryShape() {\n  Shape.apply(this, arguments);\n  this.toType = function(value) {\n    var buf = util.base64.decode(value);\n    if (this.isSensitive && util.isNode() && typeof util.Buffer.alloc === 'function') {\n  /* Node.js can create a Buffer that is not isolated.\n   * i.e. buf.byteLength !== buf.buffer.byteLength\n   * This means that the sensitive data is accessible to anyone with access to buf.buffer.\n   * If this is the node shared Buffer, then other code within this process _could_ find this secret.\n   * Copy sensitive data to an isolated Buffer and zero the sensitive data.\n   * While this is safe to do here, copying this code somewhere else may produce unexpected results.\n   */\n      var secureBuf = util.Buffer.alloc(buf.length, buf);\n      buf.fill(0);\n      buf = secureBuf;\n    }\n    return buf;\n  };\n  this.toWireFormat = util.base64.encode;\n}\n\nfunction Base64Shape() {\n  BinaryShape.apply(this, arguments);\n}\n\nfunction BooleanShape() {\n  Shape.apply(this, arguments);\n\n  this.toType = function(value) {\n    if (typeof value === 'boolean') return value;\n    if (value === null || value === undefined) return null;\n    return value === 'true';\n  };\n}\n\n/**\n * @api private\n */\nShape.shapes = {\n  StructureShape: StructureShape,\n  ListShape: ListShape,\n  MapShape: MapShape,\n  StringShape: StringShape,\n  BooleanShape: BooleanShape,\n  Base64Shape: Base64Shape\n};\n\n/**\n * @api private\n */\nmodule.exports = Shape;\n","var util = require('./util');\n\nutil.isBrowser = function() { return false; };\nutil.isNode = function() { return true; };\n\n// node.js specific modules\nutil.crypto.lib = require('crypto');\nutil.Buffer = require('buffer').Buffer;\nutil.domain = require('domain');\nutil.stream = require('stream');\nutil.url = require('url');\nutil.querystring = require('querystring');\nutil.environment = 'nodejs';\nutil.createEventStream = util.stream.Readable ?\n  require('./event-stream/streaming-create-event-stream').createEventStream : require('./event-stream/buffered-create-event-stream').createEventStream;\nutil.realClock = require('./realclock/nodeClock');\nutil.clientSideMonitoring = {\n  Publisher: require('./publisher').Publisher,\n  configProvider: require('./publisher/configuration'),\n};\nutil.iniLoader = require('./shared-ini').iniLoader;\nutil.getSystemErrorName = require('util').getSystemErrorName;\n\nvar AWS;\n\n/**\n * @api private\n */\nmodule.exports = AWS = require('./core');\n\nrequire('./credentials');\nrequire('./credentials/credential_provider_chain');\nrequire('./credentials/temporary_credentials');\nrequire('./credentials/chainable_temporary_credentials');\nrequire('./credentials/web_identity_credentials');\nrequire('./credentials/cognito_identity_credentials');\nrequire('./credentials/saml_credentials');\nrequire('./credentials/process_credentials');\n\n// Load the xml2js XML parser\nAWS.XML.Parser = require('./xml/node_parser');\n\n// Load Node HTTP client\nrequire('./http/node');\n\nrequire('./shared-ini/ini-loader');\n\n// Load custom credential providers\nrequire('./credentials/token_file_web_identity_credentials');\nrequire('./credentials/ec2_metadata_credentials');\nrequire('./credentials/remote_credentials');\nrequire('./credentials/ecs_credentials');\nrequire('./credentials/environment_credentials');\nrequire('./credentials/file_system_credentials');\nrequire('./credentials/shared_ini_file_credentials');\nrequire('./credentials/process_credentials');\n\n// Setup default chain providers\n// If this changes, please update documentation for\n// AWS.CredentialProviderChain.defaultProviders in\n// credentials/credential_provider_chain.js\nAWS.CredentialProviderChain.defaultProviders = [\n  function () { return new AWS.EnvironmentCredentials('AWS'); },\n  function () { return new AWS.EnvironmentCredentials('AMAZON'); },\n  function () { return new AWS.SharedIniFileCredentials(); },\n  function () { return new AWS.ECSCredentials(); },\n  function () { return new AWS.ProcessCredentials(); },\n  function () { return new AWS.TokenFileWebIdentityCredentials(); },\n  function () { return new AWS.EC2MetadataCredentials(); }\n];\n\n// Update configuration keys\nAWS.util.update(AWS.Config.prototype.keys, {\n  credentials: function () {\n    var credentials = null;\n    new AWS.CredentialProviderChain([\n      function () { return new AWS.EnvironmentCredentials('AWS'); },\n      function () { return new AWS.EnvironmentCredentials('AMAZON'); },\n      function () { return new AWS.SharedIniFileCredentials({ disableAssumeRole: true }); }\n    ]).resolve(function(err, creds) {\n      if (!err) credentials = creds;\n    });\n    return credentials;\n  },\n  credentialProvider: function() {\n    return new AWS.CredentialProviderChain();\n  },\n  logger: function () {\n    return process.env.AWSJS_DEBUG ? console : null;\n  },\n  region: function() {\n    var env = process.env;\n    var region = env.AWS_REGION || env.AMAZON_REGION;\n    if (env[AWS.util.configOptInEnv]) {\n      var toCheck = [\n        {filename: env[AWS.util.sharedCredentialsFileEnv]},\n        {isConfig: true, filename: env[AWS.util.sharedConfigFileEnv]}\n      ];\n      var iniLoader = AWS.util.iniLoader;\n      while (!region && toCheck.length) {\n        var configFile = iniLoader.loadFrom(toCheck.shift());\n        var profile = configFile[env.AWS_PROFILE || AWS.util.defaultProfile];\n        region = profile && profile.region;\n      }\n    }\n    return region;\n  }\n});\n\n// Reset configuration\nAWS.config = new AWS.Config();\n","var AWS = require('./core');\n\n/**\n * @api private\n */\nAWS.ParamValidator = AWS.util.inherit({\n  /**\n   * Create a new validator object.\n   *\n   * @param validation [Boolean|map] whether input parameters should be\n   *     validated against the operation description before sending the\n   *     request. Pass a map to enable any of the following specific\n   *     validation features:\n   *\n   *     * **min** [Boolean] &mdash; Validates that a value meets the min\n   *       constraint. This is enabled by default when paramValidation is set\n   *       to `true`.\n   *     * **max** [Boolean] &mdash; Validates that a value meets the max\n   *       constraint.\n   *     * **pattern** [Boolean] &mdash; Validates that a string value matches a\n   *       regular expression.\n   *     * **enum** [Boolean] &mdash; Validates that a string value matches one\n   *       of the allowable enum values.\n   */\n  constructor: function ParamValidator(validation) {\n    if (validation === true || validation === undefined) {\n      validation = {'min': true};\n    }\n    this.validation = validation;\n  },\n\n  validate: function validate(shape, params, context) {\n    this.errors = [];\n    this.validateMember(shape, params || {}, context || 'params');\n\n    if (this.errors.length > 1) {\n      var msg = this.errors.join('\\n* ');\n      msg = 'There were ' + this.errors.length +\n        ' validation errors:\\n* ' + msg;\n      throw AWS.util.error(new Error(msg),\n        {code: 'MultipleValidationErrors', errors: this.errors});\n    } else if (this.errors.length === 1) {\n      throw this.errors[0];\n    } else {\n      return true;\n    }\n  },\n\n  fail: function fail(code, message) {\n    this.errors.push(AWS.util.error(new Error(message), {code: code}));\n  },\n\n  validateStructure: function validateStructure(shape, params, context) {\n    this.validateType(params, context, ['object'], 'structure');\n\n    var paramName;\n    for (var i = 0; shape.required && i < shape.required.length; i++) {\n      paramName = shape.required[i];\n      var value = params[paramName];\n      if (value === undefined || value === null) {\n        this.fail('MissingRequiredParameter',\n          'Missing required key \\'' + paramName + '\\' in ' + context);\n      }\n    }\n\n    // validate hash members\n    for (paramName in params) {\n      if (!Object.prototype.hasOwnProperty.call(params, paramName)) continue;\n\n      var paramValue = params[paramName],\n          memberShape = shape.members[paramName];\n\n      if (memberShape !== undefined) {\n        var memberContext = [context, paramName].join('.');\n        this.validateMember(memberShape, paramValue, memberContext);\n      } else {\n        this.fail('UnexpectedParameter',\n          'Unexpected key \\'' + paramName + '\\' found in ' + context);\n      }\n    }\n\n    return true;\n  },\n\n  validateMember: function validateMember(shape, param, context) {\n    switch (shape.type) {\n      case 'structure':\n        return this.validateStructure(shape, param, context);\n      case 'list':\n        return this.validateList(shape, param, context);\n      case 'map':\n        return this.validateMap(shape, param, context);\n      default:\n        return this.validateScalar(shape, param, context);\n    }\n  },\n\n  validateList: function validateList(shape, params, context) {\n    if (this.validateType(params, context, [Array])) {\n      this.validateRange(shape, params.length, context, 'list member count');\n      // validate array members\n      for (var i = 0; i < params.length; i++) {\n        this.validateMember(shape.member, params[i], context + '[' + i + ']');\n      }\n    }\n  },\n\n  validateMap: function validateMap(shape, params, context) {\n    if (this.validateType(params, context, ['object'], 'map')) {\n      // Build up a count of map members to validate range traits.\n      var mapCount = 0;\n      for (var param in params) {\n        if (!Object.prototype.hasOwnProperty.call(params, param)) continue;\n        // Validate any map key trait constraints\n        this.validateMember(shape.key, param,\n                            context + '[key=\\'' + param + '\\']');\n        this.validateMember(shape.value, params[param],\n                            context + '[\\'' + param + '\\']');\n        mapCount++;\n      }\n      this.validateRange(shape, mapCount, context, 'map member count');\n    }\n  },\n\n  validateScalar: function validateScalar(shape, value, context) {\n    switch (shape.type) {\n      case null:\n      case undefined:\n      case 'string':\n        return this.validateString(shape, value, context);\n      case 'base64':\n      case 'binary':\n        return this.validatePayload(value, context);\n      case 'integer':\n      case 'float':\n        return this.validateNumber(shape, value, context);\n      case 'boolean':\n        return this.validateType(value, context, ['boolean']);\n      case 'timestamp':\n        return this.validateType(value, context, [Date,\n          /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$/, 'number'],\n          'Date object, ISO-8601 string, or a UNIX timestamp');\n      default:\n        return this.fail('UnkownType', 'Unhandled type ' +\n                         shape.type + ' for ' + context);\n    }\n  },\n\n  validateString: function validateString(shape, value, context) {\n    var validTypes = ['string'];\n    if (shape.isJsonValue) {\n      validTypes = validTypes.concat(['number', 'object', 'boolean']);\n    }\n    if (value !== null && this.validateType(value, context, validTypes)) {\n      this.validateEnum(shape, value, context);\n      this.validateRange(shape, value.length, context, 'string length');\n      this.validatePattern(shape, value, context);\n      this.validateUri(shape, value, context);\n    }\n  },\n\n  validateUri: function validateUri(shape, value, context) {\n    if (shape['location'] === 'uri') {\n      if (value.length === 0) {\n        this.fail('UriParameterError', 'Expected uri parameter to have length >= 1,'\n          + ' but found \"' + value +'\" for ' + context);\n      }\n    }\n  },\n\n  validatePattern: function validatePattern(shape, value, context) {\n    if (this.validation['pattern'] && shape['pattern'] !== undefined) {\n      if (!(new RegExp(shape['pattern'])).test(value)) {\n        this.fail('PatternMatchError', 'Provided value \"' + value + '\" '\n          + 'does not match regex pattern /' + shape['pattern'] + '/ for '\n          + context);\n      }\n    }\n  },\n\n  validateRange: function validateRange(shape, value, context, descriptor) {\n    if (this.validation['min']) {\n      if (shape['min'] !== undefined && value < shape['min']) {\n        this.fail('MinRangeError', 'Expected ' + descriptor + ' >= '\n          + shape['min'] + ', but found ' + value + ' for ' + context);\n      }\n    }\n    if (this.validation['max']) {\n      if (shape['max'] !== undefined && value > shape['max']) {\n        this.fail('MaxRangeError', 'Expected ' + descriptor + ' <= '\n          + shape['max'] + ', but found ' + value + ' for ' + context);\n      }\n    }\n  },\n\n  validateEnum: function validateRange(shape, value, context) {\n    if (this.validation['enum'] && shape['enum'] !== undefined) {\n      // Fail if the string value is not present in the enum list\n      if (shape['enum'].indexOf(value) === -1) {\n        this.fail('EnumError', 'Found string value of ' + value + ', but '\n          + 'expected ' + shape['enum'].join('|') + ' for ' + context);\n      }\n    }\n  },\n\n  validateType: function validateType(value, context, acceptedTypes, type) {\n    // We will not log an error for null or undefined, but we will return\n    // false so that callers know that the expected type was not strictly met.\n    if (value === null || value === undefined) return false;\n\n    var foundInvalidType = false;\n    for (var i = 0; i < acceptedTypes.length; i++) {\n      if (typeof acceptedTypes[i] === 'string') {\n        if (typeof value === acceptedTypes[i]) return true;\n      } else if (acceptedTypes[i] instanceof RegExp) {\n        if ((value || '').toString().match(acceptedTypes[i])) return true;\n      } else {\n        if (value instanceof acceptedTypes[i]) return true;\n        if (AWS.util.isType(value, acceptedTypes[i])) return true;\n        if (!type && !foundInvalidType) acceptedTypes = acceptedTypes.slice();\n        acceptedTypes[i] = AWS.util.typeName(acceptedTypes[i]);\n      }\n      foundInvalidType = true;\n    }\n\n    var acceptedType = type;\n    if (!acceptedType) {\n      acceptedType = acceptedTypes.join(', ').replace(/,([^,]+)$/, ', or$1');\n    }\n\n    var vowel = acceptedType.match(/^[aeiou]/i) ? 'n' : '';\n    this.fail('InvalidParameterType', 'Expected ' + context + ' to be a' +\n              vowel + ' ' + acceptedType);\n    return false;\n  },\n\n  validateNumber: function validateNumber(shape, value, context) {\n    if (value === null || value === undefined) return;\n    if (typeof value === 'string') {\n      var castedValue = parseFloat(value);\n      if (castedValue.toString() === value) value = castedValue;\n    }\n    if (this.validateType(value, context, ['number'])) {\n      this.validateRange(shape, value, context, 'numeric value');\n    }\n  },\n\n  validatePayload: function validatePayload(value, context) {\n    if (value === null || value === undefined) return;\n    if (typeof value === 'string') return;\n    if (value && typeof value.byteLength === 'number') return; // typed arrays\n    if (AWS.util.isNode()) { // special check for buffer/stream in Node.js\n      var Stream = AWS.util.stream.Stream;\n      if (AWS.util.Buffer.isBuffer(value) || value instanceof Stream) return;\n    } else {\n      if (typeof Blob !== void 0 && value instanceof Blob) return;\n    }\n\n    var types = ['Buffer', 'Stream', 'File', 'Blob', 'ArrayBuffer', 'DataView'];\n    if (value) {\n      for (var i = 0; i < types.length; i++) {\n        if (AWS.util.isType(value, types[i])) return;\n        if (AWS.util.typeName(value.constructor) === types[i]) return;\n      }\n    }\n\n    this.fail('InvalidParameterType', 'Expected ' + context + ' to be a ' +\n      'string, Buffer, Stream, Blob, or typed array object');\n  }\n});\n","var util =  require('../util');\nvar AWS = require('../core');\n\n/**\n * Prepend prefix defined by API model to endpoint that's already\n * constructed. This feature does not apply to operations using\n * endpoint discovery and can be disabled.\n * @api private\n */\nfunction populateHostPrefix(request)  {\n  var enabled = request.service.config.hostPrefixEnabled;\n  if (!enabled) return request;\n  var operationModel = request.service.api.operations[request.operation];\n  //don't marshal host prefix when operation has endpoint discovery traits\n  if (hasEndpointDiscover(request)) return request;\n  if (operationModel.endpoint && operationModel.endpoint.hostPrefix) {\n    var hostPrefixNotation = operationModel.endpoint.hostPrefix;\n    var hostPrefix = expandHostPrefix(hostPrefixNotation, request.params, operationModel.input);\n    prependEndpointPrefix(request.httpRequest.endpoint, hostPrefix);\n    validateHostname(request.httpRequest.endpoint.hostname);\n  }\n  return request;\n}\n\n/**\n * @api private\n */\nfunction hasEndpointDiscover(request) {\n  var api = request.service.api;\n  var operationModel = api.operations[request.operation];\n  var isEndpointOperation = api.endpointOperation && (api.endpointOperation === util.string.lowerFirst(operationModel.name));\n  return (operationModel.endpointDiscoveryRequired !== 'NULL' || isEndpointOperation === true);\n}\n\n/**\n * @api private\n */\nfunction expandHostPrefix(hostPrefixNotation, params, shape) {\n  util.each(shape.members, function(name, member) {\n    if (member.hostLabel === true) {\n      if (typeof params[name] !== 'string' || params[name] === '') {\n        throw util.error(new Error(), {\n          message: 'Parameter ' + name + ' should be a non-empty string.',\n          code: 'InvalidParameter'\n        });\n      }\n      var regex = new RegExp('\\\\{' + name + '\\\\}', 'g');\n      hostPrefixNotation = hostPrefixNotation.replace(regex, params[name]);\n    }\n  });\n  return hostPrefixNotation;\n}\n\n/**\n * @api private\n */\nfunction prependEndpointPrefix(endpoint, prefix) {\n  if (endpoint.host) {\n    endpoint.host = prefix + endpoint.host;\n  }\n  if (endpoint.hostname) {\n    endpoint.hostname = prefix + endpoint.hostname;\n  }\n}\n\n/**\n * @api private\n */\nfunction validateHostname(hostname) {\n  var labels = hostname.split('.');\n  //Reference: https://tools.ietf.org/html/rfc1123#section-2\n  var hostPattern = /^[a-zA-Z0-9]{1}$|^[a-zA-Z0-9][a-zA-Z0-9\\-]*[a-zA-Z0-9]$/;\n  util.arrayEach(labels, function(label) {\n    if (!label.length || label.length < 1 || label.length > 63) {\n      throw util.error(new Error(), {\n        code: 'ValidationError',\n        message: 'Hostname label length should be between 1 to 63 characters, inclusive.'\n      });\n    }\n    if (!hostPattern.test(label)) {\n      throw AWS.util.error(new Error(),\n        {code: 'ValidationError', message: label + ' is not hostname compatible.'});\n    }\n  });\n}\n\nmodule.exports = {\n  populateHostPrefix: populateHostPrefix\n};\n","var util = require('../util');\nvar JsonBuilder = require('../json/builder');\nvar JsonParser = require('../json/parser');\nvar populateHostPrefix = require('./helpers').populateHostPrefix;\n\nfunction buildRequest(req) {\n  var httpRequest = req.httpRequest;\n  var api = req.service.api;\n  var target = api.targetPrefix + '.' + api.operations[req.operation].name;\n  var version = api.jsonVersion || '1.0';\n  var input = api.operations[req.operation].input;\n  var builder = new JsonBuilder();\n\n  if (version === 1) version = '1.0';\n  httpRequest.body = builder.build(req.params || {}, input);\n  httpRequest.headers['Content-Type'] = 'application/x-amz-json-' + version;\n  httpRequest.headers['X-Amz-Target'] = target;\n\n  populateHostPrefix(req);\n}\n\nfunction extractError(resp) {\n  var error = {};\n  var httpResponse = resp.httpResponse;\n\n  error.code = httpResponse.headers['x-amzn-errortype'] || 'UnknownError';\n  if (typeof error.code === 'string') {\n    error.code = error.code.split(':')[0];\n  }\n\n  if (httpResponse.body.length > 0) {\n    try {\n      var e = JSON.parse(httpResponse.body.toString());\n      var code = e.__type || e.code || e.Code;\n      if (code) {\n        error.code = code.split('#').pop();\n      }\n      if (error.code === 'RequestEntityTooLarge') {\n        error.message = 'Request body must be less than 1 MB';\n      } else {\n        error.message = (e.message || e.Message || null);\n      }\n    } catch (e) {\n      error.statusCode = httpResponse.statusCode;\n      error.message = httpResponse.statusMessage;\n    }\n  } else {\n    error.statusCode = httpResponse.statusCode;\n    error.message = httpResponse.statusCode.toString();\n  }\n\n  resp.error = util.error(new Error(), error);\n}\n\nfunction extractData(resp) {\n  var body = resp.httpResponse.body.toString() || '{}';\n  if (resp.request.service.config.convertResponseTypes === false) {\n    resp.data = JSON.parse(body);\n  } else {\n    var operation = resp.request.service.api.operations[resp.request.operation];\n    var shape = operation.output || {};\n    var parser = new JsonParser();\n    resp.data = parser.parse(body, shape);\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData\n};\n","var AWS = require('../core');\nvar util = require('../util');\nvar QueryParamSerializer = require('../query/query_param_serializer');\nvar Shape = require('../model/shape');\nvar populateHostPrefix = require('./helpers').populateHostPrefix;\n\nfunction buildRequest(req) {\n  var operation = req.service.api.operations[req.operation];\n  var httpRequest = req.httpRequest;\n  httpRequest.headers['Content-Type'] =\n    'application/x-www-form-urlencoded; charset=utf-8';\n  httpRequest.params = {\n    Version: req.service.api.apiVersion,\n    Action: operation.name\n  };\n\n  // convert the request parameters into a list of query params,\n  // e.g. Deeply.NestedParam.0.Name=value\n  var builder = new QueryParamSerializer();\n  builder.serialize(req.params, operation.input, function(name, value) {\n    httpRequest.params[name] = value;\n  });\n  httpRequest.body = util.queryParamsToString(httpRequest.params);\n\n  populateHostPrefix(req);\n}\n\nfunction extractError(resp) {\n  var data, body = resp.httpResponse.body.toString();\n  if (body.match('<UnknownOperationException')) {\n    data = {\n      Code: 'UnknownOperation',\n      Message: 'Unknown operation ' + resp.request.operation\n    };\n  } else {\n    try {\n      data = new AWS.XML.Parser().parse(body);\n    } catch (e) {\n      data = {\n        Code: resp.httpResponse.statusCode,\n        Message: resp.httpResponse.statusMessage\n      };\n    }\n  }\n\n  if (data.requestId && !resp.requestId) resp.requestId = data.requestId;\n  if (data.Errors) data = data.Errors;\n  if (data.Error) data = data.Error;\n  if (data.Code) {\n    resp.error = util.error(new Error(), {\n      code: data.Code,\n      message: data.Message\n    });\n  } else {\n    resp.error = util.error(new Error(), {\n      code: resp.httpResponse.statusCode,\n      message: null\n    });\n  }\n}\n\nfunction extractData(resp) {\n  var req = resp.request;\n  var operation = req.service.api.operations[req.operation];\n  var shape = operation.output || {};\n  var origRules = shape;\n\n  if (origRules.resultWrapper) {\n    var tmp = Shape.create({type: 'structure'});\n    tmp.members[origRules.resultWrapper] = shape;\n    tmp.memberNames = [origRules.resultWrapper];\n    util.property(shape, 'name', shape.resultWrapper);\n    shape = tmp;\n  }\n\n  var parser = new AWS.XML.Parser();\n\n  // TODO: Refactor XML Parser to parse RequestId from response.\n  if (shape && shape.members && !shape.members._XAMZRequestId) {\n    var requestIdShape = Shape.create(\n      { type: 'string' },\n      { api: { protocol: 'query' } },\n      'requestId'\n    );\n    shape.members._XAMZRequestId = requestIdShape;\n  }\n\n  var data = parser.parse(resp.httpResponse.body.toString(), shape);\n  resp.requestId = data._XAMZRequestId || data.requestId;\n\n  if (data._XAMZRequestId) delete data._XAMZRequestId;\n\n  if (origRules.resultWrapper) {\n    if (data[origRules.resultWrapper]) {\n      util.update(data, data[origRules.resultWrapper]);\n      delete data[origRules.resultWrapper];\n    }\n  }\n\n  resp.data = data;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData\n};\n","var util = require('../util');\nvar populateHostPrefix = require('./helpers').populateHostPrefix;\n\nfunction populateMethod(req) {\n  req.httpRequest.method = req.service.api.operations[req.operation].httpMethod;\n}\n\nfunction generateURI(endpointPath, operationPath, input, params) {\n  var uri = [endpointPath, operationPath].join('/');\n  uri = uri.replace(/\\/+/g, '/');\n\n  var queryString = {}, queryStringSet = false;\n  util.each(input.members, function (name, member) {\n    var paramValue = params[name];\n    if (paramValue === null || paramValue === undefined) return;\n    if (member.location === 'uri') {\n      var regex = new RegExp('\\\\{' + member.name + '(\\\\+)?\\\\}');\n      uri = uri.replace(regex, function(_, plus) {\n        var fn = plus ? util.uriEscapePath : util.uriEscape;\n        return fn(String(paramValue));\n      });\n    } else if (member.location === 'querystring') {\n      queryStringSet = true;\n\n      if (member.type === 'list') {\n        queryString[member.name] = paramValue.map(function(val) {\n          return util.uriEscape(member.member.toWireFormat(val).toString());\n        });\n      } else if (member.type === 'map') {\n        util.each(paramValue, function(key, value) {\n          if (Array.isArray(value)) {\n            queryString[key] = value.map(function(val) {\n              return util.uriEscape(String(val));\n            });\n          } else {\n            queryString[key] = util.uriEscape(String(value));\n          }\n        });\n      } else {\n        queryString[member.name] = util.uriEscape(member.toWireFormat(paramValue).toString());\n      }\n    }\n  });\n\n  if (queryStringSet) {\n    uri += (uri.indexOf('?') >= 0 ? '&' : '?');\n    var parts = [];\n    util.arrayEach(Object.keys(queryString).sort(), function(key) {\n      if (!Array.isArray(queryString[key])) {\n        queryString[key] = [queryString[key]];\n      }\n      for (var i = 0; i < queryString[key].length; i++) {\n        parts.push(util.uriEscape(String(key)) + '=' + queryString[key][i]);\n      }\n    });\n    uri += parts.join('&');\n  }\n\n  return uri;\n}\n\nfunction populateURI(req) {\n  var operation = req.service.api.operations[req.operation];\n  var input = operation.input;\n\n  var uri = generateURI(req.httpRequest.endpoint.path, operation.httpPath, input, req.params);\n  req.httpRequest.path = uri;\n}\n\nfunction populateHeaders(req) {\n  var operation = req.service.api.operations[req.operation];\n  util.each(operation.input.members, function (name, member) {\n    var value = req.params[name];\n    if (value === null || value === undefined) return;\n\n    if (member.location === 'headers' && member.type === 'map') {\n      util.each(value, function(key, memberValue) {\n        req.httpRequest.headers[member.name + key] = memberValue;\n      });\n    } else if (member.location === 'header') {\n      value = member.toWireFormat(value).toString();\n      if (member.isJsonValue) {\n        value = util.base64.encode(value);\n      }\n      req.httpRequest.headers[member.name] = value;\n    }\n  });\n}\n\nfunction buildRequest(req) {\n  populateMethod(req);\n  populateURI(req);\n  populateHeaders(req);\n  populateHostPrefix(req);\n}\n\nfunction extractError() {\n}\n\nfunction extractData(resp) {\n  var req = resp.request;\n  var data = {};\n  var r = resp.httpResponse;\n  var operation = req.service.api.operations[req.operation];\n  var output = operation.output;\n\n  // normalize headers names to lower-cased keys for matching\n  var headers = {};\n  util.each(r.headers, function (k, v) {\n    headers[k.toLowerCase()] = v;\n  });\n\n  util.each(output.members, function(name, member) {\n    var header = (member.name || name).toLowerCase();\n    if (member.location === 'headers' && member.type === 'map') {\n      data[name] = {};\n      var location = member.isLocationName ? member.name : '';\n      var pattern = new RegExp('^' + location + '(.+)', 'i');\n      util.each(r.headers, function (k, v) {\n        var result = k.match(pattern);\n        if (result !== null) {\n          data[name][result[1]] = v;\n        }\n      });\n    } else if (member.location === 'header') {\n      if (headers[header] !== undefined) {\n        var value = member.isJsonValue ?\n          util.base64.decode(headers[header]) :\n          headers[header];\n        data[name] = member.toType(value);\n      }\n    } else if (member.location === 'statusCode') {\n      data[name] = parseInt(r.statusCode, 10);\n    }\n  });\n\n  resp.data = data;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData,\n  generateURI: generateURI\n};\n","var util = require('../util');\nvar Rest = require('./rest');\nvar Json = require('./json');\nvar JsonBuilder = require('../json/builder');\nvar JsonParser = require('../json/parser');\n\nfunction populateBody(req) {\n  var builder = new JsonBuilder();\n  var input = req.service.api.operations[req.operation].input;\n\n  if (input.payload) {\n    var params = {};\n    var payloadShape = input.members[input.payload];\n    params = req.params[input.payload];\n    if (params === undefined) return;\n\n    if (payloadShape.type === 'structure') {\n      req.httpRequest.body = builder.build(params, payloadShape);\n      applyContentTypeHeader(req);\n    } else { // non-JSON payload\n      req.httpRequest.body = params;\n      if (payloadShape.type === 'binary' || payloadShape.isStreaming) {\n        applyContentTypeHeader(req, true);\n      }\n    }\n  } else {\n    var body = builder.build(req.params, input);\n    if (body !== '{}' || req.httpRequest.method !== 'GET') { //don't send empty body for GET method\n      req.httpRequest.body = body;\n    }\n    applyContentTypeHeader(req);\n  }\n}\n\nfunction applyContentTypeHeader(req, isBinary) {\n  var operation = req.service.api.operations[req.operation];\n  var input = operation.input;\n\n  if (!req.httpRequest.headers['Content-Type']) {\n    var type = isBinary ? 'binary/octet-stream' : 'application/json';\n    req.httpRequest.headers['Content-Type'] = type;\n  }\n}\n\nfunction buildRequest(req) {\n  Rest.buildRequest(req);\n\n  // never send body payload on HEAD/DELETE\n  if (['HEAD', 'DELETE'].indexOf(req.httpRequest.method) < 0) {\n    populateBody(req);\n  }\n}\n\nfunction extractError(resp) {\n  Json.extractError(resp);\n}\n\nfunction extractData(resp) {\n  Rest.extractData(resp);\n\n  var req = resp.request;\n  var operation = req.service.api.operations[req.operation];\n  var rules = req.service.api.operations[req.operation].output || {};\n  var parser;\n  var hasEventOutput = operation.hasEventOutput;\n\n  if (rules.payload) {\n    var payloadMember = rules.members[rules.payload];\n    var body = resp.httpResponse.body;\n    if (payloadMember.isEventStream) {\n      parser = new JsonParser();\n      resp.data[payload] = util.createEventStream(\n        AWS.HttpClient.streamsApiVersion === 2 ? resp.httpResponse.stream : body,\n        parser,\n        payloadMember\n      );\n    } else if (payloadMember.type === 'structure' || payloadMember.type === 'list') {\n      var parser = new JsonParser();\n      resp.data[rules.payload] = parser.parse(body, payloadMember);\n    } else if (payloadMember.type === 'binary' || payloadMember.isStreaming) {\n      resp.data[rules.payload] = body;\n    } else {\n      resp.data[rules.payload] = payloadMember.toType(body);\n    }\n  } else {\n    var data = resp.data;\n    Json.extractData(resp);\n    resp.data = util.merge(data, resp.data);\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData\n};\n","var AWS = require('../core');\nvar util = require('../util');\nvar Rest = require('./rest');\n\nfunction populateBody(req) {\n  var input = req.service.api.operations[req.operation].input;\n  var builder = new AWS.XML.Builder();\n  var params = req.params;\n\n  var payload = input.payload;\n  if (payload) {\n    var payloadMember = input.members[payload];\n    params = params[payload];\n    if (params === undefined) return;\n\n    if (payloadMember.type === 'structure') {\n      var rootElement = payloadMember.name;\n      req.httpRequest.body = builder.toXML(params, payloadMember, rootElement, true);\n    } else { // non-xml payload\n      req.httpRequest.body = params;\n    }\n  } else {\n    req.httpRequest.body = builder.toXML(params, input, input.name ||\n      input.shape || util.string.upperFirst(req.operation) + 'Request');\n  }\n}\n\nfunction buildRequest(req) {\n  Rest.buildRequest(req);\n\n  // never send body payload on GET/HEAD\n  if (['GET', 'HEAD'].indexOf(req.httpRequest.method) < 0) {\n    populateBody(req);\n  }\n}\n\nfunction extractError(resp) {\n  Rest.extractError(resp);\n\n  var data;\n  try {\n    data = new AWS.XML.Parser().parse(resp.httpResponse.body.toString());\n  } catch (e) {\n    data = {\n      Code: resp.httpResponse.statusCode,\n      Message: resp.httpResponse.statusMessage\n    };\n  }\n\n  if (data.Errors) data = data.Errors;\n  if (data.Error) data = data.Error;\n  if (data.Code) {\n    resp.error = util.error(new Error(), {\n      code: data.Code,\n      message: data.Message\n    });\n  } else {\n    resp.error = util.error(new Error(), {\n      code: resp.httpResponse.statusCode,\n      message: null\n    });\n  }\n}\n\nfunction extractData(resp) {\n  Rest.extractData(resp);\n\n  var parser;\n  var req = resp.request;\n  var body = resp.httpResponse.body;\n  var operation = req.service.api.operations[req.operation];\n  var output = operation.output;\n\n  var hasEventOutput = operation.hasEventOutput;\n\n  var payload = output.payload;\n  if (payload) {\n    var payloadMember = output.members[payload];\n    if (payloadMember.isEventStream) {\n      parser = new AWS.XML.Parser();\n      resp.data[payload] = util.createEventStream(\n        AWS.HttpClient.streamsApiVersion === 2 ? resp.httpResponse.stream : resp.httpResponse.body,\n        parser,\n        payloadMember\n      );\n    } else if (payloadMember.type === 'structure') {\n      parser = new AWS.XML.Parser();\n      resp.data[payload] = parser.parse(body.toString(), payloadMember);\n    } else if (payloadMember.type === 'binary' || payloadMember.isStreaming) {\n      resp.data[payload] = body;\n    } else {\n      resp.data[payload] = payloadMember.toType(body);\n    }\n  } else if (body.length > 0) {\n    parser = new AWS.XML.Parser();\n    var data = parser.parse(body.toString(), output);\n    util.update(resp.data, data);\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  buildRequest: buildRequest,\n  extractError: extractError,\n  extractData: extractData\n};\n","var AWS = require('../core');\n\n/**\n * Resolve client-side monitoring configuration from either environmental variables\n * or shared config file. Configurations from environmental variables have higher priority\n * than those from shared config file. The resolver will try to read the shared config file\n * no matter whether the AWS_SDK_LOAD_CONFIG variable is set.\n * @api private\n */\nfunction resolveMonitoringConfig() {\n  var config = {\n    port: undefined,\n    clientId: undefined,\n    enabled: undefined,\n    host: undefined\n  };\n  if (fromEnvironment(config) || fromConfigFile(config)) return toJSType(config);\n  return toJSType(config);\n}\n\n/**\n * Resolve configurations from environmental variables.\n * @param {object} client side monitoring config object needs to be resolved\n * @returns {boolean} whether resolving configurations is done\n * @api private\n */\nfunction fromEnvironment(config) {\n  config.port = config.port || process.env.AWS_CSM_PORT;\n  config.enabled = config.enabled || process.env.AWS_CSM_ENABLED;\n  config.clientId = config.clientId || process.env.AWS_CSM_CLIENT_ID;\n  config.host = config.host || process.env.AWS_CSM_HOST;\n  return config.port && config.enabled && config.clientId && config.host ||\n    ['false', '0'].indexOf(config.enabled) >= 0; //no need to read shared config file if explicitely disabled\n}\n\n/**\n * Resolve cofigurations from shared config file with specified role name\n * @param {object} client side monitoring config object needs to be resolved\n * @returns {boolean} whether resolving configurations is done\n * @api private\n */\nfunction fromConfigFile(config) {\n  var sharedFileConfig;\n  try {\n    var configFile = AWS.util.iniLoader.loadFrom({\n      isConfig: true,\n      filename: process.env[AWS.util.sharedConfigFileEnv]\n    });\n    var sharedFileConfig = configFile[\n      process.env.AWS_PROFILE || AWS.util.defaultProfile\n    ];\n  } catch (err) {\n    return false;\n  }\n  if (!sharedFileConfig) return config;\n  config.port = config.port || sharedFileConfig.csm_port;\n  config.enabled = config.enabled || sharedFileConfig.csm_enabled;\n  config.clientId = config.clientId || sharedFileConfig.csm_client_id;\n  config.host = config.host || sharedFileConfig.csm_host;\n  return config.port && config.enabled && config.clientId && config.host;\n}\n\n/**\n * Transfer the resolved configuration value to proper types: port as number, enabled\n * as boolean and clientId as string. The 'enabled' flag is valued to false when set\n * to 'false' or '0'.\n * @param {object} resolved client side monitoring config\n * @api private\n */\nfunction toJSType(config) {\n    //config.XXX is either undefined or string\n  var falsyNotations = ['false', '0', undefined];\n  if (!config.enabled || falsyNotations.indexOf(config.enabled.toLowerCase()) >= 0) {\n    config.enabled = false;\n  } else {\n    config.enabled = true;\n  }\n  config.port = config.port ? parseInt(config.port, 10) : undefined;\n  return config;\n}\n\nmodule.exports = resolveMonitoringConfig;\n","var util = require('../core').util;\nvar dgram = require('dgram');\nvar stringToBuffer = util.buffer.toBuffer;\n\nvar MAX_MESSAGE_SIZE = 1024 * 8; // 8 KB\n\n/**\n * Publishes metrics via udp.\n * @param {object} options Paramters for Publisher constructor\n * @param {number} [options.port = 31000] Port number\n * @param {string} [options.clientId = ''] Client Identifier\n * @param {boolean} [options.enabled = false] enable sending metrics datagram\n * @api private\n */\nfunction Publisher(options) {\n    // handle configuration\n    options = options || {};\n    this.enabled = options.enabled || false;\n    this.port = options.port || 31000;\n    this.clientId = options.clientId || '';\n    this.address = options.host || '127.0.0.1';\n    if (this.clientId.length > 255) {\n        // ClientId has a max length of 255\n        this.clientId = this.clientId.substr(0, 255);\n    }\n    this.messagesInFlight = 0;\n}\n\nPublisher.prototype.fieldsToTrim = {\n    UserAgent: 256,\n    SdkException: 128,\n    SdkExceptionMessage: 512,\n    AwsException: 128,\n    AwsExceptionMessage: 512,\n    FinalSdkException: 128,\n    FinalSdkExceptionMessage: 512,\n    FinalAwsException: 128,\n    FinalAwsExceptionMessage: 512\n\n};\n\n/**\n * Trims fields that have a specified max length.\n * @param {object} event ApiCall or ApiCallAttempt event.\n * @returns {object}\n * @api private\n */\nPublisher.prototype.trimFields = function(event) {\n    var trimmableFields = Object.keys(this.fieldsToTrim);\n    for (var i = 0, iLen = trimmableFields.length; i < iLen; i++) {\n        var field = trimmableFields[i];\n        if (event.hasOwnProperty(field)) {\n            var maxLength = this.fieldsToTrim[field];\n            var value = event[field];\n            if (value && value.length > maxLength) {\n                event[field] = value.substr(0, maxLength);\n            }\n        }\n    }\n    return event;\n};\n\n/**\n * Handles ApiCall and ApiCallAttempt events.\n * @param {Object} event apiCall or apiCallAttempt event.\n * @api private\n */\nPublisher.prototype.eventHandler = function(event) {\n    // set the clientId\n    event.ClientId = this.clientId;\n\n    this.trimFields(event);\n\n    var message = stringToBuffer(JSON.stringify(event));\n    if (!this.enabled || message.length > MAX_MESSAGE_SIZE) {\n        // drop the message if publisher not enabled or it is too large\n        return;\n    }\n\n    this.publishDatagram(message);\n};\n\n/**\n * Publishes message to an agent.\n * @param {Buffer} message JSON message to send to agent.\n * @api private\n */\nPublisher.prototype.publishDatagram = function(message) {\n    var self = this;\n    var client = this.getClient();\n\n    this.messagesInFlight++;\n    this.client.send(message, 0, message.length, this.port, this.address, function(err, bytes) {\n        if (--self.messagesInFlight <= 0) {\n            // destroy existing client so the event loop isn't kept open\n            self.destroyClient();\n        }\n    });\n};\n\n/**\n * Returns an existing udp socket, or creates one if it doesn't already exist.\n * @api private\n */\nPublisher.prototype.getClient = function() {\n    if (!this.client) {\n        this.client = dgram.createSocket('udp4');\n    }\n    return this.client;\n};\n\n/**\n * Destroys the udp socket.\n * @api private\n */\nPublisher.prototype.destroyClient = function() {\n    if (this.client) {\n        this.client.close();\n        this.client = void 0;\n    }\n};\n\nmodule.exports = {\n    Publisher: Publisher\n};\n","var util = require('../util');\n\nfunction QueryParamSerializer() {\n}\n\nQueryParamSerializer.prototype.serialize = function(params, shape, fn) {\n  serializeStructure('', params, shape, fn);\n};\n\nfunction ucfirst(shape) {\n  if (shape.isQueryName || shape.api.protocol !== 'ec2') {\n    return shape.name;\n  } else {\n    return shape.name[0].toUpperCase() + shape.name.substr(1);\n  }\n}\n\nfunction serializeStructure(prefix, struct, rules, fn) {\n  util.each(rules.members, function(name, member) {\n    var value = struct[name];\n    if (value === null || value === undefined) return;\n\n    var memberName = ucfirst(member);\n    memberName = prefix ? prefix + '.' + memberName : memberName;\n    serializeMember(memberName, value, member, fn);\n  });\n}\n\nfunction serializeMap(name, map, rules, fn) {\n  var i = 1;\n  util.each(map, function (key, value) {\n    var prefix = rules.flattened ? '.' : '.entry.';\n    var position = prefix + (i++) + '.';\n    var keyName = position + (rules.key.name || 'key');\n    var valueName = position + (rules.value.name || 'value');\n    serializeMember(name + keyName, key, rules.key, fn);\n    serializeMember(name + valueName, value, rules.value, fn);\n  });\n}\n\nfunction serializeList(name, list, rules, fn) {\n  var memberRules = rules.member || {};\n\n  if (list.length === 0) {\n    fn.call(this, name, null);\n    return;\n  }\n\n  util.arrayEach(list, function (v, n) {\n    var suffix = '.' + (n + 1);\n    if (rules.api.protocol === 'ec2') {\n      // Do nothing for EC2\n      suffix = suffix + ''; // make linter happy\n    } else if (rules.flattened) {\n      if (memberRules.name) {\n        var parts = name.split('.');\n        parts.pop();\n        parts.push(ucfirst(memberRules));\n        name = parts.join('.');\n      }\n    } else {\n      suffix = '.' + (memberRules.name ? memberRules.name : 'member') + suffix;\n    }\n    serializeMember(name + suffix, v, memberRules, fn);\n  });\n}\n\nfunction serializeMember(name, value, rules, fn) {\n  if (value === null || value === undefined) return;\n  if (rules.type === 'structure') {\n    serializeStructure(name, value, rules, fn);\n  } else if (rules.type === 'list') {\n    serializeList(name, value, rules, fn);\n  } else if (rules.type === 'map') {\n    serializeMap(name, value, rules, fn);\n  } else {\n    fn(name, rules.toWireFormat(value).toString());\n  }\n}\n\n/**\n * @api private\n */\nmodule.exports = QueryParamSerializer;\n","module.exports = {\n  //provide realtime clock for performance measurement\n  now: function now() {\n    var second = process.hrtime();\n    return second[0] * 1000 + (second[1] / 1000000);\n  }\n};\n","var util = require('./util');\nvar regionConfig = require('./region_config_data.json');\n\nfunction generateRegionPrefix(region) {\n  if (!region) return null;\n\n  var parts = region.split('-');\n  if (parts.length < 3) return null;\n  return parts.slice(0, parts.length - 2).join('-') + '-*';\n}\n\nfunction derivedKeys(service) {\n  var region = service.config.region;\n  var regionPrefix = generateRegionPrefix(region);\n  var endpointPrefix = service.api.endpointPrefix;\n\n  return [\n    [region, endpointPrefix],\n    [regionPrefix, endpointPrefix],\n    [region, '*'],\n    [regionPrefix, '*'],\n    ['*', endpointPrefix],\n    ['*', '*']\n  ].map(function(item) {\n    return item[0] && item[1] ? item.join('/') : null;\n  });\n}\n\nfunction applyConfig(service, config) {\n  util.each(config, function(key, value) {\n    if (key === 'globalEndpoint') return;\n    if (service.config[key] === undefined || service.config[key] === null) {\n      service.config[key] = value;\n    }\n  });\n}\n\nfunction configureEndpoint(service) {\n  var keys = derivedKeys(service);\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!key) continue;\n\n    if (Object.prototype.hasOwnProperty.call(regionConfig.rules, key)) {\n      var config = regionConfig.rules[key];\n      if (typeof config === 'string') {\n        config = regionConfig.patterns[config];\n      }\n\n      // set dualstack endpoint\n      if (service.config.useDualstack && util.isDualstackAvailable(service)) {\n        config = util.copy(config);\n        config.endpoint = config.endpoint.replace(\n          /{service}\\.({region}\\.)?/,\n          '{service}.dualstack.{region}.'\n        );\n      }\n\n      // set global endpoint\n      service.isGlobalEndpoint = !!config.globalEndpoint;\n      if (config.signingRegion) {\n        service.signingRegion = config.signingRegion;\n      }\n\n      // signature version\n      if (!config.signatureVersion) config.signatureVersion = 'v4';\n\n      // merge config\n      applyConfig(service, config);\n      return;\n    }\n  }\n}\n\nfunction getEndpointSuffix(region) {\n  var regionRegexes = {\n    '^(us|eu|ap|sa|ca|me)\\\\-\\\\w+\\\\-\\\\d+$': 'amazonaws.com',\n    '^cn\\\\-\\\\w+\\\\-\\\\d+$': 'amazonaws.com.cn',\n    '^us\\\\-gov\\\\-\\\\w+\\\\-\\\\d+$': 'amazonaws.com',\n    '^us\\\\-iso\\\\-\\\\w+\\\\-\\\\d+$': 'c2s.ic.gov',\n    '^us\\\\-isob\\\\-\\\\w+\\\\-\\\\d+$': 'sc2s.sgov.gov'\n  };\n  var defaultSuffix = 'amazonaws.com';\n  var regexes = Object.keys(regionRegexes);\n  for (var i = 0; i < regexes.length; i++) {\n    var regionPattern = RegExp(regexes[i]);\n    var dnsSuffix = regionRegexes[regexes[i]];\n    if (regionPattern.test(region)) return dnsSuffix;\n  }\n  return defaultSuffix;\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n  configureEndpoint: configureEndpoint,\n  getEndpointSuffix: getEndpointSuffix\n};\n","var AWS = require('./core');\nvar AcceptorStateMachine = require('./state_machine');\nvar inherit = AWS.util.inherit;\nvar domain = AWS.util.domain;\nvar jmespath = require('jmespath');\n\n/**\n * @api private\n */\nvar hardErrorStates = {success: 1, error: 1, complete: 1};\n\nfunction isTerminalState(machine) {\n  return Object.prototype.hasOwnProperty.call(hardErrorStates, machine._asm.currentState);\n}\n\nvar fsm = new AcceptorStateMachine();\nfsm.setupStates = function() {\n  var transition = function(_, done) {\n    var self = this;\n    self._haltHandlersOnError = false;\n\n    self.emit(self._asm.currentState, function(err) {\n      if (err) {\n        if (isTerminalState(self)) {\n          if (domain && self.domain instanceof domain.Domain) {\n            err.domainEmitter = self;\n            err.domain = self.domain;\n            err.domainThrown = false;\n            self.domain.emit('error', err);\n          } else {\n            throw err;\n          }\n        } else {\n          self.response.error = err;\n          done(err);\n        }\n      } else {\n        done(self.response.error);\n      }\n    });\n\n  };\n\n  this.addState('validate', 'build', 'error', transition);\n  this.addState('build', 'afterBuild', 'restart', transition);\n  this.addState('afterBuild', 'sign', 'restart', transition);\n  this.addState('sign', 'send', 'retry', transition);\n  this.addState('retry', 'afterRetry', 'afterRetry', transition);\n  this.addState('afterRetry', 'sign', 'error', transition);\n  this.addState('send', 'validateResponse', 'retry', transition);\n  this.addState('validateResponse', 'extractData', 'extractError', transition);\n  this.addState('extractError', 'extractData', 'retry', transition);\n  this.addState('extractData', 'success', 'retry', transition);\n  this.addState('restart', 'build', 'error', transition);\n  this.addState('success', 'complete', 'complete', transition);\n  this.addState('error', 'complete', 'complete', transition);\n  this.addState('complete', null, null, transition);\n};\nfsm.setupStates();\n\n/**\n * ## Asynchronous Requests\n *\n * All requests made through the SDK are asynchronous and use a\n * callback interface. Each service method that kicks off a request\n * returns an `AWS.Request` object that you can use to register\n * callbacks.\n *\n * For example, the following service method returns the request\n * object as \"request\", which can be used to register callbacks:\n *\n * ```javascript\n * // request is an AWS.Request object\n * var request = ec2.describeInstances();\n *\n * // register callbacks on request to retrieve response data\n * request.on('success', function(response) {\n *   console.log(response.data);\n * });\n * ```\n *\n * When a request is ready to be sent, the {send} method should\n * be called:\n *\n * ```javascript\n * request.send();\n * ```\n *\n * Since registered callbacks may or may not be idempotent, requests should only\n * be sent once. To perform the same operation multiple times, you will need to\n * create multiple request objects, each with its own registered callbacks.\n *\n * ## Removing Default Listeners for Events\n *\n * Request objects are built with default listeners for the various events,\n * depending on the service type. In some cases, you may want to remove\n * some built-in listeners to customize behaviour. Doing this requires\n * access to the built-in listener functions, which are exposed through\n * the {AWS.EventListeners.Core} namespace. For instance, you may\n * want to customize the HTTP handler used when sending a request. In this\n * case, you can remove the built-in listener associated with the 'send'\n * event, the {AWS.EventListeners.Core.SEND} listener and add your own.\n *\n * ## Multiple Callbacks and Chaining\n *\n * You can register multiple callbacks on any request object. The\n * callbacks can be registered for different events, or all for the\n * same event. In addition, you can chain callback registration, for\n * example:\n *\n * ```javascript\n * request.\n *   on('success', function(response) {\n *     console.log(\"Success!\");\n *   }).\n *   on('error', function(error, response) {\n *     console.log(\"Error!\");\n *   }).\n *   on('complete', function(response) {\n *     console.log(\"Always!\");\n *   }).\n *   send();\n * ```\n *\n * The above example will print either \"Success! Always!\", or \"Error! Always!\",\n * depending on whether the request succeeded or not.\n *\n * @!attribute httpRequest\n *   @readonly\n *   @!group HTTP Properties\n *   @return [AWS.HttpRequest] the raw HTTP request object\n *     containing request headers and body information\n *     sent by the service.\n *\n * @!attribute startTime\n *   @readonly\n *   @!group Operation Properties\n *   @return [Date] the time that the request started\n *\n * @!group Request Building Events\n *\n * @!event validate(request)\n *   Triggered when a request is being validated. Listeners\n *   should throw an error if the request should not be sent.\n *   @param request [Request] the request object being sent\n *   @see AWS.EventListeners.Core.VALIDATE_CREDENTIALS\n *   @see AWS.EventListeners.Core.VALIDATE_REGION\n *   @example Ensuring that a certain parameter is set before sending a request\n *     var req = s3.putObject(params);\n *     req.on('validate', function() {\n *       if (!req.params.Body.match(/^Hello\\s/)) {\n *         throw new Error('Body must start with \"Hello \"');\n *       }\n *     });\n *     req.send(function(err, data) { ... });\n *\n * @!event build(request)\n *   Triggered when the request payload is being built. Listeners\n *   should fill the necessary information to send the request\n *   over HTTP.\n *   @param (see AWS.Request~validate)\n *   @example Add a custom HTTP header to a request\n *     var req = s3.putObject(params);\n *     req.on('build', function() {\n *       req.httpRequest.headers['Custom-Header'] = 'value';\n *     });\n *     req.send(function(err, data) { ... });\n *\n * @!event sign(request)\n *   Triggered when the request is being signed. Listeners should\n *   add the correct authentication headers and/or adjust the body,\n *   depending on the authentication mechanism being used.\n *   @param (see AWS.Request~validate)\n *\n * @!group Request Sending Events\n *\n * @!event send(response)\n *   Triggered when the request is ready to be sent. Listeners\n *   should call the underlying transport layer to initiate\n *   the sending of the request.\n *   @param response [Response] the response object\n *   @context [Request] the request object that was sent\n *   @see AWS.EventListeners.Core.SEND\n *\n * @!event retry(response)\n *   Triggered when a request failed and might need to be retried or redirected.\n *   If the response is retryable, the listener should set the\n *   `response.error.retryable` property to `true`, and optionally set\n *   `response.error.retryDelay` to the millisecond delay for the next attempt.\n *   In the case of a redirect, `response.error.redirect` should be set to\n *   `true` with `retryDelay` set to an optional delay on the next request.\n *\n *   If a listener decides that a request should not be retried,\n *   it should set both `retryable` and `redirect` to false.\n *\n *   Note that a retryable error will be retried at most\n *   {AWS.Config.maxRetries} times (based on the service object's config).\n *   Similarly, a request that is redirected will only redirect at most\n *   {AWS.Config.maxRedirects} times.\n *\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *   @example Adding a custom retry for a 404 response\n *     request.on('retry', function(response) {\n *       // this resource is not yet available, wait 10 seconds to get it again\n *       if (response.httpResponse.statusCode === 404 && response.error) {\n *         response.error.retryable = true;   // retry this error\n *         response.error.retryDelay = 10000; // wait 10 seconds\n *       }\n *     });\n *\n * @!group Data Parsing Events\n *\n * @!event extractError(response)\n *   Triggered on all non-2xx requests so that listeners can extract\n *   error details from the response body. Listeners to this event\n *   should set the `response.error` property.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!event extractData(response)\n *   Triggered in successful requests to allow listeners to\n *   de-serialize the response body into `response.data`.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!group Completion Events\n *\n * @!event success(response)\n *   Triggered when the request completed successfully.\n *   `response.data` will contain the response data and\n *   `response.error` will be null.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!event error(error, response)\n *   Triggered when an error occurs at any point during the\n *   request. `response.error` will contain details about the error\n *   that occurred. `response.data` will be null.\n *   @param error [Error] the error object containing details about\n *     the error that occurred.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!event complete(response)\n *   Triggered whenever a request cycle completes. `response.error`\n *   should be checked, since the request may have failed.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!group HTTP Events\n *\n * @!event httpHeaders(statusCode, headers, response, statusMessage)\n *   Triggered when headers are sent by the remote server\n *   @param statusCode [Integer] the HTTP response code\n *   @param headers [map<String,String>] the response headers\n *   @param (see AWS.Request~send)\n *   @param statusMessage [String] A status message corresponding to the HTTP\n *                                 response code\n *   @context (see AWS.Request~send)\n *\n * @!event httpData(chunk, response)\n *   Triggered when data is sent by the remote server\n *   @param chunk [Buffer] the buffer data containing the next data chunk\n *     from the server\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *   @see AWS.EventListeners.Core.HTTP_DATA\n *\n * @!event httpUploadProgress(progress, response)\n *   Triggered when the HTTP request has uploaded more data\n *   @param progress [map] An object containing the `loaded` and `total` bytes\n *     of the request.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *   @note This event will not be emitted in Node.js 0.8.x.\n *\n * @!event httpDownloadProgress(progress, response)\n *   Triggered when the HTTP request has downloaded more data\n *   @param progress [map] An object containing the `loaded` and `total` bytes\n *     of the request.\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *   @note This event will not be emitted in Node.js 0.8.x.\n *\n * @!event httpError(error, response)\n *   Triggered when the HTTP request failed\n *   @param error [Error] the error object that was thrown\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @!event httpDone(response)\n *   Triggered when the server is finished sending data\n *   @param (see AWS.Request~send)\n *   @context (see AWS.Request~send)\n *\n * @see AWS.Response\n */\nAWS.Request = inherit({\n\n  /**\n   * Creates a request for an operation on a given service with\n   * a set of input parameters.\n   *\n   * @param service [AWS.Service] the service to perform the operation on\n   * @param operation [String] the operation to perform on the service\n   * @param params [Object] parameters to send to the operation.\n   *   See the operation's documentation for the format of the\n   *   parameters.\n   */\n  constructor: function Request(service, operation, params) {\n    var endpoint = service.endpoint;\n    var region = service.config.region;\n    var customUserAgent = service.config.customUserAgent;\n\n    if (service.isGlobalEndpoint) {\n      if (service.signingRegion) {\n        region = service.signingRegion;\n      } else {\n        region = 'us-east-1';\n      }\n    }\n\n    this.domain = domain && domain.active;\n    this.service = service;\n    this.operation = operation;\n    this.params = params || {};\n    this.httpRequest = new AWS.HttpRequest(endpoint, region);\n    this.httpRequest.appendToUserAgent(customUserAgent);\n    this.startTime = service.getSkewCorrectedDate();\n\n    this.response = new AWS.Response(this);\n    this._asm = new AcceptorStateMachine(fsm.states, 'validate');\n    this._haltHandlersOnError = false;\n\n    AWS.SequentialExecutor.call(this);\n    this.emit = this.emitEvent;\n  },\n\n  /**\n   * @!group Sending a Request\n   */\n\n  /**\n   * @overload send(callback = null)\n   *   Sends the request object.\n   *\n   *   @callback callback function(err, data)\n   *     If a callback is supplied, it is called when a response is returned\n   *     from the service.\n   *     @context [AWS.Request] the request object being sent.\n   *     @param err [Error] the error object returned from the request.\n   *       Set to `null` if the request is successful.\n   *     @param data [Object] the de-serialized data returned from\n   *       the request. Set to `null` if a request error occurs.\n   *   @example Sending a request with a callback\n   *     request = s3.putObject({Bucket: 'bucket', Key: 'key'});\n   *     request.send(function(err, data) { console.log(err, data); });\n   *   @example Sending a request with no callback (using event handlers)\n   *     request = s3.putObject({Bucket: 'bucket', Key: 'key'});\n   *     request.on('complete', function(response) { ... }); // register a callback\n   *     request.send();\n   */\n  send: function send(callback) {\n    if (callback) {\n      // append to user agent\n      this.httpRequest.appendToUserAgent('callback');\n      this.on('complete', function (resp) {\n        callback.call(resp, resp.error, resp.data);\n      });\n    }\n    this.runTo();\n\n    return this.response;\n  },\n\n  /**\n   * @!method  promise()\n   *   Sends the request and returns a 'thenable' promise.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @callback fulfilledCallback function(data)\n   *     Called if the promise is fulfilled.\n   *     @param data [Object] the de-serialized data returned from the request.\n   *   @callback rejectedCallback function(error)\n   *     Called if the promise is rejected.\n   *     @param error [Error] the error object returned from the request.\n   *   @return [Promise] A promise that represents the state of the request.\n   *   @example Sending a request using promises.\n   *     var request = s3.putObject({Bucket: 'bucket', Key: 'key'});\n   *     var result = request.promise();\n   *     result.then(function(data) { ... }, function(error) { ... });\n   */\n\n  /**\n   * @api private\n   */\n  build: function build(callback) {\n    return this.runTo('send', callback);\n  },\n\n  /**\n   * @api private\n   */\n  runTo: function runTo(state, done) {\n    this._asm.runTo(state, done, this);\n    return this;\n  },\n\n  /**\n   * Aborts a request, emitting the error and complete events.\n   *\n   * @!macro nobrowser\n   * @example Aborting a request after sending\n   *   var params = {\n   *     Bucket: 'bucket', Key: 'key',\n   *     Body: Buffer.alloc(1024 * 1024 * 5) // 5MB payload\n   *   };\n   *   var request = s3.putObject(params);\n   *   request.send(function (err, data) {\n   *     if (err) console.log(\"Error:\", err.code, err.message);\n   *     else console.log(data);\n   *   });\n   *\n   *   // abort request in 1 second\n   *   setTimeout(request.abort.bind(request), 1000);\n   *\n   *   // prints \"Error: RequestAbortedError Request aborted by user\"\n   * @return [AWS.Request] the same request object, for chaining.\n   * @since v1.4.0\n   */\n  abort: function abort() {\n    this.removeAllListeners('validateResponse');\n    this.removeAllListeners('extractError');\n    this.on('validateResponse', function addAbortedError(resp) {\n      resp.error = AWS.util.error(new Error('Request aborted by user'), {\n         code: 'RequestAbortedError', retryable: false\n      });\n    });\n\n    if (this.httpRequest.stream && !this.httpRequest.stream.didCallback) { // abort HTTP stream\n      this.httpRequest.stream.abort();\n      if (this.httpRequest._abortCallback) {\n         this.httpRequest._abortCallback();\n      } else {\n        this.removeAllListeners('send'); // haven't sent yet, so let's not\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Iterates over each page of results given a pageable request, calling\n   * the provided callback with each page of data. After all pages have been\n   * retrieved, the callback is called with `null` data.\n   *\n   * @note This operation can generate multiple requests to a service.\n   * @example Iterating over multiple pages of objects in an S3 bucket\n   *   var pages = 1;\n   *   s3.listObjects().eachPage(function(err, data) {\n   *     if (err) return;\n   *     console.log(\"Page\", pages++);\n   *     console.log(data);\n   *   });\n   * @example Iterating over multiple pages with an asynchronous callback\n   *   s3.listObjects(params).eachPage(function(err, data, done) {\n   *     doSomethingAsyncAndOrExpensive(function() {\n   *       // The next page of results isn't fetched until done is called\n   *       done();\n   *     });\n   *   });\n   * @callback callback function(err, data, [doneCallback])\n   *   Called with each page of resulting data from the request. If the\n   *   optional `doneCallback` is provided in the function, it must be called\n   *   when the callback is complete.\n   *\n   *   @param err [Error] an error object, if an error occurred.\n   *   @param data [Object] a single page of response data. If there is no\n   *     more data, this object will be `null`.\n   *   @param doneCallback [Function] an optional done callback. If this\n   *     argument is defined in the function declaration, it should be called\n   *     when the next page is ready to be retrieved. This is useful for\n   *     controlling serial pagination across asynchronous operations.\n   *   @return [Boolean] if the callback returns `false`, pagination will\n   *     stop.\n   *\n   * @see AWS.Request.eachItem\n   * @see AWS.Response.nextPage\n   * @since v1.4.0\n   */\n  eachPage: function eachPage(callback) {\n    // Make all callbacks async-ish\n    callback = AWS.util.fn.makeAsync(callback, 3);\n\n    function wrappedCallback(response) {\n      callback.call(response, response.error, response.data, function (result) {\n        if (result === false) return;\n\n        if (response.hasNextPage()) {\n          response.nextPage().on('complete', wrappedCallback).send();\n        } else {\n          callback.call(response, null, null, AWS.util.fn.noop);\n        }\n      });\n    }\n\n    this.on('complete', wrappedCallback).send();\n  },\n\n  /**\n   * Enumerates over individual items of a request, paging the responses if\n   * necessary.\n   *\n   * @api experimental\n   * @since v1.4.0\n   */\n  eachItem: function eachItem(callback) {\n    var self = this;\n    function wrappedCallback(err, data) {\n      if (err) return callback(err, null);\n      if (data === null) return callback(null, null);\n\n      var config = self.service.paginationConfig(self.operation);\n      var resultKey = config.resultKey;\n      if (Array.isArray(resultKey)) resultKey = resultKey[0];\n      var items = jmespath.search(data, resultKey);\n      var continueIteration = true;\n      AWS.util.arrayEach(items, function(item) {\n        continueIteration = callback(null, item);\n        if (continueIteration === false) {\n          return AWS.util.abort;\n        }\n      });\n      return continueIteration;\n    }\n\n    this.eachPage(wrappedCallback);\n  },\n\n  /**\n   * @return [Boolean] whether the operation can return multiple pages of\n   *   response data.\n   * @see AWS.Response.eachPage\n   * @since v1.4.0\n   */\n  isPageable: function isPageable() {\n    return this.service.paginationConfig(this.operation) ? true : false;\n  },\n\n  /**\n   * Sends the request and converts the request object into a readable stream\n   * that can be read from or piped into a writable stream.\n   *\n   * @note The data read from a readable stream contains only\n   *   the raw HTTP body contents.\n   * @example Manually reading from a stream\n   *   request.createReadStream().on('data', function(data) {\n   *     console.log(\"Got data:\", data.toString());\n   *   });\n   * @example Piping a request body into a file\n   *   var out = fs.createWriteStream('/path/to/outfile.jpg');\n   *   s3.service.getObject(params).createReadStream().pipe(out);\n   * @return [Stream] the readable stream object that can be piped\n   *   or read from (by registering 'data' event listeners).\n   * @!macro nobrowser\n   */\n  createReadStream: function createReadStream() {\n    var streams = AWS.util.stream;\n    var req = this;\n    var stream = null;\n\n    if (AWS.HttpClient.streamsApiVersion === 2) {\n      stream = new streams.PassThrough();\n      process.nextTick(function() { req.send(); });\n    } else {\n      stream = new streams.Stream();\n      stream.readable = true;\n\n      stream.sent = false;\n      stream.on('newListener', function(event) {\n        if (!stream.sent && event === 'data') {\n          stream.sent = true;\n          process.nextTick(function() { req.send(); });\n        }\n      });\n    }\n\n    this.on('error', function(err) {\n      stream.emit('error', err);\n    });\n\n    this.on('httpHeaders', function streamHeaders(statusCode, headers, resp) {\n      if (statusCode < 300) {\n        req.removeListener('httpData', AWS.EventListeners.Core.HTTP_DATA);\n        req.removeListener('httpError', AWS.EventListeners.Core.HTTP_ERROR);\n        req.on('httpError', function streamHttpError(error) {\n          resp.error = error;\n          resp.error.retryable = false;\n        });\n\n        var shouldCheckContentLength = false;\n        var expectedLen;\n        if (req.httpRequest.method !== 'HEAD') {\n          expectedLen = parseInt(headers['content-length'], 10);\n        }\n        if (expectedLen !== undefined && !isNaN(expectedLen) && expectedLen >= 0) {\n          shouldCheckContentLength = true;\n          var receivedLen = 0;\n        }\n\n        var checkContentLengthAndEmit = function checkContentLengthAndEmit() {\n          if (shouldCheckContentLength && receivedLen !== expectedLen) {\n            stream.emit('error', AWS.util.error(\n              new Error('Stream content length mismatch. Received ' +\n                receivedLen + ' of ' + expectedLen + ' bytes.'),\n              { code: 'StreamContentLengthMismatch' }\n            ));\n          } else if (AWS.HttpClient.streamsApiVersion === 2) {\n            stream.end();\n          } else {\n            stream.emit('end');\n          }\n        };\n\n        var httpStream = resp.httpResponse.createUnbufferedStream();\n\n        if (AWS.HttpClient.streamsApiVersion === 2) {\n          if (shouldCheckContentLength) {\n            var lengthAccumulator = new streams.PassThrough();\n            lengthAccumulator._write = function(chunk) {\n              if (chunk && chunk.length) {\n                receivedLen += chunk.length;\n              }\n              return streams.PassThrough.prototype._write.apply(this, arguments);\n            };\n\n            lengthAccumulator.on('end', checkContentLengthAndEmit);\n            stream.on('error', function(err) {\n              shouldCheckContentLength = false;\n              httpStream.unpipe(lengthAccumulator);\n              lengthAccumulator.emit('end');\n              lengthAccumulator.end();\n            });\n            httpStream.pipe(lengthAccumulator).pipe(stream, { end: false });\n          } else {\n            httpStream.pipe(stream);\n          }\n        } else {\n\n          if (shouldCheckContentLength) {\n            httpStream.on('data', function(arg) {\n              if (arg && arg.length) {\n                receivedLen += arg.length;\n              }\n            });\n          }\n\n          httpStream.on('data', function(arg) {\n            stream.emit('data', arg);\n          });\n          httpStream.on('end', checkContentLengthAndEmit);\n        }\n\n        httpStream.on('error', function(err) {\n          shouldCheckContentLength = false;\n          stream.emit('error', err);\n        });\n      }\n    });\n\n    return stream;\n  },\n\n  /**\n   * @param [Array,Response] args This should be the response object,\n   *   or an array of args to send to the event.\n   * @api private\n   */\n  emitEvent: function emit(eventName, args, done) {\n    if (typeof args === 'function') { done = args; args = null; }\n    if (!done) done = function() { };\n    if (!args) args = this.eventParameters(eventName, this.response);\n\n    var origEmit = AWS.SequentialExecutor.prototype.emit;\n    origEmit.call(this, eventName, args, function (err) {\n      if (err) this.response.error = err;\n      done.call(this, err);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  eventParameters: function eventParameters(eventName) {\n    switch (eventName) {\n      case 'restart':\n      case 'validate':\n      case 'sign':\n      case 'build':\n      case 'afterValidate':\n      case 'afterBuild':\n        return [this];\n      case 'error':\n        return [this.response.error, this.response];\n      default:\n        return [this.response];\n    }\n  },\n\n  /**\n   * @api private\n   */\n  presign: function presign(expires, callback) {\n    if (!callback && typeof expires === 'function') {\n      callback = expires;\n      expires = null;\n    }\n    return new AWS.Signers.Presign().sign(this.toGet(), expires, callback);\n  },\n\n  /**\n   * @api private\n   */\n  isPresigned: function isPresigned() {\n    return Object.prototype.hasOwnProperty.call(this.httpRequest.headers, 'presigned-expires');\n  },\n\n  /**\n   * @api private\n   */\n  toUnauthenticated: function toUnauthenticated() {\n    this._unAuthenticated = true;\n    this.removeListener('validate', AWS.EventListeners.Core.VALIDATE_CREDENTIALS);\n    this.removeListener('sign', AWS.EventListeners.Core.SIGN);\n    return this;\n  },\n\n  /**\n   * @api private\n   */\n  toGet: function toGet() {\n    if (this.service.api.protocol === 'query' ||\n        this.service.api.protocol === 'ec2') {\n      this.removeListener('build', this.buildAsGet);\n      this.addListener('build', this.buildAsGet);\n    }\n    return this;\n  },\n\n  /**\n   * @api private\n   */\n  buildAsGet: function buildAsGet(request) {\n    request.httpRequest.method = 'GET';\n    request.httpRequest.path = request.service.endpoint.path +\n                               '?' + request.httpRequest.body;\n    request.httpRequest.body = '';\n\n    // don't need these headers on a GET request\n    delete request.httpRequest.headers['Content-Length'];\n    delete request.httpRequest.headers['Content-Type'];\n  },\n\n  /**\n   * @api private\n   */\n  haltHandlersOnError: function haltHandlersOnError() {\n    this._haltHandlersOnError = true;\n  }\n});\n\n/**\n * @api private\n */\nAWS.Request.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n  this.prototype.promise = function promise() {\n    var self = this;\n    // append to user agent\n    this.httpRequest.appendToUserAgent('promise');\n    return new PromiseDependency(function(resolve, reject) {\n      self.on('complete', function(resp) {\n        if (resp.error) {\n          reject(resp.error);\n        } else {\n          // define $response property so that it is not enumerable\n          // this prevents circular reference errors when stringifying the JSON object\n          resolve(Object.defineProperty(\n            resp.data || {},\n            '$response',\n            {value: resp}\n          ));\n        }\n      });\n      self.runTo();\n    });\n  };\n};\n\n/**\n * @api private\n */\nAWS.Request.deletePromisesFromClass = function deletePromisesFromClass() {\n  delete this.prototype.promise;\n};\n\nAWS.util.addPromises(AWS.Request);\n\nAWS.util.mixin(AWS.Request, AWS.SequentialExecutor);\n","/**\n * Copyright 2012-2013 Amazon.com, Inc. or its affiliates. All Rights Reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\"). You\n * may not use this file except in compliance with the License. A copy of\n * the License is located at\n *\n *     http://aws.amazon.com/apache2.0/\n *\n * or in the \"license\" file accompanying this file. This file is\n * distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF\n * ANY KIND, either express or implied. See the License for the specific\n * language governing permissions and limitations under the License.\n */\n\nvar AWS = require('./core');\nvar inherit = AWS.util.inherit;\nvar jmespath = require('jmespath');\n\n/**\n * @api private\n */\nfunction CHECK_ACCEPTORS(resp) {\n  var waiter = resp.request._waiter;\n  var acceptors = waiter.config.acceptors;\n  var acceptorMatched = false;\n  var state = 'retry';\n\n  acceptors.forEach(function(acceptor) {\n    if (!acceptorMatched) {\n      var matcher = waiter.matchers[acceptor.matcher];\n      if (matcher && matcher(resp, acceptor.expected, acceptor.argument)) {\n        acceptorMatched = true;\n        state = acceptor.state;\n      }\n    }\n  });\n\n  if (!acceptorMatched && resp.error) state = 'failure';\n\n  if (state === 'success') {\n    waiter.setSuccess(resp);\n  } else {\n    waiter.setError(resp, state === 'retry');\n  }\n}\n\n/**\n * @api private\n */\nAWS.ResourceWaiter = inherit({\n  /**\n   * Waits for a given state on a service object\n   * @param service [Service] the service object to wait on\n   * @param state [String] the state (defined in waiter configuration) to wait\n   *   for.\n   * @example Create a waiter for running EC2 instances\n   *   var ec2 = new AWS.EC2;\n   *   var waiter = new AWS.ResourceWaiter(ec2, 'instanceRunning');\n   */\n  constructor: function constructor(service, state) {\n    this.service = service;\n    this.state = state;\n    this.loadWaiterConfig(this.state);\n  },\n\n  service: null,\n\n  state: null,\n\n  config: null,\n\n  matchers: {\n    path: function(resp, expected, argument) {\n      try {\n        var result = jmespath.search(resp.data, argument);\n      } catch (err) {\n        return false;\n      }\n\n      return jmespath.strictDeepEqual(result,expected);\n    },\n\n    pathAll: function(resp, expected, argument) {\n      try {\n        var results = jmespath.search(resp.data, argument);\n      } catch (err) {\n        return false;\n      }\n\n      if (!Array.isArray(results)) results = [results];\n      var numResults = results.length;\n      if (!numResults) return false;\n      for (var ind = 0 ; ind < numResults; ind++) {\n        if (!jmespath.strictDeepEqual(results[ind], expected)) {\n          return false;\n        }\n      }\n      return true;\n    },\n\n    pathAny: function(resp, expected, argument) {\n      try {\n        var results = jmespath.search(resp.data, argument);\n      } catch (err) {\n        return false;\n      }\n\n      if (!Array.isArray(results)) results = [results];\n      var numResults = results.length;\n      for (var ind = 0 ; ind < numResults; ind++) {\n        if (jmespath.strictDeepEqual(results[ind], expected)) {\n          return true;\n        }\n      }\n      return false;\n    },\n\n    status: function(resp, expected) {\n      var statusCode = resp.httpResponse.statusCode;\n      return (typeof statusCode === 'number') && (statusCode === expected);\n    },\n\n    error: function(resp, expected) {\n      if (typeof expected === 'string' && resp.error) {\n        return expected === resp.error.code;\n      }\n      // if expected is not string, can be boolean indicating presence of error\n      return expected === !!resp.error;\n    }\n  },\n\n  listeners: new AWS.SequentialExecutor().addNamedListeners(function(add) {\n    add('RETRY_CHECK', 'retry', function(resp) {\n      var waiter = resp.request._waiter;\n      if (resp.error && resp.error.code === 'ResourceNotReady') {\n        resp.error.retryDelay = (waiter.config.delay || 0) * 1000;\n      }\n    });\n\n    add('CHECK_OUTPUT', 'extractData', CHECK_ACCEPTORS);\n\n    add('CHECK_ERROR', 'extractError', CHECK_ACCEPTORS);\n  }),\n\n  /**\n   * @return [AWS.Request]\n   */\n  wait: function wait(params, callback) {\n    if (typeof params === 'function') {\n      callback = params; params = undefined;\n    }\n\n    if (params && params.$waiter) {\n      params = AWS.util.copy(params);\n      if (typeof params.$waiter.delay === 'number') {\n        this.config.delay = params.$waiter.delay;\n      }\n      if (typeof params.$waiter.maxAttempts === 'number') {\n        this.config.maxAttempts = params.$waiter.maxAttempts;\n      }\n      delete params.$waiter;\n    }\n\n    var request = this.service.makeRequest(this.config.operation, params);\n    request._waiter = this;\n    request.response.maxRetries = this.config.maxAttempts;\n    request.addListeners(this.listeners);\n\n    if (callback) request.send(callback);\n    return request;\n  },\n\n  setSuccess: function setSuccess(resp) {\n    resp.error = null;\n    resp.data = resp.data || {};\n    resp.request.removeAllListeners('extractData');\n  },\n\n  setError: function setError(resp, retryable) {\n    resp.data = null;\n    resp.error = AWS.util.error(resp.error || new Error(), {\n      code: 'ResourceNotReady',\n      message: 'Resource is not in the state ' + this.state,\n      retryable: retryable\n    });\n  },\n\n  /**\n   * Loads waiter configuration from API configuration\n   *\n   * @api private\n   */\n  loadWaiterConfig: function loadWaiterConfig(state) {\n    if (!this.service.api.waiters[state]) {\n      throw new AWS.util.error(new Error(), {\n        code: 'StateNotFoundError',\n        message: 'State ' + state + ' not found.'\n      });\n    }\n\n    this.config = AWS.util.copy(this.service.api.waiters[state]);\n  }\n});\n","var AWS = require('./core');\nvar inherit = AWS.util.inherit;\nvar jmespath = require('jmespath');\n\n/**\n * This class encapsulates the response information\n * from a service request operation sent through {AWS.Request}.\n * The response object has two main properties for getting information\n * back from a request:\n *\n * ## The `data` property\n *\n * The `response.data` property contains the serialized object data\n * retrieved from the service request. For instance, for an\n * Amazon DynamoDB `listTables` method call, the response data might\n * look like:\n *\n * ```\n * > resp.data\n * { TableNames:\n *    [ 'table1', 'table2', ... ] }\n * ```\n *\n * The `data` property can be null if an error occurs (see below).\n *\n * ## The `error` property\n *\n * In the event of a service error (or transfer error), the\n * `response.error` property will be filled with the given\n * error data in the form:\n *\n * ```\n * { code: 'SHORT_UNIQUE_ERROR_CODE',\n *   message: 'Some human readable error message' }\n * ```\n *\n * In the case of an error, the `data` property will be `null`.\n * Note that if you handle events that can be in a failure state,\n * you should always check whether `response.error` is set\n * before attempting to access the `response.data` property.\n *\n * @!attribute data\n *   @readonly\n *   @!group Data Properties\n *   @note Inside of a {AWS.Request~httpData} event, this\n *     property contains a single raw packet instead of the\n *     full de-serialized service response.\n *   @return [Object] the de-serialized response data\n *     from the service.\n *\n * @!attribute error\n *   An structure containing information about a service\n *   or networking error.\n *   @readonly\n *   @!group Data Properties\n *   @note This attribute is only filled if a service or\n *     networking error occurs.\n *   @return [Error]\n *     * code [String] a unique short code representing the\n *       error that was emitted.\n *     * message [String] a longer human readable error message\n *     * retryable [Boolean] whether the error message is\n *       retryable.\n *     * statusCode [Numeric] in the case of a request that reached the service,\n *       this value contains the response status code.\n *     * time [Date] the date time object when the error occurred.\n *     * hostname [String] set when a networking error occurs to easily\n *       identify the endpoint of the request.\n *     * region [String] set when a networking error occurs to easily\n *       identify the region of the request.\n *\n * @!attribute requestId\n *   @readonly\n *   @!group Data Properties\n *   @return [String] the unique request ID associated with the response.\n *     Log this value when debugging requests for AWS support.\n *\n * @!attribute retryCount\n *   @readonly\n *   @!group Operation Properties\n *   @return [Integer] the number of retries that were\n *     attempted before the request was completed.\n *\n * @!attribute redirectCount\n *   @readonly\n *   @!group Operation Properties\n *   @return [Integer] the number of redirects that were\n *     followed before the request was completed.\n *\n * @!attribute httpResponse\n *   @readonly\n *   @!group HTTP Properties\n *   @return [AWS.HttpResponse] the raw HTTP response object\n *     containing the response headers and body information\n *     from the server.\n *\n * @see AWS.Request\n */\nAWS.Response = inherit({\n\n  /**\n   * @api private\n   */\n  constructor: function Response(request) {\n    this.request = request;\n    this.data = null;\n    this.error = null;\n    this.retryCount = 0;\n    this.redirectCount = 0;\n    this.httpResponse = new AWS.HttpResponse();\n    if (request) {\n      this.maxRetries = request.service.numRetries();\n      this.maxRedirects = request.service.config.maxRedirects;\n    }\n  },\n\n  /**\n   * Creates a new request for the next page of response data, calling the\n   * callback with the page data if a callback is provided.\n   *\n   * @callback callback function(err, data)\n   *   Called when a page of data is returned from the next request.\n   *\n   *   @param err [Error] an error object, if an error occurred in the request\n   *   @param data [Object] the next page of data, or null, if there are no\n   *     more pages left.\n   * @return [AWS.Request] the request object for the next page of data\n   * @return [null] if no callback is provided and there are no pages left\n   *   to retrieve.\n   * @since v1.4.0\n   */\n  nextPage: function nextPage(callback) {\n    var config;\n    var service = this.request.service;\n    var operation = this.request.operation;\n    try {\n      config = service.paginationConfig(operation, true);\n    } catch (e) { this.error = e; }\n\n    if (!this.hasNextPage()) {\n      if (callback) callback(this.error, null);\n      else if (this.error) throw this.error;\n      return null;\n    }\n\n    var params = AWS.util.copy(this.request.params);\n    if (!this.nextPageTokens) {\n      return callback ? callback(null, null) : null;\n    } else {\n      var inputTokens = config.inputToken;\n      if (typeof inputTokens === 'string') inputTokens = [inputTokens];\n      for (var i = 0; i < inputTokens.length; i++) {\n        params[inputTokens[i]] = this.nextPageTokens[i];\n      }\n      return service.makeRequest(this.request.operation, params, callback);\n    }\n  },\n\n  /**\n   * @return [Boolean] whether more pages of data can be returned by further\n   *   requests\n   * @since v1.4.0\n   */\n  hasNextPage: function hasNextPage() {\n    this.cacheNextPageTokens();\n    if (this.nextPageTokens) return true;\n    if (this.nextPageTokens === undefined) return undefined;\n    else return false;\n  },\n\n  /**\n   * @api private\n   */\n  cacheNextPageTokens: function cacheNextPageTokens() {\n    if (Object.prototype.hasOwnProperty.call(this, 'nextPageTokens')) return this.nextPageTokens;\n    this.nextPageTokens = undefined;\n\n    var config = this.request.service.paginationConfig(this.request.operation);\n    if (!config) return this.nextPageTokens;\n\n    this.nextPageTokens = null;\n    if (config.moreResults) {\n      if (!jmespath.search(this.data, config.moreResults)) {\n        return this.nextPageTokens;\n      }\n    }\n\n    var exprs = config.outputToken;\n    if (typeof exprs === 'string') exprs = [exprs];\n    AWS.util.arrayEach.call(this, exprs, function (expr) {\n      var output = jmespath.search(this.data, expr);\n      if (output) {\n        this.nextPageTokens = this.nextPageTokens || [];\n        this.nextPageTokens.push(output);\n      }\n    });\n\n    return this.nextPageTokens;\n  }\n\n});\n","var AWS = require('../core');\nvar byteLength = AWS.util.string.byteLength;\nvar Buffer = AWS.util.Buffer;\n\n/**\n * The managed uploader allows for easy and efficient uploading of buffers,\n * blobs, or streams, using a configurable amount of concurrency to perform\n * multipart uploads where possible. This abstraction also enables uploading\n * streams of unknown size due to the use of multipart uploads.\n *\n * To construct a managed upload object, see the {constructor} function.\n *\n * ## Tracking upload progress\n *\n * The managed upload object can also track progress by attaching an\n * 'httpUploadProgress' listener to the upload manager. This event is similar\n * to {AWS.Request~httpUploadProgress} but groups all concurrent upload progress\n * into a single event. See {AWS.S3.ManagedUpload~httpUploadProgress} for more\n * information.\n *\n * ## Handling Multipart Cleanup\n *\n * By default, this class will automatically clean up any multipart uploads\n * when an individual part upload fails. This behavior can be disabled in order\n * to manually handle failures by setting the `leavePartsOnError` configuration\n * option to `true` when initializing the upload object.\n *\n * @!event httpUploadProgress(progress)\n *   Triggered when the uploader has uploaded more data.\n *   @note The `total` property may not be set if the stream being uploaded has\n *     not yet finished chunking. In this case the `total` will be undefined\n *     until the total stream size is known.\n *   @note This event will not be emitted in Node.js 0.8.x.\n *   @param progress [map] An object containing the `loaded` and `total` bytes\n *     of the request and the `key` of the S3 object. Note that `total` may be undefined until the payload\n *     size is known.\n *   @context (see AWS.Request~send)\n */\nAWS.S3.ManagedUpload = AWS.util.inherit({\n  /**\n   * Creates a managed upload object with a set of configuration options.\n   *\n   * @note A \"Body\" parameter is required to be set prior to calling {send}.\n   * @note In Node.js, sending \"Body\" as {https://nodejs.org/dist/latest/docs/api/stream.html#stream_object_mode object-mode stream}\n   *   may result in upload hangs. Using buffer stream is preferable.\n   * @option options params [map] a map of parameters to pass to the upload\n   *   requests. The \"Body\" parameter is required to be specified either on\n   *   the service or in the params option.\n   * @note ContentMD5 should not be provided when using the managed upload object.\n   *   Instead, setting \"computeChecksums\" to true will enable automatic ContentMD5 generation\n   *   by the managed upload object.\n   * @option options queueSize [Number] (4) the size of the concurrent queue\n   *   manager to upload parts in parallel. Set to 1 for synchronous uploading\n   *   of parts. Note that the uploader will buffer at most queueSize * partSize\n   *   bytes into memory at any given time.\n   * @option options partSize [Number] (5mb) the size in bytes for each\n   *   individual part to be uploaded. Adjust the part size to ensure the number\n   *   of parts does not exceed {maxTotalParts}. See {minPartSize} for the\n   *   minimum allowed part size.\n   * @option options leavePartsOnError [Boolean] (false) whether to abort the\n   *   multipart upload if an error occurs. Set to true if you want to handle\n   *   failures manually.\n   * @option options service [AWS.S3] an optional S3 service object to use for\n   *   requests. This object might have bound parameters used by the uploader.\n   * @option options tags [Array<map>] The tags to apply to the uploaded object.\n   *   Each tag should have a `Key` and `Value` keys.\n   * @example Creating a default uploader for a stream object\n   *   var upload = new AWS.S3.ManagedUpload({\n   *     params: {Bucket: 'bucket', Key: 'key', Body: stream}\n   *   });\n   * @example Creating an uploader with concurrency of 1 and partSize of 10mb\n   *   var upload = new AWS.S3.ManagedUpload({\n   *     partSize: 10 * 1024 * 1024, queueSize: 1,\n   *     params: {Bucket: 'bucket', Key: 'key', Body: stream}\n   *   });\n   * @example Creating an uploader with tags\n   *   var upload = new AWS.S3.ManagedUpload({\n   *     params: {Bucket: 'bucket', Key: 'key', Body: stream},\n   *     tags: [{Key: 'tag1', Value: 'value1'}, {Key: 'tag2', Value: 'value2'}]\n   *   });\n   * @see send\n   */\n  constructor: function ManagedUpload(options) {\n    var self = this;\n    AWS.SequentialExecutor.call(self);\n    self.body = null;\n    self.sliceFn = null;\n    self.callback = null;\n    self.parts = {};\n    self.completeInfo = [];\n    self.fillQueue = function() {\n      self.callback(new Error('Unsupported body payload ' + typeof self.body));\n    };\n\n    self.configure(options);\n  },\n\n  /**\n   * @api private\n   */\n  configure: function configure(options) {\n    options = options || {};\n    this.partSize = this.minPartSize;\n\n    if (options.queueSize) this.queueSize = options.queueSize;\n    if (options.partSize) this.partSize = options.partSize;\n    if (options.leavePartsOnError) this.leavePartsOnError = true;\n    if (options.tags) {\n      if (!Array.isArray(options.tags)) {\n        throw new Error('Tags must be specified as an array; ' +\n          typeof options.tags + ' provided.');\n      }\n      this.tags = options.tags;\n    }\n\n    if (this.partSize < this.minPartSize) {\n      throw new Error('partSize must be greater than ' +\n                      this.minPartSize);\n    }\n\n    this.service = options.service;\n    this.bindServiceObject(options.params);\n    this.validateBody();\n    this.adjustTotalBytes();\n  },\n\n  /**\n   * @api private\n   */\n  leavePartsOnError: false,\n\n  /**\n   * @api private\n   */\n  queueSize: 4,\n\n  /**\n   * @api private\n   */\n  partSize: null,\n\n  /**\n   * @readonly\n   * @return [Number] the minimum number of bytes for an individual part\n   *   upload.\n   */\n  minPartSize: 1024 * 1024 * 5,\n\n  /**\n   * @readonly\n   * @return [Number] the maximum allowed number of parts in a multipart upload.\n   */\n  maxTotalParts: 10000,\n\n  /**\n   * Initiates the managed upload for the payload.\n   *\n   * @callback callback function(err, data)\n   *   @param err [Error] an error or null if no error occurred.\n   *   @param data [map] The response data from the successful upload:\n   *     * `Location` (String) the URL of the uploaded object\n   *     * `ETag` (String) the ETag of the uploaded object\n   *     * `Bucket` (String) the bucket to which the object was uploaded\n   *     * `Key` (String) the key to which the object was uploaded\n   * @example Sending a managed upload object\n   *   var params = {Bucket: 'bucket', Key: 'key', Body: stream};\n   *   var upload = new AWS.S3.ManagedUpload({params: params});\n   *   upload.send(function(err, data) {\n   *     console.log(err, data);\n   *   });\n   */\n  send: function(callback) {\n    var self = this;\n    self.failed = false;\n    self.callback = callback || function(err) { if (err) throw err; };\n\n    var runFill = true;\n    if (self.sliceFn) {\n      self.fillQueue = self.fillBuffer;\n    } else if (AWS.util.isNode()) {\n      var Stream = AWS.util.stream.Stream;\n      if (self.body instanceof Stream) {\n        runFill = false;\n        self.fillQueue = self.fillStream;\n        self.partBuffers = [];\n        self.body.\n          on('error', function(err) { self.cleanup(err); }).\n          on('readable', function() { self.fillQueue(); }).\n          on('end', function() {\n            self.isDoneChunking = true;\n            self.numParts = self.totalPartNumbers;\n            self.fillQueue.call(self);\n\n            if (self.isDoneChunking && self.totalPartNumbers >= 1 && self.doneParts === self.numParts) {\n              self.finishMultiPart();\n            }\n          });\n      }\n    }\n\n    if (runFill) self.fillQueue.call(self);\n  },\n\n  /**\n   * @!method  promise()\n   *   Returns a 'thenable' promise.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @callback fulfilledCallback function(data)\n   *     Called if the promise is fulfilled.\n   *     @param data [map] The response data from the successful upload:\n   *       `Location` (String) the URL of the uploaded object\n   *       `ETag` (String) the ETag of the uploaded object\n   *       `Bucket` (String) the bucket to which the object was uploaded\n   *       `Key` (String) the key to which the object was uploaded\n   *   @callback rejectedCallback function(err)\n   *     Called if the promise is rejected.\n   *     @param err [Error] an error or null if no error occurred.\n   *   @return [Promise] A promise that represents the state of the upload request.\n   *   @example Sending an upload request using promises.\n   *     var upload = s3.upload({Bucket: 'bucket', Key: 'key', Body: stream});\n   *     var promise = upload.promise();\n   *     promise.then(function(data) { ... }, function(err) { ... });\n   */\n\n  /**\n   * Aborts a managed upload, including all concurrent upload requests.\n   * @note By default, calling this function will cleanup a multipart upload\n   *   if one was created. To leave the multipart upload around after aborting\n   *   a request, configure `leavePartsOnError` to `true` in the {constructor}.\n   * @note Calling {abort} in the browser environment will not abort any requests\n   *   that are already in flight. If a multipart upload was created, any parts\n   *   not yet uploaded will not be sent, and the multipart upload will be cleaned up.\n   * @example Aborting an upload\n   *   var params = {\n   *     Bucket: 'bucket', Key: 'key',\n   *     Body: Buffer.alloc(1024 * 1024 * 25) // 25MB payload\n   *   };\n   *   var upload = s3.upload(params);\n   *   upload.send(function (err, data) {\n   *     if (err) console.log(\"Error:\", err.code, err.message);\n   *     else console.log(data);\n   *   });\n   *\n   *   // abort request in 1 second\n   *   setTimeout(upload.abort.bind(upload), 1000);\n   */\n  abort: function() {\n    var self = this;\n    //abort putObject request\n    if (self.isDoneChunking === true && self.totalPartNumbers === 1 && self.singlePart) {\n      self.singlePart.abort();\n    } else {\n      self.cleanup(AWS.util.error(new Error('Request aborted by user'), {\n        code: 'RequestAbortedError', retryable: false\n      }));\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateBody: function validateBody() {\n    var self = this;\n    self.body = self.service.config.params.Body;\n    if (typeof self.body === 'string') {\n      self.body = AWS.util.buffer.toBuffer(self.body);\n    } else if (!self.body) {\n      throw new Error('params.Body is required');\n    }\n    self.sliceFn = AWS.util.arraySliceFn(self.body);\n  },\n\n  /**\n   * @api private\n   */\n  bindServiceObject: function bindServiceObject(params) {\n    params = params || {};\n    var self = this;\n    // bind parameters to new service object\n    if (!self.service) {\n      self.service = new AWS.S3({params: params});\n    } else {\n      var service = self.service;\n      var config = AWS.util.copy(service._originalConfig || {});\n      config.signatureVersion = service.getSignatureVersion();\n      self.service = new service.constructor.__super__(config);\n      self.service.config.params =\n        AWS.util.merge(self.service.config.params || {}, params);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  adjustTotalBytes: function adjustTotalBytes() {\n    var self = this;\n    try { // try to get totalBytes\n      self.totalBytes = byteLength(self.body);\n    } catch (e) { }\n\n    // try to adjust partSize if we know payload length\n    if (self.totalBytes) {\n      var newPartSize = Math.ceil(self.totalBytes / self.maxTotalParts);\n      if (newPartSize > self.partSize) self.partSize = newPartSize;\n    } else {\n      self.totalBytes = undefined;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  isDoneChunking: false,\n\n  /**\n   * @api private\n   */\n  partPos: 0,\n\n  /**\n   * @api private\n   */\n  totalChunkedBytes: 0,\n\n  /**\n   * @api private\n   */\n  totalUploadedBytes: 0,\n\n  /**\n   * @api private\n   */\n  totalBytes: undefined,\n\n  /**\n   * @api private\n   */\n  numParts: 0,\n\n  /**\n   * @api private\n   */\n  totalPartNumbers: 0,\n\n  /**\n   * @api private\n   */\n  activeParts: 0,\n\n  /**\n   * @api private\n   */\n  doneParts: 0,\n\n  /**\n   * @api private\n   */\n  parts: null,\n\n  /**\n   * @api private\n   */\n  completeInfo: null,\n\n  /**\n   * @api private\n   */\n  failed: false,\n\n  /**\n   * @api private\n   */\n  multipartReq: null,\n\n  /**\n   * @api private\n   */\n  partBuffers: null,\n\n  /**\n   * @api private\n   */\n  partBufferLength: 0,\n\n  /**\n   * @api private\n   */\n  fillBuffer: function fillBuffer() {\n    var self = this;\n    var bodyLen = byteLength(self.body);\n\n    if (bodyLen === 0) {\n      self.isDoneChunking = true;\n      self.numParts = 1;\n      self.nextChunk(self.body);\n      return;\n    }\n\n    while (self.activeParts < self.queueSize && self.partPos < bodyLen) {\n      var endPos = Math.min(self.partPos + self.partSize, bodyLen);\n      var buf = self.sliceFn.call(self.body, self.partPos, endPos);\n      self.partPos += self.partSize;\n\n      if (byteLength(buf) < self.partSize || self.partPos === bodyLen) {\n        self.isDoneChunking = true;\n        self.numParts = self.totalPartNumbers + 1;\n      }\n      self.nextChunk(buf);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  fillStream: function fillStream() {\n    var self = this;\n    if (self.activeParts >= self.queueSize) return;\n\n    var buf = self.body.read(self.partSize - self.partBufferLength) ||\n              self.body.read();\n    if (buf) {\n      self.partBuffers.push(buf);\n      self.partBufferLength += buf.length;\n      self.totalChunkedBytes += buf.length;\n    }\n\n    if (self.partBufferLength >= self.partSize) {\n      // if we have single buffer we avoid copyfull concat\n      var pbuf = self.partBuffers.length === 1 ?\n        self.partBuffers[0] : Buffer.concat(self.partBuffers);\n      self.partBuffers = [];\n      self.partBufferLength = 0;\n\n      // if we have more than partSize, push the rest back on the queue\n      if (pbuf.length > self.partSize) {\n        var rest = pbuf.slice(self.partSize);\n        self.partBuffers.push(rest);\n        self.partBufferLength += rest.length;\n        pbuf = pbuf.slice(0, self.partSize);\n      }\n\n      self.nextChunk(pbuf);\n    }\n\n    if (self.isDoneChunking && !self.isDoneSending) {\n      // if we have single buffer we avoid copyfull concat\n      pbuf = self.partBuffers.length === 1 ?\n          self.partBuffers[0] : Buffer.concat(self.partBuffers);\n      self.partBuffers = [];\n      self.partBufferLength = 0;\n      self.totalBytes = self.totalChunkedBytes;\n      self.isDoneSending = true;\n\n      if (self.numParts === 0 || pbuf.length > 0) {\n        self.numParts++;\n        self.nextChunk(pbuf);\n      }\n    }\n\n    self.body.read(0);\n  },\n\n  /**\n   * @api private\n   */\n  nextChunk: function nextChunk(chunk) {\n    var self = this;\n    if (self.failed) return null;\n\n    var partNumber = ++self.totalPartNumbers;\n    if (self.isDoneChunking && partNumber === 1) {\n      var params = {Body: chunk};\n      if (this.tags) {\n        params.Tagging = this.getTaggingHeader();\n      }\n      var req = self.service.putObject(params);\n      req._managedUpload = self;\n      req.on('httpUploadProgress', self.progress).send(self.finishSinglePart);\n      self.singlePart = req; //save the single part request\n      return null;\n    } else if (self.service.config.params.ContentMD5) {\n      var err = AWS.util.error(new Error('The Content-MD5 you specified is invalid for multi-part uploads.'), {\n        code: 'InvalidDigest', retryable: false\n      });\n\n      self.cleanup(err);\n      return null;\n    }\n\n    if (self.completeInfo[partNumber] && self.completeInfo[partNumber].ETag !== null) {\n      return null; // Already uploaded this part.\n    }\n\n    self.activeParts++;\n    if (!self.service.config.params.UploadId) {\n\n      if (!self.multipartReq) { // create multipart\n        self.multipartReq = self.service.createMultipartUpload();\n        self.multipartReq.on('success', function(resp) {\n          self.service.config.params.UploadId = resp.data.UploadId;\n          self.multipartReq = null;\n        });\n        self.queueChunks(chunk, partNumber);\n        self.multipartReq.on('error', function(err) {\n          self.cleanup(err);\n        });\n        self.multipartReq.send();\n      } else {\n        self.queueChunks(chunk, partNumber);\n      }\n    } else { // multipart is created, just send\n      self.uploadPart(chunk, partNumber);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getTaggingHeader: function getTaggingHeader() {\n    var kvPairStrings = [];\n    for (var i = 0; i < this.tags.length; i++) {\n      kvPairStrings.push(AWS.util.uriEscape(this.tags[i].Key) + '=' +\n        AWS.util.uriEscape(this.tags[i].Value));\n    }\n\n    return kvPairStrings.join('&');\n  },\n\n  /**\n   * @api private\n   */\n  uploadPart: function uploadPart(chunk, partNumber) {\n    var self = this;\n\n    var partParams = {\n      Body: chunk,\n      ContentLength: AWS.util.string.byteLength(chunk),\n      PartNumber: partNumber\n    };\n\n    var partInfo = {ETag: null, PartNumber: partNumber};\n    self.completeInfo[partNumber] = partInfo;\n\n    var req = self.service.uploadPart(partParams);\n    self.parts[partNumber] = req;\n    req._lastUploadedBytes = 0;\n    req._managedUpload = self;\n    req.on('httpUploadProgress', self.progress);\n    req.send(function(err, data) {\n      delete self.parts[partParams.PartNumber];\n      self.activeParts--;\n\n      if (!err && (!data || !data.ETag)) {\n        var message = 'No access to ETag property on response.';\n        if (AWS.util.isBrowser()) {\n          message += ' Check CORS configuration to expose ETag header.';\n        }\n\n        err = AWS.util.error(new Error(message), {\n          code: 'ETagMissing', retryable: false\n        });\n      }\n      if (err) return self.cleanup(err);\n      //prevent sending part being returned twice (https://github.com/aws/aws-sdk-js/issues/2304)\n      if (self.completeInfo[partNumber] && self.completeInfo[partNumber].ETag !== null) return null;\n      partInfo.ETag = data.ETag;\n      self.doneParts++;\n      if (self.isDoneChunking && self.doneParts === self.numParts) {\n        self.finishMultiPart();\n      } else {\n        self.fillQueue.call(self);\n      }\n    });\n  },\n\n  /**\n   * @api private\n   */\n  queueChunks: function queueChunks(chunk, partNumber) {\n    var self = this;\n    self.multipartReq.on('success', function() {\n      self.uploadPart(chunk, partNumber);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  cleanup: function cleanup(err) {\n    var self = this;\n    if (self.failed) return;\n\n    // clean up stream\n    if (typeof self.body.removeAllListeners === 'function' &&\n        typeof self.body.resume === 'function') {\n      self.body.removeAllListeners('readable');\n      self.body.removeAllListeners('end');\n      self.body.resume();\n    }\n\n    // cleanup multipartReq listeners\n    if (self.multipartReq) {\n      self.multipartReq.removeAllListeners('success');\n      self.multipartReq.removeAllListeners('error');\n      self.multipartReq.removeAllListeners('complete');\n      delete self.multipartReq;\n    }\n\n    if (self.service.config.params.UploadId && !self.leavePartsOnError) {\n      self.service.abortMultipartUpload().send();\n    } else if (self.leavePartsOnError) {\n      self.isDoneChunking = false;\n    }\n\n    AWS.util.each(self.parts, function(partNumber, part) {\n      part.removeAllListeners('complete');\n      part.abort();\n    });\n\n    self.activeParts = 0;\n    self.partPos = 0;\n    self.numParts = 0;\n    self.totalPartNumbers = 0;\n    self.parts = {};\n    self.failed = true;\n    self.callback(err);\n  },\n\n  /**\n   * @api private\n   */\n  finishMultiPart: function finishMultiPart() {\n    var self = this;\n    var completeParams = { MultipartUpload: { Parts: self.completeInfo.slice(1) } };\n    self.service.completeMultipartUpload(completeParams, function(err, data) {\n      if (err) {\n        return self.cleanup(err);\n      }\n\n      if (data && typeof data.Location === 'string') {\n        data.Location = data.Location.replace(/%2F/g, '/');\n      }\n\n      if (Array.isArray(self.tags)) {\n        for (var i = 0; i < self.tags.length; i++) {\n          self.tags[i].Value = String(self.tags[i].Value);\n        }\n        self.service.putObjectTagging(\n          {Tagging: {TagSet: self.tags}},\n          function(e, d) {\n            if (e) {\n              self.callback(e);\n            } else {\n              self.callback(e, data);\n            }\n          }\n        );\n      } else {\n        self.callback(err, data);\n      }\n    });\n  },\n\n  /**\n   * @api private\n   */\n  finishSinglePart: function finishSinglePart(err, data) {\n    var upload = this.request._managedUpload;\n    var httpReq = this.request.httpRequest;\n    var endpoint = httpReq.endpoint;\n    if (err) return upload.callback(err);\n    data.Location =\n      [endpoint.protocol, '//', endpoint.host, httpReq.path].join('');\n    data.key = this.request.params.Key; // will stay undocumented\n    data.Key = this.request.params.Key;\n    data.Bucket = this.request.params.Bucket;\n    upload.callback(err, data);\n  },\n\n  /**\n   * @api private\n   */\n  progress: function progress(info) {\n    var upload = this._managedUpload;\n    if (this.operation === 'putObject') {\n      info.part = 1;\n      info.key = this.params.Key;\n    } else {\n      upload.totalUploadedBytes += info.loaded - this._lastUploadedBytes;\n      this._lastUploadedBytes = info.loaded;\n      info = {\n        loaded: upload.totalUploadedBytes,\n        total: upload.totalBytes,\n        part: this.params.PartNumber,\n        key: this.params.Key\n      };\n    }\n    upload.emit('httpUploadProgress', [info]);\n  }\n});\n\nAWS.util.mixin(AWS.S3.ManagedUpload, AWS.SequentialExecutor);\n\n/**\n * @api private\n */\nAWS.S3.ManagedUpload.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n  this.prototype.promise = AWS.util.promisifyMethod('send', PromiseDependency);\n};\n\n/**\n * @api private\n */\nAWS.S3.ManagedUpload.deletePromisesFromClass = function deletePromisesFromClass() {\n  delete this.prototype.promise;\n};\n\nAWS.util.addPromises(AWS.S3.ManagedUpload);\n\n/**\n * @api private\n */\nmodule.exports = AWS.S3.ManagedUpload;\n","var AWS = require('./core');\n\n/**\n * @api private\n * @!method on(eventName, callback)\n *   Registers an event listener callback for the event given by `eventName`.\n *   Parameters passed to the callback function depend on the individual event\n *   being triggered. See the event documentation for those parameters.\n *\n *   @param eventName [String] the event name to register the listener for\n *   @param callback [Function] the listener callback function\n *   @param toHead [Boolean] attach the listener callback to the head of callback array if set to true.\n *     Default to be false.\n *   @return [AWS.SequentialExecutor] the same object for chaining\n */\nAWS.SequentialExecutor = AWS.util.inherit({\n\n  constructor: function SequentialExecutor() {\n    this._events = {};\n  },\n\n  /**\n   * @api private\n   */\n  listeners: function listeners(eventName) {\n    return this._events[eventName] ? this._events[eventName].slice(0) : [];\n  },\n\n  on: function on(eventName, listener, toHead) {\n    if (this._events[eventName]) {\n      toHead ?\n        this._events[eventName].unshift(listener) :\n        this._events[eventName].push(listener);\n    } else {\n      this._events[eventName] = [listener];\n    }\n    return this;\n  },\n\n  onAsync: function onAsync(eventName, listener, toHead) {\n    listener._isAsync = true;\n    return this.on(eventName, listener, toHead);\n  },\n\n  removeListener: function removeListener(eventName, listener) {\n    var listeners = this._events[eventName];\n    if (listeners) {\n      var length = listeners.length;\n      var position = -1;\n      for (var i = 0; i < length; ++i) {\n        if (listeners[i] === listener) {\n          position = i;\n        }\n      }\n      if (position > -1) {\n        listeners.splice(position, 1);\n      }\n    }\n    return this;\n  },\n\n  removeAllListeners: function removeAllListeners(eventName) {\n    if (eventName) {\n      delete this._events[eventName];\n    } else {\n      this._events = {};\n    }\n    return this;\n  },\n\n  /**\n   * @api private\n   */\n  emit: function emit(eventName, eventArgs, doneCallback) {\n    if (!doneCallback) doneCallback = function() { };\n    var listeners = this.listeners(eventName);\n    var count = listeners.length;\n    this.callListeners(listeners, eventArgs, doneCallback);\n    return count > 0;\n  },\n\n  /**\n   * @api private\n   */\n  callListeners: function callListeners(listeners, args, doneCallback, prevError) {\n    var self = this;\n    var error = prevError || null;\n\n    function callNextListener(err) {\n      if (err) {\n        error = AWS.util.error(error || new Error(), err);\n        if (self._haltHandlersOnError) {\n          return doneCallback.call(self, error);\n        }\n      }\n      self.callListeners(listeners, args, doneCallback, error);\n    }\n\n    while (listeners.length > 0) {\n      var listener = listeners.shift();\n      if (listener._isAsync) { // asynchronous listener\n        listener.apply(self, args.concat([callNextListener]));\n        return; // stop here, callNextListener will continue\n      } else { // synchronous listener\n        try {\n          listener.apply(self, args);\n        } catch (err) {\n          error = AWS.util.error(error || new Error(), err);\n        }\n        if (error && self._haltHandlersOnError) {\n          doneCallback.call(self, error);\n          return;\n        }\n      }\n    }\n    doneCallback.call(self, error);\n  },\n\n  /**\n   * Adds or copies a set of listeners from another list of\n   * listeners or SequentialExecutor object.\n   *\n   * @param listeners [map<String,Array<Function>>, AWS.SequentialExecutor]\n   *   a list of events and callbacks, or an event emitter object\n   *   containing listeners to add to this emitter object.\n   * @return [AWS.SequentialExecutor] the emitter object, for chaining.\n   * @example Adding listeners from a map of listeners\n   *   emitter.addListeners({\n   *     event1: [function() { ... }, function() { ... }],\n   *     event2: [function() { ... }]\n   *   });\n   *   emitter.emit('event1'); // emitter has event1\n   *   emitter.emit('event2'); // emitter has event2\n   * @example Adding listeners from another emitter object\n   *   var emitter1 = new AWS.SequentialExecutor();\n   *   emitter1.on('event1', function() { ... });\n   *   emitter1.on('event2', function() { ... });\n   *   var emitter2 = new AWS.SequentialExecutor();\n   *   emitter2.addListeners(emitter1);\n   *   emitter2.emit('event1'); // emitter2 has event1\n   *   emitter2.emit('event2'); // emitter2 has event2\n   */\n  addListeners: function addListeners(listeners) {\n    var self = this;\n\n    // extract listeners if parameter is an SequentialExecutor object\n    if (listeners._events) listeners = listeners._events;\n\n    AWS.util.each(listeners, function(event, callbacks) {\n      if (typeof callbacks === 'function') callbacks = [callbacks];\n      AWS.util.arrayEach(callbacks, function(callback) {\n        self.on(event, callback);\n      });\n    });\n\n    return self;\n  },\n\n  /**\n   * Registers an event with {on} and saves the callback handle function\n   * as a property on the emitter object using a given `name`.\n   *\n   * @param name [String] the property name to set on this object containing\n   *   the callback function handle so that the listener can be removed in\n   *   the future.\n   * @param (see on)\n   * @return (see on)\n   * @example Adding a named listener DATA_CALLBACK\n   *   var listener = function() { doSomething(); };\n   *   emitter.addNamedListener('DATA_CALLBACK', 'data', listener);\n   *\n   *   // the following prints: true\n   *   console.log(emitter.DATA_CALLBACK == listener);\n   */\n  addNamedListener: function addNamedListener(name, eventName, callback, toHead) {\n    this[name] = callback;\n    this.addListener(eventName, callback, toHead);\n    return this;\n  },\n\n  /**\n   * @api private\n   */\n  addNamedAsyncListener: function addNamedAsyncListener(name, eventName, callback, toHead) {\n    callback._isAsync = true;\n    return this.addNamedListener(name, eventName, callback, toHead);\n  },\n\n  /**\n   * Helper method to add a set of named listeners using\n   * {addNamedListener}. The callback contains a parameter\n   * with a handle to the `addNamedListener` method.\n   *\n   * @callback callback function(add)\n   *   The callback function is called immediately in order to provide\n   *   the `add` function to the block. This simplifies the addition of\n   *   a large group of named listeners.\n   *   @param add [Function] the {addNamedListener} function to call\n   *     when registering listeners.\n   * @example Adding a set of named listeners\n   *   emitter.addNamedListeners(function(add) {\n   *     add('DATA_CALLBACK', 'data', function() { ... });\n   *     add('OTHER', 'otherEvent', function() { ... });\n   *     add('LAST', 'lastEvent', function() { ... });\n   *   });\n   *\n   *   // these properties are now set:\n   *   emitter.DATA_CALLBACK;\n   *   emitter.OTHER;\n   *   emitter.LAST;\n   */\n  addNamedListeners: function addNamedListeners(callback) {\n    var self = this;\n    callback(\n      function() {\n        self.addNamedListener.apply(self, arguments);\n      },\n      function() {\n        self.addNamedAsyncListener.apply(self, arguments);\n      }\n    );\n    return this;\n  }\n});\n\n/**\n * {on} is the prefered method.\n * @api private\n */\nAWS.SequentialExecutor.prototype.addListener = AWS.SequentialExecutor.prototype.on;\n\n/**\n * @api private\n */\nmodule.exports = AWS.SequentialExecutor;\n","var AWS = require('./core');\nvar Api = require('./model/api');\nvar regionConfig = require('./region_config');\n\nvar inherit = AWS.util.inherit;\nvar clientCount = 0;\n\n/**\n * The service class representing an AWS service.\n *\n * @class_abstract This class is an abstract class.\n *\n * @!attribute apiVersions\n *   @return [Array<String>] the list of API versions supported by this service.\n *   @readonly\n */\nAWS.Service = inherit({\n  /**\n   * Create a new service object with a configuration object\n   *\n   * @param config [map] a map of configuration options\n   */\n  constructor: function Service(config) {\n    if (!this.loadServiceClass) {\n      throw AWS.util.error(new Error(),\n        'Service must be constructed with `new\\' operator');\n    }\n    var ServiceClass = this.loadServiceClass(config || {});\n    if (ServiceClass) {\n      var originalConfig = AWS.util.copy(config);\n      var svc = new ServiceClass(config);\n      Object.defineProperty(svc, '_originalConfig', {\n        get: function() { return originalConfig; },\n        enumerable: false,\n        configurable: true\n      });\n      svc._clientId = ++clientCount;\n      return svc;\n    }\n    this.initialize(config);\n  },\n\n  /**\n   * @api private\n   */\n  initialize: function initialize(config) {\n    var svcConfig = AWS.config[this.serviceIdentifier];\n    this.config = new AWS.Config(AWS.config);\n    if (svcConfig) this.config.update(svcConfig, true);\n    if (config) this.config.update(config, true);\n\n    this.validateService();\n    if (!this.config.endpoint) regionConfig.configureEndpoint(this);\n\n    this.config.endpoint = this.endpointFromTemplate(this.config.endpoint);\n    this.setEndpoint(this.config.endpoint);\n    //enable attaching listeners to service client\n    AWS.SequentialExecutor.call(this);\n    AWS.Service.addDefaultMonitoringListeners(this);\n    if ((this.config.clientSideMonitoring || AWS.Service._clientSideMonitoring) && this.publisher) {\n      var publisher = this.publisher;\n      this.addNamedListener('PUBLISH_API_CALL', 'apiCall', function PUBLISH_API_CALL(event) {\n        process.nextTick(function() {publisher.eventHandler(event);});\n      });\n      this.addNamedListener('PUBLISH_API_ATTEMPT', 'apiCallAttempt', function PUBLISH_API_ATTEMPT(event) {\n        process.nextTick(function() {publisher.eventHandler(event);});\n      });\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateService: function validateService() {\n  },\n\n  /**\n   * @api private\n   */\n  loadServiceClass: function loadServiceClass(serviceConfig) {\n    var config = serviceConfig;\n    if (!AWS.util.isEmpty(this.api)) {\n      return null;\n    } else if (config.apiConfig) {\n      return AWS.Service.defineServiceApi(this.constructor, config.apiConfig);\n    } else if (!this.constructor.services) {\n      return null;\n    } else {\n      config = new AWS.Config(AWS.config);\n      config.update(serviceConfig, true);\n      var version = config.apiVersions[this.constructor.serviceIdentifier];\n      version = version || config.apiVersion;\n      return this.getLatestServiceClass(version);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getLatestServiceClass: function getLatestServiceClass(version) {\n    version = this.getLatestServiceVersion(version);\n    if (this.constructor.services[version] === null) {\n      AWS.Service.defineServiceApi(this.constructor, version);\n    }\n\n    return this.constructor.services[version];\n  },\n\n  /**\n   * @api private\n   */\n  getLatestServiceVersion: function getLatestServiceVersion(version) {\n    if (!this.constructor.services || this.constructor.services.length === 0) {\n      throw new Error('No services defined on ' +\n                      this.constructor.serviceIdentifier);\n    }\n\n    if (!version) {\n      version = 'latest';\n    } else if (AWS.util.isType(version, Date)) {\n      version = AWS.util.date.iso8601(version).split('T')[0];\n    }\n\n    if (Object.hasOwnProperty(this.constructor.services, version)) {\n      return version;\n    }\n\n    var keys = Object.keys(this.constructor.services).sort();\n    var selectedVersion = null;\n    for (var i = keys.length - 1; i >= 0; i--) {\n      // versions that end in \"*\" are not available on disk and can be\n      // skipped, so do not choose these as selectedVersions\n      if (keys[i][keys[i].length - 1] !== '*') {\n        selectedVersion = keys[i];\n      }\n      if (keys[i].substr(0, 10) <= version) {\n        return selectedVersion;\n      }\n    }\n\n    throw new Error('Could not find ' + this.constructor.serviceIdentifier +\n                    ' API to satisfy version constraint `' + version + '\\'');\n  },\n\n  /**\n   * @api private\n   */\n  api: {},\n\n  /**\n   * @api private\n   */\n  defaultRetryCount: 3,\n\n  /**\n   * @api private\n   */\n  customizeRequests: function customizeRequests(callback) {\n    if (!callback) {\n      this.customRequestHandler = null;\n    } else if (typeof callback === 'function') {\n      this.customRequestHandler = callback;\n    } else {\n      throw new Error('Invalid callback type \\'' + typeof callback + '\\' provided in customizeRequests');\n    }\n  },\n\n  /**\n   * Calls an operation on a service with the given input parameters.\n   *\n   * @param operation [String] the name of the operation to call on the service.\n   * @param params [map] a map of input options for the operation\n   * @callback callback function(err, data)\n   *   If a callback is supplied, it is called when a response is returned\n   *   from the service.\n   *   @param err [Error] the error object returned from the request.\n   *     Set to `null` if the request is successful.\n   *   @param data [Object] the de-serialized data returned from\n   *     the request. Set to `null` if a request error occurs.\n   */\n  makeRequest: function makeRequest(operation, params, callback) {\n    if (typeof params === 'function') {\n      callback = params;\n      params = null;\n    }\n\n    params = params || {};\n    if (this.config.params) { // copy only toplevel bound params\n      var rules = this.api.operations[operation];\n      if (rules) {\n        params = AWS.util.copy(params);\n        AWS.util.each(this.config.params, function(key, value) {\n          if (rules.input.members[key]) {\n            if (params[key] === undefined || params[key] === null) {\n              params[key] = value;\n            }\n          }\n        });\n      }\n    }\n\n    var request = new AWS.Request(this, operation, params);\n    this.addAllRequestListeners(request);\n    this.attachMonitoringEmitter(request);\n    if (callback) request.send(callback);\n    return request;\n  },\n\n  /**\n   * Calls an operation on a service with the given input parameters, without\n   * any authentication data. This method is useful for \"public\" API operations.\n   *\n   * @param operation [String] the name of the operation to call on the service.\n   * @param params [map] a map of input options for the operation\n   * @callback callback function(err, data)\n   *   If a callback is supplied, it is called when a response is returned\n   *   from the service.\n   *   @param err [Error] the error object returned from the request.\n   *     Set to `null` if the request is successful.\n   *   @param data [Object] the de-serialized data returned from\n   *     the request. Set to `null` if a request error occurs.\n   */\n  makeUnauthenticatedRequest: function makeUnauthenticatedRequest(operation, params, callback) {\n    if (typeof params === 'function') {\n      callback = params;\n      params = {};\n    }\n\n    var request = this.makeRequest(operation, params).toUnauthenticated();\n    return callback ? request.send(callback) : request;\n  },\n\n  /**\n   * Waits for a given state\n   *\n   * @param state [String] the state on the service to wait for\n   * @param params [map] a map of parameters to pass with each request\n   * @option params $waiter [map] a map of configuration options for the waiter\n   * @option params $waiter.delay [Number] The number of seconds to wait between\n   *                                       requests\n   * @option params $waiter.maxAttempts [Number] The maximum number of requests\n   *                                             to send while waiting\n   * @callback callback function(err, data)\n   *   If a callback is supplied, it is called when a response is returned\n   *   from the service.\n   *   @param err [Error] the error object returned from the request.\n   *     Set to `null` if the request is successful.\n   *   @param data [Object] the de-serialized data returned from\n   *     the request. Set to `null` if a request error occurs.\n   */\n  waitFor: function waitFor(state, params, callback) {\n    var waiter = new AWS.ResourceWaiter(this, state);\n    return waiter.wait(params, callback);\n  },\n\n  /**\n   * @api private\n   */\n  addAllRequestListeners: function addAllRequestListeners(request) {\n    var list = [AWS.events, AWS.EventListeners.Core, this.serviceInterface(),\n                AWS.EventListeners.CorePost];\n    for (var i = 0; i < list.length; i++) {\n      if (list[i]) request.addListeners(list[i]);\n    }\n\n    // disable parameter validation\n    if (!this.config.paramValidation) {\n      request.removeListener('validate',\n        AWS.EventListeners.Core.VALIDATE_PARAMETERS);\n    }\n\n    if (this.config.logger) { // add logging events\n      request.addListeners(AWS.EventListeners.Logger);\n    }\n\n    this.setupRequestListeners(request);\n    // call prototype's customRequestHandler\n    if (typeof this.constructor.prototype.customRequestHandler === 'function') {\n      this.constructor.prototype.customRequestHandler(request);\n    }\n    // call instance's customRequestHandler\n    if (Object.prototype.hasOwnProperty.call(this, 'customRequestHandler') && typeof this.customRequestHandler === 'function') {\n      this.customRequestHandler(request);\n    }\n  },\n\n  /**\n   * Event recording metrics for a whole API call.\n   * @returns {object} a subset of api call metrics\n   * @api private\n   */\n  apiCallEvent: function apiCallEvent(request) {\n    var api = request.service.api.operations[request.operation];\n    var monitoringEvent = {\n      Type: 'ApiCall',\n      Api: api ? api.name : request.operation,\n      Version: 1,\n      Service: request.service.api.serviceId || request.service.api.endpointPrefix,\n      Region: request.httpRequest.region,\n      MaxRetriesExceeded: 0,\n      UserAgent: request.httpRequest.getUserAgent(),\n    };\n    var response = request.response;\n    if (response.httpResponse.statusCode) {\n      monitoringEvent.FinalHttpStatusCode = response.httpResponse.statusCode;\n    }\n    if (response.error) {\n      var error = response.error;\n      var statusCode = response.httpResponse.statusCode;\n      if (statusCode > 299) {\n        if (error.code) monitoringEvent.FinalAwsException = error.code;\n        if (error.message) monitoringEvent.FinalAwsExceptionMessage = error.message;\n      } else {\n        if (error.code || error.name) monitoringEvent.FinalSdkException = error.code || error.name;\n        if (error.message) monitoringEvent.FinalSdkExceptionMessage = error.message;\n      }\n    }\n    return monitoringEvent;\n  },\n\n  /**\n   * Event recording metrics for an API call attempt.\n   * @returns {object} a subset of api call attempt metrics\n   * @api private\n   */\n  apiAttemptEvent: function apiAttemptEvent(request) {\n    var api = request.service.api.operations[request.operation];\n    var monitoringEvent = {\n      Type: 'ApiCallAttempt',\n      Api: api ? api.name : request.operation,\n      Version: 1,\n      Service: request.service.api.serviceId || request.service.api.endpointPrefix,\n      Fqdn: request.httpRequest.endpoint.hostname,\n      UserAgent: request.httpRequest.getUserAgent(),\n    };\n    var response = request.response;\n    if (response.httpResponse.statusCode) {\n      monitoringEvent.HttpStatusCode = response.httpResponse.statusCode;\n    }\n    if (\n      !request._unAuthenticated &&\n      request.service.config.credentials &&\n      request.service.config.credentials.accessKeyId\n    ) {\n      monitoringEvent.AccessKey = request.service.config.credentials.accessKeyId;\n    }\n    if (!response.httpResponse.headers) return monitoringEvent;\n    if (request.httpRequest.headers['x-amz-security-token']) {\n      monitoringEvent.SessionToken = request.httpRequest.headers['x-amz-security-token'];\n    }\n    if (response.httpResponse.headers['x-amzn-requestid']) {\n      monitoringEvent.XAmznRequestId = response.httpResponse.headers['x-amzn-requestid'];\n    }\n    if (response.httpResponse.headers['x-amz-request-id']) {\n      monitoringEvent.XAmzRequestId = response.httpResponse.headers['x-amz-request-id'];\n    }\n    if (response.httpResponse.headers['x-amz-id-2']) {\n      monitoringEvent.XAmzId2 = response.httpResponse.headers['x-amz-id-2'];\n    }\n    return monitoringEvent;\n  },\n\n  /**\n   * Add metrics of failed request.\n   * @api private\n   */\n  attemptFailEvent: function attemptFailEvent(request) {\n    var monitoringEvent = this.apiAttemptEvent(request);\n    var response = request.response;\n    var error = response.error;\n    if (response.httpResponse.statusCode > 299 ) {\n      if (error.code) monitoringEvent.AwsException = error.code;\n      if (error.message) monitoringEvent.AwsExceptionMessage = error.message;\n    } else {\n      if (error.code || error.name) monitoringEvent.SdkException = error.code || error.name;\n      if (error.message) monitoringEvent.SdkExceptionMessage = error.message;\n    }\n    return monitoringEvent;\n  },\n\n  /**\n   * Attach listeners to request object to fetch metrics of each request\n   * and emit data object through \\'ApiCall\\' and \\'ApiCallAttempt\\' events.\n   * @api private\n   */\n  attachMonitoringEmitter: function attachMonitoringEmitter(request) {\n    var attemptTimestamp; //timestamp marking the beginning of a request attempt\n    var attemptStartRealTime; //Start time of request attempt. Used to calculating attemptLatency\n    var attemptLatency; //latency from request sent out to http response reaching SDK\n    var callStartRealTime; //Start time of API call. Used to calculating API call latency\n    var attemptCount = 0; //request.retryCount is not reliable here\n    var region; //region cache region for each attempt since it can be updated in plase (e.g. s3)\n    var callTimestamp; //timestamp when the request is created\n    var self = this;\n    var addToHead = true;\n\n    request.on('validate', function () {\n      callStartRealTime = AWS.util.realClock.now();\n      callTimestamp = Date.now();\n    }, addToHead);\n    request.on('sign', function () {\n      attemptStartRealTime = AWS.util.realClock.now();\n      attemptTimestamp = Date.now();\n      region = request.httpRequest.region;\n      attemptCount++;\n    }, addToHead);\n    request.on('validateResponse', function() {\n      attemptLatency = Math.round(AWS.util.realClock.now() - attemptStartRealTime);\n    });\n    request.addNamedListener('API_CALL_ATTEMPT', 'success', function API_CALL_ATTEMPT() {\n      var apiAttemptEvent = self.apiAttemptEvent(request);\n      apiAttemptEvent.Timestamp = attemptTimestamp;\n      apiAttemptEvent.AttemptLatency = attemptLatency >= 0 ? attemptLatency : 0;\n      apiAttemptEvent.Region = region;\n      self.emit('apiCallAttempt', [apiAttemptEvent]);\n    });\n    request.addNamedListener('API_CALL_ATTEMPT_RETRY', 'retry', function API_CALL_ATTEMPT_RETRY() {\n      var apiAttemptEvent = self.attemptFailEvent(request);\n      apiAttemptEvent.Timestamp = attemptTimestamp;\n      //attemptLatency may not be available if fail before response\n      attemptLatency = attemptLatency ||\n        Math.round(AWS.util.realClock.now() - attemptStartRealTime);\n      apiAttemptEvent.AttemptLatency = attemptLatency >= 0 ? attemptLatency : 0;\n      apiAttemptEvent.Region = region;\n      self.emit('apiCallAttempt', [apiAttemptEvent]);\n    });\n    request.addNamedListener('API_CALL', 'complete', function API_CALL() {\n      var apiCallEvent = self.apiCallEvent(request);\n      apiCallEvent.AttemptCount = attemptCount;\n      if (apiCallEvent.AttemptCount <= 0) return;\n      apiCallEvent.Timestamp = callTimestamp;\n      var latency = Math.round(AWS.util.realClock.now() - callStartRealTime);\n      apiCallEvent.Latency = latency >= 0 ? latency : 0;\n      var response = request.response;\n      if (\n        response.error &&\n        response.error.retryable &&\n        typeof response.retryCount === 'number' &&\n        typeof response.maxRetries === 'number' &&\n        (response.retryCount >= response.maxRetries)\n      ) {\n        apiCallEvent.MaxRetriesExceeded = 1;\n      }\n      self.emit('apiCall', [apiCallEvent]);\n    });\n  },\n\n  /**\n   * Override this method to setup any custom request listeners for each\n   * new request to the service.\n   *\n   * @method_abstract This is an abstract method.\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n  },\n\n  /**\n   * Gets the signing name for a given request\n   * @api private\n   */\n  getSigningName: function getSigningName() {\n    return this.api.signingName || this.api.endpointPrefix;\n  },\n\n  /**\n   * Gets the signer class for a given request\n   * @api private\n   */\n  getSignerClass: function getSignerClass(request) {\n    var version;\n    // get operation authtype if present\n    var operation = null;\n    var authtype = '';\n    if (request) {\n      var operations = request.service.api.operations || {};\n      operation = operations[request.operation] || null;\n      authtype = operation ? operation.authtype : '';\n    }\n    if (this.config.signatureVersion) {\n      version = this.config.signatureVersion;\n    } else if (authtype === 'v4' || authtype === 'v4-unsigned-body') {\n      version = 'v4';\n    } else {\n      version = this.api.signatureVersion;\n    }\n    return AWS.Signers.RequestSigner.getVersion(version);\n  },\n\n  /**\n   * @api private\n   */\n  serviceInterface: function serviceInterface() {\n    switch (this.api.protocol) {\n      case 'ec2': return AWS.EventListeners.Query;\n      case 'query': return AWS.EventListeners.Query;\n      case 'json': return AWS.EventListeners.Json;\n      case 'rest-json': return AWS.EventListeners.RestJson;\n      case 'rest-xml': return AWS.EventListeners.RestXml;\n    }\n    if (this.api.protocol) {\n      throw new Error('Invalid service `protocol\\' ' +\n        this.api.protocol + ' in API config');\n    }\n  },\n\n  /**\n   * @api private\n   */\n  successfulResponse: function successfulResponse(resp) {\n    return resp.httpResponse.statusCode < 300;\n  },\n\n  /**\n   * How many times a failed request should be retried before giving up.\n   * the defaultRetryCount can be overriden by service classes.\n   *\n   * @api private\n   */\n  numRetries: function numRetries() {\n    if (this.config.maxRetries !== undefined) {\n      return this.config.maxRetries;\n    } else {\n      return this.defaultRetryCount;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  retryDelays: function retryDelays(retryCount, err) {\n    return AWS.util.calculateRetryDelay(retryCount, this.config.retryDelayOptions, err);\n  },\n\n  /**\n   * @api private\n   */\n  retryableError: function retryableError(error) {\n    if (this.timeoutError(error)) return true;\n    if (this.networkingError(error)) return true;\n    if (this.expiredCredentialsError(error)) return true;\n    if (this.throttledError(error)) return true;\n    if (error.statusCode >= 500) return true;\n    return false;\n  },\n\n  /**\n   * @api private\n   */\n  networkingError: function networkingError(error) {\n    return error.code === 'NetworkingError';\n  },\n\n  /**\n   * @api private\n   */\n  timeoutError: function timeoutError(error) {\n    return error.code === 'TimeoutError';\n  },\n\n  /**\n   * @api private\n   */\n  expiredCredentialsError: function expiredCredentialsError(error) {\n    // TODO : this only handles *one* of the expired credential codes\n    return (error.code === 'ExpiredTokenException');\n  },\n\n  /**\n   * @api private\n   */\n  clockSkewError: function clockSkewError(error) {\n    switch (error.code) {\n      case 'RequestTimeTooSkewed':\n      case 'RequestExpired':\n      case 'InvalidSignatureException':\n      case 'SignatureDoesNotMatch':\n      case 'AuthFailure':\n      case 'RequestInTheFuture':\n        return true;\n      default: return false;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getSkewCorrectedDate: function getSkewCorrectedDate() {\n    return new Date(Date.now() + this.config.systemClockOffset);\n  },\n\n  /**\n   * @api private\n   */\n  applyClockOffset: function applyClockOffset(newServerTime) {\n    if (newServerTime) {\n      this.config.systemClockOffset = newServerTime - Date.now();\n    }\n  },\n\n  /**\n   * @api private\n   */\n  isClockSkewed: function isClockSkewed(newServerTime) {\n    if (newServerTime) {\n      return Math.abs(this.getSkewCorrectedDate().getTime() - newServerTime) >= 300000;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  throttledError: function throttledError(error) {\n    // this logic varies between services\n    if (error.statusCode === 429) return true;\n    switch (error.code) {\n      case 'ProvisionedThroughputExceededException':\n      case 'Throttling':\n      case 'ThrottlingException':\n      case 'RequestLimitExceeded':\n      case 'RequestThrottled':\n      case 'RequestThrottledException':\n      case 'TooManyRequestsException':\n      case 'TransactionInProgressException': //dynamodb\n      case 'EC2ThrottledException':\n        return true;\n      default:\n        return false;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  endpointFromTemplate: function endpointFromTemplate(endpoint) {\n    if (typeof endpoint !== 'string') return endpoint;\n\n    var e = endpoint;\n    e = e.replace(/\\{service\\}/g, this.api.endpointPrefix);\n    e = e.replace(/\\{region\\}/g, this.config.region);\n    e = e.replace(/\\{scheme\\}/g, this.config.sslEnabled ? 'https' : 'http');\n    return e;\n  },\n\n  /**\n   * @api private\n   */\n  setEndpoint: function setEndpoint(endpoint) {\n    this.endpoint = new AWS.Endpoint(endpoint, this.config);\n  },\n\n  /**\n   * @api private\n   */\n  paginationConfig: function paginationConfig(operation, throwException) {\n    var paginator = this.api.operations[operation].paginator;\n    if (!paginator) {\n      if (throwException) {\n        var e = new Error();\n        throw AWS.util.error(e, 'No pagination configuration for ' + operation);\n      }\n      return null;\n    }\n\n    return paginator;\n  }\n});\n\nAWS.util.update(AWS.Service, {\n\n  /**\n   * Adds one method for each operation described in the api configuration\n   *\n   * @api private\n   */\n  defineMethods: function defineMethods(svc) {\n    AWS.util.each(svc.prototype.api.operations, function iterator(method) {\n      if (svc.prototype[method]) return;\n      var operation = svc.prototype.api.operations[method];\n      if (operation.authtype === 'none') {\n        svc.prototype[method] = function (params, callback) {\n          return this.makeUnauthenticatedRequest(method, params, callback);\n        };\n      } else {\n        svc.prototype[method] = function (params, callback) {\n          return this.makeRequest(method, params, callback);\n        };\n      }\n    });\n  },\n\n  /**\n   * Defines a new Service class using a service identifier and list of versions\n   * including an optional set of features (functions) to apply to the class\n   * prototype.\n   *\n   * @param serviceIdentifier [String] the identifier for the service\n   * @param versions [Array<String>] a list of versions that work with this\n   *   service\n   * @param features [Object] an object to attach to the prototype\n   * @return [Class<Service>] the service class defined by this function.\n   */\n  defineService: function defineService(serviceIdentifier, versions, features) {\n    AWS.Service._serviceMap[serviceIdentifier] = true;\n    if (!Array.isArray(versions)) {\n      features = versions;\n      versions = [];\n    }\n\n    var svc = inherit(AWS.Service, features || {});\n\n    if (typeof serviceIdentifier === 'string') {\n      AWS.Service.addVersions(svc, versions);\n\n      var identifier = svc.serviceIdentifier || serviceIdentifier;\n      svc.serviceIdentifier = identifier;\n    } else { // defineService called with an API\n      svc.prototype.api = serviceIdentifier;\n      AWS.Service.defineMethods(svc);\n    }\n    AWS.SequentialExecutor.call(this.prototype);\n    //util.clientSideMonitoring is only available in node\n    if (!this.prototype.publisher && AWS.util.clientSideMonitoring) {\n      var Publisher = AWS.util.clientSideMonitoring.Publisher;\n      var configProvider = AWS.util.clientSideMonitoring.configProvider;\n      var publisherConfig = configProvider();\n      this.prototype.publisher = new Publisher(publisherConfig);\n      if (publisherConfig.enabled) {\n        //if csm is enabled in environment, SDK should send all metrics\n        AWS.Service._clientSideMonitoring = true;\n      }\n    }\n    AWS.SequentialExecutor.call(svc.prototype);\n    AWS.Service.addDefaultMonitoringListeners(svc.prototype);\n    return svc;\n  },\n\n  /**\n   * @api private\n   */\n  addVersions: function addVersions(svc, versions) {\n    if (!Array.isArray(versions)) versions = [versions];\n\n    svc.services = svc.services || {};\n    for (var i = 0; i < versions.length; i++) {\n      if (svc.services[versions[i]] === undefined) {\n        svc.services[versions[i]] = null;\n      }\n    }\n\n    svc.apiVersions = Object.keys(svc.services).sort();\n  },\n\n  /**\n   * @api private\n   */\n  defineServiceApi: function defineServiceApi(superclass, version, apiConfig) {\n    var svc = inherit(superclass, {\n      serviceIdentifier: superclass.serviceIdentifier\n    });\n\n    function setApi(api) {\n      if (api.isApi) {\n        svc.prototype.api = api;\n      } else {\n        svc.prototype.api = new Api(api, {\n          serviceIdentifier: superclass.serviceIdentifier\n        });\n      }\n    }\n\n    if (typeof version === 'string') {\n      if (apiConfig) {\n        setApi(apiConfig);\n      } else {\n        try {\n          setApi(AWS.apiLoader(superclass.serviceIdentifier, version));\n        } catch (err) {\n          throw AWS.util.error(err, {\n            message: 'Could not find API configuration ' +\n              superclass.serviceIdentifier + '-' + version\n          });\n        }\n      }\n      if (!Object.prototype.hasOwnProperty.call(superclass.services, version)) {\n        superclass.apiVersions = superclass.apiVersions.concat(version).sort();\n      }\n      superclass.services[version] = svc;\n    } else {\n      setApi(version);\n    }\n\n    AWS.Service.defineMethods(svc);\n    return svc;\n  },\n\n  /**\n   * @api private\n   */\n  hasService: function(identifier) {\n    return Object.prototype.hasOwnProperty.call(AWS.Service._serviceMap, identifier);\n  },\n\n  /**\n   * @param attachOn attach default monitoring listeners to object\n   *\n   * Each monitoring event should be emitted from service client to service constructor prototype and then\n   * to global service prototype like bubbling up. These default monitoring events listener will transfer\n   * the monitoring events to the upper layer.\n   * @api private\n   */\n  addDefaultMonitoringListeners: function addDefaultMonitoringListeners(attachOn) {\n    attachOn.addNamedListener('MONITOR_EVENTS_BUBBLE', 'apiCallAttempt', function EVENTS_BUBBLE(event) {\n      var baseClass = Object.getPrototypeOf(attachOn);\n      if (baseClass._events) baseClass.emit('apiCallAttempt', [event]);\n    });\n    attachOn.addNamedListener('CALL_EVENTS_BUBBLE', 'apiCall', function CALL_EVENTS_BUBBLE(event) {\n      var baseClass = Object.getPrototypeOf(attachOn);\n      if (baseClass._events) baseClass.emit('apiCall', [event]);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  _serviceMap: {}\n});\n\nAWS.util.mixin(AWS.Service, AWS.SequentialExecutor);\n\n/**\n * @api private\n */\nmodule.exports = AWS.Service;\n","var AWS = require('../core');\nrequire('../dynamodb/document_client');\n\nAWS.util.update(AWS.DynamoDB.prototype, {\n  /**\n   * @api private\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n    if (request.service.config.dynamoDbCrc32) {\n      request.removeListener('extractData', AWS.EventListeners.Json.EXTRACT_DATA);\n      request.addListener('extractData', this.checkCrc32);\n      request.addListener('extractData', AWS.EventListeners.Json.EXTRACT_DATA);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  checkCrc32: function checkCrc32(resp) {\n    if (!resp.httpResponse.streaming && !resp.request.service.crc32IsValid(resp)) {\n      resp.data = null;\n      resp.error = AWS.util.error(new Error(), {\n        code: 'CRC32CheckFailed',\n        message: 'CRC32 integrity check failed',\n        retryable: true\n      });\n      resp.request.haltHandlersOnError();\n      throw (resp.error);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  crc32IsValid: function crc32IsValid(resp) {\n    var crc = resp.httpResponse.headers['x-amz-crc32'];\n    if (!crc) return true; // no (valid) CRC32 header\n    return parseInt(crc, 10) === AWS.util.crypto.crc32(resp.httpResponse.body);\n  },\n\n  /**\n   * @api private\n   */\n  defaultRetryCount: 10,\n\n  /**\n   * @api private\n   */\n  retryDelays: function retryDelays(retryCount, err) {\n    var retryDelayOptions = AWS.util.copy(this.config.retryDelayOptions);\n\n    if (typeof retryDelayOptions.base !== 'number') {\n        retryDelayOptions.base = 50; // default for dynamodb\n    }\n    var delay = AWS.util.calculateRetryDelay(retryCount, retryDelayOptions, err);\n    return delay;\n  }\n});\n","var AWS = require('../core');\nvar v4Credentials = require('../signers/v4_credentials');\nvar resolveRegionalEndpointsFlag = require('../config_regional_endpoint');\nvar s3util = require('./s3util');\nvar regionUtil = require('../region_config');\n\n// Pull in managed upload extension\nrequire('../s3/managed_upload');\n\n/**\n * @api private\n */\nvar operationsWith200StatusCodeError = {\n  'completeMultipartUpload': true,\n  'copyObject': true,\n  'uploadPartCopy': true\n};\n\n/**\n * @api private\n */\n var regionRedirectErrorCodes = [\n  'AuthorizationHeaderMalformed', // non-head operations on virtual-hosted global bucket endpoints\n  'BadRequest', // head operations on virtual-hosted global bucket endpoints\n  'PermanentRedirect', // non-head operations on path-style or regional endpoints\n  301 // head operations on path-style or regional endpoints\n ];\n\nAWS.util.update(AWS.S3.prototype, {\n  /**\n   * @api private\n   */\n  getSignatureVersion: function getSignatureVersion(request) {\n    var defaultApiVersion = this.api.signatureVersion;\n    var userDefinedVersion = this._originalConfig ? this._originalConfig.signatureVersion : null;\n    var regionDefinedVersion = this.config.signatureVersion;\n    var isPresigned = request ? request.isPresigned() : false;\n    /*\n      1) User defined version specified:\n        a) always return user defined version\n      2) No user defined version specified:\n        a) If not using presigned urls, default to V4\n        b) If using presigned urls, default to lowest version the region supports\n    */\n    if (userDefinedVersion) {\n      userDefinedVersion = userDefinedVersion === 'v2' ? 's3' : userDefinedVersion;\n      return userDefinedVersion;\n    }\n    if (isPresigned !== true) {\n      defaultApiVersion = 'v4';\n    } else if (regionDefinedVersion) {\n      defaultApiVersion = regionDefinedVersion;\n    }\n    return defaultApiVersion;\n  },\n\n  /**\n   * @api private\n   */\n  getSigningName: function getSigningName() {\n    var _super = AWS.Service.prototype.getSigningName;\n    return (this._parsedArn && this._parsedArn.service)\n      ? this._parsedArn.service\n      : _super.call(this);\n  },\n\n  /**\n   * @api private\n   */\n  getSignerClass: function getSignerClass(request) {\n    var signatureVersion = this.getSignatureVersion(request);\n    return AWS.Signers.RequestSigner.getVersion(signatureVersion);\n  },\n\n  /**\n   * @api private\n   */\n  validateService: function validateService() {\n    var msg;\n    var messages = [];\n\n    // default to us-east-1 when no region is provided\n    if (!this.config.region) this.config.region = 'us-east-1';\n\n    if (!this.config.endpoint && this.config.s3BucketEndpoint) {\n      messages.push('An endpoint must be provided when configuring ' +\n                    '`s3BucketEndpoint` to true.');\n    }\n    if (messages.length === 1) {\n      msg = messages[0];\n    } else if (messages.length > 1) {\n      msg = 'Multiple configuration errors:\\n' + messages.join('\\n');\n    }\n    if (msg) {\n      throw AWS.util.error(new Error(),\n        {name: 'InvalidEndpoint', message: msg});\n    }\n  },\n\n  /**\n   * @api private\n   */\n  shouldDisableBodySigning: function shouldDisableBodySigning(request) {\n    var signerClass = this.getSignerClass();\n    if (this.config.s3DisableBodySigning === true && signerClass === AWS.Signers.V4\n        && request.httpRequest.endpoint.protocol === 'https:') {\n      return true;\n    }\n    return false;\n  },\n\n  /**\n   * @api private\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n    var prependListener = true;\n    request.addListener('validate', this.validateScheme);\n    request.addListener('validate', this.validateBucketName, prependListener);\n    request.addListener('validate', this.optInUsEast1RegionalEndpoint, prependListener);\n\n    request.removeListener('validate',\n      AWS.EventListeners.Core.VALIDATE_REGION);\n    request.addListener('build', this.addContentType);\n    request.addListener('build', this.computeContentMd5);\n    request.addListener('build', this.computeSseCustomerKeyMd5);\n    request.addListener('build', this.populateURI);\n    request.addListener('afterBuild', this.addExpect100Continue);\n    request.addListener('extractError', this.extractError);\n    request.addListener('extractData', AWS.util.hoistPayloadMember);\n    request.addListener('extractData', this.extractData);\n    request.addListener('extractData', this.extractErrorFrom200Response);\n    request.addListener('beforePresign', this.prepareSignedUrl);\n    if (this.shouldDisableBodySigning(request))  {\n      request.removeListener('afterBuild', AWS.EventListeners.Core.COMPUTE_SHA256);\n      request.addListener('afterBuild', this.disableBodySigning);\n    }\n    //deal with ARNs supplied to Bucket\n    if (request.operation !== 'createBucket' && s3util.isArnInParam(request, 'Bucket')) {\n      // avoid duplicate parsing in the future\n      request.service._parsedArn = AWS.util.ARN.parse(request.params.Bucket);\n\n      request.removeListener('validate', this.validateBucketName);\n      request.removeListener('build', this.populateURI);\n      if (request.service._parsedArn.service === 's3') {\n        request.addListener('validate', s3util.validateS3AccessPointArn);\n        request.addListener('validate', this.validateArnResourceType);\n      } else if (request.service._parsedArn.service === 's3-outposts') {\n        request.addListener('validate', s3util.validateOutpostsAccessPointArn);\n        request.addListener('validate', s3util.validateOutpostsArn);\n      }\n      request.addListener('validate', s3util.validateArnRegion);\n      request.addListener('validate', s3util.validateArnAccount);\n      request.addListener('validate', s3util.validateArnService);\n      request.addListener('build', this.populateUriFromAccessPointArn);\n      request.addListener('build', s3util.validatePopulateUriFromArn);\n      return;\n    }\n    //listeners regarding region inference\n    request.addListener('validate', this.validateBucketEndpoint);\n    request.addListener('validate', this.correctBucketRegionFromCache);\n    request.onAsync('extractError', this.requestBucketRegion);\n    if (AWS.util.isBrowser()) {\n      request.onAsync('retry', this.reqRegionForNetworkingError);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateScheme: function(req) {\n    var params = req.params,\n        scheme = req.httpRequest.endpoint.protocol,\n        sensitive = params.SSECustomerKey || params.CopySourceSSECustomerKey;\n    if (sensitive && scheme !== 'https:') {\n      var msg = 'Cannot send SSE keys over HTTP. Set \\'sslEnabled\\'' +\n        'to \\'true\\' in your configuration';\n      throw AWS.util.error(new Error(),\n        { code: 'ConfigError', message: msg });\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateBucketEndpoint: function(req) {\n    if (!req.params.Bucket && req.service.config.s3BucketEndpoint) {\n      var msg = 'Cannot send requests to root API with `s3BucketEndpoint` set.';\n      throw AWS.util.error(new Error(),\n        { code: 'ConfigError', message: msg });\n    }\n  },\n\n  /**\n   * Validate resource-type supplied in S3 ARN\n   */\n  validateArnResourceType: function validateArnResourceType(req) {\n    var resource = req.service._parsedArn.resource;\n\n    if (\n      resource.indexOf('accesspoint:') !== 0 &&\n      resource.indexOf('accesspoint/') !== 0\n    ) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'ARN resource should begin with \\'accesspoint/\\''\n      });\n    }\n  },\n\n  /**\n   * @api private\n   */\n  validateBucketName: function validateBucketName(req) {\n    var service = req.service;\n    var signatureVersion = service.getSignatureVersion(req);\n    var bucket = req.params && req.params.Bucket;\n    var key = req.params && req.params.Key;\n    var slashIndex = bucket && bucket.indexOf('/');\n    if (bucket && slashIndex >= 0) {\n      if (typeof key === 'string' && slashIndex > 0) {\n        req.params = AWS.util.copy(req.params);\n        // Need to include trailing slash to match sigv2 behavior\n        var prefix = bucket.substr(slashIndex + 1) || '';\n        req.params.Key = prefix + '/' + key;\n        req.params.Bucket = bucket.substr(0, slashIndex);\n      } else if (signatureVersion === 'v4') {\n        var msg = 'Bucket names cannot contain forward slashes. Bucket: ' + bucket;\n        throw AWS.util.error(new Error(),\n          { code: 'InvalidBucket', message: msg });\n      }\n    }\n  },\n\n  /**\n   * @api private\n   */\n  isValidAccelerateOperation: function isValidAccelerateOperation(operation) {\n    var invalidOperations = [\n      'createBucket',\n      'deleteBucket',\n      'listBuckets'\n    ];\n    return invalidOperations.indexOf(operation) === -1;\n  },\n\n  /**\n   * When us-east-1 region endpoint configuration is set, in stead of sending request to\n   * global endpoint(e.g. 's3.amazonaws.com'), we will send request to\n   * 's3.us-east-1.amazonaws.com'.\n   * @api private\n   */\n  optInUsEast1RegionalEndpoint: function optInUsEast1RegionalEndpoint(req) {\n    var service = req.service;\n    var config = service.config;\n    config.s3UsEast1RegionalEndpoint = resolveRegionalEndpointsFlag(service._originalConfig, {\n      env: 'AWS_S3_US_EAST_1_REGIONAL_ENDPOINT',\n      sharedConfig: 's3_us_east_1_regional_endpoint',\n      clientConfig: 's3UsEast1RegionalEndpoint'\n    });\n    if (\n      !(service._originalConfig || {}).endpoint &&\n      req.httpRequest.region === 'us-east-1' &&\n      config.s3UsEast1RegionalEndpoint === 'regional' &&\n      req.httpRequest.endpoint.hostname.indexOf('s3.amazonaws.com') >= 0\n    ) {\n      var insertPoint = config.endpoint.indexOf('.amazonaws.com');\n      regionalEndpoint = config.endpoint.substring(0, insertPoint) +\n        '.us-east-1' + config.endpoint.substring(insertPoint);\n      req.httpRequest.updateEndpoint(regionalEndpoint);\n    }\n  },\n\n  /**\n   * S3 prefers dns-compatible bucket names to be moved from the uri path\n   * to the hostname as a sub-domain.  This is not possible, even for dns-compat\n   * buckets when using SSL and the bucket name contains a dot ('.').  The\n   * ssl wildcard certificate is only 1-level deep.\n   *\n   * @api private\n   */\n  populateURI: function populateURI(req) {\n    var httpRequest = req.httpRequest;\n    var b = req.params.Bucket;\n    var service = req.service;\n    var endpoint = httpRequest.endpoint;\n    if (b) {\n      if (!service.pathStyleBucketName(b)) {\n        if (service.config.useAccelerateEndpoint && service.isValidAccelerateOperation(req.operation)) {\n          if (service.config.useDualstack) {\n            endpoint.hostname = b + '.s3-accelerate.dualstack.amazonaws.com';\n          } else {\n            endpoint.hostname = b + '.s3-accelerate.amazonaws.com';\n          }\n        } else if (!service.config.s3BucketEndpoint) {\n          endpoint.hostname =\n            b + '.' + endpoint.hostname;\n        }\n\n        var port = endpoint.port;\n        if (port !== 80 && port !== 443) {\n          endpoint.host = endpoint.hostname + ':' +\n            endpoint.port;\n        } else {\n          endpoint.host = endpoint.hostname;\n        }\n\n        httpRequest.virtualHostedBucket = b; // needed for signing the request\n        service.removeVirtualHostedBucketFromPath(req);\n      }\n    }\n  },\n\n  /**\n   * Takes the bucket name out of the path if bucket is virtual-hosted\n   *\n   * @api private\n   */\n  removeVirtualHostedBucketFromPath: function removeVirtualHostedBucketFromPath(req) {\n    var httpRequest = req.httpRequest;\n    var bucket = httpRequest.virtualHostedBucket;\n    if (bucket && httpRequest.path) {\n      if (req.params && req.params.Key) {\n        var encodedS3Key = '/' + AWS.util.uriEscapePath(req.params.Key);\n        if (httpRequest.path.indexOf(encodedS3Key) === 0 && (httpRequest.path.length === encodedS3Key.length || httpRequest.path[encodedS3Key.length] === '?')) {\n          //path only contains key or path contains only key and querystring\n          return;\n        }\n      }\n      httpRequest.path = httpRequest.path.replace(new RegExp('/' + bucket), '');\n      if (httpRequest.path[0] !== '/') {\n        httpRequest.path = '/' + httpRequest.path;\n      }\n    }\n  },\n\n  /**\n   * When user supply an access point ARN in the Bucket parameter, we need to\n   * populate the URI according to the ARN.\n   */\n  populateUriFromAccessPointArn: function populateUriFromAccessPointArn(req) {\n    var accessPointArn = req.service._parsedArn;\n\n    var isOutpostArn = accessPointArn.service === 's3-outposts';\n\n    var outpostsSuffix = isOutpostArn ? '.' + accessPointArn.outpostId: '';\n    var serviceName = isOutpostArn ? 's3-outposts': 's3-accesspoint';\n    var dualStackSuffix = !isOutpostArn && req.service.config.useDualstack ? '.dualstack' : '';\n\n    var endpoint = req.httpRequest.endpoint;\n    var dnsSuffix = regionUtil.getEndpointSuffix(accessPointArn.region);\n    var useArnRegion = req.service.config.s3UseArnRegion;\n\n    endpoint.hostname = [\n      accessPointArn.accessPoint + '-' + accessPointArn.accountId + outpostsSuffix,\n      serviceName + dualStackSuffix,\n      useArnRegion ? accessPointArn.region : req.service.config.region,\n      dnsSuffix\n    ].join('.');\n    endpoint.host = endpoint.hostname;\n\n    var encodedArn = AWS.util.uriEscape(req.params.Bucket);\n    var path = req.httpRequest.path;\n    //remove the Bucket value from path\n    req.httpRequest.path = path.replace(new RegExp('/' + encodedArn), '');\n    if (req.httpRequest.path[0] !== '/') {\n      req.httpRequest.path = '/' + req.httpRequest.path;\n    }\n    req.httpRequest.region = accessPointArn.region; //region used to sign\n  },\n\n  /**\n   * Adds Expect: 100-continue header if payload is greater-or-equal 1MB\n   * @api private\n   */\n  addExpect100Continue: function addExpect100Continue(req) {\n    var len = req.httpRequest.headers['Content-Length'];\n    if (AWS.util.isNode() && (len >= 1024 * 1024 || req.params.Body instanceof AWS.util.stream.Stream)) {\n      req.httpRequest.headers['Expect'] = '100-continue';\n    }\n  },\n\n  /**\n   * Adds a default content type if none is supplied.\n   *\n   * @api private\n   */\n  addContentType: function addContentType(req) {\n    var httpRequest = req.httpRequest;\n    if (httpRequest.method === 'GET' || httpRequest.method === 'HEAD') {\n      // Content-Type is not set in GET/HEAD requests\n      delete httpRequest.headers['Content-Type'];\n      return;\n    }\n\n    if (!httpRequest.headers['Content-Type']) { // always have a Content-Type\n      httpRequest.headers['Content-Type'] = 'application/octet-stream';\n    }\n\n    var contentType = httpRequest.headers['Content-Type'];\n    if (AWS.util.isBrowser()) {\n      if (typeof httpRequest.body === 'string' && !contentType.match(/;\\s*charset=/)) {\n        var charset = '; charset=UTF-8';\n        httpRequest.headers['Content-Type'] += charset;\n      } else {\n        var replaceFn = function(_, prefix, charsetName) {\n          return prefix + charsetName.toUpperCase();\n        };\n\n        httpRequest.headers['Content-Type'] =\n          contentType.replace(/(;\\s*charset=)(.+)$/, replaceFn);\n      }\n    }\n  },\n\n  /**\n   * @api private\n   */\n  computableChecksumOperations: {\n    putBucketCors: true,\n    putBucketLifecycle: true,\n    putBucketLifecycleConfiguration: true,\n    putBucketTagging: true,\n    deleteObjects: true,\n    putBucketReplication: true,\n    putObjectLegalHold: true,\n    putObjectRetention: true,\n    putObjectLockConfiguration: true\n  },\n\n  /**\n   * Checks whether checksums should be computed for the request.\n   * If the request requires checksums to be computed, this will always\n   * return true, otherwise it depends on whether {AWS.Config.computeChecksums}\n   * is set.\n   *\n   * @param req [AWS.Request] the request to check against\n   * @return [Boolean] whether to compute checksums for a request.\n   * @api private\n   */\n  willComputeChecksums: function willComputeChecksums(req) {\n    if (this.computableChecksumOperations[req.operation]) return true;\n    if (!this.config.computeChecksums) return false;\n\n    // TODO: compute checksums for Stream objects\n    if (!AWS.util.Buffer.isBuffer(req.httpRequest.body) &&\n        typeof req.httpRequest.body !== 'string') {\n      return false;\n    }\n\n    var rules = req.service.api.operations[req.operation].input.members;\n\n    // Sha256 signing disabled, and not a presigned url\n    if (req.service.shouldDisableBodySigning(req) && !Object.prototype.hasOwnProperty.call(req.httpRequest.headers, 'presigned-expires')) {\n      if (rules.ContentMD5 && !req.params.ContentMD5) {\n        return true;\n      }\n    }\n\n    // V4 signer uses SHA256 signatures so only compute MD5 if it is required\n    if (req.service.getSignerClass(req) === AWS.Signers.V4) {\n      if (rules.ContentMD5 && !rules.ContentMD5.required) return false;\n    }\n\n    if (rules.ContentMD5 && !req.params.ContentMD5) return true;\n  },\n\n  /**\n   * A listener that computes the Content-MD5 and sets it in the header.\n   * @see AWS.S3.willComputeChecksums\n   * @api private\n   */\n  computeContentMd5: function computeContentMd5(req) {\n    if (req.service.willComputeChecksums(req)) {\n      var md5 = AWS.util.crypto.md5(req.httpRequest.body, 'base64');\n      req.httpRequest.headers['Content-MD5'] = md5;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  computeSseCustomerKeyMd5: function computeSseCustomerKeyMd5(req) {\n    var keys = {\n      SSECustomerKey: 'x-amz-server-side-encryption-customer-key-MD5',\n      CopySourceSSECustomerKey: 'x-amz-copy-source-server-side-encryption-customer-key-MD5'\n    };\n    AWS.util.each(keys, function(key, header) {\n      if (req.params[key]) {\n        var value = AWS.util.crypto.md5(req.params[key], 'base64');\n        req.httpRequest.headers[header] = value;\n      }\n    });\n  },\n\n  /**\n   * Returns true if the bucket name should be left in the URI path for\n   * a request to S3.  This function takes into account the current\n   * endpoint protocol (e.g. http or https).\n   *\n   * @api private\n   */\n  pathStyleBucketName: function pathStyleBucketName(bucketName) {\n    // user can force path style requests via the configuration\n    if (this.config.s3ForcePathStyle) return true;\n    if (this.config.s3BucketEndpoint) return false;\n\n    if (s3util.dnsCompatibleBucketName(bucketName)) {\n      return (this.config.sslEnabled && bucketName.match(/\\./)) ? true : false;\n    } else {\n      return true; // not dns compatible names must always use path style\n    }\n  },\n\n  /**\n   * For COPY operations, some can be error even with status code 200.\n   * SDK treats the response as exception when response body indicates\n   * an exception or body is empty.\n   *\n   * @api private\n   */\n  extractErrorFrom200Response: function extractErrorFrom200Response(resp) {\n    if (!operationsWith200StatusCodeError[resp.request.operation]) return;\n    var httpResponse = resp.httpResponse;\n    if (httpResponse.body && httpResponse.body.toString().match('<Error>')) {\n      // Response body with '<Error>...</Error>' indicates an exception.\n      // Get S3 client object. In ManagedUpload, this.service refers to\n      // S3 client object.\n      resp.data = null;\n      var service = this.service ? this.service : this;\n      service.extractError(resp);\n      throw resp.error;\n    } else if (!httpResponse.body || !httpResponse.body.toString().match(/<[\\w_]/)) {\n      // When body is empty or incomplete, S3 might stop the request on detecting client\n      // side aborting the request.\n      resp.data = null;\n      throw AWS.util.error(new Error(), {\n        code: 'InternalError',\n        message: 'S3 aborted request'\n      });\n    }\n  },\n\n  /**\n   * @return [Boolean] whether the error can be retried\n   * @api private\n   */\n  retryableError: function retryableError(error, request) {\n    if (operationsWith200StatusCodeError[request.operation] &&\n        error.statusCode === 200) {\n      return true;\n    } else if (request._requestRegionForBucket &&\n        request.service.bucketRegionCache[request._requestRegionForBucket]) {\n      return false;\n    } else if (error && error.code === 'RequestTimeout') {\n      return true;\n    } else if (error &&\n        regionRedirectErrorCodes.indexOf(error.code) != -1 &&\n        error.region && error.region != request.httpRequest.region) {\n      request.httpRequest.region = error.region;\n      if (error.statusCode === 301) {\n        request.service.updateReqBucketRegion(request);\n      }\n      return true;\n    } else {\n      var _super = AWS.Service.prototype.retryableError;\n      return _super.call(this, error, request);\n    }\n  },\n\n  /**\n   * Updates httpRequest with region. If region is not provided, then\n   * the httpRequest will be updated based on httpRequest.region\n   *\n   * @api private\n   */\n  updateReqBucketRegion: function updateReqBucketRegion(request, region) {\n    var httpRequest = request.httpRequest;\n    if (typeof region === 'string' && region.length) {\n      httpRequest.region = region;\n    }\n    if (!httpRequest.endpoint.host.match(/s3(?!-accelerate).*\\.amazonaws\\.com$/)) {\n      return;\n    }\n    var service = request.service;\n    var s3Config = service.config;\n    var s3BucketEndpoint = s3Config.s3BucketEndpoint;\n    if (s3BucketEndpoint) {\n      delete s3Config.s3BucketEndpoint;\n    }\n    var newConfig = AWS.util.copy(s3Config);\n    delete newConfig.endpoint;\n    newConfig.region = httpRequest.region;\n\n    httpRequest.endpoint = (new AWS.S3(newConfig)).endpoint;\n    service.populateURI(request);\n    s3Config.s3BucketEndpoint = s3BucketEndpoint;\n    httpRequest.headers.Host = httpRequest.endpoint.host;\n\n    if (request._asm.currentState === 'validate') {\n      request.removeListener('build', service.populateURI);\n      request.addListener('build', service.removeVirtualHostedBucketFromPath);\n    }\n  },\n\n  /**\n   * Provides a specialized parser for getBucketLocation -- all other\n   * operations are parsed by the super class.\n   *\n   * @api private\n   */\n  extractData: function extractData(resp) {\n    var req = resp.request;\n    if (req.operation === 'getBucketLocation') {\n      var match = resp.httpResponse.body.toString().match(/>(.+)<\\/Location/);\n      delete resp.data['_'];\n      if (match) {\n        resp.data.LocationConstraint = match[1];\n      } else {\n        resp.data.LocationConstraint = '';\n      }\n    }\n    var bucket = req.params.Bucket || null;\n    if (req.operation === 'deleteBucket' && typeof bucket === 'string' && !resp.error) {\n      req.service.clearBucketRegionCache(bucket);\n    } else {\n      var headers = resp.httpResponse.headers || {};\n      var region = headers['x-amz-bucket-region'] || null;\n      if (!region && req.operation === 'createBucket' && !resp.error) {\n        var createBucketConfiguration = req.params.CreateBucketConfiguration;\n        if (!createBucketConfiguration) {\n          region = 'us-east-1';\n        } else if (createBucketConfiguration.LocationConstraint === 'EU') {\n          region = 'eu-west-1';\n        } else {\n          region = createBucketConfiguration.LocationConstraint;\n        }\n      }\n      if (region) {\n          if (bucket && region !== req.service.bucketRegionCache[bucket]) {\n            req.service.bucketRegionCache[bucket] = region;\n          }\n      }\n    }\n    req.service.extractRequestIds(resp);\n  },\n\n  /**\n   * Extracts an error object from the http response.\n   *\n   * @api private\n   */\n  extractError: function extractError(resp) {\n    var codes = {\n      304: 'NotModified',\n      403: 'Forbidden',\n      400: 'BadRequest',\n      404: 'NotFound'\n    };\n\n    var req = resp.request;\n    var code = resp.httpResponse.statusCode;\n    var body = resp.httpResponse.body || '';\n\n    var headers = resp.httpResponse.headers || {};\n    var region = headers['x-amz-bucket-region'] || null;\n    var bucket = req.params.Bucket || null;\n    var bucketRegionCache = req.service.bucketRegionCache;\n    if (region && bucket && region !== bucketRegionCache[bucket]) {\n      bucketRegionCache[bucket] = region;\n    }\n\n    var cachedRegion;\n    if (codes[code] && body.length === 0) {\n      if (bucket && !region) {\n        cachedRegion = bucketRegionCache[bucket] || null;\n        if (cachedRegion !== req.httpRequest.region) {\n          region = cachedRegion;\n        }\n      }\n      resp.error = AWS.util.error(new Error(), {\n        code: codes[code],\n        message: null,\n        region: region\n      });\n    } else {\n      var data = new AWS.XML.Parser().parse(body.toString());\n\n      if (data.Region && !region) {\n        region = data.Region;\n        if (bucket && region !== bucketRegionCache[bucket]) {\n          bucketRegionCache[bucket] = region;\n        }\n      } else if (bucket && !region && !data.Region) {\n        cachedRegion = bucketRegionCache[bucket] || null;\n        if (cachedRegion !== req.httpRequest.region) {\n          region = cachedRegion;\n        }\n      }\n\n      resp.error = AWS.util.error(new Error(), {\n        code: data.Code || code,\n        message: data.Message || null,\n        region: region\n      });\n    }\n    req.service.extractRequestIds(resp);\n  },\n\n  /**\n   * If region was not obtained synchronously, then send async request\n   * to get bucket region for errors resulting from wrong region.\n   *\n   * @api private\n   */\n  requestBucketRegion: function requestBucketRegion(resp, done) {\n    var error = resp.error;\n    var req = resp.request;\n    var bucket = req.params.Bucket || null;\n\n    if (!error || !bucket || error.region || req.operation === 'listObjects' ||\n        (AWS.util.isNode() && req.operation === 'headBucket') ||\n        (error.statusCode === 400 && req.operation !== 'headObject') ||\n        regionRedirectErrorCodes.indexOf(error.code) === -1) {\n      return done();\n    }\n    var reqOperation = AWS.util.isNode() ? 'headBucket' : 'listObjects';\n    var reqParams = {Bucket: bucket};\n    if (reqOperation === 'listObjects') reqParams.MaxKeys = 0;\n    var regionReq = req.service[reqOperation](reqParams);\n    regionReq._requestRegionForBucket = bucket;\n    regionReq.send(function() {\n      var region = req.service.bucketRegionCache[bucket] || null;\n      error.region = region;\n      done();\n    });\n  },\n\n   /**\n   * For browser only. If NetworkingError received, will attempt to obtain\n   * the bucket region.\n   *\n   * @api private\n   */\n   reqRegionForNetworkingError: function reqRegionForNetworkingError(resp, done) {\n    if (!AWS.util.isBrowser()) {\n      return done();\n    }\n    var error = resp.error;\n    var request = resp.request;\n    var bucket = request.params.Bucket;\n    if (!error || error.code !== 'NetworkingError' || !bucket ||\n        request.httpRequest.region === 'us-east-1') {\n      return done();\n    }\n    var service = request.service;\n    var bucketRegionCache = service.bucketRegionCache;\n    var cachedRegion = bucketRegionCache[bucket] || null;\n\n    if (cachedRegion && cachedRegion !== request.httpRequest.region) {\n      service.updateReqBucketRegion(request, cachedRegion);\n      done();\n    } else if (!s3util.dnsCompatibleBucketName(bucket)) {\n      service.updateReqBucketRegion(request, 'us-east-1');\n      if (bucketRegionCache[bucket] !== 'us-east-1') {\n        bucketRegionCache[bucket] = 'us-east-1';\n      }\n      done();\n    } else if (request.httpRequest.virtualHostedBucket) {\n      var getRegionReq = service.listObjects({Bucket: bucket, MaxKeys: 0});\n      service.updateReqBucketRegion(getRegionReq, 'us-east-1');\n      getRegionReq._requestRegionForBucket = bucket;\n\n      getRegionReq.send(function() {\n        var region = service.bucketRegionCache[bucket] || null;\n        if (region && region !== request.httpRequest.region) {\n          service.updateReqBucketRegion(request, region);\n        }\n        done();\n      });\n    } else {\n      // DNS-compatible path-style\n      // (s3ForcePathStyle or bucket name with dot over https)\n      // Cannot obtain region information for this case\n      done();\n    }\n   },\n\n  /**\n   * Cache for bucket region.\n   *\n   * @api private\n   */\n   bucketRegionCache: {},\n\n  /**\n   * Clears bucket region cache.\n   *\n   * @api private\n   */\n   clearBucketRegionCache: function(buckets) {\n    var bucketRegionCache = this.bucketRegionCache;\n    if (!buckets) {\n      buckets = Object.keys(bucketRegionCache);\n    } else if (typeof buckets === 'string') {\n      buckets = [buckets];\n    }\n    for (var i = 0; i < buckets.length; i++) {\n      delete bucketRegionCache[buckets[i]];\n    }\n    return bucketRegionCache;\n   },\n\n   /**\n    * Corrects request region if bucket's cached region is different\n    *\n    * @api private\n    */\n  correctBucketRegionFromCache: function correctBucketRegionFromCache(req) {\n    var bucket = req.params.Bucket || null;\n    if (bucket) {\n      var service = req.service;\n      var requestRegion = req.httpRequest.region;\n      var cachedRegion = service.bucketRegionCache[bucket];\n      if (cachedRegion && cachedRegion !== requestRegion) {\n        service.updateReqBucketRegion(req, cachedRegion);\n      }\n    }\n  },\n\n  /**\n   * Extracts S3 specific request ids from the http response.\n   *\n   * @api private\n   */\n  extractRequestIds: function extractRequestIds(resp) {\n    var extendedRequestId = resp.httpResponse.headers ? resp.httpResponse.headers['x-amz-id-2'] : null;\n    var cfId = resp.httpResponse.headers ? resp.httpResponse.headers['x-amz-cf-id'] : null;\n    resp.extendedRequestId = extendedRequestId;\n    resp.cfId = cfId;\n\n    if (resp.error) {\n      resp.error.requestId = resp.requestId || null;\n      resp.error.extendedRequestId = extendedRequestId;\n      resp.error.cfId = cfId;\n    }\n  },\n\n  /**\n   * Get a pre-signed URL for a given operation name.\n   *\n   * @note You must ensure that you have static or previously resolved\n   *   credentials if you call this method synchronously (with no callback),\n   *   otherwise it may not properly sign the request. If you cannot guarantee\n   *   this (you are using an asynchronous credential provider, i.e., EC2\n   *   IAM roles), you should always call this method with an asynchronous\n   *   callback.\n   * @note Not all operation parameters are supported when using pre-signed\n   *   URLs. Certain parameters, such as `SSECustomerKey`, `ACL`, `Expires`,\n   *   `ContentLength`, or `Tagging` must be provided as headers when sending a\n   *   request. If you are using pre-signed URLs to upload from a browser and\n   *   need to use these fields, see {createPresignedPost}.\n   * @note The default signer allows altering the request by adding corresponding\n   *   headers to set some parameters (e.g. Range) and these added parameters\n   *   won't be signed. You must use signatureVersion v4 to to include these\n   *   parameters in the signed portion of the URL and enforce exact matching\n   *   between headers and signed params in the URL.\n   * @note This operation cannot be used with a promise. See note above regarding\n   *   asynchronous credentials and use with a callback.\n   * @param operation [String] the name of the operation to call\n   * @param params [map] parameters to pass to the operation. See the given\n   *   operation for the expected operation parameters. In addition, you can\n   *   also pass the \"Expires\" parameter to inform S3 how long the URL should\n   *   work for.\n   * @option params Expires [Integer] (900) the number of seconds to expire\n   *   the pre-signed URL operation in. Defaults to 15 minutes.\n   * @param callback [Function] if a callback is provided, this function will\n   *   pass the URL as the second parameter (after the error parameter) to\n   *   the callback function.\n   * @return [String] if called synchronously (with no callback), returns the\n   *   signed URL.\n   * @return [null] nothing is returned if a callback is provided.\n   * @example Pre-signing a getObject operation (synchronously)\n   *   var params = {Bucket: 'bucket', Key: 'key'};\n   *   var url = s3.getSignedUrl('getObject', params);\n   *   console.log('The URL is', url);\n   * @example Pre-signing a putObject (asynchronously)\n   *   var params = {Bucket: 'bucket', Key: 'key'};\n   *   s3.getSignedUrl('putObject', params, function (err, url) {\n   *     console.log('The URL is', url);\n   *   });\n   * @example Pre-signing a putObject operation with a specific payload\n   *   var params = {Bucket: 'bucket', Key: 'key', Body: 'body'};\n   *   var url = s3.getSignedUrl('putObject', params);\n   *   console.log('The URL is', url);\n   * @example Passing in a 1-minute expiry time for a pre-signed URL\n   *   var params = {Bucket: 'bucket', Key: 'key', Expires: 60};\n   *   var url = s3.getSignedUrl('getObject', params);\n   *   console.log('The URL is', url); // expires in 60 seconds\n   */\n  getSignedUrl: function getSignedUrl(operation, params, callback) {\n    params = AWS.util.copy(params || {});\n    var expires = params.Expires || 900;\n\n    if (typeof expires !== 'number') {\n      throw AWS.util.error(new Error(),\n        { code: 'InvalidParameterException', message: 'The expiration must be a number, received ' + typeof expires });\n    }\n\n    delete params.Expires; // we can't validate this\n    var request = this.makeRequest(operation, params);\n\n    if (callback) {\n      AWS.util.defer(function() {\n        request.presign(expires, callback);\n      });\n    } else {\n      return request.presign(expires, callback);\n    }\n  },\n\n  /**\n   * @!method  getSignedUrlPromise()\n   *   Returns a 'thenable' promise that will be resolved with a pre-signed URL\n   *   for a given operation name.\n   *\n   *   Two callbacks can be provided to the `then` method on the returned promise.\n   *   The first callback will be called if the promise is fulfilled, and the second\n   *   callback will be called if the promise is rejected.\n   *   @note Not all operation parameters are supported when using pre-signed\n   *      URLs. Certain parameters, such as `SSECustomerKey`, `ACL`, `Expires`,\n   *      `ContentLength`, or `Tagging` must be provided as headers when sending a\n   *      request. If you are using pre-signed URLs to upload from a browser and\n   *      need to use these fields, see {createPresignedPost}.\n   *   @param operation [String] the name of the operation to call\n   *   @param params [map] parameters to pass to the operation. See the given\n   *      operation for the expected operation parameters. In addition, you can\n   *      also pass the \"Expires\" parameter to inform S3 how long the URL should\n   *      work for.\n   *   @option params Expires [Integer] (900) the number of seconds to expire\n   *      the pre-signed URL operation in. Defaults to 15 minutes.\n   *   @callback fulfilledCallback function(url)\n   *     Called if the promise is fulfilled.\n   *     @param url [String] the signed url\n   *   @callback rejectedCallback function(err)\n   *     Called if the promise is rejected.\n   *     @param err [Error] if an error occurred, this value will be filled\n   *   @return [Promise] A promise that represents the state of the `refresh` call.\n   *   @example Pre-signing a getObject operation\n   *      var params = {Bucket: 'bucket', Key: 'key'};\n   *      var promise = s3.getSignedUrlPromise('getObject', params);\n   *      promise.then(function(url) {\n   *        console.log('The URL is', url);\n   *      }, function(err) { ... });\n   *   @example Pre-signing a putObject operation with a specific payload\n   *      var params = {Bucket: 'bucket', Key: 'key', Body: 'body'};\n   *      var promise = s3.getSignedUrlPromise('putObject', params);\n   *      promise.then(function(url) {\n   *        console.log('The URL is', url);\n   *      }, function(err) { ... });\n   *   @example Passing in a 1-minute expiry time for a pre-signed URL\n   *      var params = {Bucket: 'bucket', Key: 'key', Expires: 60};\n   *      var promise = s3.getSignedUrlPromise('getObject', params);\n   *      promise.then(function(url) {\n   *        console.log('The URL is', url);\n   *      }, function(err) { ... });\n   */\n\n  /**\n   * Get a pre-signed POST policy to support uploading to S3 directly from an\n   * HTML form.\n   *\n   * @param params [map]\n   * @option params Bucket [String]     The bucket to which the post should be\n   *                                    uploaded\n   * @option params Expires [Integer]   (3600) The number of seconds for which\n   *                                    the presigned policy should be valid.\n   * @option params Conditions [Array]  An array of conditions that must be met\n   *                                    for the presigned policy to allow the\n   *                                    upload. This can include required tags,\n   *                                    the accepted range for content lengths,\n   *                                    etc.\n   * @see http://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-HTTPPOSTConstructPolicy.html\n   * @option params Fields [map]        Fields to include in the form. All\n   *                                    values passed in as fields will be\n   *                                    signed as exact match conditions.\n   * @param callback [Function]\n   *\n   * @note All fields passed in when creating presigned post data will be signed\n   *   as exact match conditions. Any fields that will be interpolated by S3\n   *   must be added to the fields hash after signing, and an appropriate\n   *   condition for such fields must be explicitly added to the Conditions\n   *   array passed to this function before signing.\n   *\n   * @example Presiging post data with a known key\n   *   var params = {\n   *     Bucket: 'bucket',\n   *     Fields: {\n   *       key: 'key'\n   *     }\n   *   };\n   *   s3.createPresignedPost(params, function(err, data) {\n   *     if (err) {\n   *       console.error('Presigning post data encountered an error', err);\n   *     } else {\n   *       console.log('The post data is', data);\n   *     }\n   *   });\n   *\n   * @example Presigning post data with an interpolated key\n   *   var params = {\n   *     Bucket: 'bucket',\n   *     Conditions: [\n   *       ['starts-with', '$key', 'path/to/uploads/']\n   *     ]\n   *   };\n   *   s3.createPresignedPost(params, function(err, data) {\n   *     if (err) {\n   *       console.error('Presigning post data encountered an error', err);\n   *     } else {\n   *       data.Fields.key = 'path/to/uploads/${filename}';\n   *       console.log('The post data is', data);\n   *     }\n   *   });\n   *\n   * @note You must ensure that you have static or previously resolved\n   *   credentials if you call this method synchronously (with no callback),\n   *   otherwise it may not properly sign the request. If you cannot guarantee\n   *   this (you are using an asynchronous credential provider, i.e., EC2\n   *   IAM roles), you should always call this method with an asynchronous\n   *   callback.\n   *\n   * @return [map]  If called synchronously (with no callback), returns a hash\n   *                with the url to set as the form action and a hash of fields\n   *                to include in the form.\n   * @return [null] Nothing is returned if a callback is provided.\n   *\n   * @callback callback function (err, data)\n   *  @param err [Error] the error object returned from the policy signer\n   *  @param data [map] The data necessary to construct an HTML form\n   *  @param data.url [String] The URL to use as the action of the form\n   *  @param data.fields [map] A hash of fields that must be included in the\n   *                           form for the upload to succeed. This hash will\n   *                           include the signed POST policy, your access key\n   *                           ID and security token (if present), etc. These\n   *                           may be safely included as input elements of type\n   *                           'hidden.'\n   */\n  createPresignedPost: function createPresignedPost(params, callback) {\n    if (typeof params === 'function' && callback === undefined) {\n      callback = params;\n      params = null;\n    }\n\n    params = AWS.util.copy(params || {});\n    var boundParams = this.config.params || {};\n    var bucket = params.Bucket || boundParams.Bucket,\n      self = this,\n      config = this.config,\n      endpoint = AWS.util.copy(this.endpoint);\n    if (!config.s3BucketEndpoint) {\n      endpoint.pathname = '/' + bucket;\n    }\n\n    function finalizePost() {\n      return {\n        url: AWS.util.urlFormat(endpoint),\n        fields: self.preparePostFields(\n          config.credentials,\n          config.region,\n          bucket,\n          params.Fields,\n          params.Conditions,\n          params.Expires\n        )\n      };\n    }\n\n    if (callback) {\n      config.getCredentials(function (err) {\n        if (err) {\n          callback(err);\n        } else {\n          try {\n            callback(null, finalizePost());\n          } catch (err) {\n            callback(err);\n          }\n        }\n      });\n    } else {\n      return finalizePost();\n    }\n  },\n\n  /**\n   * @api private\n   */\n  preparePostFields: function preparePostFields(\n    credentials,\n    region,\n    bucket,\n    fields,\n    conditions,\n    expiresInSeconds\n  ) {\n    var now = this.getSkewCorrectedDate();\n    if (!credentials || !region || !bucket) {\n      throw new Error('Unable to create a POST object policy without a bucket,'\n        + ' region, and credentials');\n    }\n    fields = AWS.util.copy(fields || {});\n    conditions = (conditions || []).slice(0);\n    expiresInSeconds = expiresInSeconds || 3600;\n\n    var signingDate = AWS.util.date.iso8601(now).replace(/[:\\-]|\\.\\d{3}/g, '');\n    var shortDate = signingDate.substr(0, 8);\n    var scope = v4Credentials.createScope(shortDate, region, 's3');\n    var credential = credentials.accessKeyId + '/' + scope;\n\n    fields['bucket'] = bucket;\n    fields['X-Amz-Algorithm'] = 'AWS4-HMAC-SHA256';\n    fields['X-Amz-Credential'] = credential;\n    fields['X-Amz-Date'] = signingDate;\n    if (credentials.sessionToken) {\n      fields['X-Amz-Security-Token'] = credentials.sessionToken;\n    }\n    for (var field in fields) {\n      if (fields.hasOwnProperty(field)) {\n        var condition = {};\n        condition[field] = fields[field];\n        conditions.push(condition);\n      }\n    }\n\n    fields.Policy = this.preparePostPolicy(\n      new Date(now.valueOf() + expiresInSeconds * 1000),\n      conditions\n    );\n    fields['X-Amz-Signature'] = AWS.util.crypto.hmac(\n      v4Credentials.getSigningKey(credentials, shortDate, region, 's3', true),\n      fields.Policy,\n      'hex'\n    );\n\n    return fields;\n  },\n\n  /**\n   * @api private\n   */\n  preparePostPolicy: function preparePostPolicy(expiration, conditions) {\n    return AWS.util.base64.encode(JSON.stringify({\n      expiration: AWS.util.date.iso8601(expiration),\n      conditions: conditions\n    }));\n  },\n\n  /**\n   * @api private\n   */\n  prepareSignedUrl: function prepareSignedUrl(request) {\n    request.addListener('validate', request.service.noPresignedContentLength);\n    request.removeListener('build', request.service.addContentType);\n    if (!request.params.Body) {\n      // no Content-MD5/SHA-256 if body is not provided\n      request.removeListener('build', request.service.computeContentMd5);\n    } else {\n      request.addListener('afterBuild', AWS.EventListeners.Core.COMPUTE_SHA256);\n    }\n  },\n\n  /**\n   * @api private\n   * @param request\n   */\n  disableBodySigning: function disableBodySigning(request) {\n    var headers = request.httpRequest.headers;\n    // Add the header to anything that isn't a presigned url, unless that presigned url had a body defined\n    if (!Object.prototype.hasOwnProperty.call(headers, 'presigned-expires')) {\n      headers['X-Amz-Content-Sha256'] = 'UNSIGNED-PAYLOAD';\n    }\n  },\n\n  /**\n   * @api private\n   */\n  noPresignedContentLength: function noPresignedContentLength(request) {\n    if (request.params.ContentLength !== undefined) {\n      throw AWS.util.error(new Error(), {code: 'UnexpectedParameter',\n        message: 'ContentLength is not supported in pre-signed URLs.'});\n    }\n  },\n\n  createBucket: function createBucket(params, callback) {\n    // When creating a bucket *outside* the classic region, the location\n    // constraint must be set for the bucket and it must match the endpoint.\n    // This chunk of code will set the location constraint param based\n    // on the region (when possible), but it will not override a passed-in\n    // location constraint.\n    if (typeof params === 'function' || !params) {\n      callback = callback || params;\n      params = {};\n    }\n    var hostname = this.endpoint.hostname;\n    // copy params so that appending keys does not unintentioinallly\n    // mutate params object argument passed in by user\n    var copiedParams = AWS.util.copy(params);\n\n    if (hostname !== this.api.globalEndpoint && !params.CreateBucketConfiguration) {\n      copiedParams.CreateBucketConfiguration = { LocationConstraint: this.config.region };\n    }\n    return this.makeRequest('createBucket', copiedParams, callback);\n  },\n\n  /**\n   * @see AWS.S3.ManagedUpload\n   * @overload upload(params = {}, [options], [callback])\n   *   Uploads an arbitrarily sized buffer, blob, or stream, using intelligent\n   *   concurrent handling of parts if the payload is large enough. You can\n   *   configure the concurrent queue size by setting `options`. Note that this\n   *   is the only operation for which the SDK can retry requests with stream\n   *   bodies.\n   *\n   *   @param (see AWS.S3.putObject)\n   *   @option (see AWS.S3.ManagedUpload.constructor)\n   *   @return [AWS.S3.ManagedUpload] the managed upload object that can call\n   *     `send()` or track progress.\n   *   @example Uploading a stream object\n   *     var params = {Bucket: 'bucket', Key: 'key', Body: stream};\n   *     s3.upload(params, function(err, data) {\n   *       console.log(err, data);\n   *     });\n   *   @example Uploading a stream with concurrency of 1 and partSize of 10mb\n   *     var params = {Bucket: 'bucket', Key: 'key', Body: stream};\n   *     var options = {partSize: 10 * 1024 * 1024, queueSize: 1};\n   *     s3.upload(params, options, function(err, data) {\n   *       console.log(err, data);\n   *     });\n   * @callback callback function(err, data)\n   *   @param err [Error] an error or null if no error occurred.\n   *   @param data [map] The response data from the successful upload:\n   *   @param data.Location [String] the URL of the uploaded object\n   *   @param data.ETag [String] the ETag of the uploaded object\n   *   @param data.Bucket [String]  the bucket to which the object was uploaded\n   *   @param data.Key [String] the key to which the object was uploaded\n   */\n  upload: function upload(params, options, callback) {\n    if (typeof options === 'function' && callback === undefined) {\n      callback = options;\n      options = null;\n    }\n\n    options = options || {};\n    options = AWS.util.merge(options || {}, {service: this, params: params});\n\n    var uploader = new AWS.S3.ManagedUpload(options);\n    if (typeof callback === 'function') uploader.send(callback);\n    return uploader;\n  }\n});\n\n/**\n * @api private\n */\nAWS.S3.addPromisesToClass = function addPromisesToClass(PromiseDependency) {\n  this.prototype.getSignedUrlPromise = AWS.util.promisifyMethod('getSignedUrl', PromiseDependency);\n};\n\n/**\n * @api private\n */\nAWS.S3.deletePromisesFromClass = function deletePromisesFromClass() {\n  delete this.prototype.getSignedUrlPromise;\n};\n\nAWS.util.addPromises(AWS.S3);\n","var AWS = require('../core');\nvar regionUtil = require('../region_config');\n\nvar s3util = {\n  /**\n   * @api private\n   */\n  isArnInParam: function isArnInParam(req, paramName) {\n    var inputShape = (req.service.api.operations[req.operation] || {}).input || {};\n    var inputMembers = inputShape.members || {};\n    if (!req.params[paramName] || !inputMembers[paramName]) return false;\n    return AWS.util.ARN.validate(req.params[paramName]);\n  },\n\n  /**\n   * Validate service component from ARN supplied in Bucket parameter\n   */\n  validateArnService: function validateArnService(req) {\n    var parsedArn = req.service._parsedArn;\n\n    if (parsedArn.service !== 's3' && parsedArn.service !== 's3-outposts') {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'expect \\'s3\\' or \\'s3-outposts\\' in ARN service component'\n      });\n    }\n  },\n\n  /**\n   * Validate account ID from ARN supplied in Bucket parameter is a valid account\n   */\n  validateArnAccount: function validateArnAccount(req) {\n    var parsedArn = req.service._parsedArn;\n\n    if (!/[0-9]{12}/.exec(parsedArn.accountId)) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'ARN accountID does not match regex \"[0-9]{12}\"'\n      });\n    }\n  },\n\n  /**\n   * Validate ARN supplied in Bucket parameter is a valid access point ARN\n   */\n  validateS3AccessPointArn: function validateS3AccessPointArn(req) {\n    var parsedArn = req.service._parsedArn;\n\n    //can be ':' or '/'\n    var delimiter = parsedArn.resource['accesspoint'.length];\n\n    if (parsedArn.resource.split(delimiter).length !== 2) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'Access Point ARN should have one resource accesspoint/{accesspointName}'\n      });\n    }\n\n    var accessPoint = parsedArn.resource.split(delimiter)[1];\n    var accessPointPrefix = accessPoint + '-' + parsedArn.accountId;\n    if (!s3util.dnsCompatibleBucketName(accessPointPrefix) || accessPointPrefix.match(/\\./)) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'Access point resource in ARN is not DNS compatible. Got ' + accessPoint\n      });\n    }\n\n    //set parsed valid access point\n    req.service._parsedArn.accessPoint = accessPoint;\n  },\n\n  /**\n   * Validate Outposts ARN supplied in Bucket parameter is a valid outposts ARN\n   */\n  validateOutpostsArn: function validateOutpostsArn(req) {\n    var parsedArn = req.service._parsedArn;\n\n    if (\n      parsedArn.resource.indexOf('outpost:') !== 0 &&\n      parsedArn.resource.indexOf('outpost/') !== 0\n    ) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'ARN resource should begin with \\'outpost/\\''\n      });\n    }\n\n    //can be ':' or '/'\n    var delimiter = parsedArn.resource['outpost'.length];\n    var outpostId = parsedArn.resource.split(delimiter)[1];\n    var dnsHostRegex = new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/);\n    if (!dnsHostRegex.test(outpostId)) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'Outpost resource in ARN is not DNS compatible. Got ' + outpostId\n      });\n    }\n    req.service._parsedArn.outpostId = outpostId;\n  },\n\n  /**\n   * Validate Outposts ARN supplied in Bucket parameter is a valid outposts ARN\n   */\n  validateOutpostsAccessPointArn: function validateOutpostsAccessPointArn(req) {\n    var parsedArn = req.service._parsedArn;\n\n    //can be ':' or '/'\n    var delimiter = parsedArn.resource['outpost'.length];\n\n    if (parsedArn.resource.split(delimiter).length !== 4) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'Outposts ARN should have two resources outpost/{outpostId}/accesspoint/{accesspointName}'\n      });\n    }\n\n    var accessPoint = parsedArn.resource.split(delimiter)[3];\n    var accessPointPrefix = accessPoint + '-' + parsedArn.accountId;\n    if (!s3util.dnsCompatibleBucketName(accessPointPrefix) || accessPointPrefix.match(/\\./)) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'Access point resource in ARN is not DNS compatible. Got ' + accessPoint\n      });\n    }\n\n    //set parsed valid access point\n    req.service._parsedArn.accessPoint = accessPoint;\n  },\n\n  /**\n   * Validate region field in ARN supplied in Bucket parameter is a valid region\n   */\n  validateArnRegion: function validateArnRegion(req) {\n    var useArnRegion = s3util.loadUseArnRegionConfig(req);\n    var regionFromArn = req.service._parsedArn.region;\n    var clientRegion = req.service.config.region;\n\n    if (!regionFromArn) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidARN',\n        message: 'ARN region is empty'\n      });\n    }\n\n    if (\n      clientRegion.indexOf('fips') >= 0 ||\n      regionFromArn.indexOf('fips') >= 0\n    ) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'ARN endpoint is not compatible with FIPS region'\n      });\n    }\n\n    if (!useArnRegion && regionFromArn !== clientRegion) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'Configured region conflicts with access point region'\n      });\n    } else if (\n      useArnRegion &&\n      regionUtil.getEndpointSuffix(regionFromArn) !== regionUtil.getEndpointSuffix(clientRegion)\n    ) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'Configured region and access point region not in same partition'\n      });\n    }\n\n    if (req.service.config.useAccelerateEndpoint) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'useAccelerateEndpoint config is not supported with access point ARN'\n      });\n    }\n\n    if (req.service._parsedArn.service === 's3-outposts' && req.service.config.useDualstack) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'useDualstack config is not supported with outposts access point ARN'\n      });\n    }\n  },\n\n  loadUseArnRegionConfig: function loadUseArnRegionConfig(req) {\n    var envName = 'AWS_S3_USE_ARN_REGION';\n    var configName = 's3_use_arn_region';\n    var useArnRegion = true;\n    var originalConfig = req.service._originalConfig || {};\n    if (req.service.config.s3UseArnRegion !== undefined) {\n      return req.service.config.s3UseArnRegion;\n    } else if (originalConfig.s3UseArnRegion !== undefined) {\n      useArnRegion = originalConfig.s3UseArnRegion === true;\n    } else if (AWS.util.isNode()) {\n      //load from environmental variable AWS_USE_ARN_REGION\n      if (process.env[envName]) {\n        var value = process.env[envName].trim().toLowerCase();\n        if (['false', 'true'].indexOf(value) < 0) {\n          throw AWS.util.error(new Error(), {\n            code: 'InvalidConfiguration',\n            message: envName + ' only accepts true or false. Got ' + process.env[envName],\n            retryable: false\n          });\n        }\n        useArnRegion = value === 'true';\n      } else {  //load from shared config property use_arn_region\n        var profiles = {};\n        var profile = {};\n        try {\n          profiles = AWS.util.getProfilesFromSharedConfig(AWS.util.iniLoader);\n          profile = profiles[process.env.AWS_PROFILE || AWS.util.defaultProfile];\n        } catch (e) {}\n        if (profile[configName]) {\n          if (['false', 'true'].indexOf(profile[configName].trim().toLowerCase()) < 0) {\n            throw AWS.util.error(new Error(), {\n              code: 'InvalidConfiguration',\n              message: configName + ' only accepts true or false. Got ' + profile[configName],\n              retryable: false\n            });\n          }\n          useArnRegion = profile[configName].trim().toLowerCase() === 'true';\n        }\n      }\n    }\n    req.service.config.s3UseArnRegion = useArnRegion;\n    return useArnRegion;\n  },\n\n  /**\n   * Validations before URI can be populated\n   */\n  validatePopulateUriFromArn: function validatePopulateUriFromArn(req) {\n    if (req.service._originalConfig && req.service._originalConfig.endpoint) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'Custom endpoint is not compatible with access point ARN'\n      });\n    }\n\n    if (req.service.config.s3ForcePathStyle) {\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidConfiguration',\n        message: 'Cannot construct path-style endpoint with access point'\n      });\n    }\n  },\n\n  /**\n   * Returns true if the bucket name is DNS compatible.  Buckets created\n   * outside of the classic region MUST be DNS compatible.\n   *\n   * @api private\n   */\n  dnsCompatibleBucketName: function dnsCompatibleBucketName(bucketName) {\n    var b = bucketName;\n    var domain = new RegExp(/^[a-z0-9][a-z0-9\\.\\-]{1,61}[a-z0-9]$/);\n    var ipAddress = new RegExp(/(\\d+\\.){3}\\d+/);\n    var dots = new RegExp(/\\.\\./);\n    return (b.match(domain) && !b.match(ipAddress) && !b.match(dots)) ? true : false;\n  },\n};\n\n/**\n * @api private\n */\nmodule.exports = s3util;\n","var AWS = require('../core');\nvar resolveRegionalEndpointsFlag = require('../config_regional_endpoint');\nvar ENV_REGIONAL_ENDPOINT_ENABLED = 'AWS_STS_REGIONAL_ENDPOINTS';\nvar CONFIG_REGIONAL_ENDPOINT_ENABLED = 'sts_regional_endpoints';\n\nAWS.util.update(AWS.STS.prototype, {\n  /**\n   * @overload credentialsFrom(data, credentials = null)\n   *   Creates a credentials object from STS response data containing\n   *   credentials information. Useful for quickly setting AWS credentials.\n   *\n   *   @note This is a low-level utility function. If you want to load temporary\n   *     credentials into your process for subsequent requests to AWS resources,\n   *     you should use {AWS.TemporaryCredentials} instead.\n   *   @param data [map] data retrieved from a call to {getFederatedToken},\n   *     {getSessionToken}, {assumeRole}, or {assumeRoleWithWebIdentity}.\n   *   @param credentials [AWS.Credentials] an optional credentials object to\n   *     fill instead of creating a new object. Useful when modifying an\n   *     existing credentials object from a refresh call.\n   *   @return [AWS.TemporaryCredentials] the set of temporary credentials\n   *     loaded from a raw STS operation response.\n   *   @example Using credentialsFrom to load global AWS credentials\n   *     var sts = new AWS.STS();\n   *     sts.getSessionToken(function (err, data) {\n   *       if (err) console.log(\"Error getting credentials\");\n   *       else {\n   *         AWS.config.credentials = sts.credentialsFrom(data);\n   *       }\n   *     });\n   *   @see AWS.TemporaryCredentials\n   */\n  credentialsFrom: function credentialsFrom(data, credentials) {\n    if (!data) return null;\n    if (!credentials) credentials = new AWS.TemporaryCredentials();\n    credentials.expired = false;\n    credentials.accessKeyId = data.Credentials.AccessKeyId;\n    credentials.secretAccessKey = data.Credentials.SecretAccessKey;\n    credentials.sessionToken = data.Credentials.SessionToken;\n    credentials.expireTime = data.Credentials.Expiration;\n    return credentials;\n  },\n\n  assumeRoleWithWebIdentity: function assumeRoleWithWebIdentity(params, callback) {\n    return this.makeUnauthenticatedRequest('assumeRoleWithWebIdentity', params, callback);\n  },\n\n  assumeRoleWithSAML: function assumeRoleWithSAML(params, callback) {\n    return this.makeUnauthenticatedRequest('assumeRoleWithSAML', params, callback);\n  },\n\n  /**\n   * @api private\n   */\n  setupRequestListeners: function setupRequestListeners(request) {\n    request.addListener('validate', this.optInRegionalEndpoint, true);\n  },\n\n  /**\n   * @api private\n   */\n  optInRegionalEndpoint: function optInRegionalEndpoint(req) {\n    var service = req.service;\n    var config = service.config;\n    config.stsRegionalEndpoints = resolveRegionalEndpointsFlag(service._originalConfig, {\n      env: ENV_REGIONAL_ENDPOINT_ENABLED,\n      sharedConfig: CONFIG_REGIONAL_ENDPOINT_ENABLED,\n      clientConfig: 'stsRegionalEndpoints'\n    });\n    if (\n      config.stsRegionalEndpoints === 'regional' &&\n      service.isGlobalEndpoint\n    ) {\n      //client will throw if region is not supplied; request will be signed with specified region\n      if (!config.region) {\n        throw AWS.util.error(new Error(),\n          {code: 'ConfigError', message: 'Missing region in config'});\n      }\n      var insertPoint = config.endpoint.indexOf('.amazonaws.com');\n      var regionalEndpoint = config.endpoint.substring(0, insertPoint) +\n        '.' + config.region + config.endpoint.substring(insertPoint);\n      req.httpRequest.updateEndpoint(regionalEndpoint);\n      req.httpRequest.region = config.region;\n    }\n  }\n\n});\n","var IniLoader = require('./ini-loader').IniLoader;\n/**\n * Singleton object to load specified config/credentials files.\n * It will cache all the files ever loaded;\n */\nmodule.exports.iniLoader = new IniLoader();\n","var AWS = require('../core');\nvar os = require('os');\nvar path = require('path');\n\nfunction parseFile(filename, isConfig) {\n    var content = AWS.util.ini.parse(AWS.util.readFileSync(filename));\n    var tmpContent = {};\n    Object.keys(content).forEach(function(profileName) {\n      var profileContent = content[profileName];\n      profileName = isConfig ? profileName.replace(/^profile\\s/, '') : profileName;\n      Object.defineProperty(tmpContent, profileName, {\n        value: profileContent,\n        enumerable: true\n      });\n    });\n    return tmpContent;\n}\n\n/**\n * Ini file loader class the same as that used in the SDK. It loads and\n * parses config and credentials files in .ini format and cache the content\n * to assure files are only read once.\n * Note that calling operations on the instance instantiated from this class\n * won't affect the behavior of SDK since SDK uses an internal singleton of\n * this class.\n * @!macro nobrowser\n */\nAWS.IniLoader = AWS.util.inherit({\n  constructor: function IniLoader() {\n    this.resolvedProfiles = {};\n  },\n\n  /** Remove all cached files. Used after config files are updated. */\n  clearCachedFiles: function clearCachedFiles() {\n    this.resolvedProfiles = {};\n  },\n\n/**\n * Load configurations from config/credentials files and cache them\n * for later use. If no file is specified it will try to load default\n * files.\n * @param options [map] information describing the file\n * @option options filename [String] ('~/.aws/credentials' or defined by\n *   AWS_SHARED_CREDENTIALS_FILE process env var or '~/.aws/config' if\n *   isConfig is set to true)\n *   path to the file to be read.\n * @option options isConfig [Boolean] (false) True to read config file.\n * @return [map<String,String>] object containing contents from file in key-value\n *   pairs.\n */\n  loadFrom: function loadFrom(options) {\n    options = options || {};\n    var isConfig = options.isConfig === true;\n    var filename = options.filename || this.getDefaultFilePath(isConfig);\n    if (!this.resolvedProfiles[filename]) {\n      var fileContent = this.parseFile(filename, isConfig);\n      Object.defineProperty(this.resolvedProfiles, filename, { value: fileContent });\n    }\n    return this.resolvedProfiles[filename];\n  },\n\n  /**\n   * @api private\n   */\n  parseFile: parseFile,\n\n  /**\n   * @api private\n   */\n  getDefaultFilePath: function getDefaultFilePath(isConfig) {\n    return path.join(\n      this.getHomeDir(),\n      '.aws',\n      isConfig ? 'config' : 'credentials'\n    );\n  },\n\n  /**\n   * @api private\n   */\n  getHomeDir: function getHomeDir() {\n    var env = process.env;\n    var home = env.HOME ||\n      env.USERPROFILE ||\n      (env.HOMEPATH ? ((env.HOMEDRIVE || 'C:/') + env.HOMEPATH) : null);\n\n    if (home) {\n      return home;\n    }\n\n    if (typeof os.homedir === 'function') {\n      return os.homedir();\n    }\n\n    throw AWS.util.error(\n      new Error('Cannot load credentials, HOME path not set')\n    );\n  }\n});\n\nvar IniLoader = AWS.IniLoader;\n\nmodule.exports = {\n  IniLoader: IniLoader,\n  parseFile: parseFile,\n};\n","var AWS = require('../core');\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nvar expiresHeader = 'presigned-expires';\n\n/**\n * @api private\n */\nfunction signedUrlBuilder(request) {\n  var expires = request.httpRequest.headers[expiresHeader];\n  var signerClass = request.service.getSignerClass(request);\n\n  delete request.httpRequest.headers['User-Agent'];\n  delete request.httpRequest.headers['X-Amz-User-Agent'];\n\n  if (signerClass === AWS.Signers.V4) {\n    if (expires > 604800) { // one week expiry is invalid\n      var message = 'Presigning does not support expiry time greater ' +\n                    'than a week with SigV4 signing.';\n      throw AWS.util.error(new Error(), {\n        code: 'InvalidExpiryTime', message: message, retryable: false\n      });\n    }\n    request.httpRequest.headers[expiresHeader] = expires;\n  } else if (signerClass === AWS.Signers.S3) {\n    var now = request.service ? request.service.getSkewCorrectedDate() : AWS.util.date.getDate();\n    request.httpRequest.headers[expiresHeader] = parseInt(\n      AWS.util.date.unixTimestamp(now) + expires, 10).toString();\n  } else {\n    throw AWS.util.error(new Error(), {\n      message: 'Presigning only supports S3 or SigV4 signing.',\n      code: 'UnsupportedSigner', retryable: false\n    });\n  }\n}\n\n/**\n * @api private\n */\nfunction signedUrlSigner(request) {\n  var endpoint = request.httpRequest.endpoint;\n  var parsedUrl = AWS.util.urlParse(request.httpRequest.path);\n  var queryParams = {};\n\n  if (parsedUrl.search) {\n    queryParams = AWS.util.queryStringParse(parsedUrl.search.substr(1));\n  }\n\n  var auth = request.httpRequest.headers['Authorization'].split(' ');\n  if (auth[0] === 'AWS') {\n    auth = auth[1].split(':');\n    queryParams['Signature'] = auth.pop();\n    queryParams['AWSAccessKeyId'] = auth.join(':');\n\n    AWS.util.each(request.httpRequest.headers, function (key, value) {\n      if (key === expiresHeader) key = 'Expires';\n      if (key.indexOf('x-amz-meta-') === 0) {\n        // Delete existing, potentially not normalized key\n        delete queryParams[key];\n        key = key.toLowerCase();\n      }\n      queryParams[key] = value;\n    });\n    delete request.httpRequest.headers[expiresHeader];\n    delete queryParams['Authorization'];\n    delete queryParams['Host'];\n  } else if (auth[0] === 'AWS4-HMAC-SHA256') { // SigV4 signing\n    auth.shift();\n    var rest = auth.join(' ');\n    var signature = rest.match(/Signature=(.*?)(?:,|\\s|\\r?\\n|$)/)[1];\n    queryParams['X-Amz-Signature'] = signature;\n    delete queryParams['Expires'];\n  }\n\n  // build URL\n  endpoint.pathname = parsedUrl.pathname;\n  endpoint.search = AWS.util.queryParamsToString(queryParams);\n}\n\n/**\n * @api private\n */\nAWS.Signers.Presign = inherit({\n  /**\n   * @api private\n   */\n  sign: function sign(request, expireTime, callback) {\n    request.httpRequest.headers[expiresHeader] = expireTime || 3600;\n    request.on('build', signedUrlBuilder);\n    request.on('sign', signedUrlSigner);\n    request.removeListener('afterBuild',\n      AWS.EventListeners.Core.SET_CONTENT_LENGTH);\n    request.removeListener('afterBuild',\n      AWS.EventListeners.Core.COMPUTE_SHA256);\n\n    request.emit('beforePresign', [request]);\n\n    if (callback) {\n      request.build(function() {\n        if (this.response.error) callback(this.response.error);\n        else {\n          callback(null, AWS.util.urlFormat(request.httpRequest.endpoint));\n        }\n      });\n    } else {\n      request.build();\n      if (request.response.error) throw request.response.error;\n      return AWS.util.urlFormat(request.httpRequest.endpoint);\n    }\n  }\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.Presign;\n","var AWS = require('../core');\n\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nAWS.Signers.RequestSigner = inherit({\n  constructor: function RequestSigner(request) {\n    this.request = request;\n  },\n\n  setServiceClientId: function setServiceClientId(id) {\n    this.serviceClientId = id;\n  },\n\n  getServiceClientId: function getServiceClientId() {\n    return this.serviceClientId;\n  }\n});\n\nAWS.Signers.RequestSigner.getVersion = function getVersion(version) {\n  switch (version) {\n    case 'v2': return AWS.Signers.V2;\n    case 'v3': return AWS.Signers.V3;\n    case 's3v4': return AWS.Signers.V4;\n    case 'v4': return AWS.Signers.V4;\n    case 's3': return AWS.Signers.S3;\n    case 'v3https': return AWS.Signers.V3Https;\n  }\n  throw new Error('Unknown signing version ' + version);\n};\n\nrequire('./v2');\nrequire('./v3');\nrequire('./v3https');\nrequire('./v4');\nrequire('./s3');\nrequire('./presign');\n","var AWS = require('../core');\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nAWS.Signers.S3 = inherit(AWS.Signers.RequestSigner, {\n  /**\n   * When building the stringToSign, these sub resource params should be\n   * part of the canonical resource string with their NON-decoded values\n   */\n  subResources: {\n    'acl': 1,\n    'accelerate': 1,\n    'analytics': 1,\n    'cors': 1,\n    'lifecycle': 1,\n    'delete': 1,\n    'inventory': 1,\n    'location': 1,\n    'logging': 1,\n    'metrics': 1,\n    'notification': 1,\n    'partNumber': 1,\n    'policy': 1,\n    'requestPayment': 1,\n    'replication': 1,\n    'restore': 1,\n    'tagging': 1,\n    'torrent': 1,\n    'uploadId': 1,\n    'uploads': 1,\n    'versionId': 1,\n    'versioning': 1,\n    'versions': 1,\n    'website': 1\n  },\n\n  // when building the stringToSign, these querystring params should be\n  // part of the canonical resource string with their NON-encoded values\n  responseHeaders: {\n    'response-content-type': 1,\n    'response-content-language': 1,\n    'response-expires': 1,\n    'response-cache-control': 1,\n    'response-content-disposition': 1,\n    'response-content-encoding': 1\n  },\n\n  addAuthorization: function addAuthorization(credentials, date) {\n    if (!this.request.headers['presigned-expires']) {\n      this.request.headers['X-Amz-Date'] = AWS.util.date.rfc822(date);\n    }\n\n    if (credentials.sessionToken) {\n      // presigned URLs require this header to be lowercased\n      this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n    }\n\n    var signature = this.sign(credentials.secretAccessKey, this.stringToSign());\n    var auth = 'AWS ' + credentials.accessKeyId + ':' + signature;\n\n    this.request.headers['Authorization'] = auth;\n  },\n\n  stringToSign: function stringToSign() {\n    var r = this.request;\n\n    var parts = [];\n    parts.push(r.method);\n    parts.push(r.headers['Content-MD5'] || '');\n    parts.push(r.headers['Content-Type'] || '');\n\n    // This is the \"Date\" header, but we use X-Amz-Date.\n    // The S3 signing mechanism requires us to pass an empty\n    // string for this Date header regardless.\n    parts.push(r.headers['presigned-expires'] || '');\n\n    var headers = this.canonicalizedAmzHeaders();\n    if (headers) parts.push(headers);\n    parts.push(this.canonicalizedResource());\n\n    return parts.join('\\n');\n\n  },\n\n  canonicalizedAmzHeaders: function canonicalizedAmzHeaders() {\n\n    var amzHeaders = [];\n\n    AWS.util.each(this.request.headers, function (name) {\n      if (name.match(/^x-amz-/i))\n        amzHeaders.push(name);\n    });\n\n    amzHeaders.sort(function (a, b) {\n      return a.toLowerCase() < b.toLowerCase() ? -1 : 1;\n    });\n\n    var parts = [];\n    AWS.util.arrayEach.call(this, amzHeaders, function (name) {\n      parts.push(name.toLowerCase() + ':' + String(this.request.headers[name]));\n    });\n\n    return parts.join('\\n');\n\n  },\n\n  canonicalizedResource: function canonicalizedResource() {\n\n    var r = this.request;\n\n    var parts = r.path.split('?');\n    var path = parts[0];\n    var querystring = parts[1];\n\n    var resource = '';\n\n    if (r.virtualHostedBucket)\n      resource += '/' + r.virtualHostedBucket;\n\n    resource += path;\n\n    if (querystring) {\n\n      // collect a list of sub resources and query params that need to be signed\n      var resources = [];\n\n      AWS.util.arrayEach.call(this, querystring.split('&'), function (param) {\n        var name = param.split('=')[0];\n        var value = param.split('=')[1];\n        if (this.subResources[name] || this.responseHeaders[name]) {\n          var subresource = { name: name };\n          if (value !== undefined) {\n            if (this.subResources[name]) {\n              subresource.value = value;\n            } else {\n              subresource.value = decodeURIComponent(value);\n            }\n          }\n          resources.push(subresource);\n        }\n      });\n\n      resources.sort(function (a, b) { return a.name < b.name ? -1 : 1; });\n\n      if (resources.length) {\n\n        querystring = [];\n        AWS.util.arrayEach(resources, function (res) {\n          if (res.value === undefined) {\n            querystring.push(res.name);\n          } else {\n            querystring.push(res.name + '=' + res.value);\n          }\n        });\n\n        resource += '?' + querystring.join('&');\n      }\n\n    }\n\n    return resource;\n\n  },\n\n  sign: function sign(secret, string) {\n    return AWS.util.crypto.hmac(secret, string, 'base64', 'sha1');\n  }\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.S3;\n","var AWS = require('../core');\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nAWS.Signers.V2 = inherit(AWS.Signers.RequestSigner, {\n  addAuthorization: function addAuthorization(credentials, date) {\n\n    if (!date) date = AWS.util.date.getDate();\n\n    var r = this.request;\n\n    r.params.Timestamp = AWS.util.date.iso8601(date);\n    r.params.SignatureVersion = '2';\n    r.params.SignatureMethod = 'HmacSHA256';\n    r.params.AWSAccessKeyId = credentials.accessKeyId;\n\n    if (credentials.sessionToken) {\n      r.params.SecurityToken = credentials.sessionToken;\n    }\n\n    delete r.params.Signature; // delete old Signature for re-signing\n    r.params.Signature = this.signature(credentials);\n\n    r.body = AWS.util.queryParamsToString(r.params);\n    r.headers['Content-Length'] = r.body.length;\n  },\n\n  signature: function signature(credentials) {\n    return AWS.util.crypto.hmac(credentials.secretAccessKey, this.stringToSign(), 'base64');\n  },\n\n  stringToSign: function stringToSign() {\n    var parts = [];\n    parts.push(this.request.method);\n    parts.push(this.request.endpoint.host.toLowerCase());\n    parts.push(this.request.pathname());\n    parts.push(AWS.util.queryParamsToString(this.request.params));\n    return parts.join('\\n');\n  }\n\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.V2;\n","var AWS = require('../core');\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nAWS.Signers.V3 = inherit(AWS.Signers.RequestSigner, {\n  addAuthorization: function addAuthorization(credentials, date) {\n\n    var datetime = AWS.util.date.rfc822(date);\n\n    this.request.headers['X-Amz-Date'] = datetime;\n\n    if (credentials.sessionToken) {\n      this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n    }\n\n    this.request.headers['X-Amzn-Authorization'] =\n      this.authorization(credentials, datetime);\n\n  },\n\n  authorization: function authorization(credentials) {\n    return 'AWS3 ' +\n      'AWSAccessKeyId=' + credentials.accessKeyId + ',' +\n      'Algorithm=HmacSHA256,' +\n      'SignedHeaders=' + this.signedHeaders() + ',' +\n      'Signature=' + this.signature(credentials);\n  },\n\n  signedHeaders: function signedHeaders() {\n    var headers = [];\n    AWS.util.arrayEach(this.headersToSign(), function iterator(h) {\n      headers.push(h.toLowerCase());\n    });\n    return headers.sort().join(';');\n  },\n\n  canonicalHeaders: function canonicalHeaders() {\n    var headers = this.request.headers;\n    var parts = [];\n    AWS.util.arrayEach(this.headersToSign(), function iterator(h) {\n      parts.push(h.toLowerCase().trim() + ':' + String(headers[h]).trim());\n    });\n    return parts.sort().join('\\n') + '\\n';\n  },\n\n  headersToSign: function headersToSign() {\n    var headers = [];\n    AWS.util.each(this.request.headers, function iterator(k) {\n      if (k === 'Host' || k === 'Content-Encoding' || k.match(/^X-Amz/i)) {\n        headers.push(k);\n      }\n    });\n    return headers;\n  },\n\n  signature: function signature(credentials) {\n    return AWS.util.crypto.hmac(credentials.secretAccessKey, this.stringToSign(), 'base64');\n  },\n\n  stringToSign: function stringToSign() {\n    var parts = [];\n    parts.push(this.request.method);\n    parts.push('/');\n    parts.push('');\n    parts.push(this.canonicalHeaders());\n    parts.push(this.request.body);\n    return AWS.util.crypto.sha256(parts.join('\\n'));\n  }\n\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.V3;\n","var AWS = require('../core');\nvar inherit = AWS.util.inherit;\n\nrequire('./v3');\n\n/**\n * @api private\n */\nAWS.Signers.V3Https = inherit(AWS.Signers.V3, {\n  authorization: function authorization(credentials) {\n    return 'AWS3-HTTPS ' +\n      'AWSAccessKeyId=' + credentials.accessKeyId + ',' +\n      'Algorithm=HmacSHA256,' +\n      'Signature=' + this.signature(credentials);\n  },\n\n  stringToSign: function stringToSign() {\n    return this.request.headers['X-Amz-Date'];\n  }\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.V3Https;\n","var AWS = require('../core');\nvar v4Credentials = require('./v4_credentials');\nvar inherit = AWS.util.inherit;\n\n/**\n * @api private\n */\nvar expiresHeader = 'presigned-expires';\n\n/**\n * @api private\n */\nAWS.Signers.V4 = inherit(AWS.Signers.RequestSigner, {\n  constructor: function V4(request, serviceName, options) {\n    AWS.Signers.RequestSigner.call(this, request);\n    this.serviceName = serviceName;\n    options = options || {};\n    this.signatureCache = typeof options.signatureCache === 'boolean' ? options.signatureCache : true;\n    this.operation = options.operation;\n    this.signatureVersion = options.signatureVersion;\n  },\n\n  algorithm: 'AWS4-HMAC-SHA256',\n\n  addAuthorization: function addAuthorization(credentials, date) {\n    var datetime = AWS.util.date.iso8601(date).replace(/[:\\-]|\\.\\d{3}/g, '');\n\n    if (this.isPresigned()) {\n      this.updateForPresigned(credentials, datetime);\n    } else {\n      this.addHeaders(credentials, datetime);\n    }\n\n    this.request.headers['Authorization'] =\n      this.authorization(credentials, datetime);\n  },\n\n  addHeaders: function addHeaders(credentials, datetime) {\n    this.request.headers['X-Amz-Date'] = datetime;\n    if (credentials.sessionToken) {\n      this.request.headers['x-amz-security-token'] = credentials.sessionToken;\n    }\n  },\n\n  updateForPresigned: function updateForPresigned(credentials, datetime) {\n    var credString = this.credentialString(datetime);\n    var qs = {\n      'X-Amz-Date': datetime,\n      'X-Amz-Algorithm': this.algorithm,\n      'X-Amz-Credential': credentials.accessKeyId + '/' + credString,\n      'X-Amz-Expires': this.request.headers[expiresHeader],\n      'X-Amz-SignedHeaders': this.signedHeaders()\n    };\n\n    if (credentials.sessionToken) {\n      qs['X-Amz-Security-Token'] = credentials.sessionToken;\n    }\n\n    if (this.request.headers['Content-Type']) {\n      qs['Content-Type'] = this.request.headers['Content-Type'];\n    }\n    if (this.request.headers['Content-MD5']) {\n      qs['Content-MD5'] = this.request.headers['Content-MD5'];\n    }\n    if (this.request.headers['Cache-Control']) {\n      qs['Cache-Control'] = this.request.headers['Cache-Control'];\n    }\n\n    // need to pull in any other X-Amz-* headers\n    AWS.util.each.call(this, this.request.headers, function(key, value) {\n      if (key === expiresHeader) return;\n      if (this.isSignableHeader(key)) {\n        var lowerKey = key.toLowerCase();\n        // Metadata should be normalized\n        if (lowerKey.indexOf('x-amz-meta-') === 0) {\n          qs[lowerKey] = value;\n        } else if (lowerKey.indexOf('x-amz-') === 0) {\n          qs[key] = value;\n        }\n      }\n    });\n\n    var sep = this.request.path.indexOf('?') >= 0 ? '&' : '?';\n    this.request.path += sep + AWS.util.queryParamsToString(qs);\n  },\n\n  authorization: function authorization(credentials, datetime) {\n    var parts = [];\n    var credString = this.credentialString(datetime);\n    parts.push(this.algorithm + ' Credential=' +\n      credentials.accessKeyId + '/' + credString);\n    parts.push('SignedHeaders=' + this.signedHeaders());\n    parts.push('Signature=' + this.signature(credentials, datetime));\n    return parts.join(', ');\n  },\n\n  signature: function signature(credentials, datetime) {\n    var signingKey = v4Credentials.getSigningKey(\n      credentials,\n      datetime.substr(0, 8),\n      this.request.region,\n      this.serviceName,\n      this.signatureCache\n    );\n    return AWS.util.crypto.hmac(signingKey, this.stringToSign(datetime), 'hex');\n  },\n\n  stringToSign: function stringToSign(datetime) {\n    var parts = [];\n    parts.push('AWS4-HMAC-SHA256');\n    parts.push(datetime);\n    parts.push(this.credentialString(datetime));\n    parts.push(this.hexEncodedHash(this.canonicalString()));\n    return parts.join('\\n');\n  },\n\n  canonicalString: function canonicalString() {\n    var parts = [], pathname = this.request.pathname();\n    if (this.serviceName !== 's3' && this.signatureVersion !== 's3v4') pathname = AWS.util.uriEscapePath(pathname);\n\n    parts.push(this.request.method);\n    parts.push(pathname);\n    parts.push(this.request.search());\n    parts.push(this.canonicalHeaders() + '\\n');\n    parts.push(this.signedHeaders());\n    parts.push(this.hexEncodedBodyHash());\n    return parts.join('\\n');\n  },\n\n  canonicalHeaders: function canonicalHeaders() {\n    var headers = [];\n    AWS.util.each.call(this, this.request.headers, function (key, item) {\n      headers.push([key, item]);\n    });\n    headers.sort(function (a, b) {\n      return a[0].toLowerCase() < b[0].toLowerCase() ? -1 : 1;\n    });\n    var parts = [];\n    AWS.util.arrayEach.call(this, headers, function (item) {\n      var key = item[0].toLowerCase();\n      if (this.isSignableHeader(key)) {\n        var value = item[1];\n        if (typeof value === 'undefined' || value === null || typeof value.toString !== 'function') {\n          throw AWS.util.error(new Error('Header ' + key + ' contains invalid value'), {\n            code: 'InvalidHeader'\n          });\n        }\n        parts.push(key + ':' +\n          this.canonicalHeaderValues(value.toString()));\n      }\n    });\n    return parts.join('\\n');\n  },\n\n  canonicalHeaderValues: function canonicalHeaderValues(values) {\n    return values.replace(/\\s+/g, ' ').replace(/^\\s+|\\s+$/g, '');\n  },\n\n  signedHeaders: function signedHeaders() {\n    var keys = [];\n    AWS.util.each.call(this, this.request.headers, function (key) {\n      key = key.toLowerCase();\n      if (this.isSignableHeader(key)) keys.push(key);\n    });\n    return keys.sort().join(';');\n  },\n\n  credentialString: function credentialString(datetime) {\n    return v4Credentials.createScope(\n      datetime.substr(0, 8),\n      this.request.region,\n      this.serviceName\n    );\n  },\n\n  hexEncodedHash: function hash(string) {\n    return AWS.util.crypto.sha256(string, 'hex');\n  },\n\n  hexEncodedBodyHash: function hexEncodedBodyHash() {\n    var request = this.request;\n    if (this.isPresigned() && this.serviceName === 's3' && !request.body) {\n      return 'UNSIGNED-PAYLOAD';\n    } else if (request.headers['X-Amz-Content-Sha256']) {\n      return request.headers['X-Amz-Content-Sha256'];\n    } else {\n      return this.hexEncodedHash(this.request.body || '');\n    }\n  },\n\n  unsignableHeaders: [\n    'authorization',\n    'content-type',\n    'content-length',\n    'user-agent',\n    expiresHeader,\n    'expect',\n    'x-amzn-trace-id'\n  ],\n\n  isSignableHeader: function isSignableHeader(key) {\n    if (key.toLowerCase().indexOf('x-amz-') === 0) return true;\n    return this.unsignableHeaders.indexOf(key) < 0;\n  },\n\n  isPresigned: function isPresigned() {\n    return this.request.headers[expiresHeader] ? true : false;\n  }\n\n});\n\n/**\n * @api private\n */\nmodule.exports = AWS.Signers.V4;\n","var AWS = require('../core');\n\n/**\n * @api private\n */\nvar cachedSecret = {};\n\n/**\n * @api private\n */\nvar cacheQueue = [];\n\n/**\n * @api private\n */\nvar maxCacheEntries = 50;\n\n/**\n * @api private\n */\nvar v4Identifier = 'aws4_request';\n\n/**\n * @api private\n */\nmodule.exports = {\n  /**\n   * @api private\n   *\n   * @param date [String]\n   * @param region [String]\n   * @param serviceName [String]\n   * @return [String]\n   */\n  createScope: function createScope(date, region, serviceName) {\n    return [\n      date.substr(0, 8),\n      region,\n      serviceName,\n      v4Identifier\n    ].join('/');\n  },\n\n  /**\n   * @api private\n   *\n   * @param credentials [Credentials]\n   * @param date [String]\n   * @param region [String]\n   * @param service [String]\n   * @param shouldCache [Boolean]\n   * @return [String]\n   */\n  getSigningKey: function getSigningKey(\n    credentials,\n    date,\n    region,\n    service,\n    shouldCache\n  ) {\n    var credsIdentifier = AWS.util.crypto\n      .hmac(credentials.secretAccessKey, credentials.accessKeyId, 'base64');\n    var cacheKey = [credsIdentifier, date, region, service].join('_');\n    shouldCache = shouldCache !== false;\n    if (shouldCache && (cacheKey in cachedSecret)) {\n      return cachedSecret[cacheKey];\n    }\n\n    var kDate = AWS.util.crypto.hmac(\n      'AWS4' + credentials.secretAccessKey,\n      date,\n      'buffer'\n    );\n    var kRegion = AWS.util.crypto.hmac(kDate, region, 'buffer');\n    var kService = AWS.util.crypto.hmac(kRegion, service, 'buffer');\n\n    var signingKey = AWS.util.crypto.hmac(kService, v4Identifier, 'buffer');\n    if (shouldCache) {\n      cachedSecret[cacheKey] = signingKey;\n      cacheQueue.push(cacheKey);\n      if (cacheQueue.length > maxCacheEntries) {\n        // remove the oldest entry (not the least recently used)\n        delete cachedSecret[cacheQueue.shift()];\n      }\n    }\n\n    return signingKey;\n  },\n\n  /**\n   * @api private\n   *\n   * Empties the derived signing key cache. Made available for testing purposes\n   * only.\n   */\n  emptyCache: function emptyCache() {\n    cachedSecret = {};\n    cacheQueue = [];\n  }\n};\n","function AcceptorStateMachine(states, state) {\n  this.currentState = state || null;\n  this.states = states || {};\n}\n\nAcceptorStateMachine.prototype.runTo = function runTo(finalState, done, bindObject, inputError) {\n  if (typeof finalState === 'function') {\n    inputError = bindObject; bindObject = done;\n    done = finalState; finalState = null;\n  }\n\n  var self = this;\n  var state = self.states[self.currentState];\n  state.fn.call(bindObject || self, inputError, function(err) {\n    if (err) {\n      if (state.fail) self.currentState = state.fail;\n      else return done ? done.call(bindObject, err) : null;\n    } else {\n      if (state.accept) self.currentState = state.accept;\n      else return done ? done.call(bindObject) : null;\n    }\n    if (self.currentState === finalState) {\n      return done ? done.call(bindObject, err) : null;\n    }\n\n    self.runTo(finalState, done, bindObject, err);\n  });\n};\n\nAcceptorStateMachine.prototype.addState = function addState(name, acceptState, failState, fn) {\n  if (typeof acceptState === 'function') {\n    fn = acceptState; acceptState = null; failState = null;\n  } else if (typeof failState === 'function') {\n    fn = failState; failState = null;\n  }\n\n  if (!this.currentState) this.currentState = name;\n  this.states[name] = { accept: acceptState, fail: failState, fn: fn };\n  return this;\n};\n\n/**\n * @api private\n */\nmodule.exports = AcceptorStateMachine;\n","/* eslint guard-for-in:0 */\nvar AWS;\n\n/**\n * A set of utility methods for use with the AWS SDK.\n *\n * @!attribute abort\n *   Return this value from an iterator function {each} or {arrayEach}\n *   to break out of the iteration.\n *   @example Breaking out of an iterator function\n *     AWS.util.each({a: 1, b: 2, c: 3}, function(key, value) {\n *       if (key == 'b') return AWS.util.abort;\n *     });\n *   @see each\n *   @see arrayEach\n * @api private\n */\nvar util = {\n  environment: 'nodejs',\n  engine: function engine() {\n    if (util.isBrowser() && typeof navigator !== 'undefined') {\n      return navigator.userAgent;\n    } else {\n      var engine = process.platform + '/' + process.version;\n      if (process.env.AWS_EXECUTION_ENV) {\n        engine += ' exec-env/' + process.env.AWS_EXECUTION_ENV;\n      }\n      return engine;\n    }\n  },\n\n  userAgent: function userAgent() {\n    var name = util.environment;\n    var agent = 'aws-sdk-' + name + '/' + require('./core').VERSION;\n    if (name === 'nodejs') agent += ' ' + util.engine();\n    return agent;\n  },\n\n  uriEscape: function uriEscape(string) {\n    var output = encodeURIComponent(string);\n    output = output.replace(/[^A-Za-z0-9_.~\\-%]+/g, escape);\n\n    // AWS percent-encodes some extra non-standard characters in a URI\n    output = output.replace(/[*]/g, function(ch) {\n      return '%' + ch.charCodeAt(0).toString(16).toUpperCase();\n    });\n\n    return output;\n  },\n\n  uriEscapePath: function uriEscapePath(string) {\n    var parts = [];\n    util.arrayEach(string.split('/'), function (part) {\n      parts.push(util.uriEscape(part));\n    });\n    return parts.join('/');\n  },\n\n  urlParse: function urlParse(url) {\n    return util.url.parse(url);\n  },\n\n  urlFormat: function urlFormat(url) {\n    return util.url.format(url);\n  },\n\n  queryStringParse: function queryStringParse(qs) {\n    return util.querystring.parse(qs);\n  },\n\n  queryParamsToString: function queryParamsToString(params) {\n    var items = [];\n    var escape = util.uriEscape;\n    var sortedKeys = Object.keys(params).sort();\n\n    util.arrayEach(sortedKeys, function(name) {\n      var value = params[name];\n      var ename = escape(name);\n      var result = ename + '=';\n      if (Array.isArray(value)) {\n        var vals = [];\n        util.arrayEach(value, function(item) { vals.push(escape(item)); });\n        result = ename + '=' + vals.sort().join('&' + ename + '=');\n      } else if (value !== undefined && value !== null) {\n        result = ename + '=' + escape(value);\n      }\n      items.push(result);\n    });\n\n    return items.join('&');\n  },\n\n  readFileSync: function readFileSync(path) {\n    if (util.isBrowser()) return null;\n    return require('fs').readFileSync(path, 'utf-8');\n  },\n\n  base64: {\n    encode: function encode64(string) {\n      if (typeof string === 'number') {\n        throw util.error(new Error('Cannot base64 encode number ' + string));\n      }\n      if (string === null || typeof string === 'undefined') {\n        return string;\n      }\n      var buf = util.buffer.toBuffer(string);\n      return buf.toString('base64');\n    },\n\n    decode: function decode64(string) {\n      if (typeof string === 'number') {\n        throw util.error(new Error('Cannot base64 decode number ' + string));\n      }\n      if (string === null || typeof string === 'undefined') {\n        return string;\n      }\n      return util.buffer.toBuffer(string, 'base64');\n    }\n\n  },\n\n  buffer: {\n    /**\n     * Buffer constructor for Node buffer and buffer pollyfill\n     */\n    toBuffer: function(data, encoding) {\n      return (typeof util.Buffer.from === 'function' && util.Buffer.from !== Uint8Array.from) ?\n        util.Buffer.from(data, encoding) : new util.Buffer(data, encoding);\n    },\n\n    alloc: function(size, fill, encoding) {\n      if (typeof size !== 'number') {\n        throw new Error('size passed to alloc must be a number.');\n      }\n      if (typeof util.Buffer.alloc === 'function') {\n        return util.Buffer.alloc(size, fill, encoding);\n      } else {\n        var buf = new util.Buffer(size);\n        if (fill !== undefined && typeof buf.fill === 'function') {\n          buf.fill(fill, undefined, undefined, encoding);\n        }\n        return buf;\n      }\n    },\n\n    toStream: function toStream(buffer) {\n      if (!util.Buffer.isBuffer(buffer)) buffer =  util.buffer.toBuffer(buffer);\n\n      var readable = new (util.stream.Readable)();\n      var pos = 0;\n      readable._read = function(size) {\n        if (pos >= buffer.length) return readable.push(null);\n\n        var end = pos + size;\n        if (end > buffer.length) end = buffer.length;\n        readable.push(buffer.slice(pos, end));\n        pos = end;\n      };\n\n      return readable;\n    },\n\n    /**\n     * Concatenates a list of Buffer objects.\n     */\n    concat: function(buffers) {\n      var length = 0,\n          offset = 0,\n          buffer = null, i;\n\n      for (i = 0; i < buffers.length; i++) {\n        length += buffers[i].length;\n      }\n\n      buffer = util.buffer.alloc(length);\n\n      for (i = 0; i < buffers.length; i++) {\n        buffers[i].copy(buffer, offset);\n        offset += buffers[i].length;\n      }\n\n      return buffer;\n    }\n  },\n\n  string: {\n    byteLength: function byteLength(string) {\n      if (string === null || string === undefined) return 0;\n      if (typeof string === 'string') string = util.buffer.toBuffer(string);\n\n      if (typeof string.byteLength === 'number') {\n        return string.byteLength;\n      } else if (typeof string.length === 'number') {\n        return string.length;\n      } else if (typeof string.size === 'number') {\n        return string.size;\n      } else if (typeof string.path === 'string') {\n        return require('fs').lstatSync(string.path).size;\n      } else {\n        throw util.error(new Error('Cannot determine length of ' + string),\n          { object: string });\n      }\n    },\n\n    upperFirst: function upperFirst(string) {\n      return string[0].toUpperCase() + string.substr(1);\n    },\n\n    lowerFirst: function lowerFirst(string) {\n      return string[0].toLowerCase() + string.substr(1);\n    }\n  },\n\n  ini: {\n    parse: function string(ini) {\n      var currentSection, map = {};\n      util.arrayEach(ini.split(/\\r?\\n/), function(line) {\n        line = line.split(/(^|\\s)[;#]/)[0]; // remove comments\n        var section = line.match(/^\\s*\\[([^\\[\\]]+)\\]\\s*$/);\n        if (section) {\n          currentSection = section[1];\n          if (currentSection === '__proto__' || currentSection.split(/\\s/)[1] === '__proto__') {\n            throw util.error(\n              new Error('Cannot load profile name \\'' + currentSection + '\\' from shared ini file.')\n            );\n          }\n        } else if (currentSection) {\n          var item = line.match(/^\\s*(.+?)\\s*=\\s*(.+?)\\s*$/);\n          if (item) {\n            map[currentSection] = map[currentSection] || {};\n            map[currentSection][item[1]] = item[2];\n          }\n        }\n      });\n\n      return map;\n    }\n  },\n\n  fn: {\n    noop: function() {},\n    callback: function (err) { if (err) throw err; },\n\n    /**\n     * Turn a synchronous function into as \"async\" function by making it call\n     * a callback. The underlying function is called with all but the last argument,\n     * which is treated as the callback. The callback is passed passed a first argument\n     * of null on success to mimick standard node callbacks.\n     */\n    makeAsync: function makeAsync(fn, expectedArgs) {\n      if (expectedArgs && expectedArgs <= fn.length) {\n        return fn;\n      }\n\n      return function() {\n        var args = Array.prototype.slice.call(arguments, 0);\n        var callback = args.pop();\n        var result = fn.apply(null, args);\n        callback(result);\n      };\n    }\n  },\n\n  /**\n   * Date and time utility functions.\n   */\n  date: {\n\n    /**\n     * @return [Date] the current JavaScript date object. Since all\n     *   AWS services rely on this date object, you can override\n     *   this function to provide a special time value to AWS service\n     *   requests.\n     */\n    getDate: function getDate() {\n      if (!AWS) AWS = require('./core');\n      if (AWS.config.systemClockOffset) { // use offset when non-zero\n        return new Date(new Date().getTime() + AWS.config.systemClockOffset);\n      } else {\n        return new Date();\n      }\n    },\n\n    /**\n     * @return [String] the date in ISO-8601 format\n     */\n    iso8601: function iso8601(date) {\n      if (date === undefined) { date = util.date.getDate(); }\n      return date.toISOString().replace(/\\.\\d{3}Z$/, 'Z');\n    },\n\n    /**\n     * @return [String] the date in RFC 822 format\n     */\n    rfc822: function rfc822(date) {\n      if (date === undefined) { date = util.date.getDate(); }\n      return date.toUTCString();\n    },\n\n    /**\n     * @return [Integer] the UNIX timestamp value for the current time\n     */\n    unixTimestamp: function unixTimestamp(date) {\n      if (date === undefined) { date = util.date.getDate(); }\n      return date.getTime() / 1000;\n    },\n\n    /**\n     * @param [String,number,Date] date\n     * @return [Date]\n     */\n    from: function format(date) {\n      if (typeof date === 'number') {\n        return new Date(date * 1000); // unix timestamp\n      } else {\n        return new Date(date);\n      }\n    },\n\n    /**\n     * Given a Date or date-like value, this function formats the\n     * date into a string of the requested value.\n     * @param [String,number,Date] date\n     * @param [String] formatter Valid formats are:\n     #   * 'iso8601'\n     #   * 'rfc822'\n     #   * 'unixTimestamp'\n     * @return [String]\n     */\n    format: function format(date, formatter) {\n      if (!formatter) formatter = 'iso8601';\n      return util.date[formatter](util.date.from(date));\n    },\n\n    parseTimestamp: function parseTimestamp(value) {\n      if (typeof value === 'number') { // unix timestamp (number)\n        return new Date(value * 1000);\n      } else if (value.match(/^\\d+$/)) { // unix timestamp\n        return new Date(value * 1000);\n      } else if (value.match(/^\\d{4}/)) { // iso8601\n        return new Date(value);\n      } else if (value.match(/^\\w{3},/)) { // rfc822\n        return new Date(value);\n      } else {\n        throw util.error(\n          new Error('unhandled timestamp format: ' + value),\n          {code: 'TimestampParserError'});\n      }\n    }\n\n  },\n\n  crypto: {\n    crc32Table: [\n     0x00000000, 0x77073096, 0xEE0E612C, 0x990951BA, 0x076DC419,\n     0x706AF48F, 0xE963A535, 0x9E6495A3, 0x0EDB8832, 0x79DCB8A4,\n     0xE0D5E91E, 0x97D2D988, 0x09B64C2B, 0x7EB17CBD, 0xE7B82D07,\n     0x90BF1D91, 0x1DB71064, 0x6AB020F2, 0xF3B97148, 0x84BE41DE,\n     0x1ADAD47D, 0x6DDDE4EB, 0xF4D4B551, 0x83D385C7, 0x136C9856,\n     0x646BA8C0, 0xFD62F97A, 0x8A65C9EC, 0x14015C4F, 0x63066CD9,\n     0xFA0F3D63, 0x8D080DF5, 0x3B6E20C8, 0x4C69105E, 0xD56041E4,\n     0xA2677172, 0x3C03E4D1, 0x4B04D447, 0xD20D85FD, 0xA50AB56B,\n     0x35B5A8FA, 0x42B2986C, 0xDBBBC9D6, 0xACBCF940, 0x32D86CE3,\n     0x45DF5C75, 0xDCD60DCF, 0xABD13D59, 0x26D930AC, 0x51DE003A,\n     0xC8D75180, 0xBFD06116, 0x21B4F4B5, 0x56B3C423, 0xCFBA9599,\n     0xB8BDA50F, 0x2802B89E, 0x5F058808, 0xC60CD9B2, 0xB10BE924,\n     0x2F6F7C87, 0x58684C11, 0xC1611DAB, 0xB6662D3D, 0x76DC4190,\n     0x01DB7106, 0x98D220BC, 0xEFD5102A, 0x71B18589, 0x06B6B51F,\n     0x9FBFE4A5, 0xE8B8D433, 0x7807C9A2, 0x0F00F934, 0x9609A88E,\n     0xE10E9818, 0x7F6A0DBB, 0x086D3D2D, 0x91646C97, 0xE6635C01,\n     0x6B6B51F4, 0x1C6C6162, 0x856530D8, 0xF262004E, 0x6C0695ED,\n     0x1B01A57B, 0x8208F4C1, 0xF50FC457, 0x65B0D9C6, 0x12B7E950,\n     0x8BBEB8EA, 0xFCB9887C, 0x62DD1DDF, 0x15DA2D49, 0x8CD37CF3,\n     0xFBD44C65, 0x4DB26158, 0x3AB551CE, 0xA3BC0074, 0xD4BB30E2,\n     0x4ADFA541, 0x3DD895D7, 0xA4D1C46D, 0xD3D6F4FB, 0x4369E96A,\n     0x346ED9FC, 0xAD678846, 0xDA60B8D0, 0x44042D73, 0x33031DE5,\n     0xAA0A4C5F, 0xDD0D7CC9, 0x5005713C, 0x270241AA, 0xBE0B1010,\n     0xC90C2086, 0x5768B525, 0x206F85B3, 0xB966D409, 0xCE61E49F,\n     0x5EDEF90E, 0x29D9C998, 0xB0D09822, 0xC7D7A8B4, 0x59B33D17,\n     0x2EB40D81, 0xB7BD5C3B, 0xC0BA6CAD, 0xEDB88320, 0x9ABFB3B6,\n     0x03B6E20C, 0x74B1D29A, 0xEAD54739, 0x9DD277AF, 0x04DB2615,\n     0x73DC1683, 0xE3630B12, 0x94643B84, 0x0D6D6A3E, 0x7A6A5AA8,\n     0xE40ECF0B, 0x9309FF9D, 0x0A00AE27, 0x7D079EB1, 0xF00F9344,\n     0x8708A3D2, 0x1E01F268, 0x6906C2FE, 0xF762575D, 0x806567CB,\n     0x196C3671, 0x6E6B06E7, 0xFED41B76, 0x89D32BE0, 0x10DA7A5A,\n     0x67DD4ACC, 0xF9B9DF6F, 0x8EBEEFF9, 0x17B7BE43, 0x60B08ED5,\n     0xD6D6A3E8, 0xA1D1937E, 0x38D8C2C4, 0x4FDFF252, 0xD1BB67F1,\n     0xA6BC5767, 0x3FB506DD, 0x48B2364B, 0xD80D2BDA, 0xAF0A1B4C,\n     0x36034AF6, 0x41047A60, 0xDF60EFC3, 0xA867DF55, 0x316E8EEF,\n     0x4669BE79, 0xCB61B38C, 0xBC66831A, 0x256FD2A0, 0x5268E236,\n     0xCC0C7795, 0xBB0B4703, 0x220216B9, 0x5505262F, 0xC5BA3BBE,\n     0xB2BD0B28, 0x2BB45A92, 0x5CB36A04, 0xC2D7FFA7, 0xB5D0CF31,\n     0x2CD99E8B, 0x5BDEAE1D, 0x9B64C2B0, 0xEC63F226, 0x756AA39C,\n     0x026D930A, 0x9C0906A9, 0xEB0E363F, 0x72076785, 0x05005713,\n     0x95BF4A82, 0xE2B87A14, 0x7BB12BAE, 0x0CB61B38, 0x92D28E9B,\n     0xE5D5BE0D, 0x7CDCEFB7, 0x0BDBDF21, 0x86D3D2D4, 0xF1D4E242,\n     0x68DDB3F8, 0x1FDA836E, 0x81BE16CD, 0xF6B9265B, 0x6FB077E1,\n     0x18B74777, 0x88085AE6, 0xFF0F6A70, 0x66063BCA, 0x11010B5C,\n     0x8F659EFF, 0xF862AE69, 0x616BFFD3, 0x166CCF45, 0xA00AE278,\n     0xD70DD2EE, 0x4E048354, 0x3903B3C2, 0xA7672661, 0xD06016F7,\n     0x4969474D, 0x3E6E77DB, 0xAED16A4A, 0xD9D65ADC, 0x40DF0B66,\n     0x37D83BF0, 0xA9BCAE53, 0xDEBB9EC5, 0x47B2CF7F, 0x30B5FFE9,\n     0xBDBDF21C, 0xCABAC28A, 0x53B39330, 0x24B4A3A6, 0xBAD03605,\n     0xCDD70693, 0x54DE5729, 0x23D967BF, 0xB3667A2E, 0xC4614AB8,\n     0x5D681B02, 0x2A6F2B94, 0xB40BBE37, 0xC30C8EA1, 0x5A05DF1B,\n     0x2D02EF8D],\n\n    crc32: function crc32(data) {\n      var tbl = util.crypto.crc32Table;\n      var crc = 0 ^ -1;\n\n      if (typeof data === 'string') {\n        data = util.buffer.toBuffer(data);\n      }\n\n      for (var i = 0; i < data.length; i++) {\n        var code = data.readUInt8(i);\n        crc = (crc >>> 8) ^ tbl[(crc ^ code) & 0xFF];\n      }\n      return (crc ^ -1) >>> 0;\n    },\n\n    hmac: function hmac(key, string, digest, fn) {\n      if (!digest) digest = 'binary';\n      if (digest === 'buffer') { digest = undefined; }\n      if (!fn) fn = 'sha256';\n      if (typeof string === 'string') string = util.buffer.toBuffer(string);\n      return util.crypto.lib.createHmac(fn, key).update(string).digest(digest);\n    },\n\n    md5: function md5(data, digest, callback) {\n      return util.crypto.hash('md5', data, digest, callback);\n    },\n\n    sha256: function sha256(data, digest, callback) {\n      return util.crypto.hash('sha256', data, digest, callback);\n    },\n\n    hash: function(algorithm, data, digest, callback) {\n      var hash = util.crypto.createHash(algorithm);\n      if (!digest) { digest = 'binary'; }\n      if (digest === 'buffer') { digest = undefined; }\n      if (typeof data === 'string') data = util.buffer.toBuffer(data);\n      var sliceFn = util.arraySliceFn(data);\n      var isBuffer = util.Buffer.isBuffer(data);\n      //Identifying objects with an ArrayBuffer as buffers\n      if (util.isBrowser() && typeof ArrayBuffer !== 'undefined' && data && data.buffer instanceof ArrayBuffer) isBuffer = true;\n\n      if (callback && typeof data === 'object' &&\n          typeof data.on === 'function' && !isBuffer) {\n        data.on('data', function(chunk) { hash.update(chunk); });\n        data.on('error', function(err) { callback(err); });\n        data.on('end', function() { callback(null, hash.digest(digest)); });\n      } else if (callback && sliceFn && !isBuffer &&\n                 typeof FileReader !== 'undefined') {\n        // this might be a File/Blob\n        var index = 0, size = 1024 * 512;\n        var reader = new FileReader();\n        reader.onerror = function() {\n          callback(new Error('Failed to read data.'));\n        };\n        reader.onload = function() {\n          var buf = new util.Buffer(new Uint8Array(reader.result));\n          hash.update(buf);\n          index += buf.length;\n          reader._continueReading();\n        };\n        reader._continueReading = function() {\n          if (index >= data.size) {\n            callback(null, hash.digest(digest));\n            return;\n          }\n\n          var back = index + size;\n          if (back > data.size) back = data.size;\n          reader.readAsArrayBuffer(sliceFn.call(data, index, back));\n        };\n\n        reader._continueReading();\n      } else {\n        if (util.isBrowser() && typeof data === 'object' && !isBuffer) {\n          data = new util.Buffer(new Uint8Array(data));\n        }\n        var out = hash.update(data).digest(digest);\n        if (callback) callback(null, out);\n        return out;\n      }\n    },\n\n    toHex: function toHex(data) {\n      var out = [];\n      for (var i = 0; i < data.length; i++) {\n        out.push(('0' + data.charCodeAt(i).toString(16)).substr(-2, 2));\n      }\n      return out.join('');\n    },\n\n    createHash: function createHash(algorithm) {\n      return util.crypto.lib.createHash(algorithm);\n    }\n\n  },\n\n  /** @!ignore */\n\n  /* Abort constant */\n  abort: {},\n\n  each: function each(object, iterFunction) {\n    for (var key in object) {\n      if (Object.prototype.hasOwnProperty.call(object, key)) {\n        var ret = iterFunction.call(this, key, object[key]);\n        if (ret === util.abort) break;\n      }\n    }\n  },\n\n  arrayEach: function arrayEach(array, iterFunction) {\n    for (var idx in array) {\n      if (Object.prototype.hasOwnProperty.call(array, idx)) {\n        var ret = iterFunction.call(this, array[idx], parseInt(idx, 10));\n        if (ret === util.abort) break;\n      }\n    }\n  },\n\n  update: function update(obj1, obj2) {\n    util.each(obj2, function iterator(key, item) {\n      obj1[key] = item;\n    });\n    return obj1;\n  },\n\n  merge: function merge(obj1, obj2) {\n    return util.update(util.copy(obj1), obj2);\n  },\n\n  copy: function copy(object) {\n    if (object === null || object === undefined) return object;\n    var dupe = {};\n    // jshint forin:false\n    for (var key in object) {\n      dupe[key] = object[key];\n    }\n    return dupe;\n  },\n\n  isEmpty: function isEmpty(obj) {\n    for (var prop in obj) {\n      if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n        return false;\n      }\n    }\n    return true;\n  },\n\n  arraySliceFn: function arraySliceFn(obj) {\n    var fn = obj.slice || obj.webkitSlice || obj.mozSlice;\n    return typeof fn === 'function' ? fn : null;\n  },\n\n  isType: function isType(obj, type) {\n    // handle cross-\"frame\" objects\n    if (typeof type === 'function') type = util.typeName(type);\n    return Object.prototype.toString.call(obj) === '[object ' + type + ']';\n  },\n\n  typeName: function typeName(type) {\n    if (Object.prototype.hasOwnProperty.call(type, 'name')) return type.name;\n    var str = type.toString();\n    var match = str.match(/^\\s*function (.+)\\(/);\n    return match ? match[1] : str;\n  },\n\n  error: function error(err, options) {\n    var originalError = null;\n    if (typeof err.message === 'string' && err.message !== '') {\n      if (typeof options === 'string' || (options && options.message)) {\n        originalError = util.copy(err);\n        originalError.message = err.message;\n      }\n    }\n    err.message = err.message || null;\n\n    if (typeof options === 'string') {\n      err.message = options;\n    } else if (typeof options === 'object' && options !== null) {\n      util.update(err, options);\n      if (options.message)\n        err.message = options.message;\n      if (options.code || options.name)\n        err.code = options.code || options.name;\n      if (options.stack)\n        err.stack = options.stack;\n    }\n\n    if (typeof Object.defineProperty === 'function') {\n      Object.defineProperty(err, 'name', {writable: true, enumerable: false});\n      Object.defineProperty(err, 'message', {enumerable: true});\n    }\n\n    err.name = String(options && options.name || err.name || err.code || 'Error');\n    err.time = new Date();\n\n    if (originalError) err.originalError = originalError;\n\n    return err;\n  },\n\n  /**\n   * @api private\n   */\n  inherit: function inherit(klass, features) {\n    var newObject = null;\n    if (features === undefined) {\n      features = klass;\n      klass = Object;\n      newObject = {};\n    } else {\n      var ctor = function ConstructorWrapper() {};\n      ctor.prototype = klass.prototype;\n      newObject = new ctor();\n    }\n\n    // constructor not supplied, create pass-through ctor\n    if (features.constructor === Object) {\n      features.constructor = function() {\n        if (klass !== Object) {\n          return klass.apply(this, arguments);\n        }\n      };\n    }\n\n    features.constructor.prototype = newObject;\n    util.update(features.constructor.prototype, features);\n    features.constructor.__super__ = klass;\n    return features.constructor;\n  },\n\n  /**\n   * @api private\n   */\n  mixin: function mixin() {\n    var klass = arguments[0];\n    for (var i = 1; i < arguments.length; i++) {\n      // jshint forin:false\n      for (var prop in arguments[i].prototype) {\n        var fn = arguments[i].prototype[prop];\n        if (prop !== 'constructor') {\n          klass.prototype[prop] = fn;\n        }\n      }\n    }\n    return klass;\n  },\n\n  /**\n   * @api private\n   */\n  hideProperties: function hideProperties(obj, props) {\n    if (typeof Object.defineProperty !== 'function') return;\n\n    util.arrayEach(props, function (key) {\n      Object.defineProperty(obj, key, {\n        enumerable: false, writable: true, configurable: true });\n    });\n  },\n\n  /**\n   * @api private\n   */\n  property: function property(obj, name, value, enumerable, isValue) {\n    var opts = {\n      configurable: true,\n      enumerable: enumerable !== undefined ? enumerable : true\n    };\n    if (typeof value === 'function' && !isValue) {\n      opts.get = value;\n    }\n    else {\n      opts.value = value; opts.writable = true;\n    }\n\n    Object.defineProperty(obj, name, opts);\n  },\n\n  /**\n   * @api private\n   */\n  memoizedProperty: function memoizedProperty(obj, name, get, enumerable) {\n    var cachedValue = null;\n\n    // build enumerable attribute for each value with lazy accessor.\n    util.property(obj, name, function() {\n      if (cachedValue === null) {\n        cachedValue = get();\n      }\n      return cachedValue;\n    }, enumerable);\n  },\n\n  /**\n   * TODO Remove in major version revision\n   * This backfill populates response data without the\n   * top-level payload name.\n   *\n   * @api private\n   */\n  hoistPayloadMember: function hoistPayloadMember(resp) {\n    var req = resp.request;\n    var operationName = req.operation;\n    var operation = req.service.api.operations[operationName];\n    var output = operation.output;\n    if (output.payload && !operation.hasEventOutput) {\n      var payloadMember = output.members[output.payload];\n      var responsePayload = resp.data[output.payload];\n      if (payloadMember.type === 'structure') {\n        util.each(responsePayload, function(key, value) {\n          util.property(resp.data, key, value, false);\n        });\n      }\n    }\n  },\n\n  /**\n   * Compute SHA-256 checksums of streams\n   *\n   * @api private\n   */\n  computeSha256: function computeSha256(body, done) {\n    if (util.isNode()) {\n      var Stream = util.stream.Stream;\n      var fs = require('fs');\n      if (typeof Stream === 'function' && body instanceof Stream) {\n        if (typeof body.path === 'string') { // assume file object\n          var settings = {};\n          if (typeof body.start === 'number') {\n            settings.start = body.start;\n          }\n          if (typeof body.end === 'number') {\n            settings.end = body.end;\n          }\n          body = fs.createReadStream(body.path, settings);\n        } else { // TODO support other stream types\n          return done(new Error('Non-file stream objects are ' +\n                                'not supported with SigV4'));\n        }\n      }\n    }\n\n    util.crypto.sha256(body, 'hex', function(err, sha) {\n      if (err) done(err);\n      else done(null, sha);\n    });\n  },\n\n  /**\n   * @api private\n   */\n  isClockSkewed: function isClockSkewed(serverTime) {\n    if (serverTime) {\n      util.property(AWS.config, 'isClockSkewed',\n        Math.abs(new Date().getTime() - serverTime) >= 300000, false);\n      return AWS.config.isClockSkewed;\n    }\n  },\n\n  applyClockOffset: function applyClockOffset(serverTime) {\n    if (serverTime)\n      AWS.config.systemClockOffset = serverTime - new Date().getTime();\n  },\n\n  /**\n   * @api private\n   */\n  extractRequestId: function extractRequestId(resp) {\n    var requestId = resp.httpResponse.headers['x-amz-request-id'] ||\n                     resp.httpResponse.headers['x-amzn-requestid'];\n\n    if (!requestId && resp.data && resp.data.ResponseMetadata) {\n      requestId = resp.data.ResponseMetadata.RequestId;\n    }\n\n    if (requestId) {\n      resp.requestId = requestId;\n    }\n\n    if (resp.error) {\n      resp.error.requestId = requestId;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  addPromises: function addPromises(constructors, PromiseDependency) {\n    var deletePromises = false;\n    if (PromiseDependency === undefined && AWS && AWS.config) {\n      PromiseDependency = AWS.config.getPromisesDependency();\n    }\n    if (PromiseDependency === undefined && typeof Promise !== 'undefined') {\n      PromiseDependency = Promise;\n    }\n    if (typeof PromiseDependency !== 'function') deletePromises = true;\n    if (!Array.isArray(constructors)) constructors = [constructors];\n\n    for (var ind = 0; ind < constructors.length; ind++) {\n      var constructor = constructors[ind];\n      if (deletePromises) {\n        if (constructor.deletePromisesFromClass) {\n          constructor.deletePromisesFromClass();\n        }\n      } else if (constructor.addPromisesToClass) {\n        constructor.addPromisesToClass(PromiseDependency);\n      }\n    }\n  },\n\n  /**\n   * @api private\n   * Return a function that will return a promise whose fate is decided by the\n   * callback behavior of the given method with `methodName`. The method to be\n   * promisified should conform to node.js convention of accepting a callback as\n   * last argument and calling that callback with error as the first argument\n   * and success value on the second argument.\n   */\n  promisifyMethod: function promisifyMethod(methodName, PromiseDependency) {\n    return function promise() {\n      var self = this;\n      var args = Array.prototype.slice.call(arguments);\n      return new PromiseDependency(function(resolve, reject) {\n        args.push(function(err, data) {\n          if (err) {\n            reject(err);\n          } else {\n            resolve(data);\n          }\n        });\n        self[methodName].apply(self, args);\n      });\n    };\n  },\n\n  /**\n   * @api private\n   */\n  isDualstackAvailable: function isDualstackAvailable(service) {\n    if (!service) return false;\n    var metadata = require('../apis/metadata.json');\n    if (typeof service !== 'string') service = service.serviceIdentifier;\n    if (typeof service !== 'string' || !metadata.hasOwnProperty(service)) return false;\n    return !!metadata[service].dualstackAvailable;\n  },\n\n  /**\n   * @api private\n   */\n  calculateRetryDelay: function calculateRetryDelay(retryCount, retryDelayOptions, err) {\n    if (!retryDelayOptions) retryDelayOptions = {};\n    var customBackoff = retryDelayOptions.customBackoff || null;\n    if (typeof customBackoff === 'function') {\n      return customBackoff(retryCount, err);\n    }\n    var base = typeof retryDelayOptions.base === 'number' ? retryDelayOptions.base : 100;\n    var delay = Math.random() * (Math.pow(2, retryCount) * base);\n    return delay;\n  },\n\n  /**\n   * @api private\n   */\n  handleRequestWithRetries: function handleRequestWithRetries(httpRequest, options, cb) {\n    if (!options) options = {};\n    var http = AWS.HttpClient.getInstance();\n    var httpOptions = options.httpOptions || {};\n    var retryCount = 0;\n\n    var errCallback = function(err) {\n      var maxRetries = options.maxRetries || 0;\n      if (err && err.code === 'TimeoutError') err.retryable = true;\n\n      // Call `calculateRetryDelay()` only when relevant, see #3401\n      if (err && err.retryable && retryCount < maxRetries) {\n        var delay = util.calculateRetryDelay(retryCount, options.retryDelayOptions, err);\n        if (delay >= 0) {\n          retryCount++;\n          setTimeout(sendRequest, delay + (err.retryAfter || 0));\n          return;\n        }\n      }\n      cb(err);\n    };\n\n    var sendRequest = function() {\n      var data = '';\n      http.handleRequest(httpRequest, httpOptions, function(httpResponse) {\n        httpResponse.on('data', function(chunk) { data += chunk.toString(); });\n        httpResponse.on('end', function() {\n          var statusCode = httpResponse.statusCode;\n          if (statusCode < 300) {\n            cb(null, data);\n          } else {\n            var retryAfter = parseInt(httpResponse.headers['retry-after'], 10) * 1000 || 0;\n            var err = util.error(new Error(),\n              {\n                statusCode: statusCode,\n                retryable: statusCode >= 500 || statusCode === 429\n              }\n            );\n            if (retryAfter && err.retryable) err.retryAfter = retryAfter;\n            errCallback(err);\n          }\n        });\n      }, errCallback);\n    };\n\n    AWS.util.defer(sendRequest);\n  },\n\n  /**\n   * @api private\n   */\n  uuid: {\n    v4: function uuidV4() {\n      return require('uuid').v4();\n    }\n  },\n\n  /**\n   * @api private\n   */\n  convertPayloadToString: function convertPayloadToString(resp) {\n    var req = resp.request;\n    var operation = req.operation;\n    var rules = req.service.api.operations[operation].output || {};\n    if (rules.payload && resp.data[rules.payload]) {\n      resp.data[rules.payload] = resp.data[rules.payload].toString();\n    }\n  },\n\n  /**\n   * @api private\n   */\n  defer: function defer(callback) {\n    if (typeof process === 'object' && typeof process.nextTick === 'function') {\n      process.nextTick(callback);\n    } else if (typeof setImmediate === 'function') {\n      setImmediate(callback);\n    } else {\n      setTimeout(callback, 0);\n    }\n  },\n\n  /**\n   * @api private\n   */\n  getRequestPayloadShape: function getRequestPayloadShape(req) {\n    var operations = req.service.api.operations;\n    if (!operations) return undefined;\n    var operation = (operations || {})[req.operation];\n    if (!operation || !operation.input || !operation.input.payload) return undefined;\n    return operation.input.members[operation.input.payload];\n  },\n\n  getProfilesFromSharedConfig: function getProfilesFromSharedConfig(iniLoader, filename) {\n    var profiles = {};\n    var profilesFromConfig = {};\n    if (process.env[util.configOptInEnv]) {\n      var profilesFromConfig = iniLoader.loadFrom({\n        isConfig: true,\n        filename: process.env[util.sharedConfigFileEnv]\n      });\n    }\n    var profilesFromCreds= {};\n    try {\n      var profilesFromCreds = iniLoader.loadFrom({\n        filename: filename ||\n          (process.env[util.configOptInEnv] && process.env[util.sharedCredentialsFileEnv])\n      });\n    } catch (error) {\n      // if using config, assume it is fully descriptive without a credentials file:\n      if (!process.env[util.configOptInEnv]) throw error;\n    }\n    for (var i = 0, profileNames = Object.keys(profilesFromConfig); i < profileNames.length; i++) {\n      profiles[profileNames[i]] = objectAssign(profiles[profileNames[i]] || {}, profilesFromConfig[profileNames[i]]);\n    }\n    for (var i = 0, profileNames = Object.keys(profilesFromCreds); i < profileNames.length; i++) {\n      profiles[profileNames[i]] = objectAssign(profiles[profileNames[i]] || {}, profilesFromCreds[profileNames[i]]);\n    }\n    return profiles;\n\n    /**\n     * Roughly the semantics of `Object.assign(target, source)`\n     */\n    function objectAssign(target, source) {\n      for (var i = 0, keys = Object.keys(source); i < keys.length; i++) {\n        target[keys[i]] = source[keys[i]];\n      }\n      return target;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  ARN: {\n    validate: function validateARN(str) {\n      return str && str.indexOf('arn:') === 0 && str.split(':').length >= 6;\n    },\n    parse: function parseARN(arn) {\n      var matched = arn.split(':');\n      return {\n        partition: matched[1],\n        service: matched[2],\n        region: matched[3],\n        accountId: matched[4],\n        resource: matched.slice(5).join(':')\n      };\n    },\n    build: function buildARN(arnObject) {\n      if (\n        arnObject.service === undefined ||\n        arnObject.region === undefined ||\n        arnObject.accountId === undefined ||\n        arnObject.resource === undefined\n      ) throw util.error(new Error('Input ARN object is invalid'));\n      return 'arn:'+ (arnObject.partition || 'aws') + ':' + arnObject.service +\n        ':' + arnObject.region + ':' + arnObject.accountId + ':' + arnObject.resource;\n    }\n  },\n\n  /**\n   * @api private\n   */\n  defaultProfile: 'default',\n\n  /**\n   * @api private\n   */\n  configOptInEnv: 'AWS_SDK_LOAD_CONFIG',\n\n  /**\n   * @api private\n   */\n  sharedCredentialsFileEnv: 'AWS_SHARED_CREDENTIALS_FILE',\n\n  /**\n   * @api private\n   */\n  sharedConfigFileEnv: 'AWS_CONFIG_FILE',\n\n  /**\n   * @api private\n   */\n  imdsDisabledEnv: 'AWS_EC2_METADATA_DISABLED'\n};\n\n/**\n * @api private\n */\nmodule.exports = util;\n","var util = require('../util');\nvar XmlNode = require('./xml-node').XmlNode;\nvar XmlText = require('./xml-text').XmlText;\n\nfunction XmlBuilder() { }\n\nXmlBuilder.prototype.toXML = function(params, shape, rootElement, noEmpty) {\n  var xml = new XmlNode(rootElement);\n  applyNamespaces(xml, shape, true);\n  serialize(xml, params, shape);\n  return xml.children.length > 0 || noEmpty ? xml.toString() : '';\n};\n\nfunction serialize(xml, value, shape) {\n  switch (shape.type) {\n    case 'structure': return serializeStructure(xml, value, shape);\n    case 'map': return serializeMap(xml, value, shape);\n    case 'list': return serializeList(xml, value, shape);\n    default: return serializeScalar(xml, value, shape);\n  }\n}\n\nfunction serializeStructure(xml, params, shape) {\n  util.arrayEach(shape.memberNames, function(memberName) {\n    var memberShape = shape.members[memberName];\n    if (memberShape.location !== 'body') return;\n\n    var value = params[memberName];\n    var name = memberShape.name;\n    if (value !== undefined && value !== null) {\n      if (memberShape.isXmlAttribute) {\n        xml.addAttribute(name, value);\n      } else if (memberShape.flattened) {\n        serialize(xml, value, memberShape);\n      } else {\n        var element = new XmlNode(name);\n        xml.addChildNode(element);\n        applyNamespaces(element, memberShape);\n        serialize(element, value, memberShape);\n      }\n    }\n  });\n}\n\nfunction serializeMap(xml, map, shape) {\n  var xmlKey = shape.key.name || 'key';\n  var xmlValue = shape.value.name || 'value';\n\n  util.each(map, function(key, value) {\n    var entry = new XmlNode(shape.flattened ? shape.name : 'entry');\n    xml.addChildNode(entry);\n\n    var entryKey = new XmlNode(xmlKey);\n    var entryValue = new XmlNode(xmlValue);\n    entry.addChildNode(entryKey);\n    entry.addChildNode(entryValue);\n\n    serialize(entryKey, key, shape.key);\n    serialize(entryValue, value, shape.value);\n  });\n}\n\nfunction serializeList(xml, list, shape) {\n  if (shape.flattened) {\n    util.arrayEach(list, function(value) {\n      var name = shape.member.name || shape.name;\n      var element = new XmlNode(name);\n      xml.addChildNode(element);\n      serialize(element, value, shape.member);\n    });\n  } else {\n    util.arrayEach(list, function(value) {\n      var name = shape.member.name || 'member';\n      var element = new XmlNode(name);\n      xml.addChildNode(element);\n      serialize(element, value, shape.member);\n    });\n  }\n}\n\nfunction serializeScalar(xml, value, shape) {\n  xml.addChildNode(\n    new XmlText(shape.toWireFormat(value))\n  );\n}\n\nfunction applyNamespaces(xml, shape, isRoot) {\n  var uri, prefix = 'xmlns';\n  if (shape.xmlNamespaceUri) {\n    uri = shape.xmlNamespaceUri;\n    if (shape.xmlNamespacePrefix) prefix += ':' + shape.xmlNamespacePrefix;\n  } else if (isRoot && shape.api.xmlNamespaceUri) {\n    uri = shape.api.xmlNamespaceUri;\n  }\n\n  if (uri) xml.addAttribute(prefix, uri);\n}\n\n/**\n * @api private\n */\nmodule.exports = XmlBuilder;\n","/**\n * Escapes characters that can not be in an XML attribute.\n */\nfunction escapeAttribute(value) {\n    return value.replace(/&/g, '&amp;').replace(/'/g, '&apos;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;');\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    escapeAttribute: escapeAttribute\n};\n","/**\n * Escapes characters that can not be in an XML element.\n */\nfunction escapeElement(value) {\n    return value.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n}\n\n/**\n * @api private\n */\nmodule.exports = {\n    escapeElement: escapeElement\n};\n","var AWS = require('../core');\nvar util = AWS.util;\nvar Shape = AWS.Model.Shape;\n\nvar xml2js = require('xml2js');\n\n/**\n * @api private\n */\nvar options = {  // options passed to xml2js parser\n  explicitCharkey: false, // undocumented\n  trim: false,            // trim the leading/trailing whitespace from text nodes\n  normalize: false,       // trim interior whitespace inside text nodes\n  explicitRoot: false,    // return the root node in the resulting object?\n  emptyTag: null,         // the default value for empty nodes\n  explicitArray: true,    // always put child nodes in an array\n  ignoreAttrs: false,     // ignore attributes, only create text nodes\n  mergeAttrs: false,      // merge attributes and child elements\n  validator: null         // a callable validator\n};\n\nfunction NodeXmlParser() { }\n\nNodeXmlParser.prototype.parse = function(xml, shape) {\n  shape = shape || {};\n\n  var result = null;\n  var error = null;\n\n  var parser = new xml2js.Parser(options);\n  parser.parseString(xml, function (e, r) {\n    error = e;\n    result = r;\n  });\n\n  if (result) {\n    var data = parseXml(result, shape);\n    if (result.ResponseMetadata) {\n      data.ResponseMetadata = parseXml(result.ResponseMetadata[0], {});\n    }\n    return data;\n  } else if (error) {\n    throw util.error(error, {code: 'XMLParserError', retryable: true});\n  } else { // empty xml document\n    return parseXml({}, shape);\n  }\n};\n\nfunction parseXml(xml, shape) {\n  switch (shape.type) {\n    case 'structure': return parseStructure(xml, shape);\n    case 'map': return parseMap(xml, shape);\n    case 'list': return parseList(xml, shape);\n    case undefined: case null: return parseUnknown(xml);\n    default: return parseScalar(xml, shape);\n  }\n}\n\nfunction parseStructure(xml, shape) {\n  var data = {};\n  if (xml === null) return data;\n\n  util.each(shape.members, function(memberName, memberShape) {\n    var xmlName = memberShape.name;\n    if (Object.prototype.hasOwnProperty.call(xml, xmlName) && Array.isArray(xml[xmlName])) {\n      var xmlChild = xml[xmlName];\n      if (!memberShape.flattened) xmlChild = xmlChild[0];\n\n      data[memberName] = parseXml(xmlChild, memberShape);\n    } else if (memberShape.isXmlAttribute &&\n               xml.$ && Object.prototype.hasOwnProperty.call(xml.$, xmlName)) {\n      data[memberName] = parseScalar(xml.$[xmlName], memberShape);\n    } else if (memberShape.type === 'list' && !shape.api.xmlNoDefaultLists) {\n      data[memberName] = memberShape.defaultValue;\n    }\n  });\n\n  return data;\n}\n\nfunction parseMap(xml, shape) {\n  var data = {};\n  if (xml === null) return data;\n\n  var xmlKey = shape.key.name || 'key';\n  var xmlValue = shape.value.name || 'value';\n  var iterable = shape.flattened ? xml : xml.entry;\n\n  if (Array.isArray(iterable)) {\n    util.arrayEach(iterable, function(child) {\n      data[child[xmlKey][0]] = parseXml(child[xmlValue][0], shape.value);\n    });\n  }\n\n  return data;\n}\n\nfunction parseList(xml, shape) {\n  var data = [];\n  var name = shape.member.name || 'member';\n  if (shape.flattened) {\n    util.arrayEach(xml, function(xmlChild) {\n      data.push(parseXml(xmlChild, shape.member));\n    });\n  } else if (xml && Array.isArray(xml[name])) {\n    util.arrayEach(xml[name], function(child) {\n      data.push(parseXml(child, shape.member));\n    });\n  }\n\n  return data;\n}\n\nfunction parseScalar(text, shape) {\n  if (text && text.$ && text.$.encoding === 'base64') {\n    shape = new Shape.create({type: text.$.encoding});\n  }\n  if (text && text._) text = text._;\n\n  if (typeof shape.toType === 'function') {\n    return shape.toType(text);\n  } else {\n    return text;\n  }\n}\n\nfunction parseUnknown(xml) {\n  if (xml === undefined || xml === null) return '';\n  if (typeof xml === 'string') return xml;\n\n  // parse a list\n  if (Array.isArray(xml)) {\n    var arr = [];\n    for (i = 0; i < xml.length; i++) {\n      arr.push(parseXml(xml[i], {}));\n    }\n    return arr;\n  }\n\n  // empty object\n  var keys = Object.keys(xml), i;\n  if (keys.length === 0 || (keys.length === 1 && keys[0] === '$')) {\n    return {};\n  }\n\n  // object, parse as structure\n  var data = {};\n  for (i = 0; i < keys.length; i++) {\n    var key = keys[i], value = xml[key];\n    if (key === '$') continue;\n    if (value.length > 1) { // this member is a list\n      data[key] = parseList(value, {member: {}});\n    } else { // this member is a single item\n      data[key] = parseXml(value[0], {});\n    }\n  }\n  return data;\n}\n\n/**\n * @api private\n */\nmodule.exports = NodeXmlParser;\n","var escapeAttribute = require('./escape-attribute').escapeAttribute;\n\n/**\n * Represents an XML node.\n * @api private\n */\nfunction XmlNode(name, children) {\n    if (children === void 0) { children = []; }\n    this.name = name;\n    this.children = children;\n    this.attributes = {};\n}\nXmlNode.prototype.addAttribute = function (name, value) {\n    this.attributes[name] = value;\n    return this;\n};\nXmlNode.prototype.addChildNode = function (child) {\n    this.children.push(child);\n    return this;\n};\nXmlNode.prototype.removeAttribute = function (name) {\n    delete this.attributes[name];\n    return this;\n};\nXmlNode.prototype.toString = function () {\n    var hasChildren = Boolean(this.children.length);\n    var xmlText = '<' + this.name;\n    // add attributes\n    var attributes = this.attributes;\n    for (var i = 0, attributeNames = Object.keys(attributes); i < attributeNames.length; i++) {\n        var attributeName = attributeNames[i];\n        var attribute = attributes[attributeName];\n        if (typeof attribute !== 'undefined' && attribute !== null) {\n            xmlText += ' ' + attributeName + '=\\\"' + escapeAttribute('' + attribute) + '\\\"';\n        }\n    }\n    return xmlText += !hasChildren ? '/>' : '>' + this.children.map(function (c) { return c.toString(); }).join('') + '</' + this.name + '>';\n};\n\n/**\n * @api private\n */\nmodule.exports = {\n    XmlNode: XmlNode\n};\n","var escapeElement = require('./escape-element').escapeElement;\n\n/**\n * Represents an XML text value.\n * @api private\n */\nfunction XmlText(value) {\n    this.value = value;\n}\n\nXmlText.prototype.toString = function () {\n    return escapeElement('' + this.value);\n};\n\n/**\n * @api private\n */\nmodule.exports = {\n    XmlText: XmlText\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LRU_1 = require(\"./utils/LRU\");\nvar CACHE_SIZE = 1000;\n/**\n * Inspired node-lru-cache[https://github.com/isaacs/node-lru-cache]\n */\nvar EndpointCache = /** @class */ (function () {\n    function EndpointCache(maxSize) {\n        if (maxSize === void 0) { maxSize = CACHE_SIZE; }\n        this.maxSize = maxSize;\n        this.cache = new LRU_1.LRUCache(maxSize);\n    }\n    ;\n    Object.defineProperty(EndpointCache.prototype, \"size\", {\n        get: function () {\n            return this.cache.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    EndpointCache.prototype.put = function (key, value) {\n      var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n        var endpointRecord = this.populateValue(value);\n        this.cache.put(keyString, endpointRecord);\n    };\n    EndpointCache.prototype.get = function (key) {\n      var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n        var now = Date.now();\n        var records = this.cache.get(keyString);\n        if (records) {\n            for (var i = 0; i < records.length; i++) {\n                var record = records[i];\n                if (record.Expire < now) {\n                    this.cache.remove(keyString);\n                    return undefined;\n                }\n            }\n        }\n        return records;\n    };\n    EndpointCache.getKeyString = function (key) {\n        var identifiers = [];\n        var identifierNames = Object.keys(key).sort();\n        for (var i = 0; i < identifierNames.length; i++) {\n            var identifierName = identifierNames[i];\n            if (key[identifierName] === undefined)\n                continue;\n            identifiers.push(key[identifierName]);\n        }\n        return identifiers.join(' ');\n    };\n    EndpointCache.prototype.populateValue = function (endpoints) {\n        var now = Date.now();\n        return endpoints.map(function (endpoint) { return ({\n            Address: endpoint.Address || '',\n            Expire: now + (endpoint.CachePeriodInMinutes || 1) * 60 * 1000\n        }); });\n    };\n    EndpointCache.prototype.empty = function () {\n        this.cache.empty();\n    };\n    EndpointCache.prototype.remove = function (key) {\n      var keyString = typeof key !== 'string' ? EndpointCache.getKeyString(key) : key;\n        this.cache.remove(keyString);\n    };\n    return EndpointCache;\n}());\nexports.EndpointCache = EndpointCache;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar LinkedListNode = /** @class */ (function () {\n    function LinkedListNode(key, value) {\n        this.key = key;\n        this.value = value;\n    }\n    return LinkedListNode;\n}());\nvar LRUCache = /** @class */ (function () {\n    function LRUCache(size) {\n        this.nodeMap = {};\n        this.size = 0;\n        if (typeof size !== 'number' || size < 1) {\n            throw new Error('Cache size can only be positive number');\n        }\n        this.sizeLimit = size;\n    }\n    Object.defineProperty(LRUCache.prototype, \"length\", {\n        get: function () {\n            return this.size;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    LRUCache.prototype.prependToList = function (node) {\n        if (!this.headerNode) {\n            this.tailNode = node;\n        }\n        else {\n            this.headerNode.prev = node;\n            node.next = this.headerNode;\n        }\n        this.headerNode = node;\n        this.size++;\n    };\n    LRUCache.prototype.removeFromTail = function () {\n        if (!this.tailNode) {\n            return undefined;\n        }\n        var node = this.tailNode;\n        var prevNode = node.prev;\n        if (prevNode) {\n            prevNode.next = undefined;\n        }\n        node.prev = undefined;\n        this.tailNode = prevNode;\n        this.size--;\n        return node;\n    };\n    LRUCache.prototype.detachFromList = function (node) {\n        if (this.headerNode === node) {\n            this.headerNode = node.next;\n        }\n        if (this.tailNode === node) {\n            this.tailNode = node.prev;\n        }\n        if (node.prev) {\n            node.prev.next = node.next;\n        }\n        if (node.next) {\n            node.next.prev = node.prev;\n        }\n        node.next = undefined;\n        node.prev = undefined;\n        this.size--;\n    };\n    LRUCache.prototype.get = function (key) {\n        if (this.nodeMap[key]) {\n            var node = this.nodeMap[key];\n            this.detachFromList(node);\n            this.prependToList(node);\n            return node.value;\n        }\n    };\n    LRUCache.prototype.remove = function (key) {\n        if (this.nodeMap[key]) {\n            var node = this.nodeMap[key];\n            this.detachFromList(node);\n            delete this.nodeMap[key];\n        }\n    };\n    LRUCache.prototype.put = function (key, value) {\n        if (this.nodeMap[key]) {\n            this.remove(key);\n        }\n        else if (this.size === this.sizeLimit) {\n            var tailNode = this.removeFromTail();\n            var key_1 = tailNode.key;\n            delete this.nodeMap[key_1];\n        }\n        var newNode = new LinkedListNode(key, value);\n        this.nodeMap[key] = newNode;\n        this.prependToList(newNode);\n    };\n    LRUCache.prototype.empty = function () {\n        var keys = Object.keys(this.nodeMap);\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            var node = this.nodeMap[key];\n            this.detachFromList(node);\n            delete this.nodeMap[key];\n        }\n    };\n    return LRUCache;\n}());\nexports.LRUCache = LRUCache;","module.exports = process.env.FLUENTFFMPEG_COV ? require('./lib-cov/fluent-ffmpeg') : require('./lib/fluent-ffmpeg');\n","/*jshint node:true*/\n'use strict';\n\nvar fs = require('fs');\nvar path = require('path');\nvar async = require('async');\nvar utils = require('./utils');\n\n/*\n *! Capability helpers\n */\n\nvar avCodecRegexp = /^\\s*([D ])([E ])([VAS])([S ])([D ])([T ]) ([^ ]+) +(.*)$/;\nvar ffCodecRegexp = /^\\s*([D\\.])([E\\.])([VAS])([I\\.])([L\\.])([S\\.]) ([^ ]+) +(.*)$/;\nvar ffEncodersRegexp = /\\(encoders:([^\\)]+)\\)/;\nvar ffDecodersRegexp = /\\(decoders:([^\\)]+)\\)/;\nvar encodersRegexp = /^\\s*([VAS\\.])([F\\.])([S\\.])([X\\.])([B\\.])([D\\.]) ([^ ]+) +(.*)$/;\nvar formatRegexp = /^\\s*([D ])([E ]) ([^ ]+) +(.*)$/;\nvar lineBreakRegexp = /\\r\\n|\\r|\\n/;\nvar filterRegexp = /^(?: [T\\.][S\\.][C\\.] )?([^ ]+) +(AA?|VV?|\\|)->(AA?|VV?|\\|) +(.*)$/;\n\nvar cache = {};\n\nmodule.exports = function(proto) {\n  /**\n   * Manually define the ffmpeg binary full path.\n   *\n   * @method FfmpegCommand#setFfmpegPath\n   *\n   * @param {String} ffmpegPath The full path to the ffmpeg binary.\n   * @return FfmpegCommand\n   */\n  proto.setFfmpegPath = function(ffmpegPath) {\n    cache.ffmpegPath = ffmpegPath;\n    return this;\n  };\n\n  /**\n   * Manually define the ffprobe binary full path.\n   *\n   * @method FfmpegCommand#setFfprobePath\n   *\n   * @param {String} ffprobePath The full path to the ffprobe binary.\n   * @return FfmpegCommand\n   */\n  proto.setFfprobePath = function(ffprobePath) {\n    cache.ffprobePath = ffprobePath;\n    return this;\n  };\n\n  /**\n   * Manually define the flvtool2/flvmeta binary full path.\n   *\n   * @method FfmpegCommand#setFlvtoolPath\n   *\n   * @param {String} flvtool The full path to the flvtool2 or flvmeta binary.\n   * @return FfmpegCommand\n   */\n  proto.setFlvtoolPath = function(flvtool) {\n    cache.flvtoolPath = flvtool;\n    return this;\n  };\n\n  /**\n   * Forget executable paths\n   *\n   * (only used for testing purposes)\n   *\n   * @method FfmpegCommand#_forgetPaths\n   * @private\n   */\n  proto._forgetPaths = function() {\n    delete cache.ffmpegPath;\n    delete cache.ffprobePath;\n    delete cache.flvtoolPath;\n  };\n\n  /**\n   * Check for ffmpeg availability\n   *\n   * If the FFMPEG_PATH environment variable is set, try to use it.\n   * If it is unset or incorrect, try to find ffmpeg in the PATH instead.\n   *\n   * @method FfmpegCommand#_getFfmpegPath\n   * @param {Function} callback callback with signature (err, path)\n   * @private\n   */\n  proto._getFfmpegPath = function(callback) {\n    if ('ffmpegPath' in cache) {\n      return callback(null, cache.ffmpegPath);\n    }\n\n    async.waterfall([\n      // Try FFMPEG_PATH\n      function(cb) {\n        if (process.env.FFMPEG_PATH) {\n          fs.exists(process.env.FFMPEG_PATH, function(exists) {\n            if (exists) {\n              cb(null, process.env.FFMPEG_PATH);\n            } else {\n              cb(null, '');\n            }\n          });\n        } else {\n          cb(null, '');\n        }\n      },\n\n      // Search in the PATH\n      function(ffmpeg, cb) {\n        if (ffmpeg.length) {\n          return cb(null, ffmpeg);\n        }\n\n        utils.which('ffmpeg', function(err, ffmpeg) {\n          cb(err, ffmpeg);\n        });\n      }\n    ], function(err, ffmpeg) {\n      if (err) {\n        callback(err);\n      } else {\n        callback(null, cache.ffmpegPath = (ffmpeg || ''));\n      }\n    });\n  };\n\n\n  /**\n   * Check for ffprobe availability\n   *\n   * If the FFPROBE_PATH environment variable is set, try to use it.\n   * If it is unset or incorrect, try to find ffprobe in the PATH instead.\n   * If this still fails, try to find ffprobe in the same directory as ffmpeg.\n   *\n   * @method FfmpegCommand#_getFfprobePath\n   * @param {Function} callback callback with signature (err, path)\n   * @private\n   */\n  proto._getFfprobePath = function(callback) {\n    var self = this;\n\n    if ('ffprobePath' in cache) {\n      return callback(null, cache.ffprobePath);\n    }\n\n    async.waterfall([\n      // Try FFPROBE_PATH\n      function(cb) {\n        if (process.env.FFPROBE_PATH) {\n          fs.exists(process.env.FFPROBE_PATH, function(exists) {\n            cb(null, exists ? process.env.FFPROBE_PATH : '');\n          });\n        } else {\n          cb(null, '');\n        }\n      },\n\n      // Search in the PATH\n      function(ffprobe, cb) {\n        if (ffprobe.length) {\n          return cb(null, ffprobe);\n        }\n\n        utils.which('ffprobe', function(err, ffprobe) {\n          cb(err, ffprobe);\n        });\n      },\n\n      // Search in the same directory as ffmpeg\n      function(ffprobe, cb) {\n        if (ffprobe.length) {\n          return cb(null, ffprobe);\n        }\n\n        self._getFfmpegPath(function(err, ffmpeg) {\n          if (err) {\n            cb(err);\n          } else if (ffmpeg.length) {\n            var name = utils.isWindows ? 'ffprobe.exe' : 'ffprobe';\n            var ffprobe = path.join(path.dirname(ffmpeg), name);\n            fs.exists(ffprobe, function(exists) {\n              cb(null, exists ? ffprobe : '');\n            });\n          } else {\n            cb(null, '');\n          }\n        });\n      }\n    ], function(err, ffprobe) {\n      if (err) {\n        callback(err);\n      } else {\n        callback(null, cache.ffprobePath = (ffprobe || ''));\n      }\n    });\n  };\n\n\n  /**\n   * Check for flvtool2/flvmeta availability\n   *\n   * If the FLVTOOL2_PATH or FLVMETA_PATH environment variable are set, try to use them.\n   * If both are either unset or incorrect, try to find flvtool2 or flvmeta in the PATH instead.\n   *\n   * @method FfmpegCommand#_getFlvtoolPath\n   * @param {Function} callback callback with signature (err, path)\n   * @private\n   */\n   proto._getFlvtoolPath = function(callback) {\n    if ('flvtoolPath' in cache) {\n      return callback(null, cache.flvtoolPath);\n    }\n\n    async.waterfall([\n      // Try FLVMETA_PATH\n      function(cb) {\n        if (process.env.FLVMETA_PATH) {\n          fs.exists(process.env.FLVMETA_PATH, function(exists) {\n            cb(null, exists ? process.env.FLVMETA_PATH : '');\n          });\n        } else {\n          cb(null, '');\n        }\n      },\n\n      // Try FLVTOOL2_PATH\n      function(flvtool, cb) {\n        if (flvtool.length) {\n          return cb(null, flvtool);\n        }\n\n        if (process.env.FLVTOOL2_PATH) {\n          fs.exists(process.env.FLVTOOL2_PATH, function(exists) {\n            cb(null, exists ? process.env.FLVTOOL2_PATH : '');\n          });\n        } else {\n          cb(null, '');\n        }\n      },\n\n      // Search for flvmeta in the PATH\n      function(flvtool, cb) {\n        if (flvtool.length) {\n          return cb(null, flvtool);\n        }\n\n        utils.which('flvmeta', function(err, flvmeta) {\n          cb(err, flvmeta);\n        });\n      },\n\n      // Search for flvtool2 in the PATH\n      function(flvtool, cb) {\n        if (flvtool.length) {\n          return cb(null, flvtool);\n        }\n\n        utils.which('flvtool2', function(err, flvtool2) {\n          cb(err, flvtool2);\n        });\n      },\n    ], function(err, flvtool) {\n      if (err) {\n        callback(err);\n      } else {\n        callback(null, cache.flvtoolPath = (flvtool || ''));\n      }\n    });\n  };\n\n\n  /**\n   * A callback passed to {@link FfmpegCommand#availableFilters}.\n   *\n   * @callback FfmpegCommand~filterCallback\n   * @param {Error|null} err error object or null if no error happened\n   * @param {Object} filters filter object with filter names as keys and the following\n   *   properties for each filter:\n   * @param {String} filters.description filter description\n   * @param {String} filters.input input type, one of 'audio', 'video' and 'none'\n   * @param {Boolean} filters.multipleInputs whether the filter supports multiple inputs\n   * @param {String} filters.output output type, one of 'audio', 'video' and 'none'\n   * @param {Boolean} filters.multipleOutputs whether the filter supports multiple outputs\n   */\n\n  /**\n   * Query ffmpeg for available filters\n   *\n   * @method FfmpegCommand#availableFilters\n   * @category Capabilities\n   * @aliases getAvailableFilters\n   *\n   * @param {FfmpegCommand~filterCallback} callback callback function\n   */\n  proto.availableFilters =\n  proto.getAvailableFilters = function(callback) {\n    if ('filters' in cache) {\n      return callback(null, cache.filters);\n    }\n\n    this._spawnFfmpeg(['-filters'], { captureStdout: true, stdoutLines: 0 }, function (err, stdoutRing) {\n      if (err) {\n        return callback(err);\n      }\n\n      var stdout = stdoutRing.get();\n      var lines = stdout.split('\\n');\n      var data = {};\n      var types = { A: 'audio', V: 'video', '|': 'none' };\n\n      lines.forEach(function(line) {\n        var match = line.match(filterRegexp);\n        if (match) {\n          data[match[1]] = {\n            description: match[4],\n            input: types[match[2].charAt(0)],\n            multipleInputs: match[2].length > 1,\n            output: types[match[3].charAt(0)],\n            multipleOutputs: match[3].length > 1\n          };\n        }\n      });\n\n      callback(null, cache.filters = data);\n    });\n  };\n\n\n  /**\n   * A callback passed to {@link FfmpegCommand#availableCodecs}.\n   *\n   * @callback FfmpegCommand~codecCallback\n   * @param {Error|null} err error object or null if no error happened\n   * @param {Object} codecs codec object with codec names as keys and the following\n   *   properties for each codec (more properties may be available depending on the\n   *   ffmpeg version used):\n   * @param {String} codecs.description codec description\n   * @param {Boolean} codecs.canDecode whether the codec is able to decode streams\n   * @param {Boolean} codecs.canEncode whether the codec is able to encode streams\n   */\n\n  /**\n   * Query ffmpeg for available codecs\n   *\n   * @method FfmpegCommand#availableCodecs\n   * @category Capabilities\n   * @aliases getAvailableCodecs\n   *\n   * @param {FfmpegCommand~codecCallback} callback callback function\n   */\n  proto.availableCodecs =\n  proto.getAvailableCodecs = function(callback) {\n    if ('codecs' in cache) {\n      return callback(null, cache.codecs);\n    }\n\n    this._spawnFfmpeg(['-codecs'], { captureStdout: true, stdoutLines: 0 }, function(err, stdoutRing) {\n      if (err) {\n        return callback(err);\n      }\n\n      var stdout = stdoutRing.get();\n      var lines = stdout.split(lineBreakRegexp);\n      var data = {};\n\n      lines.forEach(function(line) {\n        var match = line.match(avCodecRegexp);\n        if (match && match[7] !== '=') {\n          data[match[7]] = {\n            type: { 'V': 'video', 'A': 'audio', 'S': 'subtitle' }[match[3]],\n            description: match[8],\n            canDecode: match[1] === 'D',\n            canEncode: match[2] === 'E',\n            drawHorizBand: match[4] === 'S',\n            directRendering: match[5] === 'D',\n            weirdFrameTruncation: match[6] === 'T'\n          };\n        }\n\n        match = line.match(ffCodecRegexp);\n        if (match && match[7] !== '=') {\n          var codecData = data[match[7]] = {\n            type: { 'V': 'video', 'A': 'audio', 'S': 'subtitle' }[match[3]],\n            description: match[8],\n            canDecode: match[1] === 'D',\n            canEncode: match[2] === 'E',\n            intraFrameOnly: match[4] === 'I',\n            isLossy: match[5] === 'L',\n            isLossless: match[6] === 'S'\n          };\n\n          var encoders = codecData.description.match(ffEncodersRegexp);\n          encoders = encoders ? encoders[1].trim().split(' ') : [];\n\n          var decoders = codecData.description.match(ffDecodersRegexp);\n          decoders = decoders ? decoders[1].trim().split(' ') : [];\n\n          if (encoders.length || decoders.length) {\n            var coderData = {};\n            utils.copy(codecData, coderData);\n            delete coderData.canEncode;\n            delete coderData.canDecode;\n\n            encoders.forEach(function(name) {\n              data[name] = {};\n              utils.copy(coderData, data[name]);\n              data[name].canEncode = true;\n            });\n\n            decoders.forEach(function(name) {\n              if (name in data) {\n                data[name].canDecode = true;\n              } else {\n                data[name] = {};\n                utils.copy(coderData, data[name]);\n                data[name].canDecode = true;\n              }\n            });\n          }\n        }\n      });\n\n      callback(null, cache.codecs = data);\n    });\n  };\n\n\n  /**\n   * A callback passed to {@link FfmpegCommand#availableEncoders}.\n   *\n   * @callback FfmpegCommand~encodersCallback\n   * @param {Error|null} err error object or null if no error happened\n   * @param {Object} encoders encoders object with encoder names as keys and the following\n   *   properties for each encoder:\n   * @param {String} encoders.description codec description\n   * @param {Boolean} encoders.type \"audio\", \"video\" or \"subtitle\"\n   * @param {Boolean} encoders.frameMT whether the encoder is able to do frame-level multithreading\n   * @param {Boolean} encoders.sliceMT whether the encoder is able to do slice-level multithreading\n   * @param {Boolean} encoders.experimental whether the encoder is experimental\n   * @param {Boolean} encoders.drawHorizBand whether the encoder supports draw_horiz_band\n   * @param {Boolean} encoders.directRendering whether the encoder supports direct encoding method 1\n   */\n\n  /**\n   * Query ffmpeg for available encoders\n   *\n   * @method FfmpegCommand#availableEncoders\n   * @category Capabilities\n   * @aliases getAvailableEncoders\n   *\n   * @param {FfmpegCommand~encodersCallback} callback callback function\n   */\n  proto.availableEncoders =\n  proto.getAvailableEncoders = function(callback) {\n    if ('encoders' in cache) {\n      return callback(null, cache.encoders);\n    }\n\n    this._spawnFfmpeg(['-encoders'], { captureStdout: true, stdoutLines: 0 }, function(err, stdoutRing) {\n      if (err) {\n        return callback(err);\n      }\n\n      var stdout = stdoutRing.get();\n      var lines = stdout.split(lineBreakRegexp);\n      var data = {};\n\n      lines.forEach(function(line) {\n        var match = line.match(encodersRegexp);\n        if (match && match[7] !== '=') {\n          data[match[7]] = {\n            type: { 'V': 'video', 'A': 'audio', 'S': 'subtitle' }[match[1]],\n            description: match[8],\n            frameMT: match[2] === 'F',\n            sliceMT: match[3] === 'S',\n            experimental: match[4] === 'X',\n            drawHorizBand: match[5] === 'B',\n            directRendering: match[6] === 'D'\n          };\n        }\n      });\n\n      callback(null, cache.encoders = data);\n    });\n  };\n\n\n  /**\n   * A callback passed to {@link FfmpegCommand#availableFormats}.\n   *\n   * @callback FfmpegCommand~formatCallback\n   * @param {Error|null} err error object or null if no error happened\n   * @param {Object} formats format object with format names as keys and the following\n   *   properties for each format:\n   * @param {String} formats.description format description\n   * @param {Boolean} formats.canDemux whether the format is able to demux streams from an input file\n   * @param {Boolean} formats.canMux whether the format is able to mux streams into an output file\n   */\n\n  /**\n   * Query ffmpeg for available formats\n   *\n   * @method FfmpegCommand#availableFormats\n   * @category Capabilities\n   * @aliases getAvailableFormats\n   *\n   * @param {FfmpegCommand~formatCallback} callback callback function\n   */\n  proto.availableFormats =\n  proto.getAvailableFormats = function(callback) {\n    if ('formats' in cache) {\n      return callback(null, cache.formats);\n    }\n\n    // Run ffmpeg -formats\n    this._spawnFfmpeg(['-formats'], { captureStdout: true, stdoutLines: 0 }, function (err, stdoutRing) {\n      if (err) {\n        return callback(err);\n      }\n\n      // Parse output\n      var stdout = stdoutRing.get();\n      var lines = stdout.split(lineBreakRegexp);\n      var data = {};\n\n      lines.forEach(function(line) {\n        var match = line.match(formatRegexp);\n        if (match) {\n          match[3].split(',').forEach(function(format) {\n            if (!(format in data)) {\n              data[format] = {\n                description: match[4],\n                canDemux: false,\n                canMux: false\n              };\n            }\n\n            if (match[1] === 'D') {\n              data[format].canDemux = true;\n            }\n            if (match[2] === 'E') {\n              data[format].canMux = true;\n            }\n          });\n        }\n      });\n\n      callback(null, cache.formats = data);\n    });\n  };\n\n\n  /**\n   * Check capabilities before executing a command\n   *\n   * Checks whether all used codecs and formats are indeed available\n   *\n   * @method FfmpegCommand#_checkCapabilities\n   * @param {Function} callback callback with signature (err)\n   * @private\n   */\n  proto._checkCapabilities = function(callback) {\n    var self = this;\n    async.waterfall([\n      // Get available formats\n      function(cb) {\n        self.availableFormats(cb);\n      },\n\n      // Check whether specified formats are available\n      function(formats, cb) {\n        var unavailable;\n\n        // Output format(s)\n        unavailable = self._outputs\n          .reduce(function(fmts, output) {\n            var format = output.options.find('-f', 1);\n            if (format) {\n              if (!(format[0] in formats) || !(formats[format[0]].canMux)) {\n                fmts.push(format);\n              }\n            }\n\n            return fmts;\n          }, []);\n\n        if (unavailable.length === 1) {\n          return cb(new Error('Output format ' + unavailable[0] + ' is not available'));\n        } else if (unavailable.length > 1) {\n          return cb(new Error('Output formats ' + unavailable.join(', ') + ' are not available'));\n        }\n\n        // Input format(s)\n        unavailable = self._inputs\n          .reduce(function(fmts, input) {\n            var format = input.options.find('-f', 1);\n            if (format) {\n              if (!(format[0] in formats) || !(formats[format[0]].canDemux)) {\n                fmts.push(format[0]);\n              }\n            }\n\n            return fmts;\n          }, []);\n\n        if (unavailable.length === 1) {\n          return cb(new Error('Input format ' + unavailable[0] + ' is not available'));\n        } else if (unavailable.length > 1) {\n          return cb(new Error('Input formats ' + unavailable.join(', ') + ' are not available'));\n        }\n\n        cb();\n      },\n\n      // Get available codecs\n      function(cb) {\n        self.availableEncoders(cb);\n      },\n\n      // Check whether specified codecs are available and add strict experimental options if needed\n      function(encoders, cb) {\n        var unavailable;\n\n        // Audio codec(s)\n        unavailable = self._outputs.reduce(function(cdcs, output) {\n          var acodec = output.audio.find('-acodec', 1);\n          if (acodec && acodec[0] !== 'copy') {\n            if (!(acodec[0] in encoders) || encoders[acodec[0]].type !== 'audio') {\n              cdcs.push(acodec[0]);\n            }\n          }\n\n          return cdcs;\n        }, []);\n\n        if (unavailable.length === 1) {\n          return cb(new Error('Audio codec ' + unavailable[0] + ' is not available'));\n        } else if (unavailable.length > 1) {\n          return cb(new Error('Audio codecs ' + unavailable.join(', ') + ' are not available'));\n        }\n\n        // Video codec(s)\n        unavailable = self._outputs.reduce(function(cdcs, output) {\n          var vcodec = output.video.find('-vcodec', 1);\n          if (vcodec && vcodec[0] !== 'copy') {\n            if (!(vcodec[0] in encoders) || encoders[vcodec[0]].type !== 'video') {\n              cdcs.push(vcodec[0]);\n            }\n          }\n\n          return cdcs;\n        }, []);\n\n        if (unavailable.length === 1) {\n          return cb(new Error('Video codec ' + unavailable[0] + ' is not available'));\n        } else if (unavailable.length > 1) {\n          return cb(new Error('Video codecs ' + unavailable.join(', ') + ' are not available'));\n        }\n\n        cb();\n      }\n    ], callback);\n  };\n};\n","/*jshint node:true, laxcomma:true*/\n'use strict';\n\nvar spawn = require('child_process').spawn;\n\n\nfunction legacyTag(key) { return key.match(/^TAG:/); }\nfunction legacyDisposition(key) { return key.match(/^DISPOSITION:/); }\n\nfunction parseFfprobeOutput(out) {\n  var lines = out.split(/\\r\\n|\\r|\\n/);\n\n  lines = lines.filter(function (line) {\n    return line.length > 0;\n  });\n\n  var data = {\n    streams: [],\n    format: {},\n    chapters: []\n  };\n\n  function parseBlock(name) {\n    var data = {};\n\n    var line = lines.shift();\n    while (typeof line !== 'undefined') {\n      if (line.toLowerCase() == '[/'+name+']') {\n        return data;\n      } else if (line.match(/^\\[/)) {\n        line = lines.shift();\n        continue;\n      }\n\n      var kv = line.match(/^([^=]+)=(.*)$/);\n      if (kv) {\n        if (!(kv[1].match(/^TAG:/)) && kv[2].match(/^[0-9]+(\\.[0-9]+)?$/)) {\n          data[kv[1]] = Number(kv[2]);\n        } else {\n          data[kv[1]] = kv[2];\n        }\n      }\n\n      line = lines.shift();\n    }\n\n    return data;\n  }\n\n  var line = lines.shift();\n  while (typeof line !== 'undefined') {\n    if (line.match(/^\\[stream/i)) {\n      var stream = parseBlock('stream');\n      data.streams.push(stream);\n    } else if (line.match(/^\\[chapter/i)) {\n      var chapter = parseBlock('chapter');\n      data.chapters.push(chapter);\n    } else if (line.toLowerCase() === '[format]') {\n      data.format = parseBlock('format');\n    }\n\n    line = lines.shift();\n  }\n\n  return data;\n}\n\n\n\nmodule.exports = function(proto) {\n  /**\n   * A callback passed to the {@link FfmpegCommand#ffprobe} method.\n   *\n   * @callback FfmpegCommand~ffprobeCallback\n   *\n   * @param {Error|null} err error object or null if no error happened\n   * @param {Object} ffprobeData ffprobe output data; this object\n   *   has the same format as what the following command returns:\n   *\n   *     `ffprobe -print_format json -show_streams -show_format INPUTFILE`\n   * @param {Array} ffprobeData.streams stream information\n   * @param {Object} ffprobeData.format format information\n   */\n\n  /**\n   * Run ffprobe on last specified input\n   *\n   * @method FfmpegCommand#ffprobe\n   * @category Metadata\n   *\n   * @param {?Number} [index] 0-based index of input to probe (defaults to last input)\n   * @param {?String[]} [options] array of output options to return\n   * @param {FfmpegCommand~ffprobeCallback} callback callback function\n   *\n   */\n  proto.ffprobe = function() {\n    var input, index = null, options = [], callback;\n\n    // the last argument should be the callback\n    var callback = arguments[arguments.length - 1];\n\n    var ended = false\n    function handleCallback(err, data) {\n      if (!ended) {\n        ended = true;\n        callback(err, data);\n      }\n    };\n\n    // map the arguments to the correct variable names\n    switch (arguments.length) {\n      case 3:\n        index = arguments[0];\n        options = arguments[1];\n        break;\n      case 2:\n        if (typeof arguments[0] === 'number') {\n          index = arguments[0];\n        } else if (Array.isArray(arguments[0])) {\n          options = arguments[0];\n        }\n        break;\n    }\n\n\n    if (index === null) {\n      if (!this._currentInput) {\n        return handleCallback(new Error('No input specified'));\n      }\n\n      input = this._currentInput;\n    } else {\n      input = this._inputs[index];\n\n      if (!input) {\n        return handleCallback(new Error('Invalid input index'));\n      }\n    }\n\n    // Find ffprobe\n    this._getFfprobePath(function(err, path) {\n      if (err) {\n        return handleCallback(err);\n      } else if (!path) {\n        return handleCallback(new Error('Cannot find ffprobe'));\n      }\n\n      var stdout = '';\n      var stdoutClosed = false;\n      var stderr = '';\n      var stderrClosed = false;\n\n      // Spawn ffprobe\n      var src = input.isStream ? 'pipe:0' : input.source;\n      var ffprobe = spawn(path, ['-show_streams', '-show_format'].concat(options, src));\n\n      if (input.isStream) {\n        // Skip errors on stdin. These get thrown when ffprobe is complete and\n        // there seems to be no way hook in and close stdin before it throws.\n        ffprobe.stdin.on('error', function(err) {\n          if (['ECONNRESET', 'EPIPE'].indexOf(err.code) >= 0) { return; }\n          handleCallback(err);\n        });\n\n        // Once ffprobe's input stream closes, we need no more data from the\n        // input\n        ffprobe.stdin.on('close', function() {\n            input.source.pause();\n            input.source.unpipe(ffprobe.stdin);\n        });\n\n        input.source.pipe(ffprobe.stdin);\n      }\n\n      ffprobe.on('error', callback);\n\n      // Ensure we wait for captured streams to end before calling callback\n      var exitError = null;\n      function handleExit(err) {\n        if (err) {\n          exitError = err;\n        }\n\n        if (processExited && stdoutClosed && stderrClosed) {\n          if (exitError) {\n            if (stderr) {\n              exitError.message += '\\n' + stderr;\n            }\n\n            return handleCallback(exitError);\n          }\n\n          // Process output\n          var data = parseFfprobeOutput(stdout);\n\n          // Handle legacy output with \"TAG:x\" and \"DISPOSITION:x\" keys\n          [data.format].concat(data.streams).forEach(function(target) {\n            if (target) {\n              var legacyTagKeys = Object.keys(target).filter(legacyTag);\n\n              if (legacyTagKeys.length) {\n                target.tags = target.tags || {};\n\n                legacyTagKeys.forEach(function(tagKey) {\n                  target.tags[tagKey.substr(4)] = target[tagKey];\n                  delete target[tagKey];\n                });\n              }\n\n              var legacyDispositionKeys = Object.keys(target).filter(legacyDisposition);\n\n              if (legacyDispositionKeys.length) {\n                target.disposition = target.disposition || {};\n\n                legacyDispositionKeys.forEach(function(dispositionKey) {\n                  target.disposition[dispositionKey.substr(12)] = target[dispositionKey];\n                  delete target[dispositionKey];\n                });\n              }\n            }\n          });\n\n          handleCallback(null, data);\n        }\n      }\n\n      // Handle ffprobe exit\n      var processExited = false;\n      ffprobe.on('exit', function(code, signal) {\n        processExited = true;\n\n        if (code) {\n          handleExit(new Error('ffprobe exited with code ' + code));\n        } else if (signal) {\n          handleExit(new Error('ffprobe was killed with signal ' + signal));\n        } else {\n          handleExit();\n        }\n      });\n\n      // Handle stdout/stderr streams\n      ffprobe.stdout.on('data', function(data) {\n        stdout += data;\n      });\n\n      ffprobe.stdout.on('close', function() {\n        stdoutClosed = true;\n        handleExit();\n      });\n\n      ffprobe.stderr.on('data', function(data) {\n        stderr += data;\n      });\n\n      ffprobe.stderr.on('close', function() {\n        stderrClosed = true;\n        handleExit();\n      });\n    });\n  };\n};\n","/*jshint node:true*/\n'use strict';\n\nvar path = require('path');\nvar util = require('util');\nvar EventEmitter = require('events').EventEmitter;\n\nvar utils = require('./utils');\nvar ARGLISTS = ['_global', '_audio', '_audioFilters', '_video', '_videoFilters', '_sizeFilters', '_complexFilters'];\n\n\n/**\n * Create an ffmpeg command\n *\n * Can be called with or without the 'new' operator, and the 'input' parameter\n * may be specified as 'options.source' instead (or passed later with the\n * addInput method).\n *\n * @constructor\n * @param {String|ReadableStream} [input] input file path or readable stream\n * @param {Object} [options] command options\n * @param {Object} [options.logger=<no logging>] logger object with 'error', 'warning', 'info' and 'debug' methods\n * @param {Number} [options.niceness=0] ffmpeg process niceness, ignored on Windows\n * @param {Number} [options.priority=0] alias for `niceness`\n * @param {String} [options.presets=\"fluent-ffmpeg/lib/presets\"] directory to load presets from\n * @param {String} [options.preset=\"fluent-ffmpeg/lib/presets\"] alias for `presets`\n * @param {String} [options.stdoutLines=100] maximum lines of ffmpeg output to keep in memory, use 0 for unlimited\n * @param {Number} [options.timeout=<no timeout>] ffmpeg processing timeout in seconds\n * @param {String|ReadableStream} [options.source=<no input>] alias for the `input` parameter\n */\nfunction FfmpegCommand(input, options) {\n  // Make 'new' optional\n  if (!(this instanceof FfmpegCommand)) {\n    return new FfmpegCommand(input, options);\n  }\n\n  EventEmitter.call(this);\n\n  if (typeof input === 'object' && !('readable' in input)) {\n    // Options object passed directly\n    options = input;\n  } else {\n    // Input passed first\n    options = options || {};\n    options.source = input;\n  }\n\n  // Add input if present\n  this._inputs = [];\n  if (options.source) {\n    this.input(options.source);\n  }\n\n  // Add target-less output for backwards compatibility\n  this._outputs = [];\n  this.output();\n\n  // Create argument lists\n  var self = this;\n  ['_global', '_complexFilters'].forEach(function(prop) {\n    self[prop] = utils.args();\n  });\n\n  // Set default option values\n  options.stdoutLines = 'stdoutLines' in options ? options.stdoutLines : 100;\n  options.presets = options.presets || options.preset || path.join(__dirname, 'presets');\n  options.niceness = options.niceness || options.priority || 0;\n\n  // Save options\n  this.options = options;\n\n  // Setup logger\n  this.logger = options.logger || {\n    debug: function() {},\n    info: function() {},\n    warn: function() {},\n    error: function() {}\n  };\n}\nutil.inherits(FfmpegCommand, EventEmitter);\nmodule.exports = FfmpegCommand;\n\n\n/**\n * Clone an ffmpeg command\n *\n * This method is useful when you want to process the same input multiple times.\n * It returns a new FfmpegCommand instance with the exact same options.\n *\n * All options set _after_ the clone() call will only be applied to the instance\n * it has been called on.\n *\n * @example\n *   var command = ffmpeg('/path/to/source.avi')\n *     .audioCodec('libfaac')\n *     .videoCodec('libx264')\n *     .format('mp4');\n *\n *   command.clone()\n *     .size('320x200')\n *     .save('/path/to/output-small.mp4');\n *\n *   command.clone()\n *     .size('640x400')\n *     .save('/path/to/output-medium.mp4');\n *\n *   command.save('/path/to/output-original-size.mp4');\n *\n * @method FfmpegCommand#clone\n * @return FfmpegCommand\n */\nFfmpegCommand.prototype.clone = function() {\n  var clone = new FfmpegCommand();\n  var self = this;\n\n  // Clone options and logger\n  clone.options = this.options;\n  clone.logger = this.logger;\n\n  // Clone inputs\n  clone._inputs = this._inputs.map(function(input) {\n    return {\n      source: input.source,\n      options: input.options.clone()\n    };\n  });\n\n  // Create first output\n  if ('target' in this._outputs[0]) {\n    // We have outputs set, don't clone them and create first output\n    clone._outputs = [];\n    clone.output();\n  } else {\n    // No outputs set, clone first output options\n    clone._outputs = [\n      clone._currentOutput = {\n        flags: {}\n      }\n    ];\n\n    ['audio', 'audioFilters', 'video', 'videoFilters', 'sizeFilters', 'options'].forEach(function(key) {\n      clone._currentOutput[key] = self._currentOutput[key].clone();\n    });\n\n    if (this._currentOutput.sizeData) {\n      clone._currentOutput.sizeData = {};\n      utils.copy(this._currentOutput.sizeData, clone._currentOutput.sizeData);\n    }\n\n    utils.copy(this._currentOutput.flags, clone._currentOutput.flags);\n  }\n\n  // Clone argument lists\n  ['_global', '_complexFilters'].forEach(function(prop) {\n    clone[prop] = self[prop].clone();\n  });\n\n  return clone;\n};\n\n\n/* Add methods from options submodules */\n\nrequire('./options/inputs')(FfmpegCommand.prototype);\nrequire('./options/audio')(FfmpegCommand.prototype);\nrequire('./options/video')(FfmpegCommand.prototype);\nrequire('./options/videosize')(FfmpegCommand.prototype);\nrequire('./options/output')(FfmpegCommand.prototype);\nrequire('./options/custom')(FfmpegCommand.prototype);\nrequire('./options/misc')(FfmpegCommand.prototype);\n\n\n/* Add processor methods */\n\nrequire('./processor')(FfmpegCommand.prototype);\n\n\n/* Add capabilities methods */\n\nrequire('./capabilities')(FfmpegCommand.prototype);\n\nFfmpegCommand.setFfmpegPath = function(path) {\n  (new FfmpegCommand()).setFfmpegPath(path);\n};\n\nFfmpegCommand.setFfprobePath = function(path) {\n  (new FfmpegCommand()).setFfprobePath(path);\n};\n\nFfmpegCommand.setFlvtoolPath = function(path) {\n  (new FfmpegCommand()).setFlvtoolPath(path);\n};\n\nFfmpegCommand.availableFilters =\nFfmpegCommand.getAvailableFilters = function(callback) {\n  (new FfmpegCommand()).availableFilters(callback);\n};\n\nFfmpegCommand.availableCodecs =\nFfmpegCommand.getAvailableCodecs = function(callback) {\n  (new FfmpegCommand()).availableCodecs(callback);\n};\n\nFfmpegCommand.availableFormats =\nFfmpegCommand.getAvailableFormats = function(callback) {\n  (new FfmpegCommand()).availableFormats(callback);\n};\n\nFfmpegCommand.availableEncoders =\nFfmpegCommand.getAvailableEncoders = function(callback) {\n  (new FfmpegCommand()).availableEncoders(callback);\n};\n\n\n/* Add ffprobe methods */\n\nrequire('./ffprobe')(FfmpegCommand.prototype);\n\nFfmpegCommand.ffprobe = function(file) {\n  var instance = new FfmpegCommand(file);\n  instance.ffprobe.apply(instance, Array.prototype.slice.call(arguments, 1));\n};\n\n/* Add processing recipes */\n\nrequire('./recipes')(FfmpegCommand.prototype);\n","/*jshint node:true*/\n'use strict';\n\nvar utils = require('../utils');\n\n\n/*\n *! Audio-related methods\n */\n\nmodule.exports = function(proto) {\n  /**\n   * Disable audio in the output\n   *\n   * @method FfmpegCommand#noAudio\n   * @category Audio\n   * @aliases withNoAudio\n   * @return FfmpegCommand\n   */\n  proto.withNoAudio =\n  proto.noAudio = function() {\n    this._currentOutput.audio.clear();\n    this._currentOutput.audioFilters.clear();\n    this._currentOutput.audio('-an');\n\n    return this;\n  };\n\n\n  /**\n   * Specify audio codec\n   *\n   * @method FfmpegCommand#audioCodec\n   * @category Audio\n   * @aliases withAudioCodec\n   *\n   * @param {String} codec audio codec name\n   * @return FfmpegCommand\n   */\n  proto.withAudioCodec =\n  proto.audioCodec = function(codec) {\n    this._currentOutput.audio('-acodec', codec);\n\n    return this;\n  };\n\n\n  /**\n   * Specify audio bitrate\n   *\n   * @method FfmpegCommand#audioBitrate\n   * @category Audio\n   * @aliases withAudioBitrate\n   *\n   * @param {String|Number} bitrate audio bitrate in kbps (with an optional 'k' suffix)\n   * @return FfmpegCommand\n   */\n  proto.withAudioBitrate =\n  proto.audioBitrate = function(bitrate) {\n    this._currentOutput.audio('-b:a', ('' + bitrate).replace(/k?$/, 'k'));\n    return this;\n  };\n\n\n  /**\n   * Specify audio channel count\n   *\n   * @method FfmpegCommand#audioChannels\n   * @category Audio\n   * @aliases withAudioChannels\n   *\n   * @param {Number} channels channel count\n   * @return FfmpegCommand\n   */\n  proto.withAudioChannels =\n  proto.audioChannels = function(channels) {\n    this._currentOutput.audio('-ac', channels);\n    return this;\n  };\n\n\n  /**\n   * Specify audio frequency\n   *\n   * @method FfmpegCommand#audioFrequency\n   * @category Audio\n   * @aliases withAudioFrequency\n   *\n   * @param {Number} freq audio frequency in Hz\n   * @return FfmpegCommand\n   */\n  proto.withAudioFrequency =\n  proto.audioFrequency = function(freq) {\n    this._currentOutput.audio('-ar', freq);\n    return this;\n  };\n\n\n  /**\n   * Specify audio quality\n   *\n   * @method FfmpegCommand#audioQuality\n   * @category Audio\n   * @aliases withAudioQuality\n   *\n   * @param {Number} quality audio quality factor\n   * @return FfmpegCommand\n   */\n  proto.withAudioQuality =\n  proto.audioQuality = function(quality) {\n    this._currentOutput.audio('-aq', quality);\n    return this;\n  };\n\n\n  /**\n   * Specify custom audio filter(s)\n   *\n   * Can be called both with one or many filters, or a filter array.\n   *\n   * @example\n   * command.audioFilters('filter1');\n   *\n   * @example\n   * command.audioFilters('filter1', 'filter2=param1=value1:param2=value2');\n   *\n   * @example\n   * command.audioFilters(['filter1', 'filter2']);\n   *\n   * @example\n   * command.audioFilters([\n   *   {\n   *     filter: 'filter1'\n   *   },\n   *   {\n   *     filter: 'filter2',\n   *     options: 'param=value:param=value'\n   *   }\n   * ]);\n   *\n   * @example\n   * command.audioFilters(\n   *   {\n   *     filter: 'filter1',\n   *     options: ['value1', 'value2']\n   *   },\n   *   {\n   *     filter: 'filter2',\n   *     options: { param1: 'value1', param2: 'value2' }\n   *   }\n   * );\n   *\n   * @method FfmpegCommand#audioFilters\n   * @aliases withAudioFilter,withAudioFilters,audioFilter\n   * @category Audio\n   *\n   * @param {...String|String[]|Object[]} filters audio filter strings, string array or\n   *   filter specification array, each with the following properties:\n   * @param {String} filters.filter filter name\n   * @param {String|String[]|Object} [filters.options] filter option string, array, or object\n   * @return FfmpegCommand\n   */\n  proto.withAudioFilter =\n  proto.withAudioFilters =\n  proto.audioFilter =\n  proto.audioFilters = function(filters) {\n    if (arguments.length > 1) {\n      filters = [].slice.call(arguments);\n    }\n\n    if (!Array.isArray(filters)) {\n      filters = [filters];\n    }\n\n    this._currentOutput.audioFilters(utils.makeFilterStrings(filters));\n    return this;\n  };\n};\n","/*jshint node:true*/\n'use strict';\n\nvar utils = require('../utils');\n\n\n/*\n *! Custom options methods\n */\n\nmodule.exports = function(proto) {\n  /**\n   * Add custom input option(s)\n   *\n   * When passing a single string or an array, each string containing two\n   * words is split (eg. inputOptions('-option value') is supported) for\n   * compatibility reasons.  This is not the case when passing more than\n   * one argument.\n   *\n   * @example\n   * command.inputOptions('option1');\n   *\n   * @example\n   * command.inputOptions('option1', 'option2');\n   *\n   * @example\n   * command.inputOptions(['option1', 'option2']);\n   *\n   * @method FfmpegCommand#inputOptions\n   * @category Custom options\n   * @aliases addInputOption,addInputOptions,withInputOption,withInputOptions,inputOption\n   *\n   * @param {...String} options option string(s) or string array\n   * @return FfmpegCommand\n   */\n  proto.addInputOption =\n  proto.addInputOptions =\n  proto.withInputOption =\n  proto.withInputOptions =\n  proto.inputOption =\n  proto.inputOptions = function(options) {\n    if (!this._currentInput) {\n      throw new Error('No input specified');\n    }\n\n    var doSplit = true;\n\n    if (arguments.length > 1) {\n      options = [].slice.call(arguments);\n      doSplit = false;\n    }\n\n    if (!Array.isArray(options)) {\n      options = [options];\n    }\n\n    this._currentInput.options(options.reduce(function(options, option) {\n      var split = String(option).split(' ');\n\n      if (doSplit && split.length === 2) {\n        options.push(split[0], split[1]);\n      } else {\n        options.push(option);\n      }\n\n      return options;\n    }, []));\n    return this;\n  };\n\n\n  /**\n   * Add custom output option(s)\n   *\n   * @example\n   * command.outputOptions('option1');\n   *\n   * @example\n   * command.outputOptions('option1', 'option2');\n   *\n   * @example\n   * command.outputOptions(['option1', 'option2']);\n   *\n   * @method FfmpegCommand#outputOptions\n   * @category Custom options\n   * @aliases addOutputOption,addOutputOptions,addOption,addOptions,withOutputOption,withOutputOptions,withOption,withOptions,outputOption\n   *\n   * @param {...String} options option string(s) or string array\n   * @return FfmpegCommand\n   */\n  proto.addOutputOption =\n  proto.addOutputOptions =\n  proto.addOption =\n  proto.addOptions =\n  proto.withOutputOption =\n  proto.withOutputOptions =\n  proto.withOption =\n  proto.withOptions =\n  proto.outputOption =\n  proto.outputOptions = function(options) {\n    var doSplit = true;\n\n    if (arguments.length > 1) {\n      options = [].slice.call(arguments);\n      doSplit = false;\n    }\n\n    if (!Array.isArray(options)) {\n      options = [options];\n    }\n\n    this._currentOutput.options(options.reduce(function(options, option) {\n      var split = String(option).split(' ');\n\n      if (doSplit && split.length === 2) {\n        options.push(split[0], split[1]);\n      } else {\n        options.push(option);\n      }\n\n      return options;\n    }, []));\n    return this;\n  };\n\n\n  /**\n   * Specify a complex filtergraph\n   *\n   * Calling this method will override any previously set filtergraph, but you can set\n   * as many filters as needed in one call.\n   *\n   * @example <caption>Overlay an image over a video (using a filtergraph string)</caption>\n   *   ffmpeg()\n   *     .input('video.avi')\n   *     .input('image.png')\n   *     .complexFilter('[0:v][1:v]overlay[out]', ['out']);\n   *\n   * @example <caption>Overlay an image over a video (using a filter array)</caption>\n   *   ffmpeg()\n   *     .input('video.avi')\n   *     .input('image.png')\n   *     .complexFilter([{\n   *       filter: 'overlay',\n   *       inputs: ['0:v', '1:v'],\n   *       outputs: ['out']\n   *     }], ['out']);\n   *\n   * @example <caption>Split video into RGB channels and output a 3x1 video with channels side to side</caption>\n   *  ffmpeg()\n   *    .input('video.avi')\n   *    .complexFilter([\n   *      // Duplicate video stream 3 times into streams a, b, and c\n   *      { filter: 'split', options: '3', outputs: ['a', 'b', 'c'] },\n   *\n   *      // Create stream 'red' by cancelling green and blue channels from stream 'a'\n   *      { filter: 'lutrgb', options: { g: 0, b: 0 }, inputs: 'a', outputs: 'red' },\n   *\n   *      // Create stream 'green' by cancelling red and blue channels from stream 'b'\n   *      { filter: 'lutrgb', options: { r: 0, b: 0 }, inputs: 'b', outputs: 'green' },\n   *\n   *      // Create stream 'blue' by cancelling red and green channels from stream 'c'\n   *      { filter: 'lutrgb', options: { r: 0, g: 0 }, inputs: 'c', outputs: 'blue' },\n   *\n   *      // Pad stream 'red' to 3x width, keeping the video on the left, and name output 'padded'\n   *      { filter: 'pad', options: { w: 'iw*3', h: 'ih' }, inputs: 'red', outputs: 'padded' },\n   *\n   *      // Overlay 'green' onto 'padded', moving it to the center, and name output 'redgreen'\n   *      { filter: 'overlay', options: { x: 'w', y: 0 }, inputs: ['padded', 'green'], outputs: 'redgreen'},\n   *\n   *      // Overlay 'blue' onto 'redgreen', moving it to the right\n   *      { filter: 'overlay', options: { x: '2*w', y: 0 }, inputs: ['redgreen', 'blue']},\n   *    ]);\n   *\n   * @method FfmpegCommand#complexFilter\n   * @category Custom options\n   * @aliases filterGraph\n   *\n   * @param {String|Array} spec filtergraph string or array of filter specification\n   *   objects, each having the following properties:\n   * @param {String} spec.filter filter name\n   * @param {String|Array} [spec.inputs] (array of) input stream specifier(s) for the filter,\n   *   defaults to ffmpeg automatically choosing the first unused matching streams\n   * @param {String|Array} [spec.outputs] (array of) output stream specifier(s) for the filter,\n   *   defaults to ffmpeg automatically assigning the output to the output file\n   * @param {Object|String|Array} [spec.options] filter options, can be omitted to not set any options\n   * @param {Array} [map] (array of) stream specifier(s) from the graph to include in\n   *   ffmpeg output, defaults to ffmpeg automatically choosing the first matching streams.\n   * @return FfmpegCommand\n   */\n  proto.filterGraph =\n  proto.complexFilter = function(spec, map) {\n    this._complexFilters.clear();\n\n    if (!Array.isArray(spec)) {\n      spec = [spec];\n    }\n\n    this._complexFilters('-filter_complex', utils.makeFilterStrings(spec).join(';'));\n\n    if (Array.isArray(map)) {\n      var self = this;\n      map.forEach(function(streamSpec) {\n        self._complexFilters('-map', streamSpec.replace(utils.streamRegexp, '[$1]'));\n      });\n    } else if (typeof map === 'string') {\n      this._complexFilters('-map', map.replace(utils.streamRegexp, '[$1]'));\n    }\n\n    return this;\n  };\n};\n","/*jshint node:true*/\n'use strict';\n\nvar utils = require('../utils');\n\n/*\n *! Input-related methods\n */\n\nmodule.exports = function(proto) {\n  /**\n   * Add an input to command\n   *\n   * Also switches \"current input\", that is the input that will be affected\n   * by subsequent input-related methods.\n   *\n   * Note: only one stream input is supported for now.\n   *\n   * @method FfmpegCommand#input\n   * @category Input\n   * @aliases mergeAdd,addInput\n   *\n   * @param {String|Readable} source input file path or readable stream\n   * @return FfmpegCommand\n   */\n  proto.mergeAdd =\n  proto.addInput =\n  proto.input = function(source) {\n    var isFile = false;\n    var isStream = false;\n\n    if (typeof source !== 'string') {\n      if (!('readable' in source) || !(source.readable)) {\n        throw new Error('Invalid input');\n      }\n\n      var hasInputStream = this._inputs.some(function(input) {\n        return input.isStream;\n      });\n\n      if (hasInputStream) {\n        throw new Error('Only one input stream is supported');\n      }\n\n      isStream = true;\n      source.pause();\n    } else {\n      var protocol = source.match(/^([a-z]{2,}):/i);\n      isFile = !protocol || protocol[0] === 'file';\n    }\n\n    this._inputs.push(this._currentInput = {\n      source: source,\n      isFile: isFile,\n      isStream: isStream,\n      options: utils.args()\n    });\n\n    return this;\n  };\n\n\n  /**\n   * Specify input format for the last specified input\n   *\n   * @method FfmpegCommand#inputFormat\n   * @category Input\n   * @aliases withInputFormat,fromFormat\n   *\n   * @param {String} format input format\n   * @return FfmpegCommand\n   */\n  proto.withInputFormat =\n  proto.inputFormat =\n  proto.fromFormat = function(format) {\n    if (!this._currentInput) {\n      throw new Error('No input specified');\n    }\n\n    this._currentInput.options('-f', format);\n    return this;\n  };\n\n\n  /**\n   * Specify input FPS for the last specified input\n   * (only valid for raw video formats)\n   *\n   * @method FfmpegCommand#inputFps\n   * @category Input\n   * @aliases withInputFps,withInputFPS,withFpsInput,withFPSInput,inputFPS,inputFps,fpsInput\n   *\n   * @param {Number} fps input FPS\n   * @return FfmpegCommand\n   */\n  proto.withInputFps =\n  proto.withInputFPS =\n  proto.withFpsInput =\n  proto.withFPSInput =\n  proto.inputFPS =\n  proto.inputFps =\n  proto.fpsInput =\n  proto.FPSInput = function(fps) {\n    if (!this._currentInput) {\n      throw new Error('No input specified');\n    }\n\n    this._currentInput.options('-r', fps);\n    return this;\n  };\n\n\n  /**\n   * Use native framerate for the last specified input\n   *\n   * @method FfmpegCommand#native\n   * @category Input\n   * @aliases nativeFramerate,withNativeFramerate\n   *\n   * @return FfmmegCommand\n   */\n  proto.nativeFramerate =\n  proto.withNativeFramerate =\n  proto.native = function() {\n    if (!this._currentInput) {\n      throw new Error('No input specified');\n    }\n\n    this._currentInput.options('-re');\n    return this;\n  };\n\n\n  /**\n   * Specify input seek time for the last specified input\n   *\n   * @method FfmpegCommand#seekInput\n   * @category Input\n   * @aliases setStartTime,seekTo\n   *\n   * @param {String|Number} seek seek time in seconds or as a '[hh:[mm:]]ss[.xxx]' string\n   * @return FfmpegCommand\n   */\n  proto.setStartTime =\n  proto.seekInput = function(seek) {\n    if (!this._currentInput) {\n      throw new Error('No input specified');\n    }\n\n    this._currentInput.options('-ss', seek);\n\n    return this;\n  };\n\n\n  /**\n   * Loop over the last specified input\n   *\n   * @method FfmpegCommand#loop\n   * @category Input\n   *\n   * @param {String|Number} [duration] loop duration in seconds or as a '[[hh:]mm:]ss[.xxx]' string\n   * @return FfmpegCommand\n   */\n  proto.loop = function(duration) {\n    if (!this._currentInput) {\n      throw new Error('No input specified');\n    }\n\n    this._currentInput.options('-loop', '1');\n\n    if (typeof duration !== 'undefined') {\n      this.duration(duration);\n    }\n\n    return this;\n  };\n};\n","/*jshint node:true*/\n'use strict';\n\nvar path = require('path');\n\n/*\n *! Miscellaneous methods\n */\n\nmodule.exports = function(proto) {\n  /**\n   * Use preset\n   *\n   * @method FfmpegCommand#preset\n   * @category Miscellaneous\n   * @aliases usingPreset\n   *\n   * @param {String|Function} preset preset name or preset function\n   */\n  proto.usingPreset =\n  proto.preset = function(preset) {\n    if (typeof preset === 'function') {\n      preset(this);\n    } else {\n      try {\n        var modulePath = path.join(this.options.presets, preset);\n        var module = require(modulePath);\n\n        if (typeof module.load === 'function') {\n          module.load(this);\n        } else {\n          throw new Error('preset ' + modulePath + ' has no load() function');\n        }\n      } catch (err) {\n        throw new Error('preset ' + modulePath + ' could not be loaded: ' + err.message);\n      }\n    }\n\n    return this;\n  };\n};\n","/*jshint node:true*/\n'use strict';\n\nvar utils = require('../utils');\n\n\n/*\n *! Output-related methods\n */\n\nmodule.exports = function(proto) {\n  /**\n   * Add output\n   *\n   * @method FfmpegCommand#output\n   * @category Output\n   * @aliases addOutput\n   *\n   * @param {String|Writable} target target file path or writable stream\n   * @param {Object} [pipeopts={}] pipe options (only applies to streams)\n   * @return FfmpegCommand\n   */\n  proto.addOutput =\n  proto.output = function(target, pipeopts) {\n    var isFile = false;\n\n    if (!target && this._currentOutput) {\n      // No target is only allowed when called from constructor\n      throw new Error('Invalid output');\n    }\n\n    if (target && typeof target !== 'string') {\n      if (!('writable' in target) || !(target.writable)) {\n        throw new Error('Invalid output');\n      }\n    } else if (typeof target === 'string') {\n      var protocol = target.match(/^([a-z]{2,}):/i);\n      isFile = !protocol || protocol[0] === 'file';\n    }\n\n    if (target && !('target' in this._currentOutput)) {\n      // For backwards compatibility, set target for first output\n      this._currentOutput.target = target;\n      this._currentOutput.isFile = isFile;\n      this._currentOutput.pipeopts = pipeopts || {};\n    } else {\n      if (target && typeof target !== 'string') {\n        var hasOutputStream = this._outputs.some(function(output) {\n          return typeof output.target !== 'string';\n        });\n\n        if (hasOutputStream) {\n          throw new Error('Only one output stream is supported');\n        }\n      }\n\n      this._outputs.push(this._currentOutput = {\n        target: target,\n        isFile: isFile,\n        flags: {},\n        pipeopts: pipeopts || {}\n      });\n\n      var self = this;\n      ['audio', 'audioFilters', 'video', 'videoFilters', 'sizeFilters', 'options'].forEach(function(key) {\n        self._currentOutput[key] = utils.args();\n      });\n\n      if (!target) {\n        // Call from constructor: remove target key\n        delete this._currentOutput.target;\n      }\n    }\n\n    return this;\n  };\n\n\n  /**\n   * Specify output seek time\n   *\n   * @method FfmpegCommand#seek\n   * @category Input\n   * @aliases seekOutput\n   *\n   * @param {String|Number} seek seek time in seconds or as a '[hh:[mm:]]ss[.xxx]' string\n   * @return FfmpegCommand\n   */\n  proto.seekOutput =\n  proto.seek = function(seek) {\n    this._currentOutput.options('-ss', seek);\n    return this;\n  };\n\n\n  /**\n   * Set output duration\n   *\n   * @method FfmpegCommand#duration\n   * @category Output\n   * @aliases withDuration,setDuration\n   *\n   * @param {String|Number} duration duration in seconds or as a '[[hh:]mm:]ss[.xxx]' string\n   * @return FfmpegCommand\n   */\n  proto.withDuration =\n  proto.setDuration =\n  proto.duration = function(duration) {\n    this._currentOutput.options('-t', duration);\n    return this;\n  };\n\n\n  /**\n   * Set output format\n   *\n   * @method FfmpegCommand#format\n   * @category Output\n   * @aliases toFormat,withOutputFormat,outputFormat\n   *\n   * @param {String} format output format name\n   * @return FfmpegCommand\n   */\n  proto.toFormat =\n  proto.withOutputFormat =\n  proto.outputFormat =\n  proto.format = function(format) {\n    this._currentOutput.options('-f', format);\n    return this;\n  };\n\n\n  /**\n   * Add stream mapping to output\n   *\n   * @method FfmpegCommand#map\n   * @category Output\n   *\n   * @param {String} spec stream specification string, with optional square brackets\n   * @return FfmpegCommand\n   */\n  proto.map = function(spec) {\n    this._currentOutput.options('-map', spec.replace(utils.streamRegexp, '[$1]'));\n    return this;\n  };\n\n\n  /**\n   * Run flvtool2/flvmeta on output\n   *\n   * @method FfmpegCommand#flvmeta\n   * @category Output\n   * @aliases updateFlvMetadata\n   *\n   * @return FfmpegCommand\n   */\n  proto.updateFlvMetadata =\n  proto.flvmeta = function() {\n    this._currentOutput.flags.flvmeta = true;\n    return this;\n  };\n};\n","/*jshint node:true*/\n'use strict';\n\nvar utils = require('../utils');\n\n\n/*\n *! Video-related methods\n */\n\nmodule.exports = function(proto) {\n  /**\n   * Disable video in the output\n   *\n   * @method FfmpegCommand#noVideo\n   * @category Video\n   * @aliases withNoVideo\n   *\n   * @return FfmpegCommand\n   */\n  proto.withNoVideo =\n  proto.noVideo = function() {\n    this._currentOutput.video.clear();\n    this._currentOutput.videoFilters.clear();\n    this._currentOutput.video('-vn');\n\n    return this;\n  };\n\n\n  /**\n   * Specify video codec\n   *\n   * @method FfmpegCommand#videoCodec\n   * @category Video\n   * @aliases withVideoCodec\n   *\n   * @param {String} codec video codec name\n   * @return FfmpegCommand\n   */\n  proto.withVideoCodec =\n  proto.videoCodec = function(codec) {\n    this._currentOutput.video('-vcodec', codec);\n    return this;\n  };\n\n\n  /**\n   * Specify video bitrate\n   *\n   * @method FfmpegCommand#videoBitrate\n   * @category Video\n   * @aliases withVideoBitrate\n   *\n   * @param {String|Number} bitrate video bitrate in kbps (with an optional 'k' suffix)\n   * @param {Boolean} [constant=false] enforce constant bitrate\n   * @return FfmpegCommand\n   */\n  proto.withVideoBitrate =\n  proto.videoBitrate = function(bitrate, constant) {\n    bitrate = ('' + bitrate).replace(/k?$/, 'k');\n\n    this._currentOutput.video('-b:v', bitrate);\n    if (constant) {\n      this._currentOutput.video(\n        '-maxrate', bitrate,\n        '-minrate', bitrate,\n        '-bufsize', '3M'\n      );\n    }\n\n    return this;\n  };\n\n\n  /**\n   * Specify custom video filter(s)\n   *\n   * Can be called both with one or many filters, or a filter array.\n   *\n   * @example\n   * command.videoFilters('filter1');\n   *\n   * @example\n   * command.videoFilters('filter1', 'filter2=param1=value1:param2=value2');\n   *\n   * @example\n   * command.videoFilters(['filter1', 'filter2']);\n   *\n   * @example\n   * command.videoFilters([\n   *   {\n   *     filter: 'filter1'\n   *   },\n   *   {\n   *     filter: 'filter2',\n   *     options: 'param=value:param=value'\n   *   }\n   * ]);\n   *\n   * @example\n   * command.videoFilters(\n   *   {\n   *     filter: 'filter1',\n   *     options: ['value1', 'value2']\n   *   },\n   *   {\n   *     filter: 'filter2',\n   *     options: { param1: 'value1', param2: 'value2' }\n   *   }\n   * );\n   *\n   * @method FfmpegCommand#videoFilters\n   * @category Video\n   * @aliases withVideoFilter,withVideoFilters,videoFilter\n   *\n   * @param {...String|String[]|Object[]} filters video filter strings, string array or\n   *   filter specification array, each with the following properties:\n   * @param {String} filters.filter filter name\n   * @param {String|String[]|Object} [filters.options] filter option string, array, or object\n   * @return FfmpegCommand\n   */\n  proto.withVideoFilter =\n  proto.withVideoFilters =\n  proto.videoFilter =\n  proto.videoFilters = function(filters) {\n    if (arguments.length > 1) {\n      filters = [].slice.call(arguments);\n    }\n\n    if (!Array.isArray(filters)) {\n      filters = [filters];\n    }\n\n    this._currentOutput.videoFilters(utils.makeFilterStrings(filters));\n\n    return this;\n  };\n\n\n  /**\n   * Specify output FPS\n   *\n   * @method FfmpegCommand#fps\n   * @category Video\n   * @aliases withOutputFps,withOutputFPS,withFpsOutput,withFPSOutput,withFps,withFPS,outputFPS,outputFps,fpsOutput,FPSOutput,FPS\n   *\n   * @param {Number} fps output FPS\n   * @return FfmpegCommand\n   */\n  proto.withOutputFps =\n  proto.withOutputFPS =\n  proto.withFpsOutput =\n  proto.withFPSOutput =\n  proto.withFps =\n  proto.withFPS =\n  proto.outputFPS =\n  proto.outputFps =\n  proto.fpsOutput =\n  proto.FPSOutput =\n  proto.fps =\n  proto.FPS = function(fps) {\n    this._currentOutput.video('-r', fps);\n    return this;\n  };\n\n\n  /**\n   * Only transcode a certain number of frames\n   *\n   * @method FfmpegCommand#frames\n   * @category Video\n   * @aliases takeFrames,withFrames\n   *\n   * @param {Number} frames frame count\n   * @return FfmpegCommand\n   */\n  proto.takeFrames =\n  proto.withFrames =\n  proto.frames = function(frames) {\n    this._currentOutput.video('-vframes', frames);\n    return this;\n  };\n};\n","/*jshint node:true*/\n'use strict';\n\n/*\n *! Size helpers\n */\n\n\n/**\n * Return filters to pad video to width*height,\n *\n * @param {Number} width output width\n * @param {Number} height output height\n * @param {Number} aspect video aspect ratio (without padding)\n * @param {Number} color padding color\n * @return scale/pad filters\n * @private\n */\nfunction getScalePadFilters(width, height, aspect, color) {\n  /*\n    let a be the input aspect ratio, A be the requested aspect ratio\n\n    if a > A, padding is done on top and bottom\n    if a < A, padding is done on left and right\n   */\n\n  return [\n    /*\n      In both cases, we first have to scale the input to match the requested size.\n      When using computed width/height, we truncate them to multiples of 2\n     */\n    {\n      filter: 'scale',\n      options: {\n        w: 'if(gt(a,' + aspect + '),' + width + ',trunc(' + height + '*a/2)*2)',\n        h: 'if(lt(a,' + aspect + '),' + height + ',trunc(' + width + '/a/2)*2)'\n      }\n    },\n\n    /*\n      Then we pad the scaled input to match the target size\n      (here iw and ih refer to the padding input, i.e the scaled output)\n     */\n\n    {\n      filter: 'pad',\n      options: {\n        w: width,\n        h: height,\n        x: 'if(gt(a,' + aspect + '),0,(' + width + '-iw)/2)',\n        y: 'if(lt(a,' + aspect + '),0,(' + height + '-ih)/2)',\n        color: color\n      }\n    }\n  ];\n}\n\n\n/**\n * Recompute size filters\n *\n * @param {Object} output\n * @param {String} key newly-added parameter name ('size', 'aspect' or 'pad')\n * @param {String} value newly-added parameter value\n * @return filter string array\n * @private\n */\nfunction createSizeFilters(output, key, value) {\n  // Store parameters\n  var data = output.sizeData = output.sizeData || {};\n  data[key] = value;\n\n  if (!('size' in data)) {\n    // No size requested, keep original size\n    return [];\n  }\n\n  // Try to match the different size string formats\n  var fixedSize = data.size.match(/([0-9]+)x([0-9]+)/);\n  var fixedWidth = data.size.match(/([0-9]+)x\\?/);\n  var fixedHeight = data.size.match(/\\?x([0-9]+)/);\n  var percentRatio = data.size.match(/\\b([0-9]{1,3})%/);\n  var width, height, aspect;\n\n  if (percentRatio) {\n    var ratio = Number(percentRatio[1]) / 100;\n    return [{\n      filter: 'scale',\n      options: {\n        w: 'trunc(iw*' + ratio + '/2)*2',\n        h: 'trunc(ih*' + ratio + '/2)*2'\n      }\n    }];\n  } else if (fixedSize) {\n    // Round target size to multiples of 2\n    width = Math.round(Number(fixedSize[1]) / 2) * 2;\n    height = Math.round(Number(fixedSize[2]) / 2) * 2;\n\n    aspect = width / height;\n\n    if (data.pad) {\n      return getScalePadFilters(width, height, aspect, data.pad);\n    } else {\n      // No autopad requested, rescale to target size\n      return [{ filter: 'scale', options: { w: width, h: height }}];\n    }\n  } else if (fixedWidth || fixedHeight) {\n    if ('aspect' in data) {\n      // Specified aspect ratio\n      width = fixedWidth ? fixedWidth[1] : Math.round(Number(fixedHeight[1]) * data.aspect);\n      height = fixedHeight ? fixedHeight[1] : Math.round(Number(fixedWidth[1]) / data.aspect);\n\n      // Round to multiples of 2\n      width = Math.round(width / 2) * 2;\n      height = Math.round(height / 2) * 2;\n\n      if (data.pad) {\n        return getScalePadFilters(width, height, data.aspect, data.pad);\n      } else {\n        // No autopad requested, rescale to target size\n        return [{ filter: 'scale', options: { w: width, h: height }}];\n      }\n    } else {\n      // Keep input aspect ratio\n\n      if (fixedWidth) {\n        return [{\n          filter: 'scale',\n          options: {\n            w: Math.round(Number(fixedWidth[1]) / 2) * 2,\n            h: 'trunc(ow/a/2)*2'\n          }\n        }];\n      } else {\n        return [{\n          filter: 'scale',\n          options: {\n            w: 'trunc(oh*a/2)*2',\n            h: Math.round(Number(fixedHeight[1]) / 2) * 2\n          }\n        }];\n      }\n    }\n  } else {\n    throw new Error('Invalid size specified: ' + data.size);\n  }\n}\n\n\n/*\n *! Video size-related methods\n */\n\nmodule.exports = function(proto) {\n  /**\n   * Keep display aspect ratio\n   *\n   * This method is useful when converting an input with non-square pixels to an output format\n   * that does not support non-square pixels.  It rescales the input so that the display aspect\n   * ratio is the same.\n   *\n   * @method FfmpegCommand#keepDAR\n   * @category Video size\n   * @aliases keepPixelAspect,keepDisplayAspect,keepDisplayAspectRatio\n   *\n   * @return FfmpegCommand\n   */\n  proto.keepPixelAspect = // Only for compatibility, this is not about keeping _pixel_ aspect ratio\n  proto.keepDisplayAspect =\n  proto.keepDisplayAspectRatio =\n  proto.keepDAR = function() {\n    return this.videoFilters([\n      {\n        filter: 'scale',\n        options: {\n          w: 'if(gt(sar,1),iw*sar,iw)',\n          h: 'if(lt(sar,1),ih/sar,ih)'\n        }\n      },\n      {\n        filter: 'setsar',\n        options: '1'\n      }\n    ]);\n  };\n\n\n  /**\n   * Set output size\n   *\n   * The 'size' parameter can have one of 4 forms:\n   * - 'X%': rescale to xx % of the original size\n   * - 'WxH': specify width and height\n   * - 'Wx?': specify width and compute height from input aspect ratio\n   * - '?xH': specify height and compute width from input aspect ratio\n   *\n   * Note: both dimensions will be truncated to multiples of 2.\n   *\n   * @method FfmpegCommand#size\n   * @category Video size\n   * @aliases withSize,setSize\n   *\n   * @param {String} size size string, eg. '33%', '320x240', '320x?', '?x240'\n   * @return FfmpegCommand\n   */\n  proto.withSize =\n  proto.setSize =\n  proto.size = function(size) {\n    var filters = createSizeFilters(this._currentOutput, 'size', size);\n\n    this._currentOutput.sizeFilters.clear();\n    this._currentOutput.sizeFilters(filters);\n\n    return this;\n  };\n\n\n  /**\n   * Set output aspect ratio\n   *\n   * @method FfmpegCommand#aspect\n   * @category Video size\n   * @aliases withAspect,withAspectRatio,setAspect,setAspectRatio,aspectRatio\n   *\n   * @param {String|Number} aspect aspect ratio (number or 'X:Y' string)\n   * @return FfmpegCommand\n   */\n  proto.withAspect =\n  proto.withAspectRatio =\n  proto.setAspect =\n  proto.setAspectRatio =\n  proto.aspect =\n  proto.aspectRatio = function(aspect) {\n    var a = Number(aspect);\n    if (isNaN(a)) {\n      var match = aspect.match(/^(\\d+):(\\d+)$/);\n      if (match) {\n        a = Number(match[1]) / Number(match[2]);\n      } else {\n        throw new Error('Invalid aspect ratio: ' + aspect);\n      }\n    }\n\n    var filters = createSizeFilters(this._currentOutput, 'aspect', a);\n\n    this._currentOutput.sizeFilters.clear();\n    this._currentOutput.sizeFilters(filters);\n\n    return this;\n  };\n\n\n  /**\n   * Enable auto-padding the output\n   *\n   * @method FfmpegCommand#autopad\n   * @category Video size\n   * @aliases applyAutopadding,applyAutoPadding,applyAutopad,applyAutoPad,withAutopadding,withAutoPadding,withAutopad,withAutoPad,autoPad\n   *\n   * @param {Boolean} [pad=true] enable/disable auto-padding\n   * @param {String} [color='black'] pad color\n   */\n  proto.applyAutopadding =\n  proto.applyAutoPadding =\n  proto.applyAutopad =\n  proto.applyAutoPad =\n  proto.withAutopadding =\n  proto.withAutoPadding =\n  proto.withAutopad =\n  proto.withAutoPad =\n  proto.autoPad =\n  proto.autopad = function(pad, color) {\n    // Allow autopad(color)\n    if (typeof pad === 'string') {\n      color = pad;\n      pad = true;\n    }\n\n    // Allow autopad() and autopad(undefined, color)\n    if (typeof pad === 'undefined') {\n      pad = true;\n    }\n\n    var filters = createSizeFilters(this._currentOutput, 'pad', pad ? color || 'black' : false);\n\n    this._currentOutput.sizeFilters.clear();\n    this._currentOutput.sizeFilters(filters);\n\n    return this;\n  };\n};\n","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => [];\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 9985;\nmodule.exports = webpackEmptyContext;","/*jshint node:true*/\n'use strict';\n\nvar spawn = require('child_process').spawn;\nvar path = require('path');\nvar fs = require('fs');\nvar async = require('async');\nvar utils = require('./utils');\n\nvar nlRegexp = /\\r\\n|\\r|\\n/g;\n\n/*\n *! Processor methods\n */\n\n\n/**\n * Run ffprobe asynchronously and store data in command\n *\n * @param {FfmpegCommand} command\n * @private\n */\nfunction runFfprobe(command) {\n  const inputProbeIndex = 0;\n  if (command._inputs[inputProbeIndex].isStream) {\n    // Don't probe input streams as this will consume them\n    return;\n  }\n  command.ffprobe(inputProbeIndex, function(err, data) {\n    command._ffprobeData = data;\n  });\n}\n\n\nmodule.exports = function(proto) {\n  /**\n   * Emitted just after ffmpeg has been spawned.\n   *\n   * @event FfmpegCommand#start\n   * @param {String} command ffmpeg command line\n   */\n\n  /**\n   * Emitted when ffmpeg reports progress information\n   *\n   * @event FfmpegCommand#progress\n   * @param {Object} progress progress object\n   * @param {Number} progress.frames number of frames transcoded\n   * @param {Number} progress.currentFps current processing speed in frames per second\n   * @param {Number} progress.currentKbps current output generation speed in kilobytes per second\n   * @param {Number} progress.targetSize current output file size\n   * @param {String} progress.timemark current video timemark\n   * @param {Number} [progress.percent] processing progress (may not be available depending on input)\n   */\n\n  /**\n   * Emitted when ffmpeg outputs to stderr\n   *\n   * @event FfmpegCommand#stderr\n   * @param {String} line stderr output line\n   */\n\n  /**\n   * Emitted when ffmpeg reports input codec data\n   *\n   * @event FfmpegCommand#codecData\n   * @param {Object} codecData codec data object\n   * @param {String} codecData.format input format name\n   * @param {String} codecData.audio input audio codec name\n   * @param {String} codecData.audio_details input audio codec parameters\n   * @param {String} codecData.video input video codec name\n   * @param {String} codecData.video_details input video codec parameters\n   */\n\n  /**\n   * Emitted when an error happens when preparing or running a command\n   *\n   * @event FfmpegCommand#error\n   * @param {Error} error error object, with optional properties 'inputStreamError' / 'outputStreamError' for errors on their respective streams\n   * @param {String|null} stdout ffmpeg stdout, unless outputting to a stream\n   * @param {String|null} stderr ffmpeg stderr\n   */\n\n  /**\n   * Emitted when a command finishes processing\n   *\n   * @event FfmpegCommand#end\n   * @param {Array|String|null} [filenames|stdout] generated filenames when taking screenshots, ffmpeg stdout when not outputting to a stream, null otherwise\n   * @param {String|null} stderr ffmpeg stderr\n   */\n\n\n  /**\n   * Spawn an ffmpeg process\n   *\n   * The 'options' argument may contain the following keys:\n   * - 'niceness': specify process niceness, ignored on Windows (default: 0)\n   * - `cwd`: change working directory\n   * - 'captureStdout': capture stdout and pass it to 'endCB' as its 2nd argument (default: false)\n   * - 'stdoutLines': override command limit (default: use command limit)\n   *\n   * The 'processCB' callback, if present, is called as soon as the process is created and\n   * receives a nodejs ChildProcess object.  It may not be called at all if an error happens\n   * before spawning the process.\n   *\n   * The 'endCB' callback is called either when an error occurs or when the ffmpeg process finishes.\n   *\n   * @method FfmpegCommand#_spawnFfmpeg\n   * @param {Array} args ffmpeg command line argument list\n   * @param {Object} [options] spawn options (see above)\n   * @param {Function} [processCB] callback called with process object and stdout/stderr ring buffers when process has been created\n   * @param {Function} endCB callback called with error (if applicable) and stdout/stderr ring buffers when process finished\n   * @private\n   */\n  proto._spawnFfmpeg = function(args, options, processCB, endCB) {\n    // Enable omitting options\n    if (typeof options === 'function') {\n      endCB = processCB;\n      processCB = options;\n      options = {};\n    }\n\n    // Enable omitting processCB\n    if (typeof endCB === 'undefined') {\n      endCB = processCB;\n      processCB = function() {};\n    }\n\n    var maxLines = 'stdoutLines' in options ? options.stdoutLines : this.options.stdoutLines;\n\n    // Find ffmpeg\n    this._getFfmpegPath(function(err, command) {\n      if (err) {\n        return endCB(err);\n      } else if (!command || command.length === 0) {\n        return endCB(new Error('Cannot find ffmpeg'));\n      }\n\n      // Apply niceness\n      if (options.niceness && options.niceness !== 0 && !utils.isWindows) {\n        args.unshift('-n', options.niceness, command);\n        command = 'nice';\n      }\n\n      var stdoutRing = utils.linesRing(maxLines);\n      var stdoutClosed = false;\n\n      var stderrRing = utils.linesRing(maxLines);\n      var stderrClosed = false;\n\n      // Spawn process\n      var ffmpegProc = spawn(command, args, options);\n\n      if (ffmpegProc.stderr) {\n        ffmpegProc.stderr.setEncoding('utf8');\n      }\n\n      ffmpegProc.on('error', function(err) {\n        endCB(err);\n      });\n\n      // Ensure we wait for captured streams to end before calling endCB\n      var exitError = null;\n      function handleExit(err) {\n        if (err) {\n          exitError = err;\n        }\n\n        if (processExited && (stdoutClosed || !options.captureStdout) && stderrClosed) {\n          endCB(exitError, stdoutRing, stderrRing);\n        }\n      }\n\n      // Handle process exit\n      var processExited = false;\n      ffmpegProc.on('exit', function(code, signal) {\n        processExited = true;\n\n        if (signal) {\n          handleExit(new Error('ffmpeg was killed with signal ' + signal));\n        } else if (code) {\n          handleExit(new Error('ffmpeg exited with code ' + code));\n        } else {\n          handleExit();\n        }\n      });\n\n      // Capture stdout if specified\n      if (options.captureStdout) {\n        ffmpegProc.stdout.on('data', function(data) {\n          stdoutRing.append(data);\n        });\n\n        ffmpegProc.stdout.on('close', function() {\n          stdoutRing.close();\n          stdoutClosed = true;\n          handleExit();\n        });\n      }\n\n      // Capture stderr if specified\n      ffmpegProc.stderr.on('data', function(data) {\n        stderrRing.append(data);\n      });\n\n      ffmpegProc.stderr.on('close', function() {\n        stderrRing.close();\n        stderrClosed = true;\n        handleExit();\n      });\n\n      // Call process callback\n      processCB(ffmpegProc, stdoutRing, stderrRing);\n    });\n  };\n\n\n  /**\n   * Build the argument list for an ffmpeg command\n   *\n   * @method FfmpegCommand#_getArguments\n   * @return argument list\n   * @private\n   */\n  proto._getArguments = function() {\n    var complexFilters = this._complexFilters.get();\n\n    var fileOutput = this._outputs.some(function(output) {\n      return output.isFile;\n    });\n\n    return [].concat(\n        // Inputs and input options\n        this._inputs.reduce(function(args, input) {\n          var source = (typeof input.source === 'string') ? input.source : 'pipe:0';\n\n          // For each input, add input options, then '-i <source>'\n          return args.concat(\n            input.options.get(),\n            ['-i', source]\n          );\n        }, []),\n\n        // Global options\n        this._global.get(),\n\n        // Overwrite if we have file outputs\n        fileOutput ? ['-y'] : [],\n\n        // Complex filters\n        complexFilters,\n\n        // Outputs, filters and output options\n        this._outputs.reduce(function(args, output) {\n          var sizeFilters = utils.makeFilterStrings(output.sizeFilters.get());\n          var audioFilters = output.audioFilters.get();\n          var videoFilters = output.videoFilters.get().concat(sizeFilters);\n          var outputArg;\n\n          if (!output.target) {\n            outputArg = [];\n          } else if (typeof output.target === 'string') {\n            outputArg = [output.target];\n          } else {\n            outputArg = ['pipe:1'];\n          }\n\n          return args.concat(\n            output.audio.get(),\n            audioFilters.length ? ['-filter:a', audioFilters.join(',')] : [],\n            output.video.get(),\n            videoFilters.length ? ['-filter:v', videoFilters.join(',')] : [],\n            output.options.get(),\n            outputArg\n          );\n        }, [])\n      );\n  };\n\n\n  /**\n   * Prepare execution of an ffmpeg command\n   *\n   * Checks prerequisites for the execution of the command (codec/format availability, flvtool...),\n   * then builds the argument list for ffmpeg and pass them to 'callback'.\n   *\n   * @method FfmpegCommand#_prepare\n   * @param {Function} callback callback with signature (err, args)\n   * @param {Boolean} [readMetadata=false] read metadata before processing\n   * @private\n   */\n  proto._prepare = function(callback, readMetadata) {\n    var self = this;\n\n    async.waterfall([\n      // Check codecs and formats\n      function(cb) {\n        self._checkCapabilities(cb);\n      },\n\n      // Read metadata if required\n      function(cb) {\n        if (!readMetadata) {\n          return cb();\n        }\n\n        self.ffprobe(0, function(err, data) {\n          if (!err) {\n            self._ffprobeData = data;\n          }\n\n          cb();\n        });\n      },\n\n      // Check for flvtool2/flvmeta if necessary\n      function(cb) {\n        var flvmeta = self._outputs.some(function(output) {\n          // Remove flvmeta flag on non-file output\n          if (output.flags.flvmeta && !output.isFile) {\n            self.logger.warn('Updating flv metadata is only supported for files');\n            output.flags.flvmeta = false;\n          }\n\n          return output.flags.flvmeta;\n        });\n\n        if (flvmeta) {\n          self._getFlvtoolPath(function(err) {\n            cb(err);\n          });\n        } else {\n          cb();\n        }\n      },\n\n      // Build argument list\n      function(cb) {\n        var args;\n        try {\n          args = self._getArguments();\n        } catch(e) {\n          return cb(e);\n        }\n\n        cb(null, args);\n      },\n\n      // Add \"-strict experimental\" option where needed\n      function(args, cb) {\n        self.availableEncoders(function(err, encoders) {\n          for (var i = 0; i < args.length; i++) {\n            if (args[i] === '-acodec' || args[i] === '-vcodec') {\n              i++;\n\n              if ((args[i] in encoders) && encoders[args[i]].experimental) {\n                args.splice(i + 1, 0, '-strict', 'experimental');\n                i += 2;\n              }\n            }\n          }\n\n          cb(null, args);\n        });\n      }\n    ], callback);\n\n    if (!readMetadata) {\n      // Read metadata as soon as 'progress' listeners are added\n\n      if (this.listeners('progress').length > 0) {\n        // Read metadata in parallel\n        runFfprobe(this);\n      } else {\n        // Read metadata as soon as the first 'progress' listener is added\n        this.once('newListener', function(event) {\n          if (event === 'progress') {\n            runFfprobe(this);\n          }\n        });\n      }\n    }\n  };\n\n\n  /**\n   * Run ffmpeg command\n   *\n   * @method FfmpegCommand#run\n   * @category Processing\n   * @aliases exec,execute\n   */\n  proto.exec =\n  proto.execute =\n  proto.run = function() {\n    var self = this;\n\n    // Check if at least one output is present\n    var outputPresent = this._outputs.some(function(output) {\n      return 'target' in output;\n    });\n\n    if (!outputPresent) {\n      throw new Error('No output specified');\n    }\n\n    // Get output stream if any\n    var outputStream = this._outputs.filter(function(output) {\n      return typeof output.target !== 'string';\n    })[0];\n\n    // Get input stream if any\n    var inputStream = this._inputs.filter(function(input) {\n      return typeof input.source !== 'string';\n    })[0];\n\n    // Ensure we send 'end' or 'error' only once\n    var ended = false;\n    function emitEnd(err, stdout, stderr) {\n      if (!ended) {\n        ended = true;\n\n        if (err) {\n          self.emit('error', err, stdout, stderr);\n        } else {\n          self.emit('end', stdout, stderr);\n        }\n      }\n    }\n\n    self._prepare(function(err, args) {\n      if (err) {\n        return emitEnd(err);\n      }\n\n      // Run ffmpeg\n      self._spawnFfmpeg(\n        args,\n        {\n          captureStdout: !outputStream,\n          niceness: self.options.niceness,\n          cwd: self.options.cwd\n        },\n\n        function processCB(ffmpegProc, stdoutRing, stderrRing) {\n          self.ffmpegProc = ffmpegProc;\n          self.emit('start', 'ffmpeg ' + args.join(' '));\n\n          // Pipe input stream if any\n          if (inputStream) {\n            inputStream.source.on('error', function(err) {\n              var reportingErr = new Error('Input stream error: ' + err.message);\n              reportingErr.inputStreamError = err;\n              emitEnd(reportingErr);\n              ffmpegProc.kill();\n            });\n\n            inputStream.source.resume();\n            inputStream.source.pipe(ffmpegProc.stdin);\n\n            // Set stdin error handler on ffmpeg (prevents nodejs catching the error, but\n            // ffmpeg will fail anyway, so no need to actually handle anything)\n            ffmpegProc.stdin.on('error', function() {});\n          }\n\n          // Setup timeout if requested\n          var processTimer;\n          if (self.options.timeout) {\n            processTimer = setTimeout(function() {\n              var msg = 'process ran into a timeout (' + self.options.timeout + 's)';\n\n              emitEnd(new Error(msg), stdoutRing.get(), stderrRing.get());\n              ffmpegProc.kill();\n            }, self.options.timeout * 1000);\n          }\n\n\n          if (outputStream) {\n            // Pipe ffmpeg stdout to output stream\n            ffmpegProc.stdout.pipe(outputStream.target, outputStream.pipeopts);\n\n            // Handle output stream events\n            outputStream.target.on('close', function() {\n              self.logger.debug('Output stream closed, scheduling kill for ffmpeg process');\n\n              // Don't kill process yet, to give a chance to ffmpeg to\n              // terminate successfully first  This is necessary because\n              // under load, the process 'exit' event sometimes happens\n              // after the output stream 'close' event.\n              setTimeout(function() {\n                emitEnd(new Error('Output stream closed'));\n                ffmpegProc.kill();\n              }, 20);\n            });\n\n            outputStream.target.on('error', function(err) {\n              self.logger.debug('Output stream error, killing ffmpeg process');\n              var reportingErr = new Error('Output stream error: ' + err.message);\n              reportingErr.outputStreamError = err;\n              emitEnd(reportingErr, stdoutRing.get(), stderrRing.get());\n              ffmpegProc.kill('SIGKILL');\n            });\n          }\n\n          // Setup stderr handling\n          if (stderrRing) {\n\n            // 'stderr' event\n            if (self.listeners('stderr').length) {\n              stderrRing.callback(function(line) {\n                self.emit('stderr', line);\n              });\n            }\n\n            // 'codecData' event\n            if (self.listeners('codecData').length) {\n              var codecDataSent = false;\n              var codecObject = {};\n\n              stderrRing.callback(function(line) {\n                if (!codecDataSent)\n                  codecDataSent = utils.extractCodecData(self, line, codecObject);\n              });\n            }\n\n            // 'progress' event\n            if (self.listeners('progress').length) {\n              stderrRing.callback(function(line) {\n                utils.extractProgress(self, line);\n              });\n            }\n          }\n        },\n\n        function endCB(err, stdoutRing, stderrRing) {\n          delete self.ffmpegProc;\n\n          if (err) {\n            if (err.message.match(/ffmpeg exited with code/)) {\n              // Add ffmpeg error message\n              err.message += ': ' + utils.extractError(stderrRing.get());\n            }\n\n            emitEnd(err, stdoutRing.get(), stderrRing.get());\n          } else {\n            // Find out which outputs need flv metadata\n            var flvmeta = self._outputs.filter(function(output) {\n              return output.flags.flvmeta;\n            });\n\n            if (flvmeta.length) {\n              self._getFlvtoolPath(function(err, flvtool) {\n                if (err) {\n                  return emitEnd(err);\n                }\n\n                async.each(\n                  flvmeta,\n                  function(output, cb) {\n                    spawn(flvtool, ['-U', output.target])\n                      .on('error', function(err) {\n                        cb(new Error('Error running ' + flvtool + ' on ' + output.target + ': ' + err.message));\n                      })\n                      .on('exit', function(code, signal) {\n                        if (code !== 0 || signal) {\n                          cb(\n                            new Error(flvtool + ' ' +\n                              (signal ? 'received signal ' + signal\n                                      : 'exited with code ' + code)) +\n                              ' when running on ' + output.target\n                          );\n                        } else {\n                          cb();\n                        }\n                      });\n                  },\n                  function(err) {\n                    if (err) {\n                      emitEnd(err);\n                    } else {\n                      emitEnd(null, stdoutRing.get(), stderrRing.get());\n                    }\n                  }\n                );\n              });\n            } else {\n              emitEnd(null, stdoutRing.get(), stderrRing.get());\n            }\n          }\n        }\n      );\n    });\n  };\n\n\n  /**\n   * Renice current and/or future ffmpeg processes\n   *\n   * Ignored on Windows platforms.\n   *\n   * @method FfmpegCommand#renice\n   * @category Processing\n   *\n   * @param {Number} [niceness=0] niceness value between -20 (highest priority) and 20 (lowest priority)\n   * @return FfmpegCommand\n   */\n  proto.renice = function(niceness) {\n    if (!utils.isWindows) {\n      niceness = niceness || 0;\n\n      if (niceness < -20 || niceness > 20) {\n        this.logger.warn('Invalid niceness value: ' + niceness + ', must be between -20 and 20');\n      }\n\n      niceness = Math.min(20, Math.max(-20, niceness));\n      this.options.niceness = niceness;\n\n      if (this.ffmpegProc) {\n        var logger = this.logger;\n        var pid = this.ffmpegProc.pid;\n        var renice = spawn('renice', [niceness, '-p', pid]);\n\n        renice.on('error', function(err) {\n          logger.warn('could not renice process ' + pid + ': ' + err.message);\n        });\n\n        renice.on('exit', function(code, signal) {\n          if (signal) {\n            logger.warn('could not renice process ' + pid + ': renice was killed by signal ' + signal);\n          } else if (code) {\n            logger.warn('could not renice process ' + pid + ': renice exited with ' + code);\n          } else {\n            logger.info('successfully reniced process ' + pid + ' to ' + niceness + ' niceness');\n          }\n        });\n      }\n    }\n\n    return this;\n  };\n\n\n  /**\n   * Kill current ffmpeg process, if any\n   *\n   * @method FfmpegCommand#kill\n   * @category Processing\n   *\n   * @param {String} [signal=SIGKILL] signal name\n   * @return FfmpegCommand\n   */\n  proto.kill = function(signal) {\n    if (!this.ffmpegProc) {\n      this.logger.warn('No running ffmpeg process, cannot send signal');\n    } else {\n      this.ffmpegProc.kill(signal || 'SIGKILL');\n    }\n\n    return this;\n  };\n};\n","/*jshint node:true*/\n'use strict';\n\nvar fs = require('fs');\nvar path = require('path');\nvar PassThrough = require('stream').PassThrough;\nvar async = require('async');\nvar utils = require('./utils');\n\n\n/*\n * Useful recipes for commands\n */\n\nmodule.exports = function recipes(proto) {\n  /**\n   * Execute ffmpeg command and save output to a file\n   *\n   * @method FfmpegCommand#save\n   * @category Processing\n   * @aliases saveToFile\n   *\n   * @param {String} output file path\n   * @return FfmpegCommand\n   */\n  proto.saveToFile =\n  proto.save = function(output) {\n    this.output(output).run();\n    return this;\n  };\n\n\n  /**\n   * Execute ffmpeg command and save output to a stream\n   *\n   * If 'stream' is not specified, a PassThrough stream is created and returned.\n   * 'options' will be used when piping ffmpeg output to the output stream\n   * (@see http://nodejs.org/api/stream.html#stream_readable_pipe_destination_options)\n   *\n   * @method FfmpegCommand#pipe\n   * @category Processing\n   * @aliases stream,writeToStream\n   *\n   * @param {stream.Writable} [stream] output stream\n   * @param {Object} [options={}] pipe options\n   * @return Output stream\n   */\n  proto.writeToStream =\n  proto.pipe =\n  proto.stream = function(stream, options) {\n    if (stream && !('writable' in stream)) {\n      options = stream;\n      stream = undefined;\n    }\n\n    if (!stream) {\n      if (process.version.match(/v0\\.8\\./)) {\n        throw new Error('PassThrough stream is not supported on node v0.8');\n      }\n\n      stream = new PassThrough();\n    }\n\n    this.output(stream, options).run();\n    return stream;\n  };\n\n\n  /**\n   * Generate images from a video\n   *\n   * Note: this method makes the command emit a 'filenames' event with an array of\n   * the generated image filenames.\n   *\n   * @method FfmpegCommand#screenshots\n   * @category Processing\n   * @aliases takeScreenshots,thumbnail,thumbnails,screenshot\n   *\n   * @param {Number|Object} [config=1] screenshot count or configuration object with\n   *   the following keys:\n   * @param {Number} [config.count] number of screenshots to take; using this option\n   *   takes screenshots at regular intervals (eg. count=4 would take screens at 20%, 40%,\n   *   60% and 80% of the video length).\n   * @param {String} [config.folder='.'] output folder\n   * @param {String} [config.filename='tn.png'] output filename pattern, may contain the following\n   *   tokens:\n   *   - '%s': offset in seconds\n   *   - '%w': screenshot width\n   *   - '%h': screenshot height\n   *   - '%r': screenshot resolution (same as '%wx%h')\n   *   - '%f': input filename\n   *   - '%b': input basename (filename w/o extension)\n   *   - '%i': index of screenshot in timemark array (can be zero-padded by using it like `%000i`)\n   * @param {Number[]|String[]} [config.timemarks] array of timemarks to take screenshots\n   *   at; each timemark may be a number of seconds, a '[[hh:]mm:]ss[.xxx]' string or a\n   *   'XX%' string.  Overrides 'count' if present.\n   * @param {Number[]|String[]} [config.timestamps] alias for 'timemarks'\n   * @param {Boolean} [config.fastSeek] use fast seek (less accurate)\n   * @param {String} [config.size] screenshot size, with the same syntax as {@link FfmpegCommand#size}\n   * @param {String} [folder] output folder (legacy alias for 'config.folder')\n   * @return FfmpegCommand\n   */\n  proto.takeScreenshots =\n  proto.thumbnail =\n  proto.thumbnails =\n  proto.screenshot =\n  proto.screenshots = function(config, folder) {\n    var self = this;\n    var source = this._currentInput.source;\n    config = config || { count: 1 };\n\n    // Accept a number of screenshots instead of a config object\n    if (typeof config === 'number') {\n      config = {\n        count: config\n      };\n    }\n\n    // Accept a second 'folder' parameter instead of config.folder\n    if (!('folder' in config)) {\n      config.folder = folder || '.';\n    }\n\n    // Accept 'timestamps' instead of 'timemarks'\n    if ('timestamps' in config) {\n      config.timemarks = config.timestamps;\n    }\n\n    // Compute timemarks from count if not present\n    if (!('timemarks' in config)) {\n      if (!config.count) {\n        throw new Error('Cannot take screenshots: neither a count nor a timemark list are specified');\n      }\n\n      var interval = 100 / (1 + config.count);\n      config.timemarks = [];\n      for (var i = 0; i < config.count; i++) {\n        config.timemarks.push((interval * (i + 1)) + '%');\n      }\n    }\n\n    // Parse size option\n    if ('size' in config) {\n      var fixedSize = config.size.match(/^(\\d+)x(\\d+)$/);\n      var fixedWidth = config.size.match(/^(\\d+)x\\?$/);\n      var fixedHeight = config.size.match(/^\\?x(\\d+)$/);\n      var percentSize = config.size.match(/^(\\d+)%$/);\n\n      if (!fixedSize && !fixedWidth && !fixedHeight && !percentSize) {\n        throw new Error('Invalid size parameter: ' + config.size);\n      }\n    }\n\n    // Metadata helper\n    var metadata;\n    function getMetadata(cb) {\n      if (metadata) {\n        cb(null, metadata);\n      } else {\n        self.ffprobe(function(err, meta) {\n          metadata = meta;\n          cb(err, meta);\n        });\n      }\n    }\n\n    async.waterfall([\n      // Compute percent timemarks if any\n      function computeTimemarks(next) {\n        if (config.timemarks.some(function(t) { return ('' + t).match(/^[\\d.]+%$/); })) {\n          if (typeof source !== 'string') {\n            return next(new Error('Cannot compute screenshot timemarks with an input stream, please specify fixed timemarks'));\n          }\n\n          getMetadata(function(err, meta) {\n            if (err) {\n              next(err);\n            } else {\n              // Select video stream with the highest resolution\n              var vstream = meta.streams.reduce(function(biggest, stream) {\n                if (stream.codec_type === 'video' && stream.width * stream.height > biggest.width * biggest.height) {\n                  return stream;\n                } else {\n                  return biggest;\n                }\n              }, { width: 0, height: 0 });\n\n              if (vstream.width === 0) {\n                return next(new Error('No video stream in input, cannot take screenshots'));\n              }\n\n              var duration = Number(vstream.duration);\n              if (isNaN(duration)) {\n                duration = Number(meta.format.duration);\n              }\n\n              if (isNaN(duration)) {\n                return next(new Error('Could not get input duration, please specify fixed timemarks'));\n              }\n\n              config.timemarks = config.timemarks.map(function(mark) {\n                if (('' + mark).match(/^([\\d.]+)%$/)) {\n                  return duration * parseFloat(mark) / 100;\n                } else {\n                  return mark;\n                }\n              });\n\n              next();\n            }\n          });\n        } else {\n          next();\n        }\n      },\n\n      // Turn all timemarks into numbers and sort them\n      function normalizeTimemarks(next) {\n        config.timemarks = config.timemarks.map(function(mark) {\n          return utils.timemarkToSeconds(mark);\n        }).sort(function(a, b) { return a - b; });\n\n        next();\n      },\n\n      // Add '_%i' to pattern when requesting multiple screenshots and no variable token is present\n      function fixPattern(next) {\n        var pattern = config.filename || 'tn.png';\n\n        if (pattern.indexOf('.') === -1) {\n          pattern += '.png';\n        }\n\n        if (config.timemarks.length > 1 && !pattern.match(/%(s|0*i)/)) {\n          var ext = path.extname(pattern);\n          pattern = path.join(path.dirname(pattern), path.basename(pattern, ext) + '_%i' + ext);\n        }\n\n        next(null, pattern);\n      },\n\n      // Replace filename tokens (%f, %b) in pattern\n      function replaceFilenameTokens(pattern, next) {\n        if (pattern.match(/%[bf]/)) {\n          if (typeof source !== 'string') {\n            return next(new Error('Cannot replace %f or %b when using an input stream'));\n          }\n\n          pattern = pattern\n            .replace(/%f/g, path.basename(source))\n            .replace(/%b/g, path.basename(source, path.extname(source)));\n        }\n\n        next(null, pattern);\n      },\n\n      // Compute size if needed\n      function getSize(pattern, next) {\n        if (pattern.match(/%[whr]/)) {\n          if (fixedSize) {\n            return next(null, pattern, fixedSize[1], fixedSize[2]);\n          }\n\n          getMetadata(function(err, meta) {\n            if (err) {\n              return next(new Error('Could not determine video resolution to replace %w, %h or %r'));\n            }\n\n            var vstream = meta.streams.reduce(function(biggest, stream) {\n              if (stream.codec_type === 'video' && stream.width * stream.height > biggest.width * biggest.height) {\n                return stream;\n              } else {\n                return biggest;\n              }\n            }, { width: 0, height: 0 });\n\n            if (vstream.width === 0) {\n              return next(new Error('No video stream in input, cannot replace %w, %h or %r'));\n            }\n\n            var width = vstream.width;\n            var height = vstream.height;\n\n            if (fixedWidth) {\n              height = height * Number(fixedWidth[1]) / width;\n              width = Number(fixedWidth[1]);\n            } else if (fixedHeight) {\n              width = width * Number(fixedHeight[1]) / height;\n              height = Number(fixedHeight[1]);\n            } else if (percentSize) {\n              width = width * Number(percentSize[1]) / 100;\n              height = height * Number(percentSize[1]) / 100;\n            }\n\n            next(null, pattern, Math.round(width / 2) * 2, Math.round(height / 2) * 2);\n          });\n        } else {\n          next(null, pattern, -1, -1);\n        }\n      },\n\n      // Replace size tokens (%w, %h, %r) in pattern\n      function replaceSizeTokens(pattern, width, height, next) {\n        pattern = pattern\n          .replace(/%r/g, '%wx%h')\n          .replace(/%w/g, width)\n          .replace(/%h/g, height);\n\n        next(null, pattern);\n      },\n\n      // Replace variable tokens in pattern (%s, %i) and generate filename list\n      function replaceVariableTokens(pattern, next) {\n        var filenames = config.timemarks.map(function(t, i) {\n          return pattern\n            .replace(/%s/g, utils.timemarkToSeconds(t))\n            .replace(/%(0*)i/g, function(match, padding) {\n              var idx = '' + (i + 1);\n              return padding.substr(0, Math.max(0, padding.length + 1 - idx.length)) + idx;\n            });\n        });\n\n        self.emit('filenames', filenames);\n        next(null, filenames);\n      },\n\n      // Create output directory\n      function createDirectory(filenames, next) {\n        fs.exists(config.folder, function(exists) {\n          if (!exists) {\n            fs.mkdir(config.folder, function(err) {\n              if (err) {\n                next(err);\n              } else {\n                next(null, filenames);\n              }\n            });\n          } else {\n            next(null, filenames);\n          }\n        });\n      }\n    ], function runCommand(err, filenames) {\n      if (err) {\n        return self.emit('error', err);\n      }\n\n      var count = config.timemarks.length;\n      var split;\n      var filters = [split = {\n        filter: 'split',\n        options: count,\n        outputs: []\n      }];\n\n      if ('size' in config) {\n        // Set size to generate size filters\n        self.size(config.size);\n\n        // Get size filters and chain them with 'sizeN' stream names\n        var sizeFilters =  self._currentOutput.sizeFilters.get().map(function(f, i) {\n          if (i > 0) {\n            f.inputs = 'size' + (i - 1);\n          }\n\n          f.outputs = 'size' + i;\n\n          return f;\n        });\n\n        // Input last size filter output into split filter\n        split.inputs = 'size' + (sizeFilters.length - 1);\n\n        // Add size filters in front of split filter\n        filters = sizeFilters.concat(filters);\n\n        // Remove size filters\n        self._currentOutput.sizeFilters.clear();\n      }\n\n      var first = 0;\n      for (var i = 0; i < count; i++) {\n        var stream = 'screen' + i;\n        split.outputs.push(stream);\n\n        if (i === 0) {\n          first = config.timemarks[i];\n          self.seekInput(first);\n        }\n\n        self.output(path.join(config.folder, filenames[i]))\n          .frames(1)\n          .map(stream);\n\n        if (i > 0) {\n          self.seek(config.timemarks[i] - first);\n        }\n      }\n\n      self.complexFilter(filters);\n      self.run();\n    });\n\n    return this;\n  };\n\n\n  /**\n   * Merge (concatenate) inputs to a single file\n   *\n   * @method FfmpegCommand#concat\n   * @category Processing\n   * @aliases concatenate,mergeToFile\n   *\n   * @param {String|Writable} target output file or writable stream\n   * @param {Object} [options] pipe options (only used when outputting to a writable stream)\n   * @return FfmpegCommand\n   */\n  proto.mergeToFile =\n  proto.concatenate =\n  proto.concat = function(target, options) {\n    // Find out which streams are present in the first non-stream input\n    var fileInput = this._inputs.filter(function(input) {\n      return !input.isStream;\n    })[0];\n\n    var self = this;\n    this.ffprobe(this._inputs.indexOf(fileInput), function(err, data) {\n      if (err) {\n        return self.emit('error', err);\n      }\n\n      var hasAudioStreams = data.streams.some(function(stream) {\n        return stream.codec_type === 'audio';\n      });\n\n      var hasVideoStreams = data.streams.some(function(stream) {\n        return stream.codec_type === 'video';\n      });\n\n      // Setup concat filter and start processing\n      self.output(target, options)\n        .complexFilter({\n          filter: 'concat',\n          options: {\n            n: self._inputs.length,\n            v: hasVideoStreams ? 1 : 0,\n            a: hasAudioStreams ? 1 : 0\n          }\n        })\n        .run();\n    });\n\n    return this;\n  };\n};\n","/*jshint node:true*/\n'use strict';\n\nvar exec = require('child_process').exec;\nvar isWindows = require('os').platform().match(/win(32|64)/);\nvar which = require('which');\n\nvar nlRegexp = /\\r\\n|\\r|\\n/g;\nvar streamRegexp = /^\\[?(.*?)\\]?$/;\nvar filterEscapeRegexp = /[,]/;\nvar whichCache = {};\n\n/**\n * Parse progress line from ffmpeg stderr\n *\n * @param {String} line progress line\n * @return progress object\n * @private\n */\nfunction parseProgressLine(line) {\n  var progress = {};\n\n  // Remove all spaces after = and trim\n  line  = line.replace(/=\\s+/g, '=').trim();\n  var progressParts = line.split(' ');\n\n  // Split every progress part by \"=\" to get key and value\n  for(var i = 0; i < progressParts.length; i++) {\n    var progressSplit = progressParts[i].split('=', 2);\n    var key = progressSplit[0];\n    var value = progressSplit[1];\n\n    // This is not a progress line\n    if(typeof value === 'undefined')\n      return null;\n\n    progress[key] = value;\n  }\n\n  return progress;\n}\n\n\nvar utils = module.exports = {\n  isWindows: isWindows,\n  streamRegexp: streamRegexp,\n\n\n  /**\n   * Copy an object keys into another one\n   *\n   * @param {Object} source source object\n   * @param {Object} dest destination object\n   * @private\n   */\n  copy: function(source, dest) {\n    Object.keys(source).forEach(function(key) {\n      dest[key] = source[key];\n    });\n  },\n\n\n  /**\n   * Create an argument list\n   *\n   * Returns a function that adds new arguments to the list.\n   * It also has the following methods:\n   * - clear() empties the argument list\n   * - get() returns the argument list\n   * - find(arg, count) finds 'arg' in the list and return the following 'count' items, or undefined if not found\n   * - remove(arg, count) remove 'arg' in the list as well as the following 'count' items\n   *\n   * @private\n   */\n  args: function() {\n    var list = [];\n\n    // Append argument(s) to the list\n    var argfunc = function() {\n      if (arguments.length === 1 && Array.isArray(arguments[0])) {\n        list = list.concat(arguments[0]);\n      } else {\n        list = list.concat([].slice.call(arguments));\n      }\n    };\n\n    // Clear argument list\n    argfunc.clear = function() {\n      list = [];\n    };\n\n    // Return argument list\n    argfunc.get = function() {\n      return list;\n    };\n\n    // Find argument 'arg' in list, and if found, return an array of the 'count' items that follow it\n    argfunc.find = function(arg, count) {\n      var index = list.indexOf(arg);\n      if (index !== -1) {\n        return list.slice(index + 1, index + 1 + (count || 0));\n      }\n    };\n\n    // Find argument 'arg' in list, and if found, remove it as well as the 'count' items that follow it\n    argfunc.remove = function(arg, count) {\n      var index = list.indexOf(arg);\n      if (index !== -1) {\n        list.splice(index, (count || 0) + 1);\n      }\n    };\n\n    // Clone argument list\n    argfunc.clone = function() {\n      var cloned = utils.args();\n      cloned(list);\n      return cloned;\n    };\n\n    return argfunc;\n  },\n\n\n  /**\n   * Generate filter strings\n   *\n   * @param {String[]|Object[]} filters filter specifications. When using objects,\n   *   each must have the following properties:\n   * @param {String} filters.filter filter name\n   * @param {String|Array} [filters.inputs] (array of) input stream specifier(s) for the filter,\n   *   defaults to ffmpeg automatically choosing the first unused matching streams\n   * @param {String|Array} [filters.outputs] (array of) output stream specifier(s) for the filter,\n   *   defaults to ffmpeg automatically assigning the output to the output file\n   * @param {Object|String|Array} [filters.options] filter options, can be omitted to not set any options\n   * @return String[]\n   * @private\n   */\n  makeFilterStrings: function(filters) {\n    return filters.map(function(filterSpec) {\n      if (typeof filterSpec === 'string') {\n        return filterSpec;\n      }\n\n      var filterString = '';\n\n      // Filter string format is:\n      // [input1][input2]...filter[output1][output2]...\n      // The 'filter' part can optionaly have arguments:\n      //   filter=arg1:arg2:arg3\n      //   filter=arg1=v1:arg2=v2:arg3=v3\n\n      // Add inputs\n      if (Array.isArray(filterSpec.inputs)) {\n        filterString += filterSpec.inputs.map(function(streamSpec) {\n          return streamSpec.replace(streamRegexp, '[$1]');\n        }).join('');\n      } else if (typeof filterSpec.inputs === 'string') {\n        filterString += filterSpec.inputs.replace(streamRegexp, '[$1]');\n      }\n\n      // Add filter\n      filterString += filterSpec.filter;\n\n      // Add options\n      if (filterSpec.options) {\n        if (typeof filterSpec.options === 'string' || typeof filterSpec.options === 'number') {\n          // Option string\n          filterString += '=' + filterSpec.options;\n        } else if (Array.isArray(filterSpec.options)) {\n          // Option array (unnamed options)\n          filterString += '=' + filterSpec.options.map(function(option) {\n            if (typeof option === 'string' && option.match(filterEscapeRegexp)) {\n              return '\\'' + option + '\\'';\n            } else {\n              return option;\n            }\n          }).join(':');\n        } else if (Object.keys(filterSpec.options).length) {\n          // Option object (named options)\n          filterString += '=' + Object.keys(filterSpec.options).map(function(option) {\n            var value = filterSpec.options[option];\n\n            if (typeof value === 'string' && value.match(filterEscapeRegexp)) {\n              value = '\\'' + value + '\\'';\n            }\n\n            return option + '=' + value;\n          }).join(':');\n        }\n      }\n\n      // Add outputs\n      if (Array.isArray(filterSpec.outputs)) {\n        filterString += filterSpec.outputs.map(function(streamSpec) {\n          return streamSpec.replace(streamRegexp, '[$1]');\n        }).join('');\n      } else if (typeof filterSpec.outputs === 'string') {\n        filterString += filterSpec.outputs.replace(streamRegexp, '[$1]');\n      }\n\n      return filterString;\n    });\n  },\n\n\n  /**\n   * Search for an executable\n   *\n   * Uses 'which' or 'where' depending on platform\n   *\n   * @param {String} name executable name\n   * @param {Function} callback callback with signature (err, path)\n   * @private\n   */\n  which: function(name, callback) {\n    if (name in whichCache) {\n      return callback(null, whichCache[name]);\n    }\n\n    which(name, function(err, result){\n      if (err) {\n        // Treat errors as not found\n        return callback(null, whichCache[name] = '');\n      }\n      callback(null, whichCache[name] = result);\n    });\n  },\n\n\n  /**\n   * Convert a [[hh:]mm:]ss[.xxx] timemark into seconds\n   *\n   * @param {String} timemark timemark string\n   * @return Number\n   * @private\n   */\n  timemarkToSeconds: function(timemark) {\n    if (typeof timemark === 'number') {\n      return timemark;\n    }\n\n    if (timemark.indexOf(':') === -1 && timemark.indexOf('.') >= 0) {\n      return Number(timemark);\n    }\n\n    var parts = timemark.split(':');\n\n    // add seconds\n    var secs = Number(parts.pop());\n\n    if (parts.length) {\n      // add minutes\n      secs += Number(parts.pop()) * 60;\n    }\n\n    if (parts.length) {\n      // add hours\n      secs += Number(parts.pop()) * 3600;\n    }\n\n    return secs;\n  },\n\n\n  /**\n   * Extract codec data from ffmpeg stderr and emit 'codecData' event if appropriate\n   * Call it with an initially empty codec object once with each line of stderr output until it returns true\n   *\n   * @param {FfmpegCommand} command event emitter\n   * @param {String} stderrLine ffmpeg stderr output line\n   * @param {Object} codecObject object used to accumulate codec data between calls\n   * @return {Boolean} true if codec data is complete (and event was emitted), false otherwise\n   * @private\n   */\n  extractCodecData: function(command, stderrLine, codecsObject) {\n    var inputPattern = /Input #[0-9]+, ([^ ]+),/;\n    var durPattern = /Duration\\: ([^,]+)/;\n    var audioPattern = /Audio\\: (.*)/;\n    var videoPattern = /Video\\: (.*)/;\n\n    if (!('inputStack' in codecsObject)) {\n      codecsObject.inputStack = [];\n      codecsObject.inputIndex = -1;\n      codecsObject.inInput = false;\n    }\n\n    var inputStack = codecsObject.inputStack;\n    var inputIndex = codecsObject.inputIndex;\n    var inInput = codecsObject.inInput;\n\n    var format, dur, audio, video;\n\n    if (format = stderrLine.match(inputPattern)) {\n      inInput = codecsObject.inInput = true;\n      inputIndex = codecsObject.inputIndex = codecsObject.inputIndex + 1;\n\n      inputStack[inputIndex] = { format: format[1], audio: '', video: '', duration: '' };\n    } else if (inInput && (dur = stderrLine.match(durPattern))) {\n      inputStack[inputIndex].duration = dur[1];\n    } else if (inInput && (audio = stderrLine.match(audioPattern))) {\n      audio = audio[1].split(', ');\n      inputStack[inputIndex].audio = audio[0];\n      inputStack[inputIndex].audio_details = audio;\n    } else if (inInput && (video = stderrLine.match(videoPattern))) {\n      video = video[1].split(', ');\n      inputStack[inputIndex].video = video[0];\n      inputStack[inputIndex].video_details = video;\n    } else if (/Output #\\d+/.test(stderrLine)) {\n      inInput = codecsObject.inInput = false;\n    } else if (/Stream mapping:|Press (\\[q\\]|ctrl-c) to stop/.test(stderrLine)) {\n      command.emit.apply(command, ['codecData'].concat(inputStack));\n      return true;\n    }\n\n    return false;\n  },\n\n\n  /**\n   * Extract progress data from ffmpeg stderr and emit 'progress' event if appropriate\n   *\n   * @param {FfmpegCommand} command event emitter\n   * @param {String} stderrLine ffmpeg stderr data\n   * @private\n   */\n  extractProgress: function(command, stderrLine) {\n    var progress = parseProgressLine(stderrLine);\n\n    if (progress) {\n      // build progress report object\n      var ret = {\n        frames: parseInt(progress.frame, 10),\n        currentFps: parseInt(progress.fps, 10),\n        currentKbps: progress.bitrate ? parseFloat(progress.bitrate.replace('kbits/s', '')) : 0,\n        targetSize: parseInt(progress.size || progress.Lsize, 10),\n        timemark: progress.time\n      };\n\n      // calculate percent progress using duration\n      if (command._ffprobeData && command._ffprobeData.format && command._ffprobeData.format.duration) {\n        var duration = Number(command._ffprobeData.format.duration);\n        if (!isNaN(duration))\n          ret.percent = (utils.timemarkToSeconds(ret.timemark) / duration) * 100;\n      }\n      command.emit('progress', ret);\n    }\n  },\n\n\n  /**\n   * Extract error message(s) from ffmpeg stderr\n   *\n   * @param {String} stderr ffmpeg stderr data\n   * @return {String}\n   * @private\n   */\n  extractError: function(stderr) {\n    // Only return the last stderr lines that don't start with a space or a square bracket\n    return stderr.split(nlRegexp).reduce(function(messages, message) {\n      if (message.charAt(0) === ' ' || message.charAt(0) === '[') {\n        return [];\n      } else {\n        messages.push(message);\n        return messages;\n      }\n    }, []).join('\\n');\n  },\n\n\n  /**\n   * Creates a line ring buffer object with the following methods:\n   * - append(str) : appends a string or buffer\n   * - get() : returns the whole string\n   * - close() : prevents further append() calls and does a last call to callbacks\n   * - callback(cb) : calls cb for each line (incl. those already in the ring)\n   *\n   * @param {Numebr} maxLines maximum number of lines to store (<= 0 for unlimited)\n   */\n  linesRing: function(maxLines) {\n    var cbs = [];\n    var lines = [];\n    var current = null;\n    var closed = false\n    var max = maxLines - 1;\n\n    function emit(line) {\n      cbs.forEach(function(cb) { cb(line); });\n    }\n\n    return {\n      callback: function(cb) {\n        lines.forEach(function(l) { cb(l); });\n        cbs.push(cb);\n      },\n\n      append: function(str) {\n        if (closed) return;\n        if (str instanceof Buffer) str = '' + str;\n        if (!str || str.length === 0) return;\n\n        var newLines = str.split(nlRegexp);\n\n        if (newLines.length === 1) {\n          if (current !== null) {\n            current = current + newLines.shift();\n          } else {\n            current = newLines.shift();\n          }\n        } else {\n          if (current !== null) {\n            current = current + newLines.shift();\n            emit(current);\n            lines.push(current);\n          }\n\n          current = newLines.pop();\n\n          newLines.forEach(function(l) {\n            emit(l);\n            lines.push(l);\n          });\n\n          if (max > -1 && lines.length > max) {\n            lines.splice(0, lines.length - max);\n          }\n        }\n      },\n\n      get: function() {\n        if (current !== null) {\n          return lines.concat([current]).join('\\n');\n        } else {\n          return lines.join('\\n');\n        }\n      },\n\n      close: function() {\n        if (closed) return;\n\n        if (current !== null) {\n          emit(current);\n          lines.push(current);\n\n          if (max > -1 && lines.length > max) {\n            lines.shift();\n          }\n\n          current = null;\n        }\n\n        closed = true;\n      }\n    };\n  }\n};\n","module.exports = which\nwhich.sync = whichSync\n\nvar isWindows = process.platform === 'win32' ||\n    process.env.OSTYPE === 'cygwin' ||\n    process.env.OSTYPE === 'msys'\n\nvar path = require('path')\nvar COLON = isWindows ? ';' : ':'\nvar isexe = require('isexe')\n\nfunction getNotFoundError (cmd) {\n  var er = new Error('not found: ' + cmd)\n  er.code = 'ENOENT'\n\n  return er\n}\n\nfunction getPathInfo (cmd, opt) {\n  var colon = opt.colon || COLON\n  var pathEnv = opt.path || process.env.PATH || ''\n  var pathExt = ['']\n\n  pathEnv = pathEnv.split(colon)\n\n  var pathExtExe = ''\n  if (isWindows) {\n    pathEnv.unshift(process.cwd())\n    pathExtExe = (opt.pathExt || process.env.PATHEXT || '.EXE;.CMD;.BAT;.COM')\n    pathExt = pathExtExe.split(colon)\n\n\n    // Always test the cmd itself first.  isexe will check to make sure\n    // it's found in the pathExt set.\n    if (cmd.indexOf('.') !== -1 && pathExt[0] !== '')\n      pathExt.unshift('')\n  }\n\n  // If it has a slash, then we don't bother searching the pathenv.\n  // just check the file itself, and that's it.\n  if (cmd.match(/\\//) || isWindows && cmd.match(/\\\\/))\n    pathEnv = ['']\n\n  return {\n    env: pathEnv,\n    ext: pathExt,\n    extExe: pathExtExe\n  }\n}\n\nfunction which (cmd, opt, cb) {\n  if (typeof opt === 'function') {\n    cb = opt\n    opt = {}\n  }\n\n  var info = getPathInfo(cmd, opt)\n  var pathEnv = info.env\n  var pathExt = info.ext\n  var pathExtExe = info.extExe\n  var found = []\n\n  ;(function F (i, l) {\n    if (i === l) {\n      if (opt.all && found.length)\n        return cb(null, found)\n      else\n        return cb(getNotFoundError(cmd))\n    }\n\n    var pathPart = pathEnv[i]\n    if (pathPart.charAt(0) === '\"' && pathPart.slice(-1) === '\"')\n      pathPart = pathPart.slice(1, -1)\n\n    var p = path.join(pathPart, cmd)\n    if (!pathPart && (/^\\.[\\\\\\/]/).test(cmd)) {\n      p = cmd.slice(0, 2) + p\n    }\n    ;(function E (ii, ll) {\n      if (ii === ll) return F(i + 1, l)\n      var ext = pathExt[ii]\n      isexe(p + ext, { pathExt: pathExtExe }, function (er, is) {\n        if (!er && is) {\n          if (opt.all)\n            found.push(p + ext)\n          else\n            return cb(null, p + ext)\n        }\n        return E(ii + 1, ll)\n      })\n    })(0, pathExt.length)\n  })(0, pathEnv.length)\n}\n\nfunction whichSync (cmd, opt) {\n  opt = opt || {}\n\n  var info = getPathInfo(cmd, opt)\n  var pathEnv = info.env\n  var pathExt = info.ext\n  var pathExtExe = info.extExe\n  var found = []\n\n  for (var i = 0, l = pathEnv.length; i < l; i ++) {\n    var pathPart = pathEnv[i]\n    if (pathPart.charAt(0) === '\"' && pathPart.slice(-1) === '\"')\n      pathPart = pathPart.slice(1, -1)\n\n    var p = path.join(pathPart, cmd)\n    if (!pathPart && /^\\.[\\\\\\/]/.test(cmd)) {\n      p = cmd.slice(0, 2) + p\n    }\n    for (var j = 0, ll = pathExt.length; j < ll; j ++) {\n      var cur = p + pathExt[j]\n      var is\n      try {\n        is = isexe.sync(cur, { pathExt: pathExtExe })\n        if (is) {\n          if (opt.all)\n            found.push(cur)\n          else\n            return cur\n        }\n      } catch (ex) {}\n    }\n  }\n\n  if (opt.all && found.length)\n    return found\n\n  if (opt.nothrow)\n    return null\n\n  throw getNotFoundError(cmd)\n}\n","var fs = require('fs')\nvar core\nif (process.platform === 'win32' || global.TESTING_WINDOWS) {\n  core = require('./windows.js')\n} else {\n  core = require('./mode.js')\n}\n\nmodule.exports = isexe\nisexe.sync = sync\n\nfunction isexe (path, options, cb) {\n  if (typeof options === 'function') {\n    cb = options\n    options = {}\n  }\n\n  if (!cb) {\n    if (typeof Promise !== 'function') {\n      throw new TypeError('callback not provided')\n    }\n\n    return new Promise(function (resolve, reject) {\n      isexe(path, options || {}, function (er, is) {\n        if (er) {\n          reject(er)\n        } else {\n          resolve(is)\n        }\n      })\n    })\n  }\n\n  core(path, options || {}, function (er, is) {\n    // ignore EACCES because that just means we aren't allowed to run it\n    if (er) {\n      if (er.code === 'EACCES' || options && options.ignoreErrors) {\n        er = null\n        is = false\n      }\n    }\n    cb(er, is)\n  })\n}\n\nfunction sync (path, options) {\n  // my kingdom for a filtered catch\n  try {\n    return core.sync(path, options || {})\n  } catch (er) {\n    if (options && options.ignoreErrors || er.code === 'EACCES') {\n      return false\n    } else {\n      throw er\n    }\n  }\n}\n","module.exports = isexe\nisexe.sync = sync\n\nvar fs = require('fs')\n\nfunction isexe (path, options, cb) {\n  fs.stat(path, function (er, stat) {\n    cb(er, er ? false : checkStat(stat, options))\n  })\n}\n\nfunction sync (path, options) {\n  return checkStat(fs.statSync(path), options)\n}\n\nfunction checkStat (stat, options) {\n  return stat.isFile() && checkMode(stat, options)\n}\n\nfunction checkMode (stat, options) {\n  var mod = stat.mode\n  var uid = stat.uid\n  var gid = stat.gid\n\n  var myUid = options.uid !== undefined ?\n    options.uid : process.getuid && process.getuid()\n  var myGid = options.gid !== undefined ?\n    options.gid : process.getgid && process.getgid()\n\n  var u = parseInt('100', 8)\n  var g = parseInt('010', 8)\n  var o = parseInt('001', 8)\n  var ug = u | g\n\n  var ret = (mod & o) ||\n    (mod & g) && gid === myGid ||\n    (mod & u) && uid === myUid ||\n    (mod & ug) && myUid === 0\n\n  return ret\n}\n","module.exports = isexe\nisexe.sync = sync\n\nvar fs = require('fs')\n\nfunction checkPathExt (path, options) {\n  var pathext = options.pathExt !== undefined ?\n    options.pathExt : process.env.PATHEXT\n\n  if (!pathext) {\n    return true\n  }\n\n  pathext = pathext.split(';')\n  if (pathext.indexOf('') !== -1) {\n    return true\n  }\n  for (var i = 0; i < pathext.length; i++) {\n    var p = pathext[i].toLowerCase()\n    if (p && path.substr(-p.length).toLowerCase() === p) {\n      return true\n    }\n  }\n  return false\n}\n\nfunction checkStat (stat, path, options) {\n  if (!stat.isSymbolicLink() && !stat.isFile()) {\n    return false\n  }\n  return checkPathExt(path, options)\n}\n\nfunction isexe (path, options, cb) {\n  fs.stat(path, function (er, stat) {\n    cb(er, er ? false : checkStat(stat, path, options))\n  })\n}\n\nfunction sync (path, options) {\n  return checkStat(fs.statSync(path), path, options)\n}\n","(function(exports) {\n  \"use strict\";\n\n  function isArray(obj) {\n    if (obj !== null) {\n      return Object.prototype.toString.call(obj) === \"[object Array]\";\n    } else {\n      return false;\n    }\n  }\n\n  function isObject(obj) {\n    if (obj !== null) {\n      return Object.prototype.toString.call(obj) === \"[object Object]\";\n    } else {\n      return false;\n    }\n  }\n\n  function strictDeepEqual(first, second) {\n    // Check the scalar case first.\n    if (first === second) {\n      return true;\n    }\n\n    // Check if they are the same type.\n    var firstType = Object.prototype.toString.call(first);\n    if (firstType !== Object.prototype.toString.call(second)) {\n      return false;\n    }\n    // We know that first and second have the same type so we can just check the\n    // first type from now on.\n    if (isArray(first) === true) {\n      // Short circuit if they're not the same length;\n      if (first.length !== second.length) {\n        return false;\n      }\n      for (var i = 0; i < first.length; i++) {\n        if (strictDeepEqual(first[i], second[i]) === false) {\n          return false;\n        }\n      }\n      return true;\n    }\n    if (isObject(first) === true) {\n      // An object is equal if it has the same key/value pairs.\n      var keysSeen = {};\n      for (var key in first) {\n        if (hasOwnProperty.call(first, key)) {\n          if (strictDeepEqual(first[key], second[key]) === false) {\n            return false;\n          }\n          keysSeen[key] = true;\n        }\n      }\n      // Now check that there aren't any keys in second that weren't\n      // in first.\n      for (var key2 in second) {\n        if (hasOwnProperty.call(second, key2)) {\n          if (keysSeen[key2] !== true) {\n            return false;\n          }\n        }\n      }\n      return true;\n    }\n    return false;\n  }\n\n  function isFalse(obj) {\n    // From the spec:\n    // A false value corresponds to the following values:\n    // Empty list\n    // Empty object\n    // Empty string\n    // False boolean\n    // null value\n\n    // First check the scalar values.\n    if (obj === \"\" || obj === false || obj === null) {\n        return true;\n    } else if (isArray(obj) && obj.length === 0) {\n        // Check for an empty array.\n        return true;\n    } else if (isObject(obj)) {\n        // Check for an empty object.\n        for (var key in obj) {\n            // If there are any keys, then\n            // the object is not empty so the object\n            // is not false.\n            if (obj.hasOwnProperty(key)) {\n              return false;\n            }\n        }\n        return true;\n    } else {\n        return false;\n    }\n  }\n\n  function objValues(obj) {\n    var keys = Object.keys(obj);\n    var values = [];\n    for (var i = 0; i < keys.length; i++) {\n      values.push(obj[keys[i]]);\n    }\n    return values;\n  }\n\n  function merge(a, b) {\n      var merged = {};\n      for (var key in a) {\n          merged[key] = a[key];\n      }\n      for (var key2 in b) {\n          merged[key2] = b[key2];\n      }\n      return merged;\n  }\n\n  var trimLeft;\n  if (typeof String.prototype.trimLeft === \"function\") {\n    trimLeft = function(str) {\n      return str.trimLeft();\n    };\n  } else {\n    trimLeft = function(str) {\n      return str.match(/^\\s*(.*)/)[1];\n    };\n  }\n\n  // Type constants used to define functions.\n  var TYPE_NUMBER = 0;\n  var TYPE_ANY = 1;\n  var TYPE_STRING = 2;\n  var TYPE_ARRAY = 3;\n  var TYPE_OBJECT = 4;\n  var TYPE_BOOLEAN = 5;\n  var TYPE_EXPREF = 6;\n  var TYPE_NULL = 7;\n  var TYPE_ARRAY_NUMBER = 8;\n  var TYPE_ARRAY_STRING = 9;\n\n  var TOK_EOF = \"EOF\";\n  var TOK_UNQUOTEDIDENTIFIER = \"UnquotedIdentifier\";\n  var TOK_QUOTEDIDENTIFIER = \"QuotedIdentifier\";\n  var TOK_RBRACKET = \"Rbracket\";\n  var TOK_RPAREN = \"Rparen\";\n  var TOK_COMMA = \"Comma\";\n  var TOK_COLON = \"Colon\";\n  var TOK_RBRACE = \"Rbrace\";\n  var TOK_NUMBER = \"Number\";\n  var TOK_CURRENT = \"Current\";\n  var TOK_EXPREF = \"Expref\";\n  var TOK_PIPE = \"Pipe\";\n  var TOK_OR = \"Or\";\n  var TOK_AND = \"And\";\n  var TOK_EQ = \"EQ\";\n  var TOK_GT = \"GT\";\n  var TOK_LT = \"LT\";\n  var TOK_GTE = \"GTE\";\n  var TOK_LTE = \"LTE\";\n  var TOK_NE = \"NE\";\n  var TOK_FLATTEN = \"Flatten\";\n  var TOK_STAR = \"Star\";\n  var TOK_FILTER = \"Filter\";\n  var TOK_DOT = \"Dot\";\n  var TOK_NOT = \"Not\";\n  var TOK_LBRACE = \"Lbrace\";\n  var TOK_LBRACKET = \"Lbracket\";\n  var TOK_LPAREN= \"Lparen\";\n  var TOK_LITERAL= \"Literal\";\n\n  // The \"&\", \"[\", \"<\", \">\" tokens\n  // are not in basicToken because\n  // there are two token variants\n  // (\"&&\", \"[?\", \"<=\", \">=\").  This is specially handled\n  // below.\n\n  var basicTokens = {\n    \".\": TOK_DOT,\n    \"*\": TOK_STAR,\n    \",\": TOK_COMMA,\n    \":\": TOK_COLON,\n    \"{\": TOK_LBRACE,\n    \"}\": TOK_RBRACE,\n    \"]\": TOK_RBRACKET,\n    \"(\": TOK_LPAREN,\n    \")\": TOK_RPAREN,\n    \"@\": TOK_CURRENT\n  };\n\n  var operatorStartToken = {\n      \"<\": true,\n      \">\": true,\n      \"=\": true,\n      \"!\": true\n  };\n\n  var skipChars = {\n      \" \": true,\n      \"\\t\": true,\n      \"\\n\": true\n  };\n\n\n  function isAlpha(ch) {\n      return (ch >= \"a\" && ch <= \"z\") ||\n             (ch >= \"A\" && ch <= \"Z\") ||\n             ch === \"_\";\n  }\n\n  function isNum(ch) {\n      return (ch >= \"0\" && ch <= \"9\") ||\n             ch === \"-\";\n  }\n  function isAlphaNum(ch) {\n      return (ch >= \"a\" && ch <= \"z\") ||\n             (ch >= \"A\" && ch <= \"Z\") ||\n             (ch >= \"0\" && ch <= \"9\") ||\n             ch === \"_\";\n  }\n\n  function Lexer() {\n  }\n  Lexer.prototype = {\n      tokenize: function(stream) {\n          var tokens = [];\n          this._current = 0;\n          var start;\n          var identifier;\n          var token;\n          while (this._current < stream.length) {\n              if (isAlpha(stream[this._current])) {\n                  start = this._current;\n                  identifier = this._consumeUnquotedIdentifier(stream);\n                  tokens.push({type: TOK_UNQUOTEDIDENTIFIER,\n                               value: identifier,\n                               start: start});\n              } else if (basicTokens[stream[this._current]] !== undefined) {\n                  tokens.push({type: basicTokens[stream[this._current]],\n                              value: stream[this._current],\n                              start: this._current});\n                  this._current++;\n              } else if (isNum(stream[this._current])) {\n                  token = this._consumeNumber(stream);\n                  tokens.push(token);\n              } else if (stream[this._current] === \"[\") {\n                  // No need to increment this._current.  This happens\n                  // in _consumeLBracket\n                  token = this._consumeLBracket(stream);\n                  tokens.push(token);\n              } else if (stream[this._current] === \"\\\"\") {\n                  start = this._current;\n                  identifier = this._consumeQuotedIdentifier(stream);\n                  tokens.push({type: TOK_QUOTEDIDENTIFIER,\n                               value: identifier,\n                               start: start});\n              } else if (stream[this._current] === \"'\") {\n                  start = this._current;\n                  identifier = this._consumeRawStringLiteral(stream);\n                  tokens.push({type: TOK_LITERAL,\n                               value: identifier,\n                               start: start});\n              } else if (stream[this._current] === \"`\") {\n                  start = this._current;\n                  var literal = this._consumeLiteral(stream);\n                  tokens.push({type: TOK_LITERAL,\n                               value: literal,\n                               start: start});\n              } else if (operatorStartToken[stream[this._current]] !== undefined) {\n                  tokens.push(this._consumeOperator(stream));\n              } else if (skipChars[stream[this._current]] !== undefined) {\n                  // Ignore whitespace.\n                  this._current++;\n              } else if (stream[this._current] === \"&\") {\n                  start = this._current;\n                  this._current++;\n                  if (stream[this._current] === \"&\") {\n                      this._current++;\n                      tokens.push({type: TOK_AND, value: \"&&\", start: start});\n                  } else {\n                      tokens.push({type: TOK_EXPREF, value: \"&\", start: start});\n                  }\n              } else if (stream[this._current] === \"|\") {\n                  start = this._current;\n                  this._current++;\n                  if (stream[this._current] === \"|\") {\n                      this._current++;\n                      tokens.push({type: TOK_OR, value: \"||\", start: start});\n                  } else {\n                      tokens.push({type: TOK_PIPE, value: \"|\", start: start});\n                  }\n              } else {\n                  var error = new Error(\"Unknown character:\" + stream[this._current]);\n                  error.name = \"LexerError\";\n                  throw error;\n              }\n          }\n          return tokens;\n      },\n\n      _consumeUnquotedIdentifier: function(stream) {\n          var start = this._current;\n          this._current++;\n          while (this._current < stream.length && isAlphaNum(stream[this._current])) {\n              this._current++;\n          }\n          return stream.slice(start, this._current);\n      },\n\n      _consumeQuotedIdentifier: function(stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n          while (stream[this._current] !== \"\\\"\" && this._current < maxLength) {\n              // You can escape a double quote and you can escape an escape.\n              var current = this._current;\n              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                               stream[current + 1] === \"\\\"\")) {\n                  current += 2;\n              } else {\n                  current++;\n              }\n              this._current = current;\n          }\n          this._current++;\n          return JSON.parse(stream.slice(start, this._current));\n      },\n\n      _consumeRawStringLiteral: function(stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n          while (stream[this._current] !== \"'\" && this._current < maxLength) {\n              // You can escape a single quote and you can escape an escape.\n              var current = this._current;\n              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                               stream[current + 1] === \"'\")) {\n                  current += 2;\n              } else {\n                  current++;\n              }\n              this._current = current;\n          }\n          this._current++;\n          var literal = stream.slice(start + 1, this._current - 1);\n          return literal.replace(\"\\\\'\", \"'\");\n      },\n\n      _consumeNumber: function(stream) {\n          var start = this._current;\n          this._current++;\n          var maxLength = stream.length;\n          while (isNum(stream[this._current]) && this._current < maxLength) {\n              this._current++;\n          }\n          var value = parseInt(stream.slice(start, this._current));\n          return {type: TOK_NUMBER, value: value, start: start};\n      },\n\n      _consumeLBracket: function(stream) {\n          var start = this._current;\n          this._current++;\n          if (stream[this._current] === \"?\") {\n              this._current++;\n              return {type: TOK_FILTER, value: \"[?\", start: start};\n          } else if (stream[this._current] === \"]\") {\n              this._current++;\n              return {type: TOK_FLATTEN, value: \"[]\", start: start};\n          } else {\n              return {type: TOK_LBRACKET, value: \"[\", start: start};\n          }\n      },\n\n      _consumeOperator: function(stream) {\n          var start = this._current;\n          var startingChar = stream[start];\n          this._current++;\n          if (startingChar === \"!\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_NE, value: \"!=\", start: start};\n              } else {\n                return {type: TOK_NOT, value: \"!\", start: start};\n              }\n          } else if (startingChar === \"<\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_LTE, value: \"<=\", start: start};\n              } else {\n                  return {type: TOK_LT, value: \"<\", start: start};\n              }\n          } else if (startingChar === \">\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_GTE, value: \">=\", start: start};\n              } else {\n                  return {type: TOK_GT, value: \">\", start: start};\n              }\n          } else if (startingChar === \"=\") {\n              if (stream[this._current] === \"=\") {\n                  this._current++;\n                  return {type: TOK_EQ, value: \"==\", start: start};\n              }\n          }\n      },\n\n      _consumeLiteral: function(stream) {\n          this._current++;\n          var start = this._current;\n          var maxLength = stream.length;\n          var literal;\n          while(stream[this._current] !== \"`\" && this._current < maxLength) {\n              // You can escape a literal char or you can escape the escape.\n              var current = this._current;\n              if (stream[current] === \"\\\\\" && (stream[current + 1] === \"\\\\\" ||\n                                               stream[current + 1] === \"`\")) {\n                  current += 2;\n              } else {\n                  current++;\n              }\n              this._current = current;\n          }\n          var literalString = trimLeft(stream.slice(start, this._current));\n          literalString = literalString.replace(\"\\\\`\", \"`\");\n          if (this._looksLikeJSON(literalString)) {\n              literal = JSON.parse(literalString);\n          } else {\n              // Try to JSON parse it as \"<literal>\"\n              literal = JSON.parse(\"\\\"\" + literalString + \"\\\"\");\n          }\n          // +1 gets us to the ending \"`\", +1 to move on to the next char.\n          this._current++;\n          return literal;\n      },\n\n      _looksLikeJSON: function(literalString) {\n          var startingChars = \"[{\\\"\";\n          var jsonLiterals = [\"true\", \"false\", \"null\"];\n          var numberLooking = \"-0123456789\";\n\n          if (literalString === \"\") {\n              return false;\n          } else if (startingChars.indexOf(literalString[0]) >= 0) {\n              return true;\n          } else if (jsonLiterals.indexOf(literalString) >= 0) {\n              return true;\n          } else if (numberLooking.indexOf(literalString[0]) >= 0) {\n              try {\n                  JSON.parse(literalString);\n                  return true;\n              } catch (ex) {\n                  return false;\n              }\n          } else {\n              return false;\n          }\n      }\n  };\n\n      var bindingPower = {};\n      bindingPower[TOK_EOF] = 0;\n      bindingPower[TOK_UNQUOTEDIDENTIFIER] = 0;\n      bindingPower[TOK_QUOTEDIDENTIFIER] = 0;\n      bindingPower[TOK_RBRACKET] = 0;\n      bindingPower[TOK_RPAREN] = 0;\n      bindingPower[TOK_COMMA] = 0;\n      bindingPower[TOK_RBRACE] = 0;\n      bindingPower[TOK_NUMBER] = 0;\n      bindingPower[TOK_CURRENT] = 0;\n      bindingPower[TOK_EXPREF] = 0;\n      bindingPower[TOK_PIPE] = 1;\n      bindingPower[TOK_OR] = 2;\n      bindingPower[TOK_AND] = 3;\n      bindingPower[TOK_EQ] = 5;\n      bindingPower[TOK_GT] = 5;\n      bindingPower[TOK_LT] = 5;\n      bindingPower[TOK_GTE] = 5;\n      bindingPower[TOK_LTE] = 5;\n      bindingPower[TOK_NE] = 5;\n      bindingPower[TOK_FLATTEN] = 9;\n      bindingPower[TOK_STAR] = 20;\n      bindingPower[TOK_FILTER] = 21;\n      bindingPower[TOK_DOT] = 40;\n      bindingPower[TOK_NOT] = 45;\n      bindingPower[TOK_LBRACE] = 50;\n      bindingPower[TOK_LBRACKET] = 55;\n      bindingPower[TOK_LPAREN] = 60;\n\n  function Parser() {\n  }\n\n  Parser.prototype = {\n      parse: function(expression) {\n          this._loadTokens(expression);\n          this.index = 0;\n          var ast = this.expression(0);\n          if (this._lookahead(0) !== TOK_EOF) {\n              var t = this._lookaheadToken(0);\n              var error = new Error(\n                  \"Unexpected token type: \" + t.type + \", value: \" + t.value);\n              error.name = \"ParserError\";\n              throw error;\n          }\n          return ast;\n      },\n\n      _loadTokens: function(expression) {\n          var lexer = new Lexer();\n          var tokens = lexer.tokenize(expression);\n          tokens.push({type: TOK_EOF, value: \"\", start: expression.length});\n          this.tokens = tokens;\n      },\n\n      expression: function(rbp) {\n          var leftToken = this._lookaheadToken(0);\n          this._advance();\n          var left = this.nud(leftToken);\n          var currentToken = this._lookahead(0);\n          while (rbp < bindingPower[currentToken]) {\n              this._advance();\n              left = this.led(currentToken, left);\n              currentToken = this._lookahead(0);\n          }\n          return left;\n      },\n\n      _lookahead: function(number) {\n          return this.tokens[this.index + number].type;\n      },\n\n      _lookaheadToken: function(number) {\n          return this.tokens[this.index + number];\n      },\n\n      _advance: function() {\n          this.index++;\n      },\n\n      nud: function(token) {\n        var left;\n        var right;\n        var expression;\n        switch (token.type) {\n          case TOK_LITERAL:\n            return {type: \"Literal\", value: token.value};\n          case TOK_UNQUOTEDIDENTIFIER:\n            return {type: \"Field\", name: token.value};\n          case TOK_QUOTEDIDENTIFIER:\n            var node = {type: \"Field\", name: token.value};\n            if (this._lookahead(0) === TOK_LPAREN) {\n                throw new Error(\"Quoted identifier not allowed for function names.\");\n            } else {\n                return node;\n            }\n            break;\n          case TOK_NOT:\n            right = this.expression(bindingPower.Not);\n            return {type: \"NotExpression\", children: [right]};\n          case TOK_STAR:\n            left = {type: \"Identity\"};\n            right = null;\n            if (this._lookahead(0) === TOK_RBRACKET) {\n                // This can happen in a multiselect,\n                // [a, b, *]\n                right = {type: \"Identity\"};\n            } else {\n                right = this._parseProjectionRHS(bindingPower.Star);\n            }\n            return {type: \"ValueProjection\", children: [left, right]};\n          case TOK_FILTER:\n            return this.led(token.type, {type: \"Identity\"});\n          case TOK_LBRACE:\n            return this._parseMultiselectHash();\n          case TOK_FLATTEN:\n            left = {type: TOK_FLATTEN, children: [{type: \"Identity\"}]};\n            right = this._parseProjectionRHS(bindingPower.Flatten);\n            return {type: \"Projection\", children: [left, right]};\n          case TOK_LBRACKET:\n            if (this._lookahead(0) === TOK_NUMBER || this._lookahead(0) === TOK_COLON) {\n                right = this._parseIndexExpression();\n                return this._projectIfSlice({type: \"Identity\"}, right);\n            } else if (this._lookahead(0) === TOK_STAR &&\n                       this._lookahead(1) === TOK_RBRACKET) {\n                this._advance();\n                this._advance();\n                right = this._parseProjectionRHS(bindingPower.Star);\n                return {type: \"Projection\",\n                        children: [{type: \"Identity\"}, right]};\n            } else {\n                return this._parseMultiselectList();\n            }\n            break;\n          case TOK_CURRENT:\n            return {type: TOK_CURRENT};\n          case TOK_EXPREF:\n            expression = this.expression(bindingPower.Expref);\n            return {type: \"ExpressionReference\", children: [expression]};\n          case TOK_LPAREN:\n            var args = [];\n            while (this._lookahead(0) !== TOK_RPAREN) {\n              if (this._lookahead(0) === TOK_CURRENT) {\n                expression = {type: TOK_CURRENT};\n                this._advance();\n              } else {\n                expression = this.expression(0);\n              }\n              args.push(expression);\n            }\n            this._match(TOK_RPAREN);\n            return args[0];\n          default:\n            this._errorToken(token);\n        }\n      },\n\n      led: function(tokenName, left) {\n        var right;\n        switch(tokenName) {\n          case TOK_DOT:\n            var rbp = bindingPower.Dot;\n            if (this._lookahead(0) !== TOK_STAR) {\n                right = this._parseDotRHS(rbp);\n                return {type: \"Subexpression\", children: [left, right]};\n            } else {\n                // Creating a projection.\n                this._advance();\n                right = this._parseProjectionRHS(rbp);\n                return {type: \"ValueProjection\", children: [left, right]};\n            }\n            break;\n          case TOK_PIPE:\n            right = this.expression(bindingPower.Pipe);\n            return {type: TOK_PIPE, children: [left, right]};\n          case TOK_OR:\n            right = this.expression(bindingPower.Or);\n            return {type: \"OrExpression\", children: [left, right]};\n          case TOK_AND:\n            right = this.expression(bindingPower.And);\n            return {type: \"AndExpression\", children: [left, right]};\n          case TOK_LPAREN:\n            var name = left.name;\n            var args = [];\n            var expression, node;\n            while (this._lookahead(0) !== TOK_RPAREN) {\n              if (this._lookahead(0) === TOK_CURRENT) {\n                expression = {type: TOK_CURRENT};\n                this._advance();\n              } else {\n                expression = this.expression(0);\n              }\n              if (this._lookahead(0) === TOK_COMMA) {\n                this._match(TOK_COMMA);\n              }\n              args.push(expression);\n            }\n            this._match(TOK_RPAREN);\n            node = {type: \"Function\", name: name, children: args};\n            return node;\n          case TOK_FILTER:\n            var condition = this.expression(0);\n            this._match(TOK_RBRACKET);\n            if (this._lookahead(0) === TOK_FLATTEN) {\n              right = {type: \"Identity\"};\n            } else {\n              right = this._parseProjectionRHS(bindingPower.Filter);\n            }\n            return {type: \"FilterProjection\", children: [left, right, condition]};\n          case TOK_FLATTEN:\n            var leftNode = {type: TOK_FLATTEN, children: [left]};\n            var rightNode = this._parseProjectionRHS(bindingPower.Flatten);\n            return {type: \"Projection\", children: [leftNode, rightNode]};\n          case TOK_EQ:\n          case TOK_NE:\n          case TOK_GT:\n          case TOK_GTE:\n          case TOK_LT:\n          case TOK_LTE:\n            return this._parseComparator(left, tokenName);\n          case TOK_LBRACKET:\n            var token = this._lookaheadToken(0);\n            if (token.type === TOK_NUMBER || token.type === TOK_COLON) {\n                right = this._parseIndexExpression();\n                return this._projectIfSlice(left, right);\n            } else {\n                this._match(TOK_STAR);\n                this._match(TOK_RBRACKET);\n                right = this._parseProjectionRHS(bindingPower.Star);\n                return {type: \"Projection\", children: [left, right]};\n            }\n            break;\n          default:\n            this._errorToken(this._lookaheadToken(0));\n        }\n      },\n\n      _match: function(tokenType) {\n          if (this._lookahead(0) === tokenType) {\n              this._advance();\n          } else {\n              var t = this._lookaheadToken(0);\n              var error = new Error(\"Expected \" + tokenType + \", got: \" + t.type);\n              error.name = \"ParserError\";\n              throw error;\n          }\n      },\n\n      _errorToken: function(token) {\n          var error = new Error(\"Invalid token (\" +\n                                token.type + \"): \\\"\" +\n                                token.value + \"\\\"\");\n          error.name = \"ParserError\";\n          throw error;\n      },\n\n\n      _parseIndexExpression: function() {\n          if (this._lookahead(0) === TOK_COLON || this._lookahead(1) === TOK_COLON) {\n              return this._parseSliceExpression();\n          } else {\n              var node = {\n                  type: \"Index\",\n                  value: this._lookaheadToken(0).value};\n              this._advance();\n              this._match(TOK_RBRACKET);\n              return node;\n          }\n      },\n\n      _projectIfSlice: function(left, right) {\n          var indexExpr = {type: \"IndexExpression\", children: [left, right]};\n          if (right.type === \"Slice\") {\n              return {\n                  type: \"Projection\",\n                  children: [indexExpr, this._parseProjectionRHS(bindingPower.Star)]\n              };\n          } else {\n              return indexExpr;\n          }\n      },\n\n      _parseSliceExpression: function() {\n          // [start:end:step] where each part is optional, as well as the last\n          // colon.\n          var parts = [null, null, null];\n          var index = 0;\n          var currentToken = this._lookahead(0);\n          while (currentToken !== TOK_RBRACKET && index < 3) {\n              if (currentToken === TOK_COLON) {\n                  index++;\n                  this._advance();\n              } else if (currentToken === TOK_NUMBER) {\n                  parts[index] = this._lookaheadToken(0).value;\n                  this._advance();\n              } else {\n                  var t = this._lookahead(0);\n                  var error = new Error(\"Syntax error, unexpected token: \" +\n                                        t.value + \"(\" + t.type + \")\");\n                  error.name = \"Parsererror\";\n                  throw error;\n              }\n              currentToken = this._lookahead(0);\n          }\n          this._match(TOK_RBRACKET);\n          return {\n              type: \"Slice\",\n              children: parts\n          };\n      },\n\n      _parseComparator: function(left, comparator) {\n        var right = this.expression(bindingPower[comparator]);\n        return {type: \"Comparator\", name: comparator, children: [left, right]};\n      },\n\n      _parseDotRHS: function(rbp) {\n          var lookahead = this._lookahead(0);\n          var exprTokens = [TOK_UNQUOTEDIDENTIFIER, TOK_QUOTEDIDENTIFIER, TOK_STAR];\n          if (exprTokens.indexOf(lookahead) >= 0) {\n              return this.expression(rbp);\n          } else if (lookahead === TOK_LBRACKET) {\n              this._match(TOK_LBRACKET);\n              return this._parseMultiselectList();\n          } else if (lookahead === TOK_LBRACE) {\n              this._match(TOK_LBRACE);\n              return this._parseMultiselectHash();\n          }\n      },\n\n      _parseProjectionRHS: function(rbp) {\n          var right;\n          if (bindingPower[this._lookahead(0)] < 10) {\n              right = {type: \"Identity\"};\n          } else if (this._lookahead(0) === TOK_LBRACKET) {\n              right = this.expression(rbp);\n          } else if (this._lookahead(0) === TOK_FILTER) {\n              right = this.expression(rbp);\n          } else if (this._lookahead(0) === TOK_DOT) {\n              this._match(TOK_DOT);\n              right = this._parseDotRHS(rbp);\n          } else {\n              var t = this._lookaheadToken(0);\n              var error = new Error(\"Sytanx error, unexpected token: \" +\n                                    t.value + \"(\" + t.type + \")\");\n              error.name = \"ParserError\";\n              throw error;\n          }\n          return right;\n      },\n\n      _parseMultiselectList: function() {\n          var expressions = [];\n          while (this._lookahead(0) !== TOK_RBRACKET) {\n              var expression = this.expression(0);\n              expressions.push(expression);\n              if (this._lookahead(0) === TOK_COMMA) {\n                  this._match(TOK_COMMA);\n                  if (this._lookahead(0) === TOK_RBRACKET) {\n                    throw new Error(\"Unexpected token Rbracket\");\n                  }\n              }\n          }\n          this._match(TOK_RBRACKET);\n          return {type: \"MultiSelectList\", children: expressions};\n      },\n\n      _parseMultiselectHash: function() {\n        var pairs = [];\n        var identifierTypes = [TOK_UNQUOTEDIDENTIFIER, TOK_QUOTEDIDENTIFIER];\n        var keyToken, keyName, value, node;\n        for (;;) {\n          keyToken = this._lookaheadToken(0);\n          if (identifierTypes.indexOf(keyToken.type) < 0) {\n            throw new Error(\"Expecting an identifier token, got: \" +\n                            keyToken.type);\n          }\n          keyName = keyToken.value;\n          this._advance();\n          this._match(TOK_COLON);\n          value = this.expression(0);\n          node = {type: \"KeyValuePair\", name: keyName, value: value};\n          pairs.push(node);\n          if (this._lookahead(0) === TOK_COMMA) {\n            this._match(TOK_COMMA);\n          } else if (this._lookahead(0) === TOK_RBRACE) {\n            this._match(TOK_RBRACE);\n            break;\n          }\n        }\n        return {type: \"MultiSelectHash\", children: pairs};\n      }\n  };\n\n\n  function TreeInterpreter(runtime) {\n    this.runtime = runtime;\n  }\n\n  TreeInterpreter.prototype = {\n      search: function(node, value) {\n          return this.visit(node, value);\n      },\n\n      visit: function(node, value) {\n          var matched, current, result, first, second, field, left, right, collected, i;\n          switch (node.type) {\n            case \"Field\":\n              if (value === null ) {\n                  return null;\n              } else if (isObject(value)) {\n                  field = value[node.name];\n                  if (field === undefined) {\n                      return null;\n                  } else {\n                      return field;\n                  }\n              } else {\n                return null;\n              }\n              break;\n            case \"Subexpression\":\n              result = this.visit(node.children[0], value);\n              for (i = 1; i < node.children.length; i++) {\n                  result = this.visit(node.children[1], result);\n                  if (result === null) {\n                      return null;\n                  }\n              }\n              return result;\n            case \"IndexExpression\":\n              left = this.visit(node.children[0], value);\n              right = this.visit(node.children[1], left);\n              return right;\n            case \"Index\":\n              if (!isArray(value)) {\n                return null;\n              }\n              var index = node.value;\n              if (index < 0) {\n                index = value.length + index;\n              }\n              result = value[index];\n              if (result === undefined) {\n                result = null;\n              }\n              return result;\n            case \"Slice\":\n              if (!isArray(value)) {\n                return null;\n              }\n              var sliceParams = node.children.slice(0);\n              var computed = this.computeSliceParams(value.length, sliceParams);\n              var start = computed[0];\n              var stop = computed[1];\n              var step = computed[2];\n              result = [];\n              if (step > 0) {\n                  for (i = start; i < stop; i += step) {\n                      result.push(value[i]);\n                  }\n              } else {\n                  for (i = start; i > stop; i += step) {\n                      result.push(value[i]);\n                  }\n              }\n              return result;\n            case \"Projection\":\n              // Evaluate left child.\n              var base = this.visit(node.children[0], value);\n              if (!isArray(base)) {\n                return null;\n              }\n              collected = [];\n              for (i = 0; i < base.length; i++) {\n                current = this.visit(node.children[1], base[i]);\n                if (current !== null) {\n                  collected.push(current);\n                }\n              }\n              return collected;\n            case \"ValueProjection\":\n              // Evaluate left child.\n              base = this.visit(node.children[0], value);\n              if (!isObject(base)) {\n                return null;\n              }\n              collected = [];\n              var values = objValues(base);\n              for (i = 0; i < values.length; i++) {\n                current = this.visit(node.children[1], values[i]);\n                if (current !== null) {\n                  collected.push(current);\n                }\n              }\n              return collected;\n            case \"FilterProjection\":\n              base = this.visit(node.children[0], value);\n              if (!isArray(base)) {\n                return null;\n              }\n              var filtered = [];\n              var finalResults = [];\n              for (i = 0; i < base.length; i++) {\n                matched = this.visit(node.children[2], base[i]);\n                if (!isFalse(matched)) {\n                  filtered.push(base[i]);\n                }\n              }\n              for (var j = 0; j < filtered.length; j++) {\n                current = this.visit(node.children[1], filtered[j]);\n                if (current !== null) {\n                  finalResults.push(current);\n                }\n              }\n              return finalResults;\n            case \"Comparator\":\n              first = this.visit(node.children[0], value);\n              second = this.visit(node.children[1], value);\n              switch(node.name) {\n                case TOK_EQ:\n                  result = strictDeepEqual(first, second);\n                  break;\n                case TOK_NE:\n                  result = !strictDeepEqual(first, second);\n                  break;\n                case TOK_GT:\n                  result = first > second;\n                  break;\n                case TOK_GTE:\n                  result = first >= second;\n                  break;\n                case TOK_LT:\n                  result = first < second;\n                  break;\n                case TOK_LTE:\n                  result = first <= second;\n                  break;\n                default:\n                  throw new Error(\"Unknown comparator: \" + node.name);\n              }\n              return result;\n            case TOK_FLATTEN:\n              var original = this.visit(node.children[0], value);\n              if (!isArray(original)) {\n                return null;\n              }\n              var merged = [];\n              for (i = 0; i < original.length; i++) {\n                current = original[i];\n                if (isArray(current)) {\n                  merged.push.apply(merged, current);\n                } else {\n                  merged.push(current);\n                }\n              }\n              return merged;\n            case \"Identity\":\n              return value;\n            case \"MultiSelectList\":\n              if (value === null) {\n                return null;\n              }\n              collected = [];\n              for (i = 0; i < node.children.length; i++) {\n                  collected.push(this.visit(node.children[i], value));\n              }\n              return collected;\n            case \"MultiSelectHash\":\n              if (value === null) {\n                return null;\n              }\n              collected = {};\n              var child;\n              for (i = 0; i < node.children.length; i++) {\n                child = node.children[i];\n                collected[child.name] = this.visit(child.value, value);\n              }\n              return collected;\n            case \"OrExpression\":\n              matched = this.visit(node.children[0], value);\n              if (isFalse(matched)) {\n                  matched = this.visit(node.children[1], value);\n              }\n              return matched;\n            case \"AndExpression\":\n              first = this.visit(node.children[0], value);\n\n              if (isFalse(first) === true) {\n                return first;\n              }\n              return this.visit(node.children[1], value);\n            case \"NotExpression\":\n              first = this.visit(node.children[0], value);\n              return isFalse(first);\n            case \"Literal\":\n              return node.value;\n            case TOK_PIPE:\n              left = this.visit(node.children[0], value);\n              return this.visit(node.children[1], left);\n            case TOK_CURRENT:\n              return value;\n            case \"Function\":\n              var resolvedArgs = [];\n              for (i = 0; i < node.children.length; i++) {\n                  resolvedArgs.push(this.visit(node.children[i], value));\n              }\n              return this.runtime.callFunction(node.name, resolvedArgs);\n            case \"ExpressionReference\":\n              var refNode = node.children[0];\n              // Tag the node with a specific attribute so the type\n              // checker verify the type.\n              refNode.jmespathType = TOK_EXPREF;\n              return refNode;\n            default:\n              throw new Error(\"Unknown node type: \" + node.type);\n          }\n      },\n\n      computeSliceParams: function(arrayLength, sliceParams) {\n        var start = sliceParams[0];\n        var stop = sliceParams[1];\n        var step = sliceParams[2];\n        var computed = [null, null, null];\n        if (step === null) {\n          step = 1;\n        } else if (step === 0) {\n          var error = new Error(\"Invalid slice, step cannot be 0\");\n          error.name = \"RuntimeError\";\n          throw error;\n        }\n        var stepValueNegative = step < 0 ? true : false;\n\n        if (start === null) {\n            start = stepValueNegative ? arrayLength - 1 : 0;\n        } else {\n            start = this.capSliceRange(arrayLength, start, step);\n        }\n\n        if (stop === null) {\n            stop = stepValueNegative ? -1 : arrayLength;\n        } else {\n            stop = this.capSliceRange(arrayLength, stop, step);\n        }\n        computed[0] = start;\n        computed[1] = stop;\n        computed[2] = step;\n        return computed;\n      },\n\n      capSliceRange: function(arrayLength, actualValue, step) {\n          if (actualValue < 0) {\n              actualValue += arrayLength;\n              if (actualValue < 0) {\n                  actualValue = step < 0 ? -1 : 0;\n              }\n          } else if (actualValue >= arrayLength) {\n              actualValue = step < 0 ? arrayLength - 1 : arrayLength;\n          }\n          return actualValue;\n      }\n\n  };\n\n  function Runtime(interpreter) {\n    this._interpreter = interpreter;\n    this.functionTable = {\n        // name: [function, <signature>]\n        // The <signature> can be:\n        //\n        // {\n        //   args: [[type1, type2], [type1, type2]],\n        //   variadic: true|false\n        // }\n        //\n        // Each arg in the arg list is a list of valid types\n        // (if the function is overloaded and supports multiple\n        // types.  If the type is \"any\" then no type checking\n        // occurs on the argument.  Variadic is optional\n        // and if not provided is assumed to be false.\n        abs: {_func: this._functionAbs, _signature: [{types: [TYPE_NUMBER]}]},\n        avg: {_func: this._functionAvg, _signature: [{types: [TYPE_ARRAY_NUMBER]}]},\n        ceil: {_func: this._functionCeil, _signature: [{types: [TYPE_NUMBER]}]},\n        contains: {\n            _func: this._functionContains,\n            _signature: [{types: [TYPE_STRING, TYPE_ARRAY]},\n                        {types: [TYPE_ANY]}]},\n        \"ends_with\": {\n            _func: this._functionEndsWith,\n            _signature: [{types: [TYPE_STRING]}, {types: [TYPE_STRING]}]},\n        floor: {_func: this._functionFloor, _signature: [{types: [TYPE_NUMBER]}]},\n        length: {\n            _func: this._functionLength,\n            _signature: [{types: [TYPE_STRING, TYPE_ARRAY, TYPE_OBJECT]}]},\n        map: {\n            _func: this._functionMap,\n            _signature: [{types: [TYPE_EXPREF]}, {types: [TYPE_ARRAY]}]},\n        max: {\n            _func: this._functionMax,\n            _signature: [{types: [TYPE_ARRAY_NUMBER, TYPE_ARRAY_STRING]}]},\n        \"merge\": {\n            _func: this._functionMerge,\n            _signature: [{types: [TYPE_OBJECT], variadic: true}]\n        },\n        \"max_by\": {\n          _func: this._functionMaxBy,\n          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n        },\n        sum: {_func: this._functionSum, _signature: [{types: [TYPE_ARRAY_NUMBER]}]},\n        \"starts_with\": {\n            _func: this._functionStartsWith,\n            _signature: [{types: [TYPE_STRING]}, {types: [TYPE_STRING]}]},\n        min: {\n            _func: this._functionMin,\n            _signature: [{types: [TYPE_ARRAY_NUMBER, TYPE_ARRAY_STRING]}]},\n        \"min_by\": {\n          _func: this._functionMinBy,\n          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n        },\n        type: {_func: this._functionType, _signature: [{types: [TYPE_ANY]}]},\n        keys: {_func: this._functionKeys, _signature: [{types: [TYPE_OBJECT]}]},\n        values: {_func: this._functionValues, _signature: [{types: [TYPE_OBJECT]}]},\n        sort: {_func: this._functionSort, _signature: [{types: [TYPE_ARRAY_STRING, TYPE_ARRAY_NUMBER]}]},\n        \"sort_by\": {\n          _func: this._functionSortBy,\n          _signature: [{types: [TYPE_ARRAY]}, {types: [TYPE_EXPREF]}]\n        },\n        join: {\n            _func: this._functionJoin,\n            _signature: [\n                {types: [TYPE_STRING]},\n                {types: [TYPE_ARRAY_STRING]}\n            ]\n        },\n        reverse: {\n            _func: this._functionReverse,\n            _signature: [{types: [TYPE_STRING, TYPE_ARRAY]}]},\n        \"to_array\": {_func: this._functionToArray, _signature: [{types: [TYPE_ANY]}]},\n        \"to_string\": {_func: this._functionToString, _signature: [{types: [TYPE_ANY]}]},\n        \"to_number\": {_func: this._functionToNumber, _signature: [{types: [TYPE_ANY]}]},\n        \"not_null\": {\n            _func: this._functionNotNull,\n            _signature: [{types: [TYPE_ANY], variadic: true}]\n        }\n    };\n  }\n\n  Runtime.prototype = {\n    callFunction: function(name, resolvedArgs) {\n      var functionEntry = this.functionTable[name];\n      if (functionEntry === undefined) {\n          throw new Error(\"Unknown function: \" + name + \"()\");\n      }\n      this._validateArgs(name, resolvedArgs, functionEntry._signature);\n      return functionEntry._func.call(this, resolvedArgs);\n    },\n\n    _validateArgs: function(name, args, signature) {\n        // Validating the args requires validating\n        // the correct arity and the correct type of each arg.\n        // If the last argument is declared as variadic, then we need\n        // a minimum number of args to be required.  Otherwise it has to\n        // be an exact amount.\n        var pluralized;\n        if (signature[signature.length - 1].variadic) {\n            if (args.length < signature.length) {\n                pluralized = signature.length === 1 ? \" argument\" : \" arguments\";\n                throw new Error(\"ArgumentError: \" + name + \"() \" +\n                                \"takes at least\" + signature.length + pluralized +\n                                \" but received \" + args.length);\n            }\n        } else if (args.length !== signature.length) {\n            pluralized = signature.length === 1 ? \" argument\" : \" arguments\";\n            throw new Error(\"ArgumentError: \" + name + \"() \" +\n                            \"takes \" + signature.length + pluralized +\n                            \" but received \" + args.length);\n        }\n        var currentSpec;\n        var actualType;\n        var typeMatched;\n        for (var i = 0; i < signature.length; i++) {\n            typeMatched = false;\n            currentSpec = signature[i].types;\n            actualType = this._getTypeName(args[i]);\n            for (var j = 0; j < currentSpec.length; j++) {\n                if (this._typeMatches(actualType, currentSpec[j], args[i])) {\n                    typeMatched = true;\n                    break;\n                }\n            }\n            if (!typeMatched) {\n                throw new Error(\"TypeError: \" + name + \"() \" +\n                                \"expected argument \" + (i + 1) +\n                                \" to be type \" + currentSpec +\n                                \" but received type \" + actualType +\n                                \" instead.\");\n            }\n        }\n    },\n\n    _typeMatches: function(actual, expected, argValue) {\n        if (expected === TYPE_ANY) {\n            return true;\n        }\n        if (expected === TYPE_ARRAY_STRING ||\n            expected === TYPE_ARRAY_NUMBER ||\n            expected === TYPE_ARRAY) {\n            // The expected type can either just be array,\n            // or it can require a specific subtype (array of numbers).\n            //\n            // The simplest case is if \"array\" with no subtype is specified.\n            if (expected === TYPE_ARRAY) {\n                return actual === TYPE_ARRAY;\n            } else if (actual === TYPE_ARRAY) {\n                // Otherwise we need to check subtypes.\n                // I think this has potential to be improved.\n                var subtype;\n                if (expected === TYPE_ARRAY_NUMBER) {\n                  subtype = TYPE_NUMBER;\n                } else if (expected === TYPE_ARRAY_STRING) {\n                  subtype = TYPE_STRING;\n                }\n                for (var i = 0; i < argValue.length; i++) {\n                    if (!this._typeMatches(\n                            this._getTypeName(argValue[i]), subtype,\n                                             argValue[i])) {\n                        return false;\n                    }\n                }\n                return true;\n            }\n        } else {\n            return actual === expected;\n        }\n    },\n    _getTypeName: function(obj) {\n        switch (Object.prototype.toString.call(obj)) {\n            case \"[object String]\":\n              return TYPE_STRING;\n            case \"[object Number]\":\n              return TYPE_NUMBER;\n            case \"[object Array]\":\n              return TYPE_ARRAY;\n            case \"[object Boolean]\":\n              return TYPE_BOOLEAN;\n            case \"[object Null]\":\n              return TYPE_NULL;\n            case \"[object Object]\":\n              // Check if it's an expref.  If it has, it's been\n              // tagged with a jmespathType attr of 'Expref';\n              if (obj.jmespathType === TOK_EXPREF) {\n                return TYPE_EXPREF;\n              } else {\n                return TYPE_OBJECT;\n              }\n        }\n    },\n\n    _functionStartsWith: function(resolvedArgs) {\n        return resolvedArgs[0].lastIndexOf(resolvedArgs[1]) === 0;\n    },\n\n    _functionEndsWith: function(resolvedArgs) {\n        var searchStr = resolvedArgs[0];\n        var suffix = resolvedArgs[1];\n        return searchStr.indexOf(suffix, searchStr.length - suffix.length) !== -1;\n    },\n\n    _functionReverse: function(resolvedArgs) {\n        var typeName = this._getTypeName(resolvedArgs[0]);\n        if (typeName === TYPE_STRING) {\n          var originalStr = resolvedArgs[0];\n          var reversedStr = \"\";\n          for (var i = originalStr.length - 1; i >= 0; i--) {\n              reversedStr += originalStr[i];\n          }\n          return reversedStr;\n        } else {\n          var reversedArray = resolvedArgs[0].slice(0);\n          reversedArray.reverse();\n          return reversedArray;\n        }\n    },\n\n    _functionAbs: function(resolvedArgs) {\n      return Math.abs(resolvedArgs[0]);\n    },\n\n    _functionCeil: function(resolvedArgs) {\n        return Math.ceil(resolvedArgs[0]);\n    },\n\n    _functionAvg: function(resolvedArgs) {\n        var sum = 0;\n        var inputArray = resolvedArgs[0];\n        for (var i = 0; i < inputArray.length; i++) {\n            sum += inputArray[i];\n        }\n        return sum / inputArray.length;\n    },\n\n    _functionContains: function(resolvedArgs) {\n        return resolvedArgs[0].indexOf(resolvedArgs[1]) >= 0;\n    },\n\n    _functionFloor: function(resolvedArgs) {\n        return Math.floor(resolvedArgs[0]);\n    },\n\n    _functionLength: function(resolvedArgs) {\n       if (!isObject(resolvedArgs[0])) {\n         return resolvedArgs[0].length;\n       } else {\n         // As far as I can tell, there's no way to get the length\n         // of an object without O(n) iteration through the object.\n         return Object.keys(resolvedArgs[0]).length;\n       }\n    },\n\n    _functionMap: function(resolvedArgs) {\n      var mapped = [];\n      var interpreter = this._interpreter;\n      var exprefNode = resolvedArgs[0];\n      var elements = resolvedArgs[1];\n      for (var i = 0; i < elements.length; i++) {\n          mapped.push(interpreter.visit(exprefNode, elements[i]));\n      }\n      return mapped;\n    },\n\n    _functionMerge: function(resolvedArgs) {\n      var merged = {};\n      for (var i = 0; i < resolvedArgs.length; i++) {\n        var current = resolvedArgs[i];\n        for (var key in current) {\n          merged[key] = current[key];\n        }\n      }\n      return merged;\n    },\n\n    _functionMax: function(resolvedArgs) {\n      if (resolvedArgs[0].length > 0) {\n        var typeName = this._getTypeName(resolvedArgs[0][0]);\n        if (typeName === TYPE_NUMBER) {\n          return Math.max.apply(Math, resolvedArgs[0]);\n        } else {\n          var elements = resolvedArgs[0];\n          var maxElement = elements[0];\n          for (var i = 1; i < elements.length; i++) {\n              if (maxElement.localeCompare(elements[i]) < 0) {\n                  maxElement = elements[i];\n              }\n          }\n          return maxElement;\n        }\n      } else {\n          return null;\n      }\n    },\n\n    _functionMin: function(resolvedArgs) {\n      if (resolvedArgs[0].length > 0) {\n        var typeName = this._getTypeName(resolvedArgs[0][0]);\n        if (typeName === TYPE_NUMBER) {\n          return Math.min.apply(Math, resolvedArgs[0]);\n        } else {\n          var elements = resolvedArgs[0];\n          var minElement = elements[0];\n          for (var i = 1; i < elements.length; i++) {\n              if (elements[i].localeCompare(minElement) < 0) {\n                  minElement = elements[i];\n              }\n          }\n          return minElement;\n        }\n      } else {\n        return null;\n      }\n    },\n\n    _functionSum: function(resolvedArgs) {\n      var sum = 0;\n      var listToSum = resolvedArgs[0];\n      for (var i = 0; i < listToSum.length; i++) {\n        sum += listToSum[i];\n      }\n      return sum;\n    },\n\n    _functionType: function(resolvedArgs) {\n        switch (this._getTypeName(resolvedArgs[0])) {\n          case TYPE_NUMBER:\n            return \"number\";\n          case TYPE_STRING:\n            return \"string\";\n          case TYPE_ARRAY:\n            return \"array\";\n          case TYPE_OBJECT:\n            return \"object\";\n          case TYPE_BOOLEAN:\n            return \"boolean\";\n          case TYPE_EXPREF:\n            return \"expref\";\n          case TYPE_NULL:\n            return \"null\";\n        }\n    },\n\n    _functionKeys: function(resolvedArgs) {\n        return Object.keys(resolvedArgs[0]);\n    },\n\n    _functionValues: function(resolvedArgs) {\n        var obj = resolvedArgs[0];\n        var keys = Object.keys(obj);\n        var values = [];\n        for (var i = 0; i < keys.length; i++) {\n            values.push(obj[keys[i]]);\n        }\n        return values;\n    },\n\n    _functionJoin: function(resolvedArgs) {\n        var joinChar = resolvedArgs[0];\n        var listJoin = resolvedArgs[1];\n        return listJoin.join(joinChar);\n    },\n\n    _functionToArray: function(resolvedArgs) {\n        if (this._getTypeName(resolvedArgs[0]) === TYPE_ARRAY) {\n            return resolvedArgs[0];\n        } else {\n            return [resolvedArgs[0]];\n        }\n    },\n\n    _functionToString: function(resolvedArgs) {\n        if (this._getTypeName(resolvedArgs[0]) === TYPE_STRING) {\n            return resolvedArgs[0];\n        } else {\n            return JSON.stringify(resolvedArgs[0]);\n        }\n    },\n\n    _functionToNumber: function(resolvedArgs) {\n        var typeName = this._getTypeName(resolvedArgs[0]);\n        var convertedValue;\n        if (typeName === TYPE_NUMBER) {\n            return resolvedArgs[0];\n        } else if (typeName === TYPE_STRING) {\n            convertedValue = +resolvedArgs[0];\n            if (!isNaN(convertedValue)) {\n                return convertedValue;\n            }\n        }\n        return null;\n    },\n\n    _functionNotNull: function(resolvedArgs) {\n        for (var i = 0; i < resolvedArgs.length; i++) {\n            if (this._getTypeName(resolvedArgs[i]) !== TYPE_NULL) {\n                return resolvedArgs[i];\n            }\n        }\n        return null;\n    },\n\n    _functionSort: function(resolvedArgs) {\n        var sortedArray = resolvedArgs[0].slice(0);\n        sortedArray.sort();\n        return sortedArray;\n    },\n\n    _functionSortBy: function(resolvedArgs) {\n        var sortedArray = resolvedArgs[0].slice(0);\n        if (sortedArray.length === 0) {\n            return sortedArray;\n        }\n        var interpreter = this._interpreter;\n        var exprefNode = resolvedArgs[1];\n        var requiredType = this._getTypeName(\n            interpreter.visit(exprefNode, sortedArray[0]));\n        if ([TYPE_NUMBER, TYPE_STRING].indexOf(requiredType) < 0) {\n            throw new Error(\"TypeError\");\n        }\n        var that = this;\n        // In order to get a stable sort out of an unstable\n        // sort algorithm, we decorate/sort/undecorate (DSU)\n        // by creating a new list of [index, element] pairs.\n        // In the cmp function, if the evaluated elements are\n        // equal, then the index will be used as the tiebreaker.\n        // After the decorated list has been sorted, it will be\n        // undecorated to extract the original elements.\n        var decorated = [];\n        for (var i = 0; i < sortedArray.length; i++) {\n          decorated.push([i, sortedArray[i]]);\n        }\n        decorated.sort(function(a, b) {\n          var exprA = interpreter.visit(exprefNode, a[1]);\n          var exprB = interpreter.visit(exprefNode, b[1]);\n          if (that._getTypeName(exprA) !== requiredType) {\n              throw new Error(\n                  \"TypeError: expected \" + requiredType + \", received \" +\n                  that._getTypeName(exprA));\n          } else if (that._getTypeName(exprB) !== requiredType) {\n              throw new Error(\n                  \"TypeError: expected \" + requiredType + \", received \" +\n                  that._getTypeName(exprB));\n          }\n          if (exprA > exprB) {\n            return 1;\n          } else if (exprA < exprB) {\n            return -1;\n          } else {\n            // If they're equal compare the items by their\n            // order to maintain relative order of equal keys\n            // (i.e. to get a stable sort).\n            return a[0] - b[0];\n          }\n        });\n        // Undecorate: extract out the original list elements.\n        for (var j = 0; j < decorated.length; j++) {\n          sortedArray[j] = decorated[j][1];\n        }\n        return sortedArray;\n    },\n\n    _functionMaxBy: function(resolvedArgs) {\n      var exprefNode = resolvedArgs[1];\n      var resolvedArray = resolvedArgs[0];\n      var keyFunction = this.createKeyFunction(exprefNode, [TYPE_NUMBER, TYPE_STRING]);\n      var maxNumber = -Infinity;\n      var maxRecord;\n      var current;\n      for (var i = 0; i < resolvedArray.length; i++) {\n        current = keyFunction(resolvedArray[i]);\n        if (current > maxNumber) {\n          maxNumber = current;\n          maxRecord = resolvedArray[i];\n        }\n      }\n      return maxRecord;\n    },\n\n    _functionMinBy: function(resolvedArgs) {\n      var exprefNode = resolvedArgs[1];\n      var resolvedArray = resolvedArgs[0];\n      var keyFunction = this.createKeyFunction(exprefNode, [TYPE_NUMBER, TYPE_STRING]);\n      var minNumber = Infinity;\n      var minRecord;\n      var current;\n      for (var i = 0; i < resolvedArray.length; i++) {\n        current = keyFunction(resolvedArray[i]);\n        if (current < minNumber) {\n          minNumber = current;\n          minRecord = resolvedArray[i];\n        }\n      }\n      return minRecord;\n    },\n\n    createKeyFunction: function(exprefNode, allowedTypes) {\n      var that = this;\n      var interpreter = this._interpreter;\n      var keyFunc = function(x) {\n        var current = interpreter.visit(exprefNode, x);\n        if (allowedTypes.indexOf(that._getTypeName(current)) < 0) {\n          var msg = \"TypeError: expected one of \" + allowedTypes +\n                    \", received \" + that._getTypeName(current);\n          throw new Error(msg);\n        }\n        return current;\n      };\n      return keyFunc;\n    }\n\n  };\n\n  function compile(stream) {\n    var parser = new Parser();\n    var ast = parser.parse(stream);\n    return ast;\n  }\n\n  function tokenize(stream) {\n      var lexer = new Lexer();\n      return lexer.tokenize(stream);\n  }\n\n  function search(data, expression) {\n      var parser = new Parser();\n      // This needs to be improved.  Both the interpreter and runtime depend on\n      // each other.  The runtime needs the interpreter to support exprefs.\n      // There's likely a clean way to avoid the cyclic dependency.\n      var runtime = new Runtime();\n      var interpreter = new TreeInterpreter(runtime);\n      runtime._interpreter = interpreter;\n      var node = parser.parse(expression);\n      return interpreter.search(node, data);\n  }\n\n  exports.tokenize = tokenize;\n  exports.compile = compile;\n  exports.search = search;\n  exports.strictDeepEqual = strictDeepEqual;\n})(typeof exports === \"undefined\" ? this.jmespath = {} : exports);\n",";(function (sax) { // wrapper for non-node envs\n  sax.parser = function (strict, opt) { return new SAXParser(strict, opt) }\n  sax.SAXParser = SAXParser\n  sax.SAXStream = SAXStream\n  sax.createStream = createStream\n\n  // When we pass the MAX_BUFFER_LENGTH position, start checking for buffer overruns.\n  // When we check, schedule the next check for MAX_BUFFER_LENGTH - (max(buffer lengths)),\n  // since that's the earliest that a buffer overrun could occur.  This way, checks are\n  // as rare as required, but as often as necessary to ensure never crossing this bound.\n  // Furthermore, buffers are only tested at most once per write(), so passing a very\n  // large string into write() might have undesirable effects, but this is manageable by\n  // the caller, so it is assumed to be safe.  Thus, a call to write() may, in the extreme\n  // edge case, result in creating at most one complete copy of the string passed in.\n  // Set to Infinity to have unlimited buffers.\n  sax.MAX_BUFFER_LENGTH = 64 * 1024\n\n  var buffers = [\n    'comment', 'sgmlDecl', 'textNode', 'tagName', 'doctype',\n    'procInstName', 'procInstBody', 'entity', 'attribName',\n    'attribValue', 'cdata', 'script'\n  ]\n\n  sax.EVENTS = [\n    'text',\n    'processinginstruction',\n    'sgmldeclaration',\n    'doctype',\n    'comment',\n    'opentagstart',\n    'attribute',\n    'opentag',\n    'closetag',\n    'opencdata',\n    'cdata',\n    'closecdata',\n    'error',\n    'end',\n    'ready',\n    'script',\n    'opennamespace',\n    'closenamespace'\n  ]\n\n  function SAXParser (strict, opt) {\n    if (!(this instanceof SAXParser)) {\n      return new SAXParser(strict, opt)\n    }\n\n    var parser = this\n    clearBuffers(parser)\n    parser.q = parser.c = ''\n    parser.bufferCheckPosition = sax.MAX_BUFFER_LENGTH\n    parser.opt = opt || {}\n    parser.opt.lowercase = parser.opt.lowercase || parser.opt.lowercasetags\n    parser.looseCase = parser.opt.lowercase ? 'toLowerCase' : 'toUpperCase'\n    parser.tags = []\n    parser.closed = parser.closedRoot = parser.sawRoot = false\n    parser.tag = parser.error = null\n    parser.strict = !!strict\n    parser.noscript = !!(strict || parser.opt.noscript)\n    parser.state = S.BEGIN\n    parser.strictEntities = parser.opt.strictEntities\n    parser.ENTITIES = parser.strictEntities ? Object.create(sax.XML_ENTITIES) : Object.create(sax.ENTITIES)\n    parser.attribList = []\n\n    // namespaces form a prototype chain.\n    // it always points at the current tag,\n    // which protos to its parent tag.\n    if (parser.opt.xmlns) {\n      parser.ns = Object.create(rootNS)\n    }\n\n    // mostly just for error reporting\n    parser.trackPosition = parser.opt.position !== false\n    if (parser.trackPosition) {\n      parser.position = parser.line = parser.column = 0\n    }\n    emit(parser, 'onready')\n  }\n\n  if (!Object.create) {\n    Object.create = function (o) {\n      function F () {}\n      F.prototype = o\n      var newf = new F()\n      return newf\n    }\n  }\n\n  if (!Object.keys) {\n    Object.keys = function (o) {\n      var a = []\n      for (var i in o) if (o.hasOwnProperty(i)) a.push(i)\n      return a\n    }\n  }\n\n  function checkBufferLength (parser) {\n    var maxAllowed = Math.max(sax.MAX_BUFFER_LENGTH, 10)\n    var maxActual = 0\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      var len = parser[buffers[i]].length\n      if (len > maxAllowed) {\n        // Text/cdata nodes can get big, and since they're buffered,\n        // we can get here under normal conditions.\n        // Avoid issues by emitting the text node now,\n        // so at least it won't get any bigger.\n        switch (buffers[i]) {\n          case 'textNode':\n            closeText(parser)\n            break\n\n          case 'cdata':\n            emitNode(parser, 'oncdata', parser.cdata)\n            parser.cdata = ''\n            break\n\n          case 'script':\n            emitNode(parser, 'onscript', parser.script)\n            parser.script = ''\n            break\n\n          default:\n            error(parser, 'Max buffer length exceeded: ' + buffers[i])\n        }\n      }\n      maxActual = Math.max(maxActual, len)\n    }\n    // schedule the next check for the earliest possible buffer overrun.\n    var m = sax.MAX_BUFFER_LENGTH - maxActual\n    parser.bufferCheckPosition = m + parser.position\n  }\n\n  function clearBuffers (parser) {\n    for (var i = 0, l = buffers.length; i < l; i++) {\n      parser[buffers[i]] = ''\n    }\n  }\n\n  function flushBuffers (parser) {\n    closeText(parser)\n    if (parser.cdata !== '') {\n      emitNode(parser, 'oncdata', parser.cdata)\n      parser.cdata = ''\n    }\n    if (parser.script !== '') {\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n  }\n\n  SAXParser.prototype = {\n    end: function () { end(this) },\n    write: write,\n    resume: function () { this.error = null; return this },\n    close: function () { return this.write(null) },\n    flush: function () { flushBuffers(this) }\n  }\n\n  var Stream\n  try {\n    Stream = require('stream').Stream\n  } catch (ex) {\n    Stream = function () {}\n  }\n\n  var streamWraps = sax.EVENTS.filter(function (ev) {\n    return ev !== 'error' && ev !== 'end'\n  })\n\n  function createStream (strict, opt) {\n    return new SAXStream(strict, opt)\n  }\n\n  function SAXStream (strict, opt) {\n    if (!(this instanceof SAXStream)) {\n      return new SAXStream(strict, opt)\n    }\n\n    Stream.apply(this)\n\n    this._parser = new SAXParser(strict, opt)\n    this.writable = true\n    this.readable = true\n\n    var me = this\n\n    this._parser.onend = function () {\n      me.emit('end')\n    }\n\n    this._parser.onerror = function (er) {\n      me.emit('error', er)\n\n      // if didn't throw, then means error was handled.\n      // go ahead and clear error, so we can write again.\n      me._parser.error = null\n    }\n\n    this._decoder = null\n\n    streamWraps.forEach(function (ev) {\n      Object.defineProperty(me, 'on' + ev, {\n        get: function () {\n          return me._parser['on' + ev]\n        },\n        set: function (h) {\n          if (!h) {\n            me.removeAllListeners(ev)\n            me._parser['on' + ev] = h\n            return h\n          }\n          me.on(ev, h)\n        },\n        enumerable: true,\n        configurable: false\n      })\n    })\n  }\n\n  SAXStream.prototype = Object.create(Stream.prototype, {\n    constructor: {\n      value: SAXStream\n    }\n  })\n\n  SAXStream.prototype.write = function (data) {\n    if (typeof Buffer === 'function' &&\n      typeof Buffer.isBuffer === 'function' &&\n      Buffer.isBuffer(data)) {\n      if (!this._decoder) {\n        var SD = require('string_decoder').StringDecoder\n        this._decoder = new SD('utf8')\n      }\n      data = this._decoder.write(data)\n    }\n\n    this._parser.write(data.toString())\n    this.emit('data', data)\n    return true\n  }\n\n  SAXStream.prototype.end = function (chunk) {\n    if (chunk && chunk.length) {\n      this.write(chunk)\n    }\n    this._parser.end()\n    return true\n  }\n\n  SAXStream.prototype.on = function (ev, handler) {\n    var me = this\n    if (!me._parser['on' + ev] && streamWraps.indexOf(ev) !== -1) {\n      me._parser['on' + ev] = function () {\n        var args = arguments.length === 1 ? [arguments[0]] : Array.apply(null, arguments)\n        args.splice(0, 0, ev)\n        me.emit.apply(me, args)\n      }\n    }\n\n    return Stream.prototype.on.call(me, ev, handler)\n  }\n\n  // character classes and tokens\n  var whitespace = '\\r\\n\\t '\n\n  // this really needs to be replaced with character classes.\n  // XML allows all manner of ridiculous numbers and digits.\n  var number = '0124356789'\n  var letter = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'\n\n  // (Letter | \"_\" | \":\")\n  var quote = '\\'\"'\n  var attribEnd = whitespace + '>'\n  var CDATA = '[CDATA['\n  var DOCTYPE = 'DOCTYPE'\n  var XML_NAMESPACE = 'http://www.w3.org/XML/1998/namespace'\n  var XMLNS_NAMESPACE = 'http://www.w3.org/2000/xmlns/'\n  var rootNS = { xml: XML_NAMESPACE, xmlns: XMLNS_NAMESPACE }\n\n  // turn all the string character sets into character class objects.\n  whitespace = charClass(whitespace)\n  number = charClass(number)\n  letter = charClass(letter)\n\n  // http://www.w3.org/TR/REC-xml/#NT-NameStartChar\n  // This implementation works on strings, a single character at a time\n  // as such, it cannot ever support astral-plane characters (10000-EFFFF)\n  // without a significant breaking change to either this  parser, or the\n  // JavaScript language.  Implementation of an emoji-capable xml parser\n  // is left as an exercise for the reader.\n  var nameStart = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n\n  var nameBody = /[:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040\\.\\d-]/\n\n  var entityStart = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]/\n  var entityBody = /[#:_A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u00B7\\u0300-\\u036F\\u203F-\\u2040\\.\\d-]/\n\n  quote = charClass(quote)\n  attribEnd = charClass(attribEnd)\n\n  function charClass (str) {\n    return str.split('').reduce(function (s, c) {\n      s[c] = true\n      return s\n    }, {})\n  }\n\n  function isRegExp (c) {\n    return Object.prototype.toString.call(c) === '[object RegExp]'\n  }\n\n  function is (charclass, c) {\n    return isRegExp(charclass) ? !!c.match(charclass) : charclass[c]\n  }\n\n  function not (charclass, c) {\n    return !is(charclass, c)\n  }\n\n  var S = 0\n  sax.STATE = {\n    BEGIN: S++, // leading byte order mark or whitespace\n    BEGIN_WHITESPACE: S++, // leading whitespace\n    TEXT: S++, // general stuff\n    TEXT_ENTITY: S++, // &amp and such.\n    OPEN_WAKA: S++, // <\n    SGML_DECL: S++, // <!BLARG\n    SGML_DECL_QUOTED: S++, // <!BLARG foo \"bar\n    DOCTYPE: S++, // <!DOCTYPE\n    DOCTYPE_QUOTED: S++, // <!DOCTYPE \"//blah\n    DOCTYPE_DTD: S++, // <!DOCTYPE \"//blah\" [ ...\n    DOCTYPE_DTD_QUOTED: S++, // <!DOCTYPE \"//blah\" [ \"foo\n    COMMENT_STARTING: S++, // <!-\n    COMMENT: S++, // <!--\n    COMMENT_ENDING: S++, // <!-- blah -\n    COMMENT_ENDED: S++, // <!-- blah --\n    CDATA: S++, // <![CDATA[ something\n    CDATA_ENDING: S++, // ]\n    CDATA_ENDING_2: S++, // ]]\n    PROC_INST: S++, // <?hi\n    PROC_INST_BODY: S++, // <?hi there\n    PROC_INST_ENDING: S++, // <?hi \"there\" ?\n    OPEN_TAG: S++, // <strong\n    OPEN_TAG_SLASH: S++, // <strong /\n    ATTRIB: S++, // <a\n    ATTRIB_NAME: S++, // <a foo\n    ATTRIB_NAME_SAW_WHITE: S++, // <a foo _\n    ATTRIB_VALUE: S++, // <a foo=\n    ATTRIB_VALUE_QUOTED: S++, // <a foo=\"bar\n    ATTRIB_VALUE_CLOSED: S++, // <a foo=\"bar\"\n    ATTRIB_VALUE_UNQUOTED: S++, // <a foo=bar\n    ATTRIB_VALUE_ENTITY_Q: S++, // <foo bar=\"&quot;\"\n    ATTRIB_VALUE_ENTITY_U: S++, // <foo bar=&quot\n    CLOSE_TAG: S++, // </a\n    CLOSE_TAG_SAW_WHITE: S++, // </a   >\n    SCRIPT: S++, // <script> ...\n    SCRIPT_ENDING: S++ // <script> ... <\n  }\n\n  sax.XML_ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\"\n  }\n\n  sax.ENTITIES = {\n    'amp': '&',\n    'gt': '>',\n    'lt': '<',\n    'quot': '\"',\n    'apos': \"'\",\n    'AElig': 198,\n    'Aacute': 193,\n    'Acirc': 194,\n    'Agrave': 192,\n    'Aring': 197,\n    'Atilde': 195,\n    'Auml': 196,\n    'Ccedil': 199,\n    'ETH': 208,\n    'Eacute': 201,\n    'Ecirc': 202,\n    'Egrave': 200,\n    'Euml': 203,\n    'Iacute': 205,\n    'Icirc': 206,\n    'Igrave': 204,\n    'Iuml': 207,\n    'Ntilde': 209,\n    'Oacute': 211,\n    'Ocirc': 212,\n    'Ograve': 210,\n    'Oslash': 216,\n    'Otilde': 213,\n    'Ouml': 214,\n    'THORN': 222,\n    'Uacute': 218,\n    'Ucirc': 219,\n    'Ugrave': 217,\n    'Uuml': 220,\n    'Yacute': 221,\n    'aacute': 225,\n    'acirc': 226,\n    'aelig': 230,\n    'agrave': 224,\n    'aring': 229,\n    'atilde': 227,\n    'auml': 228,\n    'ccedil': 231,\n    'eacute': 233,\n    'ecirc': 234,\n    'egrave': 232,\n    'eth': 240,\n    'euml': 235,\n    'iacute': 237,\n    'icirc': 238,\n    'igrave': 236,\n    'iuml': 239,\n    'ntilde': 241,\n    'oacute': 243,\n    'ocirc': 244,\n    'ograve': 242,\n    'oslash': 248,\n    'otilde': 245,\n    'ouml': 246,\n    'szlig': 223,\n    'thorn': 254,\n    'uacute': 250,\n    'ucirc': 251,\n    'ugrave': 249,\n    'uuml': 252,\n    'yacute': 253,\n    'yuml': 255,\n    'copy': 169,\n    'reg': 174,\n    'nbsp': 160,\n    'iexcl': 161,\n    'cent': 162,\n    'pound': 163,\n    'curren': 164,\n    'yen': 165,\n    'brvbar': 166,\n    'sect': 167,\n    'uml': 168,\n    'ordf': 170,\n    'laquo': 171,\n    'not': 172,\n    'shy': 173,\n    'macr': 175,\n    'deg': 176,\n    'plusmn': 177,\n    'sup1': 185,\n    'sup2': 178,\n    'sup3': 179,\n    'acute': 180,\n    'micro': 181,\n    'para': 182,\n    'middot': 183,\n    'cedil': 184,\n    'ordm': 186,\n    'raquo': 187,\n    'frac14': 188,\n    'frac12': 189,\n    'frac34': 190,\n    'iquest': 191,\n    'times': 215,\n    'divide': 247,\n    'OElig': 338,\n    'oelig': 339,\n    'Scaron': 352,\n    'scaron': 353,\n    'Yuml': 376,\n    'fnof': 402,\n    'circ': 710,\n    'tilde': 732,\n    'Alpha': 913,\n    'Beta': 914,\n    'Gamma': 915,\n    'Delta': 916,\n    'Epsilon': 917,\n    'Zeta': 918,\n    'Eta': 919,\n    'Theta': 920,\n    'Iota': 921,\n    'Kappa': 922,\n    'Lambda': 923,\n    'Mu': 924,\n    'Nu': 925,\n    'Xi': 926,\n    'Omicron': 927,\n    'Pi': 928,\n    'Rho': 929,\n    'Sigma': 931,\n    'Tau': 932,\n    'Upsilon': 933,\n    'Phi': 934,\n    'Chi': 935,\n    'Psi': 936,\n    'Omega': 937,\n    'alpha': 945,\n    'beta': 946,\n    'gamma': 947,\n    'delta': 948,\n    'epsilon': 949,\n    'zeta': 950,\n    'eta': 951,\n    'theta': 952,\n    'iota': 953,\n    'kappa': 954,\n    'lambda': 955,\n    'mu': 956,\n    'nu': 957,\n    'xi': 958,\n    'omicron': 959,\n    'pi': 960,\n    'rho': 961,\n    'sigmaf': 962,\n    'sigma': 963,\n    'tau': 964,\n    'upsilon': 965,\n    'phi': 966,\n    'chi': 967,\n    'psi': 968,\n    'omega': 969,\n    'thetasym': 977,\n    'upsih': 978,\n    'piv': 982,\n    'ensp': 8194,\n    'emsp': 8195,\n    'thinsp': 8201,\n    'zwnj': 8204,\n    'zwj': 8205,\n    'lrm': 8206,\n    'rlm': 8207,\n    'ndash': 8211,\n    'mdash': 8212,\n    'lsquo': 8216,\n    'rsquo': 8217,\n    'sbquo': 8218,\n    'ldquo': 8220,\n    'rdquo': 8221,\n    'bdquo': 8222,\n    'dagger': 8224,\n    'Dagger': 8225,\n    'bull': 8226,\n    'hellip': 8230,\n    'permil': 8240,\n    'prime': 8242,\n    'Prime': 8243,\n    'lsaquo': 8249,\n    'rsaquo': 8250,\n    'oline': 8254,\n    'frasl': 8260,\n    'euro': 8364,\n    'image': 8465,\n    'weierp': 8472,\n    'real': 8476,\n    'trade': 8482,\n    'alefsym': 8501,\n    'larr': 8592,\n    'uarr': 8593,\n    'rarr': 8594,\n    'darr': 8595,\n    'harr': 8596,\n    'crarr': 8629,\n    'lArr': 8656,\n    'uArr': 8657,\n    'rArr': 8658,\n    'dArr': 8659,\n    'hArr': 8660,\n    'forall': 8704,\n    'part': 8706,\n    'exist': 8707,\n    'empty': 8709,\n    'nabla': 8711,\n    'isin': 8712,\n    'notin': 8713,\n    'ni': 8715,\n    'prod': 8719,\n    'sum': 8721,\n    'minus': 8722,\n    'lowast': 8727,\n    'radic': 8730,\n    'prop': 8733,\n    'infin': 8734,\n    'ang': 8736,\n    'and': 8743,\n    'or': 8744,\n    'cap': 8745,\n    'cup': 8746,\n    'int': 8747,\n    'there4': 8756,\n    'sim': 8764,\n    'cong': 8773,\n    'asymp': 8776,\n    'ne': 8800,\n    'equiv': 8801,\n    'le': 8804,\n    'ge': 8805,\n    'sub': 8834,\n    'sup': 8835,\n    'nsub': 8836,\n    'sube': 8838,\n    'supe': 8839,\n    'oplus': 8853,\n    'otimes': 8855,\n    'perp': 8869,\n    'sdot': 8901,\n    'lceil': 8968,\n    'rceil': 8969,\n    'lfloor': 8970,\n    'rfloor': 8971,\n    'lang': 9001,\n    'rang': 9002,\n    'loz': 9674,\n    'spades': 9824,\n    'clubs': 9827,\n    'hearts': 9829,\n    'diams': 9830\n  }\n\n  Object.keys(sax.ENTITIES).forEach(function (key) {\n    var e = sax.ENTITIES[key]\n    var s = typeof e === 'number' ? String.fromCharCode(e) : e\n    sax.ENTITIES[key] = s\n  })\n\n  for (var s in sax.STATE) {\n    sax.STATE[sax.STATE[s]] = s\n  }\n\n  // shorthand\n  S = sax.STATE\n\n  function emit (parser, event, data) {\n    parser[event] && parser[event](data)\n  }\n\n  function emitNode (parser, nodeType, data) {\n    if (parser.textNode) closeText(parser)\n    emit(parser, nodeType, data)\n  }\n\n  function closeText (parser) {\n    parser.textNode = textopts(parser.opt, parser.textNode)\n    if (parser.textNode) emit(parser, 'ontext', parser.textNode)\n    parser.textNode = ''\n  }\n\n  function textopts (opt, text) {\n    if (opt.trim) text = text.trim()\n    if (opt.normalize) text = text.replace(/\\s+/g, ' ')\n    return text\n  }\n\n  function error (parser, er) {\n    closeText(parser)\n    if (parser.trackPosition) {\n      er += '\\nLine: ' + parser.line +\n        '\\nColumn: ' + parser.column +\n        '\\nChar: ' + parser.c\n    }\n    er = new Error(er)\n    parser.error = er\n    emit(parser, 'onerror', er)\n    return parser\n  }\n\n  function end (parser) {\n    if (parser.sawRoot && !parser.closedRoot) strictFail(parser, 'Unclosed root tag')\n    if ((parser.state !== S.BEGIN) &&\n      (parser.state !== S.BEGIN_WHITESPACE) &&\n      (parser.state !== S.TEXT)) {\n      error(parser, 'Unexpected end')\n    }\n    closeText(parser)\n    parser.c = ''\n    parser.closed = true\n    emit(parser, 'onend')\n    SAXParser.call(parser, parser.strict, parser.opt)\n    return parser\n  }\n\n  function strictFail (parser, message) {\n    if (typeof parser !== 'object' || !(parser instanceof SAXParser)) {\n      throw new Error('bad call to strictFail')\n    }\n    if (parser.strict) {\n      error(parser, message)\n    }\n  }\n\n  function newTag (parser) {\n    if (!parser.strict) parser.tagName = parser.tagName[parser.looseCase]()\n    var parent = parser.tags[parser.tags.length - 1] || parser\n    var tag = parser.tag = { name: parser.tagName, attributes: {} }\n\n    // will be overridden if tag contails an xmlns=\"foo\" or xmlns:foo=\"bar\"\n    if (parser.opt.xmlns) {\n      tag.ns = parent.ns\n    }\n    parser.attribList.length = 0\n    emitNode(parser, 'onopentagstart', tag)\n  }\n\n  function qname (name, attribute) {\n    var i = name.indexOf(':')\n    var qualName = i < 0 ? [ '', name ] : name.split(':')\n    var prefix = qualName[0]\n    var local = qualName[1]\n\n    // <x \"xmlns\"=\"http://foo\">\n    if (attribute && name === 'xmlns') {\n      prefix = 'xmlns'\n      local = ''\n    }\n\n    return { prefix: prefix, local: local }\n  }\n\n  function attrib (parser) {\n    if (!parser.strict) {\n      parser.attribName = parser.attribName[parser.looseCase]()\n    }\n\n    if (parser.attribList.indexOf(parser.attribName) !== -1 ||\n      parser.tag.attributes.hasOwnProperty(parser.attribName)) {\n      parser.attribName = parser.attribValue = ''\n      return\n    }\n\n    if (parser.opt.xmlns) {\n      var qn = qname(parser.attribName, true)\n      var prefix = qn.prefix\n      var local = qn.local\n\n      if (prefix === 'xmlns') {\n        // namespace binding attribute. push the binding into scope\n        if (local === 'xml' && parser.attribValue !== XML_NAMESPACE) {\n          strictFail(parser,\n            'xml: prefix must be bound to ' + XML_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else if (local === 'xmlns' && parser.attribValue !== XMLNS_NAMESPACE) {\n          strictFail(parser,\n            'xmlns: prefix must be bound to ' + XMLNS_NAMESPACE + '\\n' +\n            'Actual: ' + parser.attribValue)\n        } else {\n          var tag = parser.tag\n          var parent = parser.tags[parser.tags.length - 1] || parser\n          if (tag.ns === parent.ns) {\n            tag.ns = Object.create(parent.ns)\n          }\n          tag.ns[local] = parser.attribValue\n        }\n      }\n\n      // defer onattribute events until all attributes have been seen\n      // so any new bindings can take effect. preserve attribute order\n      // so deferred events can be emitted in document order\n      parser.attribList.push([parser.attribName, parser.attribValue])\n    } else {\n      // in non-xmlns mode, we can emit the event right away\n      parser.tag.attributes[parser.attribName] = parser.attribValue\n      emitNode(parser, 'onattribute', {\n        name: parser.attribName,\n        value: parser.attribValue\n      })\n    }\n\n    parser.attribName = parser.attribValue = ''\n  }\n\n  function openTag (parser, selfClosing) {\n    if (parser.opt.xmlns) {\n      // emit namespace binding events\n      var tag = parser.tag\n\n      // add namespace info to tag\n      var qn = qname(parser.tagName)\n      tag.prefix = qn.prefix\n      tag.local = qn.local\n      tag.uri = tag.ns[qn.prefix] || ''\n\n      if (tag.prefix && !tag.uri) {\n        strictFail(parser, 'Unbound namespace prefix: ' +\n          JSON.stringify(parser.tagName))\n        tag.uri = qn.prefix\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (tag.ns && parent.ns !== tag.ns) {\n        Object.keys(tag.ns).forEach(function (p) {\n          emitNode(parser, 'onopennamespace', {\n            prefix: p,\n            uri: tag.ns[p]\n          })\n        })\n      }\n\n      // handle deferred onattribute events\n      // Note: do not apply default ns to attributes:\n      //   http://www.w3.org/TR/REC-xml-names/#defaulting\n      for (var i = 0, l = parser.attribList.length; i < l; i++) {\n        var nv = parser.attribList[i]\n        var name = nv[0]\n        var value = nv[1]\n        var qualName = qname(name, true)\n        var prefix = qualName.prefix\n        var local = qualName.local\n        var uri = prefix === '' ? '' : (tag.ns[prefix] || '')\n        var a = {\n          name: name,\n          value: value,\n          prefix: prefix,\n          local: local,\n          uri: uri\n        }\n\n        // if there's any attributes with an undefined namespace,\n        // then fail on them now.\n        if (prefix && prefix !== 'xmlns' && !uri) {\n          strictFail(parser, 'Unbound namespace prefix: ' +\n            JSON.stringify(prefix))\n          a.uri = prefix\n        }\n        parser.tag.attributes[name] = a\n        emitNode(parser, 'onattribute', a)\n      }\n      parser.attribList.length = 0\n    }\n\n    parser.tag.isSelfClosing = !!selfClosing\n\n    // process the tag\n    parser.sawRoot = true\n    parser.tags.push(parser.tag)\n    emitNode(parser, 'onopentag', parser.tag)\n    if (!selfClosing) {\n      // special case for <script> in non-strict mode.\n      if (!parser.noscript && parser.tagName.toLowerCase() === 'script') {\n        parser.state = S.SCRIPT\n      } else {\n        parser.state = S.TEXT\n      }\n      parser.tag = null\n      parser.tagName = ''\n    }\n    parser.attribName = parser.attribValue = ''\n    parser.attribList.length = 0\n  }\n\n  function closeTag (parser) {\n    if (!parser.tagName) {\n      strictFail(parser, 'Weird empty close tag.')\n      parser.textNode += '</>'\n      parser.state = S.TEXT\n      return\n    }\n\n    if (parser.script) {\n      if (parser.tagName !== 'script') {\n        parser.script += '</' + parser.tagName + '>'\n        parser.tagName = ''\n        parser.state = S.SCRIPT\n        return\n      }\n      emitNode(parser, 'onscript', parser.script)\n      parser.script = ''\n    }\n\n    // first make sure that the closing tag actually exists.\n    // <a><b></c></b></a> will close everything, otherwise.\n    var t = parser.tags.length\n    var tagName = parser.tagName\n    if (!parser.strict) {\n      tagName = tagName[parser.looseCase]()\n    }\n    var closeTo = tagName\n    while (t--) {\n      var close = parser.tags[t]\n      if (close.name !== closeTo) {\n        // fail the first time in strict mode\n        strictFail(parser, 'Unexpected close tag')\n      } else {\n        break\n      }\n    }\n\n    // didn't find it.  we already failed for strict, so just abort.\n    if (t < 0) {\n      strictFail(parser, 'Unmatched closing tag: ' + parser.tagName)\n      parser.textNode += '</' + parser.tagName + '>'\n      parser.state = S.TEXT\n      return\n    }\n    parser.tagName = tagName\n    var s = parser.tags.length\n    while (s-- > t) {\n      var tag = parser.tag = parser.tags.pop()\n      parser.tagName = parser.tag.name\n      emitNode(parser, 'onclosetag', parser.tagName)\n\n      var x = {}\n      for (var i in tag.ns) {\n        x[i] = tag.ns[i]\n      }\n\n      var parent = parser.tags[parser.tags.length - 1] || parser\n      if (parser.opt.xmlns && tag.ns !== parent.ns) {\n        // remove namespace bindings introduced by tag\n        Object.keys(tag.ns).forEach(function (p) {\n          var n = tag.ns[p]\n          emitNode(parser, 'onclosenamespace', { prefix: p, uri: n })\n        })\n      }\n    }\n    if (t === 0) parser.closedRoot = true\n    parser.tagName = parser.attribValue = parser.attribName = ''\n    parser.attribList.length = 0\n    parser.state = S.TEXT\n  }\n\n  function parseEntity (parser) {\n    var entity = parser.entity\n    var entityLC = entity.toLowerCase()\n    var num\n    var numStr = ''\n\n    if (parser.ENTITIES[entity]) {\n      return parser.ENTITIES[entity]\n    }\n    if (parser.ENTITIES[entityLC]) {\n      return parser.ENTITIES[entityLC]\n    }\n    entity = entityLC\n    if (entity.charAt(0) === '#') {\n      if (entity.charAt(1) === 'x') {\n        entity = entity.slice(2)\n        num = parseInt(entity, 16)\n        numStr = num.toString(16)\n      } else {\n        entity = entity.slice(1)\n        num = parseInt(entity, 10)\n        numStr = num.toString(10)\n      }\n    }\n    entity = entity.replace(/^0+/, '')\n    if (numStr.toLowerCase() !== entity) {\n      strictFail(parser, 'Invalid character entity')\n      return '&' + parser.entity + ';'\n    }\n\n    return String.fromCodePoint(num)\n  }\n\n  function beginWhiteSpace (parser, c) {\n    if (c === '<') {\n      parser.state = S.OPEN_WAKA\n      parser.startTagPosition = parser.position\n    } else if (not(whitespace, c)) {\n      // have to process this as a text node.\n      // weird, but happens.\n      strictFail(parser, 'Non-whitespace before first tag.')\n      parser.textNode = c\n      parser.state = S.TEXT\n    }\n  }\n\n  function charAt (chunk, i) {\n    var result = ''\n    if (i < chunk.length) {\n      result = chunk.charAt(i)\n    }\n    return result\n  }\n\n  function write (chunk) {\n    var parser = this\n    if (this.error) {\n      throw this.error\n    }\n    if (parser.closed) {\n      return error(parser,\n        'Cannot write after close. Assign an onready handler.')\n    }\n    if (chunk === null) {\n      return end(parser)\n    }\n    if (typeof chunk === 'object') {\n      chunk = chunk.toString()\n    }\n    var i = 0\n    var c = ''\n    while (true) {\n      c = charAt(chunk, i++)\n      parser.c = c\n      if (!c) {\n        break\n      }\n      if (parser.trackPosition) {\n        parser.position++\n        if (c === '\\n') {\n          parser.line++\n          parser.column = 0\n        } else {\n          parser.column++\n        }\n      }\n      switch (parser.state) {\n        case S.BEGIN:\n          parser.state = S.BEGIN_WHITESPACE\n          if (c === '\\uFEFF') {\n            continue\n          }\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.BEGIN_WHITESPACE:\n          beginWhiteSpace(parser, c)\n          continue\n\n        case S.TEXT:\n          if (parser.sawRoot && !parser.closedRoot) {\n            var starti = i - 1\n            while (c && c !== '<' && c !== '&') {\n              c = charAt(chunk, i++)\n              if (c && parser.trackPosition) {\n                parser.position++\n                if (c === '\\n') {\n                  parser.line++\n                  parser.column = 0\n                } else {\n                  parser.column++\n                }\n              }\n            }\n            parser.textNode += chunk.substring(starti, i - 1)\n          }\n          if (c === '<' && !(parser.sawRoot && parser.closedRoot && !parser.strict)) {\n            parser.state = S.OPEN_WAKA\n            parser.startTagPosition = parser.position\n          } else {\n            if (not(whitespace, c) && (!parser.sawRoot || parser.closedRoot)) {\n              strictFail(parser, 'Text data outside of root node.')\n            }\n            if (c === '&') {\n              parser.state = S.TEXT_ENTITY\n            } else {\n              parser.textNode += c\n            }\n          }\n          continue\n\n        case S.SCRIPT:\n          // only non-strict\n          if (c === '<') {\n            parser.state = S.SCRIPT_ENDING\n          } else {\n            parser.script += c\n          }\n          continue\n\n        case S.SCRIPT_ENDING:\n          if (c === '/') {\n            parser.state = S.CLOSE_TAG\n          } else {\n            parser.script += '<' + c\n            parser.state = S.SCRIPT\n          }\n          continue\n\n        case S.OPEN_WAKA:\n          // either a /, ?, !, or text is coming next.\n          if (c === '!') {\n            parser.state = S.SGML_DECL\n            parser.sgmlDecl = ''\n          } else if (is(whitespace, c)) {\n            // wait for it...\n          } else if (is(nameStart, c)) {\n            parser.state = S.OPEN_TAG\n            parser.tagName = c\n          } else if (c === '/') {\n            parser.state = S.CLOSE_TAG\n            parser.tagName = ''\n          } else if (c === '?') {\n            parser.state = S.PROC_INST\n            parser.procInstName = parser.procInstBody = ''\n          } else {\n            strictFail(parser, 'Unencoded <')\n            // if there was some whitespace, then add that in.\n            if (parser.startTagPosition + 1 < parser.position) {\n              var pad = parser.position - parser.startTagPosition\n              c = new Array(pad).join(' ') + c\n            }\n            parser.textNode += '<' + c\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.SGML_DECL:\n          if ((parser.sgmlDecl + c).toUpperCase() === CDATA) {\n            emitNode(parser, 'onopencdata')\n            parser.state = S.CDATA\n            parser.sgmlDecl = ''\n            parser.cdata = ''\n          } else if (parser.sgmlDecl + c === '--') {\n            parser.state = S.COMMENT\n            parser.comment = ''\n            parser.sgmlDecl = ''\n          } else if ((parser.sgmlDecl + c).toUpperCase() === DOCTYPE) {\n            parser.state = S.DOCTYPE\n            if (parser.doctype || parser.sawRoot) {\n              strictFail(parser,\n                'Inappropriately located doctype declaration')\n            }\n            parser.doctype = ''\n            parser.sgmlDecl = ''\n          } else if (c === '>') {\n            emitNode(parser, 'onsgmldeclaration', parser.sgmlDecl)\n            parser.sgmlDecl = ''\n            parser.state = S.TEXT\n          } else if (is(quote, c)) {\n            parser.state = S.SGML_DECL_QUOTED\n            parser.sgmlDecl += c\n          } else {\n            parser.sgmlDecl += c\n          }\n          continue\n\n        case S.SGML_DECL_QUOTED:\n          if (c === parser.q) {\n            parser.state = S.SGML_DECL\n            parser.q = ''\n          }\n          parser.sgmlDecl += c\n          continue\n\n        case S.DOCTYPE:\n          if (c === '>') {\n            parser.state = S.TEXT\n            emitNode(parser, 'ondoctype', parser.doctype)\n            parser.doctype = true // just remember that we saw it.\n          } else {\n            parser.doctype += c\n            if (c === '[') {\n              parser.state = S.DOCTYPE_DTD\n            } else if (is(quote, c)) {\n              parser.state = S.DOCTYPE_QUOTED\n              parser.q = c\n            }\n          }\n          continue\n\n        case S.DOCTYPE_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.q = ''\n            parser.state = S.DOCTYPE\n          }\n          continue\n\n        case S.DOCTYPE_DTD:\n          parser.doctype += c\n          if (c === ']') {\n            parser.state = S.DOCTYPE\n          } else if (is(quote, c)) {\n            parser.state = S.DOCTYPE_DTD_QUOTED\n            parser.q = c\n          }\n          continue\n\n        case S.DOCTYPE_DTD_QUOTED:\n          parser.doctype += c\n          if (c === parser.q) {\n            parser.state = S.DOCTYPE_DTD\n            parser.q = ''\n          }\n          continue\n\n        case S.COMMENT:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDING\n          } else {\n            parser.comment += c\n          }\n          continue\n\n        case S.COMMENT_ENDING:\n          if (c === '-') {\n            parser.state = S.COMMENT_ENDED\n            parser.comment = textopts(parser.opt, parser.comment)\n            if (parser.comment) {\n              emitNode(parser, 'oncomment', parser.comment)\n            }\n            parser.comment = ''\n          } else {\n            parser.comment += '-' + c\n            parser.state = S.COMMENT\n          }\n          continue\n\n        case S.COMMENT_ENDED:\n          if (c !== '>') {\n            strictFail(parser, 'Malformed comment')\n            // allow <!-- blah -- bloo --> in non-strict mode,\n            // which is a comment of \" blah -- bloo \"\n            parser.comment += '--' + c\n            parser.state = S.COMMENT\n          } else {\n            parser.state = S.TEXT\n          }\n          continue\n\n        case S.CDATA:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING\n          } else {\n            parser.cdata += c\n          }\n          continue\n\n        case S.CDATA_ENDING:\n          if (c === ']') {\n            parser.state = S.CDATA_ENDING_2\n          } else {\n            parser.cdata += ']' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.CDATA_ENDING_2:\n          if (c === '>') {\n            if (parser.cdata) {\n              emitNode(parser, 'oncdata', parser.cdata)\n            }\n            emitNode(parser, 'onclosecdata')\n            parser.cdata = ''\n            parser.state = S.TEXT\n          } else if (c === ']') {\n            parser.cdata += ']'\n          } else {\n            parser.cdata += ']]' + c\n            parser.state = S.CDATA\n          }\n          continue\n\n        case S.PROC_INST:\n          if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else if (is(whitespace, c)) {\n            parser.state = S.PROC_INST_BODY\n          } else {\n            parser.procInstName += c\n          }\n          continue\n\n        case S.PROC_INST_BODY:\n          if (!parser.procInstBody && is(whitespace, c)) {\n            continue\n          } else if (c === '?') {\n            parser.state = S.PROC_INST_ENDING\n          } else {\n            parser.procInstBody += c\n          }\n          continue\n\n        case S.PROC_INST_ENDING:\n          if (c === '>') {\n            emitNode(parser, 'onprocessinginstruction', {\n              name: parser.procInstName,\n              body: parser.procInstBody\n            })\n            parser.procInstName = parser.procInstBody = ''\n            parser.state = S.TEXT\n          } else {\n            parser.procInstBody += '?' + c\n            parser.state = S.PROC_INST_BODY\n          }\n          continue\n\n        case S.OPEN_TAG:\n          if (is(nameBody, c)) {\n            parser.tagName += c\n          } else {\n            newTag(parser)\n            if (c === '>') {\n              openTag(parser)\n            } else if (c === '/') {\n              parser.state = S.OPEN_TAG_SLASH\n            } else {\n              if (not(whitespace, c)) {\n                strictFail(parser, 'Invalid character in tag name')\n              }\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.OPEN_TAG_SLASH:\n          if (c === '>') {\n            openTag(parser, true)\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Forward-slash in opening tag not followed by >')\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.ATTRIB:\n          // haven't read the attribute name yet.\n          if (is(whitespace, c)) {\n            continue\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (is(nameStart, c)) {\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (c === '>') {\n            strictFail(parser, 'Attribute without value')\n            parser.attribValue = parser.attribName\n            attrib(parser)\n            openTag(parser)\n          } else if (is(whitespace, c)) {\n            parser.state = S.ATTRIB_NAME_SAW_WHITE\n          } else if (is(nameBody, c)) {\n            parser.attribName += c\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_NAME_SAW_WHITE:\n          if (c === '=') {\n            parser.state = S.ATTRIB_VALUE\n          } else if (is(whitespace, c)) {\n            continue\n          } else {\n            strictFail(parser, 'Attribute without value')\n            parser.tag.attributes[parser.attribName] = ''\n            parser.attribValue = ''\n            emitNode(parser, 'onattribute', {\n              name: parser.attribName,\n              value: ''\n            })\n            parser.attribName = ''\n            if (c === '>') {\n              openTag(parser)\n            } else if (is(nameStart, c)) {\n              parser.attribName = c\n              parser.state = S.ATTRIB_NAME\n            } else {\n              strictFail(parser, 'Invalid attribute name')\n              parser.state = S.ATTRIB\n            }\n          }\n          continue\n\n        case S.ATTRIB_VALUE:\n          if (is(whitespace, c)) {\n            continue\n          } else if (is(quote, c)) {\n            parser.q = c\n            parser.state = S.ATTRIB_VALUE_QUOTED\n          } else {\n            strictFail(parser, 'Unquoted attribute value')\n            parser.state = S.ATTRIB_VALUE_UNQUOTED\n            parser.attribValue = c\n          }\n          continue\n\n        case S.ATTRIB_VALUE_QUOTED:\n          if (c !== parser.q) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_Q\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          parser.q = ''\n          parser.state = S.ATTRIB_VALUE_CLOSED\n          continue\n\n        case S.ATTRIB_VALUE_CLOSED:\n          if (is(whitespace, c)) {\n            parser.state = S.ATTRIB\n          } else if (c === '>') {\n            openTag(parser)\n          } else if (c === '/') {\n            parser.state = S.OPEN_TAG_SLASH\n          } else if (is(nameStart, c)) {\n            strictFail(parser, 'No whitespace between attributes')\n            parser.attribName = c\n            parser.attribValue = ''\n            parser.state = S.ATTRIB_NAME\n          } else {\n            strictFail(parser, 'Invalid attribute name')\n          }\n          continue\n\n        case S.ATTRIB_VALUE_UNQUOTED:\n          if (not(attribEnd, c)) {\n            if (c === '&') {\n              parser.state = S.ATTRIB_VALUE_ENTITY_U\n            } else {\n              parser.attribValue += c\n            }\n            continue\n          }\n          attrib(parser)\n          if (c === '>') {\n            openTag(parser)\n          } else {\n            parser.state = S.ATTRIB\n          }\n          continue\n\n        case S.CLOSE_TAG:\n          if (!parser.tagName) {\n            if (is(whitespace, c)) {\n              continue\n            } else if (not(nameStart, c)) {\n              if (parser.script) {\n                parser.script += '</' + c\n                parser.state = S.SCRIPT\n              } else {\n                strictFail(parser, 'Invalid tagname in closing tag.')\n              }\n            } else {\n              parser.tagName = c\n            }\n          } else if (c === '>') {\n            closeTag(parser)\n          } else if (is(nameBody, c)) {\n            parser.tagName += c\n          } else if (parser.script) {\n            parser.script += '</' + parser.tagName\n            parser.tagName = ''\n            parser.state = S.SCRIPT\n          } else {\n            if (not(whitespace, c)) {\n              strictFail(parser, 'Invalid tagname in closing tag')\n            }\n            parser.state = S.CLOSE_TAG_SAW_WHITE\n          }\n          continue\n\n        case S.CLOSE_TAG_SAW_WHITE:\n          if (is(whitespace, c)) {\n            continue\n          }\n          if (c === '>') {\n            closeTag(parser)\n          } else {\n            strictFail(parser, 'Invalid characters in closing tag')\n          }\n          continue\n\n        case S.TEXT_ENTITY:\n        case S.ATTRIB_VALUE_ENTITY_Q:\n        case S.ATTRIB_VALUE_ENTITY_U:\n          var returnState\n          var buffer\n          switch (parser.state) {\n            case S.TEXT_ENTITY:\n              returnState = S.TEXT\n              buffer = 'textNode'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_Q:\n              returnState = S.ATTRIB_VALUE_QUOTED\n              buffer = 'attribValue'\n              break\n\n            case S.ATTRIB_VALUE_ENTITY_U:\n              returnState = S.ATTRIB_VALUE_UNQUOTED\n              buffer = 'attribValue'\n              break\n          }\n\n          if (c === ';') {\n            parser[buffer] += parseEntity(parser)\n            parser.entity = ''\n            parser.state = returnState\n          } else if (is(parser.entity.length ? entityBody : entityStart, c)) {\n            parser.entity += c\n          } else {\n            strictFail(parser, 'Invalid character in entity name')\n            parser[buffer] += '&' + parser.entity + c\n            parser.entity = ''\n            parser.state = returnState\n          }\n\n          continue\n\n        default:\n          throw new Error(parser, 'Unknown state: ' + parser.state)\n      }\n    } // while\n\n    if (parser.position >= parser.bufferCheckPosition) {\n      checkBufferLength(parser)\n    }\n    return parser\n  }\n\n  /*! http://mths.be/fromcodepoint v0.1.0 by @mathias */\n  if (!String.fromCodePoint) {\n    (function () {\n      var stringFromCharCode = String.fromCharCode\n      var floor = Math.floor\n      var fromCodePoint = function () {\n        var MAX_SIZE = 0x4000\n        var codeUnits = []\n        var highSurrogate\n        var lowSurrogate\n        var index = -1\n        var length = arguments.length\n        if (!length) {\n          return ''\n        }\n        var result = ''\n        while (++index < length) {\n          var codePoint = Number(arguments[index])\n          if (\n            !isFinite(codePoint) || // `NaN`, `+Infinity`, or `-Infinity`\n            codePoint < 0 || // not a valid Unicode code point\n            codePoint > 0x10FFFF || // not a valid Unicode code point\n            floor(codePoint) !== codePoint // not an integer\n          ) {\n            throw RangeError('Invalid code point: ' + codePoint)\n          }\n          if (codePoint <= 0xFFFF) { // BMP code point\n            codeUnits.push(codePoint)\n          } else { // Astral code point; split in surrogate halves\n            // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n            codePoint -= 0x10000\n            highSurrogate = (codePoint >> 10) + 0xD800\n            lowSurrogate = (codePoint % 0x400) + 0xDC00\n            codeUnits.push(highSurrogate, lowSurrogate)\n          }\n          if (index + 1 === length || codeUnits.length > MAX_SIZE) {\n            result += stringFromCharCode.apply(null, codeUnits)\n            codeUnits.length = 0\n          }\n        }\n        return result\n      }\n      if (Object.defineProperty) {\n        Object.defineProperty(String, 'fromCodePoint', {\n          value: fromCodePoint,\n          configurable: true,\n          writable: true\n        })\n      } else {\n        String.fromCodePoint = fromCodePoint\n      }\n    }())\n  }\n})(typeof exports === 'undefined' ? this.sax = {} : exports)\n","import SNS from 'aws-sdk/clients/sns'\r\nimport ffmpeg from 'fluent-ffmpeg'\r\nimport DynamoDb from 'aws-sdk/clients/dynamodb'\r\nimport { v4 as uuid} from 'uuid'\r\nimport stream from 'stream'\r\nimport fs from 'fs'\r\nimport S3 from 'aws-sdk/clients/s3'\r\n\r\nconst sns = new SNS()\r\nffmpeg.setFfmpegPath('/opt/ffmpeg')\r\nffmpeg.setFfprobePath('/opt/ffprobe')\r\n    \r\nconst topicArn = process.env.SNS_TOPIC_ANALYSIS_ARN\r\nconst tableName = process.env.DYNAMODB_TableName\r\nconst bucketName = process.env.S3BucketName\r\nexport const analystic = async (event) => {\r\n    try{\r\n    const url = \"https://nguyenvu-upload-lambda-functions.s3-ap-southeast-1.amazonaws.com/theboy.mp4\"\r\n        const promise = new Promise(async resolve => {\r\n            ffmpeg.ffprobe(url, async(err, metadata) =>{\r\n                const jobLength = Math.ceil(metadata.format.duration/30)\r\n                console.log(jobLength)\r\n                const promisePushMessagePool = []\r\n        const docClient = new DynamoDb.DocumentClient();\r\n        const listJob = []\r\n        const batchJobId = uuid()\r\n        for (let i = 0; i< jobLength; i++){\r\n            const start = i*30;\r\n            const end = Math.min((i+1)*30, metadata.format.duration)\r\n            const jobId = uuid()\r\n            const data = {\r\n                batchJobId,\r\n                jobId,\r\n                start,\r\n                end,\r\n                url\r\n            }\r\n            listJob.push(data)\r\n            promisePushMessagePool.push(sns.publish({\r\n                Message: JSON.stringify(data),\r\n                TopicArn: topicArn\r\n            }).promise())\r\n        }\r\n        const resultStoreDynamoDb = await docClient.put({\r\n            TableName: \"BatchJob\",\r\n            Item: {\r\n                id: batchJobId,\r\n                url,\r\n                jobs: listJob.map(job => ({\r\n                    id: job.jobId,\r\n                    start: job.start,\r\n                    end: job.end,\r\n                    status: \"converting\"\r\n                }))\r\n            }\r\n        }).promise()\r\n        console.log(\"analystic -> resultStoreDynamoDb\", resultStoreDynamoDb)\r\n        const resultPromise = await Promise.all(listJob.map(async data => sns.publish({\r\n            Message: JSON.stringify(data),\r\n            TopicArn: topicArn\r\n        }).promise()))\r\n        console.log(\"analystic -> resultPromise\", resultPromise)\r\n        resolve(true)\r\n    })\r\n})\r\n    await promise\r\n    return {\r\n        statusCode: 200,\r\n    // Headers must be sent here as well as defined in the template.yaml.\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Access-Control-Allow-Origin': \"*\",\r\n      'Access-Control-Allow-Headers': 'Content-Type',\r\n      'Access-Control-Allow-Methods': 'OPTIONS,POST,GET,PATCH'\r\n    },\r\n    body: JSON.stringify(true)\r\n    }\r\n} catch(e){\r\n    console.log(e)\r\n    console.log(\"asdasdas\")\r\n    return \"2\"\r\n}\r\n   \r\n}\r\n\r\n\r\nexport const transcoder = async (event) => {\r\n    var message = event.Records[0].Sns.Message;\r\n    const data = JSON.parse(message)\r\n    const { url, batchJobId, jobId, start, end } = data\r\n    ffmpeg(url).inputOptions([\r\n        `--ss ${start}`,\r\n        `--ss ${end}`\r\n    ]).outputOptions([\r\n        '-an',\r\n        '-s hd720'\r\n    ])\r\n    .outputFormat('mp4').save(`/tmp/ok.mp4`)\r\n    const objectName = `${batchJobId}/${jobId}/${start}-${end}.mp4`\r\n    const uploadStream = ({ Bucket, Key }) => {\r\n        const s3 = new S3();\r\n        const pass = new stream.PassThrough();\r\n        return {\r\n          writeStream: pass,\r\n          promise: s3.upload({ Bucket, Key, Body: pass }).promise(),\r\n        };\r\n      }\r\n    const { writeStream, promise } = uploadStream({Bucket: bucketName, Key: objectName});\r\n    const readStream = fs.createReadStream('/tmp/ok.mp4');\r\n    const pipeline = readStream.pipe(writeStream);\r\n    await promise\r\n    return {\r\n        statusCode: 200,\r\n    // Headers must be sent here as well as defined in the template.yaml.\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Access-Control-Allow-Origin': \"*\",\r\n      'Access-Control-Allow-Headers': 'Content-Type',\r\n      'Access-Control-Allow-Methods': 'OPTIONS,POST,GET,PATCH'\r\n    },\r\n    body: JSON.stringify(message)\r\n    }\r\n}\r\n\r\nexport const extractAudio = async (event) => {\r\n    var message = event.Records[0].Sns.Message;\r\n    console.log('Message received from SNS:', message);\r\n    return {\r\n        statusCode: 200,\r\n    // Headers must be sent here as well as defined in the template.yaml.\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Access-Control-Allow-Origin': \"*\",\r\n      'Access-Control-Allow-Headers': 'Content-Type',\r\n      'Access-Control-Allow-Methods': 'OPTIONS,POST,GET,PATCH'\r\n    },\r\n    body: JSON.stringify(message)\r\n    }\r\n}","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([bth[buf[i++]], bth[buf[i++]], \n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]], '-',\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]],\n\tbth[buf[i++]], bth[buf[i++]]]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In node.js\n// this is pretty straight-forward - we use the crypto API.\n\nvar crypto = require('crypto');\n\nmodule.exports = function nodeRNG() {\n  return crypto.randomBytes(16);\n};\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  exports.stripBOM = function(str) {\n    if (str[0] === '\\uFEFF') {\n      return str.substring(1);\n    } else {\n      return str;\n    }\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var builder, defaults, escapeCDATA, requiresCDATA, wrapCDATA,\n    hasProp = {}.hasOwnProperty;\n\n  builder = require('xmlbuilder');\n\n  defaults = require('./defaults').defaults;\n\n  requiresCDATA = function(entry) {\n    return typeof entry === \"string\" && (entry.indexOf('&') >= 0 || entry.indexOf('>') >= 0 || entry.indexOf('<') >= 0);\n  };\n\n  wrapCDATA = function(entry) {\n    return \"<![CDATA[\" + (escapeCDATA(entry)) + \"]]>\";\n  };\n\n  escapeCDATA = function(entry) {\n    return entry.replace(']]>', ']]]]><![CDATA[>');\n  };\n\n  exports.Builder = (function() {\n    function Builder(opts) {\n      var key, ref, value;\n      this.options = {};\n      ref = defaults[\"0.2\"];\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this.options[key] = value;\n      }\n      for (key in opts) {\n        if (!hasProp.call(opts, key)) continue;\n        value = opts[key];\n        this.options[key] = value;\n      }\n    }\n\n    Builder.prototype.buildObject = function(rootObj) {\n      var attrkey, charkey, render, rootElement, rootName;\n      attrkey = this.options.attrkey;\n      charkey = this.options.charkey;\n      if ((Object.keys(rootObj).length === 1) && (this.options.rootName === defaults['0.2'].rootName)) {\n        rootName = Object.keys(rootObj)[0];\n        rootObj = rootObj[rootName];\n      } else {\n        rootName = this.options.rootName;\n      }\n      render = (function(_this) {\n        return function(element, obj) {\n          var attr, child, entry, index, key, value;\n          if (typeof obj !== 'object') {\n            if (_this.options.cdata && requiresCDATA(obj)) {\n              element.raw(wrapCDATA(obj));\n            } else {\n              element.txt(obj);\n            }\n          } else if (Array.isArray(obj)) {\n            for (index in obj) {\n              if (!hasProp.call(obj, index)) continue;\n              child = obj[index];\n              for (key in child) {\n                entry = child[key];\n                element = render(element.ele(key), entry).up();\n              }\n            }\n          } else {\n            for (key in obj) {\n              if (!hasProp.call(obj, key)) continue;\n              child = obj[key];\n              if (key === attrkey) {\n                if (typeof child === \"object\") {\n                  for (attr in child) {\n                    value = child[attr];\n                    element = element.att(attr, value);\n                  }\n                }\n              } else if (key === charkey) {\n                if (_this.options.cdata && requiresCDATA(child)) {\n                  element = element.raw(wrapCDATA(child));\n                } else {\n                  element = element.txt(child);\n                }\n              } else if (Array.isArray(child)) {\n                for (index in child) {\n                  if (!hasProp.call(child, index)) continue;\n                  entry = child[index];\n                  if (typeof entry === 'string') {\n                    if (_this.options.cdata && requiresCDATA(entry)) {\n                      element = element.ele(key).raw(wrapCDATA(entry)).up();\n                    } else {\n                      element = element.ele(key, entry).up();\n                    }\n                  } else {\n                    element = render(element.ele(key), entry).up();\n                  }\n                }\n              } else if (typeof child === \"object\") {\n                element = render(element.ele(key), child).up();\n              } else {\n                if (typeof child === 'string' && _this.options.cdata && requiresCDATA(child)) {\n                  element = element.ele(key).raw(wrapCDATA(child)).up();\n                } else {\n                  if (child == null) {\n                    child = '';\n                  }\n                  element = element.ele(key, child.toString()).up();\n                }\n              }\n            }\n          }\n          return element;\n        };\n      })(this);\n      rootElement = builder.create(rootName, this.options.xmldec, this.options.doctype, {\n        headless: this.options.headless,\n        allowSurrogateChars: this.options.allowSurrogateChars\n      });\n      return render(rootElement, rootObj).end(this.options.renderOpts);\n    };\n\n    return Builder;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  exports.defaults = {\n    \"0.1\": {\n      explicitCharkey: false,\n      trim: true,\n      normalize: true,\n      normalizeTags: false,\n      attrkey: \"@\",\n      charkey: \"#\",\n      explicitArray: false,\n      ignoreAttrs: false,\n      mergeAttrs: false,\n      explicitRoot: false,\n      validator: null,\n      xmlns: false,\n      explicitChildren: false,\n      childkey: '@@',\n      charsAsChildren: false,\n      includeWhiteChars: false,\n      async: false,\n      strict: true,\n      attrNameProcessors: null,\n      attrValueProcessors: null,\n      tagNameProcessors: null,\n      valueProcessors: null,\n      emptyTag: ''\n    },\n    \"0.2\": {\n      explicitCharkey: false,\n      trim: false,\n      normalize: false,\n      normalizeTags: false,\n      attrkey: \"$\",\n      charkey: \"_\",\n      explicitArray: true,\n      ignoreAttrs: false,\n      mergeAttrs: false,\n      explicitRoot: true,\n      validator: null,\n      xmlns: false,\n      explicitChildren: false,\n      preserveChildrenOrder: false,\n      childkey: '$$',\n      charsAsChildren: false,\n      includeWhiteChars: false,\n      async: false,\n      strict: true,\n      attrNameProcessors: null,\n      attrValueProcessors: null,\n      tagNameProcessors: null,\n      valueProcessors: null,\n      rootName: 'root',\n      xmldec: {\n        'version': '1.0',\n        'encoding': 'UTF-8',\n        'standalone': true\n      },\n      doctype: null,\n      renderOpts: {\n        'pretty': true,\n        'indent': '  ',\n        'newline': '\\n'\n      },\n      headless: false,\n      chunkSize: 10000,\n      emptyTag: '',\n      cdata: false\n    }\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var bom, defaults, events, isEmpty, processItem, processors, sax, setImmediate,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  sax = require('sax');\n\n  events = require('events');\n\n  bom = require('./bom');\n\n  processors = require('./processors');\n\n  setImmediate = require('timers').setImmediate;\n\n  defaults = require('./defaults').defaults;\n\n  isEmpty = function(thing) {\n    return typeof thing === \"object\" && (thing != null) && Object.keys(thing).length === 0;\n  };\n\n  processItem = function(processors, item, key) {\n    var i, len, process;\n    for (i = 0, len = processors.length; i < len; i++) {\n      process = processors[i];\n      item = process(item, key);\n    }\n    return item;\n  };\n\n  exports.Parser = (function(superClass) {\n    extend(Parser, superClass);\n\n    function Parser(opts) {\n      this.parseString = bind(this.parseString, this);\n      this.reset = bind(this.reset, this);\n      this.assignOrPush = bind(this.assignOrPush, this);\n      this.processAsync = bind(this.processAsync, this);\n      var key, ref, value;\n      if (!(this instanceof exports.Parser)) {\n        return new exports.Parser(opts);\n      }\n      this.options = {};\n      ref = defaults[\"0.2\"];\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this.options[key] = value;\n      }\n      for (key in opts) {\n        if (!hasProp.call(opts, key)) continue;\n        value = opts[key];\n        this.options[key] = value;\n      }\n      if (this.options.xmlns) {\n        this.options.xmlnskey = this.options.attrkey + \"ns\";\n      }\n      if (this.options.normalizeTags) {\n        if (!this.options.tagNameProcessors) {\n          this.options.tagNameProcessors = [];\n        }\n        this.options.tagNameProcessors.unshift(processors.normalize);\n      }\n      this.reset();\n    }\n\n    Parser.prototype.processAsync = function() {\n      var chunk, err;\n      try {\n        if (this.remaining.length <= this.options.chunkSize) {\n          chunk = this.remaining;\n          this.remaining = '';\n          this.saxParser = this.saxParser.write(chunk);\n          return this.saxParser.close();\n        } else {\n          chunk = this.remaining.substr(0, this.options.chunkSize);\n          this.remaining = this.remaining.substr(this.options.chunkSize, this.remaining.length);\n          this.saxParser = this.saxParser.write(chunk);\n          return setImmediate(this.processAsync);\n        }\n      } catch (error1) {\n        err = error1;\n        if (!this.saxParser.errThrown) {\n          this.saxParser.errThrown = true;\n          return this.emit(err);\n        }\n      }\n    };\n\n    Parser.prototype.assignOrPush = function(obj, key, newValue) {\n      if (!(key in obj)) {\n        if (!this.options.explicitArray) {\n          return obj[key] = newValue;\n        } else {\n          return obj[key] = [newValue];\n        }\n      } else {\n        if (!(obj[key] instanceof Array)) {\n          obj[key] = [obj[key]];\n        }\n        return obj[key].push(newValue);\n      }\n    };\n\n    Parser.prototype.reset = function() {\n      var attrkey, charkey, ontext, stack;\n      this.removeAllListeners();\n      this.saxParser = sax.parser(this.options.strict, {\n        trim: false,\n        normalize: false,\n        xmlns: this.options.xmlns\n      });\n      this.saxParser.errThrown = false;\n      this.saxParser.onerror = (function(_this) {\n        return function(error) {\n          _this.saxParser.resume();\n          if (!_this.saxParser.errThrown) {\n            _this.saxParser.errThrown = true;\n            return _this.emit(\"error\", error);\n          }\n        };\n      })(this);\n      this.saxParser.onend = (function(_this) {\n        return function() {\n          if (!_this.saxParser.ended) {\n            _this.saxParser.ended = true;\n            return _this.emit(\"end\", _this.resultObject);\n          }\n        };\n      })(this);\n      this.saxParser.ended = false;\n      this.EXPLICIT_CHARKEY = this.options.explicitCharkey;\n      this.resultObject = null;\n      stack = [];\n      attrkey = this.options.attrkey;\n      charkey = this.options.charkey;\n      this.saxParser.onopentag = (function(_this) {\n        return function(node) {\n          var key, newValue, obj, processedKey, ref;\n          obj = {};\n          obj[charkey] = \"\";\n          if (!_this.options.ignoreAttrs) {\n            ref = node.attributes;\n            for (key in ref) {\n              if (!hasProp.call(ref, key)) continue;\n              if (!(attrkey in obj) && !_this.options.mergeAttrs) {\n                obj[attrkey] = {};\n              }\n              newValue = _this.options.attrValueProcessors ? processItem(_this.options.attrValueProcessors, node.attributes[key], key) : node.attributes[key];\n              processedKey = _this.options.attrNameProcessors ? processItem(_this.options.attrNameProcessors, key) : key;\n              if (_this.options.mergeAttrs) {\n                _this.assignOrPush(obj, processedKey, newValue);\n              } else {\n                obj[attrkey][processedKey] = newValue;\n              }\n            }\n          }\n          obj[\"#name\"] = _this.options.tagNameProcessors ? processItem(_this.options.tagNameProcessors, node.name) : node.name;\n          if (_this.options.xmlns) {\n            obj[_this.options.xmlnskey] = {\n              uri: node.uri,\n              local: node.local\n            };\n          }\n          return stack.push(obj);\n        };\n      })(this);\n      this.saxParser.onclosetag = (function(_this) {\n        return function() {\n          var cdata, emptyStr, key, node, nodeName, obj, objClone, old, s, xpath;\n          obj = stack.pop();\n          nodeName = obj[\"#name\"];\n          if (!_this.options.explicitChildren || !_this.options.preserveChildrenOrder) {\n            delete obj[\"#name\"];\n          }\n          if (obj.cdata === true) {\n            cdata = obj.cdata;\n            delete obj.cdata;\n          }\n          s = stack[stack.length - 1];\n          if (obj[charkey].match(/^\\s*$/) && !cdata) {\n            emptyStr = obj[charkey];\n            delete obj[charkey];\n          } else {\n            if (_this.options.trim) {\n              obj[charkey] = obj[charkey].trim();\n            }\n            if (_this.options.normalize) {\n              obj[charkey] = obj[charkey].replace(/\\s{2,}/g, \" \").trim();\n            }\n            obj[charkey] = _this.options.valueProcessors ? processItem(_this.options.valueProcessors, obj[charkey], nodeName) : obj[charkey];\n            if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {\n              obj = obj[charkey];\n            }\n          }\n          if (isEmpty(obj)) {\n            obj = _this.options.emptyTag !== '' ? _this.options.emptyTag : emptyStr;\n          }\n          if (_this.options.validator != null) {\n            xpath = \"/\" + ((function() {\n              var i, len, results;\n              results = [];\n              for (i = 0, len = stack.length; i < len; i++) {\n                node = stack[i];\n                results.push(node[\"#name\"]);\n              }\n              return results;\n            })()).concat(nodeName).join(\"/\");\n            (function() {\n              var err;\n              try {\n                return obj = _this.options.validator(xpath, s && s[nodeName], obj);\n              } catch (error1) {\n                err = error1;\n                return _this.emit(\"error\", err);\n              }\n            })();\n          }\n          if (_this.options.explicitChildren && !_this.options.mergeAttrs && typeof obj === 'object') {\n            if (!_this.options.preserveChildrenOrder) {\n              node = {};\n              if (_this.options.attrkey in obj) {\n                node[_this.options.attrkey] = obj[_this.options.attrkey];\n                delete obj[_this.options.attrkey];\n              }\n              if (!_this.options.charsAsChildren && _this.options.charkey in obj) {\n                node[_this.options.charkey] = obj[_this.options.charkey];\n                delete obj[_this.options.charkey];\n              }\n              if (Object.getOwnPropertyNames(obj).length > 0) {\n                node[_this.options.childkey] = obj;\n              }\n              obj = node;\n            } else if (s) {\n              s[_this.options.childkey] = s[_this.options.childkey] || [];\n              objClone = {};\n              for (key in obj) {\n                if (!hasProp.call(obj, key)) continue;\n                objClone[key] = obj[key];\n              }\n              s[_this.options.childkey].push(objClone);\n              delete obj[\"#name\"];\n              if (Object.keys(obj).length === 1 && charkey in obj && !_this.EXPLICIT_CHARKEY) {\n                obj = obj[charkey];\n              }\n            }\n          }\n          if (stack.length > 0) {\n            return _this.assignOrPush(s, nodeName, obj);\n          } else {\n            if (_this.options.explicitRoot) {\n              old = obj;\n              obj = {};\n              obj[nodeName] = old;\n            }\n            _this.resultObject = obj;\n            _this.saxParser.ended = true;\n            return _this.emit(\"end\", _this.resultObject);\n          }\n        };\n      })(this);\n      ontext = (function(_this) {\n        return function(text) {\n          var charChild, s;\n          s = stack[stack.length - 1];\n          if (s) {\n            s[charkey] += text;\n            if (_this.options.explicitChildren && _this.options.preserveChildrenOrder && _this.options.charsAsChildren && (_this.options.includeWhiteChars || text.replace(/\\\\n/g, '').trim() !== '')) {\n              s[_this.options.childkey] = s[_this.options.childkey] || [];\n              charChild = {\n                '#name': '__text__'\n              };\n              charChild[charkey] = text;\n              if (_this.options.normalize) {\n                charChild[charkey] = charChild[charkey].replace(/\\s{2,}/g, \" \").trim();\n              }\n              s[_this.options.childkey].push(charChild);\n            }\n            return s;\n          }\n        };\n      })(this);\n      this.saxParser.ontext = ontext;\n      return this.saxParser.oncdata = (function(_this) {\n        return function(text) {\n          var s;\n          s = ontext(text);\n          if (s) {\n            return s.cdata = true;\n          }\n        };\n      })(this);\n    };\n\n    Parser.prototype.parseString = function(str, cb) {\n      var err;\n      if ((cb != null) && typeof cb === \"function\") {\n        this.on(\"end\", function(result) {\n          this.reset();\n          return cb(null, result);\n        });\n        this.on(\"error\", function(err) {\n          this.reset();\n          return cb(err);\n        });\n      }\n      try {\n        str = str.toString();\n        if (str.trim() === '') {\n          this.emit(\"end\", null);\n          return true;\n        }\n        str = bom.stripBOM(str);\n        if (this.options.async) {\n          this.remaining = str;\n          setImmediate(this.processAsync);\n          return this.saxParser;\n        }\n        return this.saxParser.write(str).close();\n      } catch (error1) {\n        err = error1;\n        if (!(this.saxParser.errThrown || this.saxParser.ended)) {\n          this.emit('error', err);\n          return this.saxParser.errThrown = true;\n        } else if (this.saxParser.ended) {\n          throw err;\n        }\n      }\n    };\n\n    return Parser;\n\n  })(events.EventEmitter);\n\n  exports.parseString = function(str, a, b) {\n    var cb, options, parser;\n    if (b != null) {\n      if (typeof b === 'function') {\n        cb = b;\n      }\n      if (typeof a === 'object') {\n        options = a;\n      }\n    } else {\n      if (typeof a === 'function') {\n        cb = a;\n      }\n      options = {};\n    }\n    parser = new exports.Parser(options);\n    return parser.parseString(str, cb);\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var prefixMatch;\n\n  prefixMatch = new RegExp(/(?!xmlns)^.*:/);\n\n  exports.normalize = function(str) {\n    return str.toLowerCase();\n  };\n\n  exports.firstCharLowerCase = function(str) {\n    return str.charAt(0).toLowerCase() + str.slice(1);\n  };\n\n  exports.stripPrefix = function(str) {\n    return str.replace(prefixMatch, '');\n  };\n\n  exports.parseNumbers = function(str) {\n    if (!isNaN(str)) {\n      str = str % 1 === 0 ? parseInt(str, 10) : parseFloat(str);\n    }\n    return str;\n  };\n\n  exports.parseBooleans = function(str) {\n    if (/^(?:true|false)$/i.test(str)) {\n      str = str.toLowerCase() === 'true';\n    }\n    return str;\n  };\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  \"use strict\";\n  var builder, defaults, parser, processors,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  defaults = require('./defaults');\n\n  builder = require('./builder');\n\n  parser = require('./parser');\n\n  processors = require('./processors');\n\n  exports.defaults = defaults.defaults;\n\n  exports.processors = processors;\n\n  exports.ValidationError = (function(superClass) {\n    extend(ValidationError, superClass);\n\n    function ValidationError(message) {\n      this.message = message;\n    }\n\n    return ValidationError;\n\n  })(Error);\n\n  exports.Builder = builder.Builder;\n\n  exports.Parser = parser.Parser;\n\n  exports.parseString = parser.parseString;\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var assign, isArray, isEmpty, isFunction, isObject, isPlainObject,\n    slice = [].slice,\n    hasProp = {}.hasOwnProperty;\n\n  assign = function() {\n    var i, key, len, source, sources, target;\n    target = arguments[0], sources = 2 <= arguments.length ? slice.call(arguments, 1) : [];\n    if (isFunction(Object.assign)) {\n      Object.assign.apply(null, arguments);\n    } else {\n      for (i = 0, len = sources.length; i < len; i++) {\n        source = sources[i];\n        if (source != null) {\n          for (key in source) {\n            if (!hasProp.call(source, key)) continue;\n            target[key] = source[key];\n          }\n        }\n      }\n    }\n    return target;\n  };\n\n  isFunction = function(val) {\n    return !!val && Object.prototype.toString.call(val) === '[object Function]';\n  };\n\n  isObject = function(val) {\n    var ref;\n    return !!val && ((ref = typeof val) === 'function' || ref === 'object');\n  };\n\n  isArray = function(val) {\n    if (isFunction(Array.isArray)) {\n      return Array.isArray(val);\n    } else {\n      return Object.prototype.toString.call(val) === '[object Array]';\n    }\n  };\n\n  isEmpty = function(val) {\n    var key;\n    if (isArray(val)) {\n      return !val.length;\n    } else {\n      for (key in val) {\n        if (!hasProp.call(val, key)) continue;\n        return false;\n      }\n      return true;\n    }\n  };\n\n  isPlainObject = function(val) {\n    var ctor, proto;\n    return isObject(val) && (proto = Object.getPrototypeOf(val)) && (ctor = proto.constructor) && (typeof ctor === 'function') && (ctor instanceof ctor) && (Function.prototype.toString.call(ctor) === Function.prototype.toString.call(Object));\n  };\n\n  module.exports.assign = assign;\n\n  module.exports.isFunction = isFunction;\n\n  module.exports.isObject = isObject;\n\n  module.exports.isArray = isArray;\n\n  module.exports.isEmpty = isEmpty;\n\n  module.exports.isPlainObject = isPlainObject;\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLAttribute;\n\n  module.exports = XMLAttribute = (function() {\n    function XMLAttribute(parent, name, value) {\n      this.options = parent.options;\n      this.stringify = parent.stringify;\n      if (name == null) {\n        throw new Error(\"Missing attribute name of element \" + parent.name);\n      }\n      if (value == null) {\n        throw new Error(\"Missing attribute value for attribute \" + name + \" of element \" + parent.name);\n      }\n      this.name = this.stringify.attName(name);\n      this.value = this.stringify.attValue(value);\n    }\n\n    XMLAttribute.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLAttribute.prototype.toString = function(options) {\n      return this.options.writer.set(options).attribute(this);\n    };\n\n    return XMLAttribute;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLCData, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLCData = (function(superClass) {\n    extend(XMLCData, superClass);\n\n    function XMLCData(parent, text) {\n      XMLCData.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing CDATA text\");\n      }\n      this.text = this.stringify.cdata(text);\n    }\n\n    XMLCData.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLCData.prototype.toString = function(options) {\n      return this.options.writer.set(options).cdata(this);\n    };\n\n    return XMLCData;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLComment, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLComment = (function(superClass) {\n    extend(XMLComment, superClass);\n\n    function XMLComment(parent, text) {\n      XMLComment.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing comment text\");\n      }\n      this.text = this.stringify.comment(text);\n    }\n\n    XMLComment.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLComment.prototype.toString = function(options) {\n      return this.options.writer.set(options).comment(this);\n    };\n\n    return XMLComment;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDTDAttList, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLDTDAttList = (function(superClass) {\n    extend(XMLDTDAttList, superClass);\n\n    function XMLDTDAttList(parent, elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      XMLDTDAttList.__super__.constructor.call(this, parent);\n      if (elementName == null) {\n        throw new Error(\"Missing DTD element name\");\n      }\n      if (attributeName == null) {\n        throw new Error(\"Missing DTD attribute name\");\n      }\n      if (!attributeType) {\n        throw new Error(\"Missing DTD attribute type\");\n      }\n      if (!defaultValueType) {\n        throw new Error(\"Missing DTD attribute default\");\n      }\n      if (defaultValueType.indexOf('#') !== 0) {\n        defaultValueType = '#' + defaultValueType;\n      }\n      if (!defaultValueType.match(/^(#REQUIRED|#IMPLIED|#FIXED|#DEFAULT)$/)) {\n        throw new Error(\"Invalid default value type; expected: #REQUIRED, #IMPLIED, #FIXED or #DEFAULT\");\n      }\n      if (defaultValue && !defaultValueType.match(/^(#FIXED|#DEFAULT)$/)) {\n        throw new Error(\"Default value only applies to #FIXED or #DEFAULT\");\n      }\n      this.elementName = this.stringify.eleName(elementName);\n      this.attributeName = this.stringify.attName(attributeName);\n      this.attributeType = this.stringify.dtdAttType(attributeType);\n      this.defaultValue = this.stringify.dtdAttDefault(defaultValue);\n      this.defaultValueType = defaultValueType;\n    }\n\n    XMLDTDAttList.prototype.toString = function(options) {\n      return this.options.writer.set(options).dtdAttList(this);\n    };\n\n    return XMLDTDAttList;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDTDElement, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLDTDElement = (function(superClass) {\n    extend(XMLDTDElement, superClass);\n\n    function XMLDTDElement(parent, name, value) {\n      XMLDTDElement.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing DTD element name\");\n      }\n      if (!value) {\n        value = '(#PCDATA)';\n      }\n      if (Array.isArray(value)) {\n        value = '(' + value.join(',') + ')';\n      }\n      this.name = this.stringify.eleName(name);\n      this.value = this.stringify.dtdElementValue(value);\n    }\n\n    XMLDTDElement.prototype.toString = function(options) {\n      return this.options.writer.set(options).dtdElement(this);\n    };\n\n    return XMLDTDElement;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDTDEntity, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLDTDEntity = (function(superClass) {\n    extend(XMLDTDEntity, superClass);\n\n    function XMLDTDEntity(parent, pe, name, value) {\n      XMLDTDEntity.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing entity name\");\n      }\n      if (value == null) {\n        throw new Error(\"Missing entity value\");\n      }\n      this.pe = !!pe;\n      this.name = this.stringify.eleName(name);\n      if (!isObject(value)) {\n        this.value = this.stringify.dtdEntityValue(value);\n      } else {\n        if (!value.pubID && !value.sysID) {\n          throw new Error(\"Public and/or system identifiers are required for an external entity\");\n        }\n        if (value.pubID && !value.sysID) {\n          throw new Error(\"System identifier is required for a public external entity\");\n        }\n        if (value.pubID != null) {\n          this.pubID = this.stringify.dtdPubID(value.pubID);\n        }\n        if (value.sysID != null) {\n          this.sysID = this.stringify.dtdSysID(value.sysID);\n        }\n        if (value.nData != null) {\n          this.nData = this.stringify.dtdNData(value.nData);\n        }\n        if (this.pe && this.nData) {\n          throw new Error(\"Notation declaration is not allowed in a parameter entity\");\n        }\n      }\n    }\n\n    XMLDTDEntity.prototype.toString = function(options) {\n      return this.options.writer.set(options).dtdEntity(this);\n    };\n\n    return XMLDTDEntity;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDTDNotation, XMLNode,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLDTDNotation = (function(superClass) {\n    extend(XMLDTDNotation, superClass);\n\n    function XMLDTDNotation(parent, name, value) {\n      XMLDTDNotation.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing notation name\");\n      }\n      if (!value.pubID && !value.sysID) {\n        throw new Error(\"Public or system identifiers are required for an external entity\");\n      }\n      this.name = this.stringify.eleName(name);\n      if (value.pubID != null) {\n        this.pubID = this.stringify.dtdPubID(value.pubID);\n      }\n      if (value.sysID != null) {\n        this.sysID = this.stringify.dtdSysID(value.sysID);\n      }\n    }\n\n    XMLDTDNotation.prototype.toString = function(options) {\n      return this.options.writer.set(options).dtdNotation(this);\n    };\n\n    return XMLDTDNotation;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDeclaration, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLDeclaration = (function(superClass) {\n    extend(XMLDeclaration, superClass);\n\n    function XMLDeclaration(parent, version, encoding, standalone) {\n      var ref;\n      XMLDeclaration.__super__.constructor.call(this, parent);\n      if (isObject(version)) {\n        ref = version, version = ref.version, encoding = ref.encoding, standalone = ref.standalone;\n      }\n      if (!version) {\n        version = '1.0';\n      }\n      this.version = this.stringify.xmlVersion(version);\n      if (encoding != null) {\n        this.encoding = this.stringify.xmlEncoding(encoding);\n      }\n      if (standalone != null) {\n        this.standalone = this.stringify.xmlStandalone(standalone);\n      }\n    }\n\n    XMLDeclaration.prototype.toString = function(options) {\n      return this.options.writer.set(options).declaration(this);\n    };\n\n    return XMLDeclaration;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDocType, XMLNode, isObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isObject = require('./Utility').isObject;\n\n  XMLNode = require('./XMLNode');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  module.exports = XMLDocType = (function(superClass) {\n    extend(XMLDocType, superClass);\n\n    function XMLDocType(parent, pubID, sysID) {\n      var ref, ref1;\n      XMLDocType.__super__.constructor.call(this, parent);\n      this.documentObject = parent;\n      if (isObject(pubID)) {\n        ref = pubID, pubID = ref.pubID, sysID = ref.sysID;\n      }\n      if (sysID == null) {\n        ref1 = [pubID, sysID], sysID = ref1[0], pubID = ref1[1];\n      }\n      if (pubID != null) {\n        this.pubID = this.stringify.dtdPubID(pubID);\n      }\n      if (sysID != null) {\n        this.sysID = this.stringify.dtdSysID(sysID);\n      }\n    }\n\n    XMLDocType.prototype.element = function(name, value) {\n      var child;\n      child = new XMLDTDElement(this, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.attList = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      var child;\n      child = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.entity = function(name, value) {\n      var child;\n      child = new XMLDTDEntity(this, false, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.pEntity = function(name, value) {\n      var child;\n      child = new XMLDTDEntity(this, true, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.notation = function(name, value) {\n      var child;\n      child = new XMLDTDNotation(this, name, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLDocType.prototype.toString = function(options) {\n      return this.options.writer.set(options).docType(this);\n    };\n\n    XMLDocType.prototype.ele = function(name, value) {\n      return this.element(name, value);\n    };\n\n    XMLDocType.prototype.att = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      return this.attList(elementName, attributeName, attributeType, defaultValueType, defaultValue);\n    };\n\n    XMLDocType.prototype.ent = function(name, value) {\n      return this.entity(name, value);\n    };\n\n    XMLDocType.prototype.pent = function(name, value) {\n      return this.pEntity(name, value);\n    };\n\n    XMLDocType.prototype.not = function(name, value) {\n      return this.notation(name, value);\n    };\n\n    XMLDocType.prototype.up = function() {\n      return this.root() || this.documentObject;\n    };\n\n    return XMLDocType;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDocument, XMLNode, XMLStringWriter, XMLStringifier, isPlainObject,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  isPlainObject = require('./Utility').isPlainObject;\n\n  XMLNode = require('./XMLNode');\n\n  XMLStringifier = require('./XMLStringifier');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  module.exports = XMLDocument = (function(superClass) {\n    extend(XMLDocument, superClass);\n\n    function XMLDocument(options) {\n      XMLDocument.__super__.constructor.call(this, null);\n      options || (options = {});\n      if (!options.writer) {\n        options.writer = new XMLStringWriter();\n      }\n      this.options = options;\n      this.stringify = new XMLStringifier(options);\n      this.isDocument = true;\n    }\n\n    XMLDocument.prototype.end = function(writer) {\n      var writerOptions;\n      if (!writer) {\n        writer = this.options.writer;\n      } else if (isPlainObject(writer)) {\n        writerOptions = writer;\n        writer = this.options.writer.set(writerOptions);\n      }\n      return writer.document(this);\n    };\n\n    XMLDocument.prototype.toString = function(options) {\n      return this.options.writer.set(options).document(this);\n    };\n\n    return XMLDocument;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLAttribute, XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLDocumentCB, XMLElement, XMLProcessingInstruction, XMLRaw, XMLStringWriter, XMLStringifier, XMLText, isFunction, isObject, isPlainObject, ref,\n    hasProp = {}.hasOwnProperty;\n\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction, isPlainObject = ref.isPlainObject;\n\n  XMLElement = require('./XMLElement');\n\n  XMLCData = require('./XMLCData');\n\n  XMLComment = require('./XMLComment');\n\n  XMLRaw = require('./XMLRaw');\n\n  XMLText = require('./XMLText');\n\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n\n  XMLDeclaration = require('./XMLDeclaration');\n\n  XMLDocType = require('./XMLDocType');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  XMLAttribute = require('./XMLAttribute');\n\n  XMLStringifier = require('./XMLStringifier');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  module.exports = XMLDocumentCB = (function() {\n    function XMLDocumentCB(options, onData, onEnd) {\n      var writerOptions;\n      options || (options = {});\n      if (!options.writer) {\n        options.writer = new XMLStringWriter(options);\n      } else if (isPlainObject(options.writer)) {\n        writerOptions = options.writer;\n        options.writer = new XMLStringWriter(writerOptions);\n      }\n      this.options = options;\n      this.writer = options.writer;\n      this.stringify = new XMLStringifier(options);\n      this.onDataCallback = onData || function() {};\n      this.onEndCallback = onEnd || function() {};\n      this.currentNode = null;\n      this.currentLevel = -1;\n      this.openTags = {};\n      this.documentStarted = false;\n      this.documentCompleted = false;\n      this.root = null;\n    }\n\n    XMLDocumentCB.prototype.node = function(name, attributes, text) {\n      var ref1;\n      if (name == null) {\n        throw new Error(\"Missing node name\");\n      }\n      if (this.root && this.currentLevel === -1) {\n        throw new Error(\"Document can only have one root node\");\n      }\n      this.openCurrent();\n      name = name.valueOf();\n      if (attributes == null) {\n        attributes = {};\n      }\n      attributes = attributes.valueOf();\n      if (!isObject(attributes)) {\n        ref1 = [attributes, text], text = ref1[0], attributes = ref1[1];\n      }\n      this.currentNode = new XMLElement(this, name, attributes);\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n      if (text != null) {\n        this.text(text);\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.element = function(name, attributes, text) {\n      if (this.currentNode && this.currentNode instanceof XMLDocType) {\n        return this.dtdElement.apply(this, arguments);\n      } else {\n        return this.node(name, attributes, text);\n      }\n    };\n\n    XMLDocumentCB.prototype.attribute = function(name, value) {\n      var attName, attValue;\n      if (!this.currentNode || this.currentNode.children) {\n        throw new Error(\"att() can only be used immediately after an ele() call in callback mode\");\n      }\n      if (name != null) {\n        name = name.valueOf();\n      }\n      if (isObject(name)) {\n        for (attName in name) {\n          if (!hasProp.call(name, attName)) continue;\n          attValue = name[attName];\n          this.attribute(attName, attValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        if (!this.options.skipNullAttributes || (value != null)) {\n          this.currentNode.attributes[name] = new XMLAttribute(this, name, value);\n        }\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.text = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLText(this, value);\n      this.onData(this.writer.text(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.cdata = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLCData(this, value);\n      this.onData(this.writer.cdata(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.comment = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLComment(this, value);\n      this.onData(this.writer.comment(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.raw = function(value) {\n      var node;\n      this.openCurrent();\n      node = new XMLRaw(this, value);\n      this.onData(this.writer.raw(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.instruction = function(target, value) {\n      var i, insTarget, insValue, len, node;\n      this.openCurrent();\n      if (target != null) {\n        target = target.valueOf();\n      }\n      if (value != null) {\n        value = value.valueOf();\n      }\n      if (Array.isArray(target)) {\n        for (i = 0, len = target.length; i < len; i++) {\n          insTarget = target[i];\n          this.instruction(insTarget);\n        }\n      } else if (isObject(target)) {\n        for (insTarget in target) {\n          if (!hasProp.call(target, insTarget)) continue;\n          insValue = target[insTarget];\n          this.instruction(insTarget, insValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        node = new XMLProcessingInstruction(this, target, value);\n        this.onData(this.writer.processingInstruction(node, this.currentLevel + 1));\n      }\n      return this;\n    };\n\n    XMLDocumentCB.prototype.declaration = function(version, encoding, standalone) {\n      var node;\n      this.openCurrent();\n      if (this.documentStarted) {\n        throw new Error(\"declaration() must be the first node\");\n      }\n      node = new XMLDeclaration(this, version, encoding, standalone);\n      this.onData(this.writer.declaration(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.doctype = function(root, pubID, sysID) {\n      this.openCurrent();\n      if (root == null) {\n        throw new Error(\"Missing root node name\");\n      }\n      if (this.root) {\n        throw new Error(\"dtd() must come before the root node\");\n      }\n      this.currentNode = new XMLDocType(this, pubID, sysID);\n      this.currentNode.rootNodeName = root;\n      this.currentNode.children = false;\n      this.currentLevel++;\n      this.openTags[this.currentLevel] = this.currentNode;\n      return this;\n    };\n\n    XMLDocumentCB.prototype.dtdElement = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDElement(this, name, value);\n      this.onData(this.writer.dtdElement(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.attList = function(elementName, attributeName, attributeType, defaultValueType, defaultValue) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDAttList(this, elementName, attributeName, attributeType, defaultValueType, defaultValue);\n      this.onData(this.writer.dtdAttList(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.entity = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, false, name, value);\n      this.onData(this.writer.dtdEntity(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.pEntity = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDEntity(this, true, name, value);\n      this.onData(this.writer.dtdEntity(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.notation = function(name, value) {\n      var node;\n      this.openCurrent();\n      node = new XMLDTDNotation(this, name, value);\n      this.onData(this.writer.dtdNotation(node, this.currentLevel + 1));\n      return this;\n    };\n\n    XMLDocumentCB.prototype.up = function() {\n      if (this.currentLevel < 0) {\n        throw new Error(\"The document node has no parent\");\n      }\n      if (this.currentNode) {\n        if (this.currentNode.children) {\n          this.closeNode(this.currentNode);\n        } else {\n          this.openNode(this.currentNode);\n        }\n        this.currentNode = null;\n      } else {\n        this.closeNode(this.openTags[this.currentLevel]);\n      }\n      delete this.openTags[this.currentLevel];\n      this.currentLevel--;\n      return this;\n    };\n\n    XMLDocumentCB.prototype.end = function() {\n      while (this.currentLevel >= 0) {\n        this.up();\n      }\n      return this.onEnd();\n    };\n\n    XMLDocumentCB.prototype.openCurrent = function() {\n      if (this.currentNode) {\n        this.currentNode.children = true;\n        return this.openNode(this.currentNode);\n      }\n    };\n\n    XMLDocumentCB.prototype.openNode = function(node) {\n      if (!node.isOpen) {\n        if (!this.root && this.currentLevel === 0 && node instanceof XMLElement) {\n          this.root = node;\n        }\n        this.onData(this.writer.openNode(node, this.currentLevel));\n        return node.isOpen = true;\n      }\n    };\n\n    XMLDocumentCB.prototype.closeNode = function(node) {\n      if (!node.isClosed) {\n        this.onData(this.writer.closeNode(node, this.currentLevel));\n        return node.isClosed = true;\n      }\n    };\n\n    XMLDocumentCB.prototype.onData = function(chunk) {\n      this.documentStarted = true;\n      return this.onDataCallback(chunk);\n    };\n\n    XMLDocumentCB.prototype.onEnd = function() {\n      this.documentCompleted = true;\n      return this.onEndCallback();\n    };\n\n    XMLDocumentCB.prototype.ele = function() {\n      return this.element.apply(this, arguments);\n    };\n\n    XMLDocumentCB.prototype.nod = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.txt = function(value) {\n      return this.text(value);\n    };\n\n    XMLDocumentCB.prototype.dat = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLDocumentCB.prototype.com = function(value) {\n      return this.comment(value);\n    };\n\n    XMLDocumentCB.prototype.ins = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLDocumentCB.prototype.dec = function(version, encoding, standalone) {\n      return this.declaration(version, encoding, standalone);\n    };\n\n    XMLDocumentCB.prototype.dtd = function(root, pubID, sysID) {\n      return this.doctype(root, pubID, sysID);\n    };\n\n    XMLDocumentCB.prototype.e = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.n = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLDocumentCB.prototype.t = function(value) {\n      return this.text(value);\n    };\n\n    XMLDocumentCB.prototype.d = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLDocumentCB.prototype.c = function(value) {\n      return this.comment(value);\n    };\n\n    XMLDocumentCB.prototype.r = function(value) {\n      return this.raw(value);\n    };\n\n    XMLDocumentCB.prototype.i = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLDocumentCB.prototype.att = function() {\n      if (this.currentNode && this.currentNode instanceof XMLDocType) {\n        return this.attList.apply(this, arguments);\n      } else {\n        return this.attribute.apply(this, arguments);\n      }\n    };\n\n    XMLDocumentCB.prototype.a = function() {\n      if (this.currentNode && this.currentNode instanceof XMLDocType) {\n        return this.attList.apply(this, arguments);\n      } else {\n        return this.attribute.apply(this, arguments);\n      }\n    };\n\n    XMLDocumentCB.prototype.ent = function(name, value) {\n      return this.entity(name, value);\n    };\n\n    XMLDocumentCB.prototype.pent = function(name, value) {\n      return this.pEntity(name, value);\n    };\n\n    XMLDocumentCB.prototype.not = function(name, value) {\n      return this.notation(name, value);\n    };\n\n    return XMLDocumentCB;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLAttribute, XMLElement, XMLNode, isFunction, isObject, ref,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction;\n\n  XMLNode = require('./XMLNode');\n\n  XMLAttribute = require('./XMLAttribute');\n\n  module.exports = XMLElement = (function(superClass) {\n    extend(XMLElement, superClass);\n\n    function XMLElement(parent, name, attributes) {\n      XMLElement.__super__.constructor.call(this, parent);\n      if (name == null) {\n        throw new Error(\"Missing element name\");\n      }\n      this.name = this.stringify.eleName(name);\n      this.attributes = {};\n      if (attributes != null) {\n        this.attribute(attributes);\n      }\n      if (parent.isDocument) {\n        this.isRoot = true;\n        this.documentObject = parent;\n        parent.rootObject = this;\n      }\n    }\n\n    XMLElement.prototype.clone = function() {\n      var att, attName, clonedSelf, ref1;\n      clonedSelf = Object.create(this);\n      if (clonedSelf.isRoot) {\n        clonedSelf.documentObject = null;\n      }\n      clonedSelf.attributes = {};\n      ref1 = this.attributes;\n      for (attName in ref1) {\n        if (!hasProp.call(ref1, attName)) continue;\n        att = ref1[attName];\n        clonedSelf.attributes[attName] = att.clone();\n      }\n      clonedSelf.children = [];\n      this.children.forEach(function(child) {\n        var clonedChild;\n        clonedChild = child.clone();\n        clonedChild.parent = clonedSelf;\n        return clonedSelf.children.push(clonedChild);\n      });\n      return clonedSelf;\n    };\n\n    XMLElement.prototype.attribute = function(name, value) {\n      var attName, attValue;\n      if (name != null) {\n        name = name.valueOf();\n      }\n      if (isObject(name)) {\n        for (attName in name) {\n          if (!hasProp.call(name, attName)) continue;\n          attValue = name[attName];\n          this.attribute(attName, attValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        if (!this.options.skipNullAttributes || (value != null)) {\n          this.attributes[name] = new XMLAttribute(this, name, value);\n        }\n      }\n      return this;\n    };\n\n    XMLElement.prototype.removeAttribute = function(name) {\n      var attName, i, len;\n      if (name == null) {\n        throw new Error(\"Missing attribute name\");\n      }\n      name = name.valueOf();\n      if (Array.isArray(name)) {\n        for (i = 0, len = name.length; i < len; i++) {\n          attName = name[i];\n          delete this.attributes[attName];\n        }\n      } else {\n        delete this.attributes[name];\n      }\n      return this;\n    };\n\n    XMLElement.prototype.toString = function(options) {\n      return this.options.writer.set(options).element(this);\n    };\n\n    XMLElement.prototype.att = function(name, value) {\n      return this.attribute(name, value);\n    };\n\n    XMLElement.prototype.a = function(name, value) {\n      return this.attribute(name, value);\n    };\n\n    return XMLElement;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLCData, XMLComment, XMLDeclaration, XMLDocType, XMLElement, XMLNode, XMLProcessingInstruction, XMLRaw, XMLText, isEmpty, isFunction, isObject, ref,\n    hasProp = {}.hasOwnProperty;\n\n  ref = require('./Utility'), isObject = ref.isObject, isFunction = ref.isFunction, isEmpty = ref.isEmpty;\n\n  XMLElement = null;\n\n  XMLCData = null;\n\n  XMLComment = null;\n\n  XMLDeclaration = null;\n\n  XMLDocType = null;\n\n  XMLRaw = null;\n\n  XMLText = null;\n\n  XMLProcessingInstruction = null;\n\n  module.exports = XMLNode = (function() {\n    function XMLNode(parent) {\n      this.parent = parent;\n      if (this.parent) {\n        this.options = this.parent.options;\n        this.stringify = this.parent.stringify;\n      }\n      this.children = [];\n      if (!XMLElement) {\n        XMLElement = require('./XMLElement');\n        XMLCData = require('./XMLCData');\n        XMLComment = require('./XMLComment');\n        XMLDeclaration = require('./XMLDeclaration');\n        XMLDocType = require('./XMLDocType');\n        XMLRaw = require('./XMLRaw');\n        XMLText = require('./XMLText');\n        XMLProcessingInstruction = require('./XMLProcessingInstruction');\n      }\n    }\n\n    XMLNode.prototype.element = function(name, attributes, text) {\n      var childNode, item, j, k, key, lastChild, len, len1, ref1, val;\n      lastChild = null;\n      if (attributes == null) {\n        attributes = {};\n      }\n      attributes = attributes.valueOf();\n      if (!isObject(attributes)) {\n        ref1 = [attributes, text], text = ref1[0], attributes = ref1[1];\n      }\n      if (name != null) {\n        name = name.valueOf();\n      }\n      if (Array.isArray(name)) {\n        for (j = 0, len = name.length; j < len; j++) {\n          item = name[j];\n          lastChild = this.element(item);\n        }\n      } else if (isFunction(name)) {\n        lastChild = this.element(name.apply());\n      } else if (isObject(name)) {\n        for (key in name) {\n          if (!hasProp.call(name, key)) continue;\n          val = name[key];\n          if (isFunction(val)) {\n            val = val.apply();\n          }\n          if ((isObject(val)) && (isEmpty(val))) {\n            val = null;\n          }\n          if (!this.options.ignoreDecorators && this.stringify.convertAttKey && key.indexOf(this.stringify.convertAttKey) === 0) {\n            lastChild = this.attribute(key.substr(this.stringify.convertAttKey.length), val);\n          } else if (!this.options.separateArrayItems && Array.isArray(val)) {\n            for (k = 0, len1 = val.length; k < len1; k++) {\n              item = val[k];\n              childNode = {};\n              childNode[key] = item;\n              lastChild = this.element(childNode);\n            }\n          } else if (isObject(val)) {\n            lastChild = this.element(key);\n            lastChild.element(val);\n          } else {\n            lastChild = this.element(key, val);\n          }\n        }\n      } else {\n        if (!this.options.ignoreDecorators && this.stringify.convertTextKey && name.indexOf(this.stringify.convertTextKey) === 0) {\n          lastChild = this.text(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertCDataKey && name.indexOf(this.stringify.convertCDataKey) === 0) {\n          lastChild = this.cdata(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertCommentKey && name.indexOf(this.stringify.convertCommentKey) === 0) {\n          lastChild = this.comment(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertRawKey && name.indexOf(this.stringify.convertRawKey) === 0) {\n          lastChild = this.raw(text);\n        } else if (!this.options.ignoreDecorators && this.stringify.convertPIKey && name.indexOf(this.stringify.convertPIKey) === 0) {\n          lastChild = this.instruction(name.substr(this.stringify.convertPIKey.length), text);\n        } else {\n          lastChild = this.node(name, attributes, text);\n        }\n      }\n      if (lastChild == null) {\n        throw new Error(\"Could not create any elements with: \" + name);\n      }\n      return lastChild;\n    };\n\n    XMLNode.prototype.insertBefore = function(name, attributes, text) {\n      var child, i, removed;\n      if (this.isRoot) {\n        throw new Error(\"Cannot insert elements at root level\");\n      }\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i);\n      child = this.parent.element(name, attributes, text);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return child;\n    };\n\n    XMLNode.prototype.insertAfter = function(name, attributes, text) {\n      var child, i, removed;\n      if (this.isRoot) {\n        throw new Error(\"Cannot insert elements at root level\");\n      }\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.element(name, attributes, text);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return child;\n    };\n\n    XMLNode.prototype.remove = function() {\n      var i, ref1;\n      if (this.isRoot) {\n        throw new Error(\"Cannot remove the root element\");\n      }\n      i = this.parent.children.indexOf(this);\n      [].splice.apply(this.parent.children, [i, i - i + 1].concat(ref1 = [])), ref1;\n      return this.parent;\n    };\n\n    XMLNode.prototype.node = function(name, attributes, text) {\n      var child, ref1;\n      if (name != null) {\n        name = name.valueOf();\n      }\n      attributes || (attributes = {});\n      attributes = attributes.valueOf();\n      if (!isObject(attributes)) {\n        ref1 = [attributes, text], text = ref1[0], attributes = ref1[1];\n      }\n      child = new XMLElement(this, name, attributes);\n      if (text != null) {\n        child.text(text);\n      }\n      this.children.push(child);\n      return child;\n    };\n\n    XMLNode.prototype.text = function(value) {\n      var child;\n      child = new XMLText(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.cdata = function(value) {\n      var child;\n      child = new XMLCData(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.comment = function(value) {\n      var child;\n      child = new XMLComment(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.commentBefore = function(value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i);\n      child = this.parent.comment(value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.commentAfter = function(value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.comment(value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.raw = function(value) {\n      var child;\n      child = new XMLRaw(this, value);\n      this.children.push(child);\n      return this;\n    };\n\n    XMLNode.prototype.instruction = function(target, value) {\n      var insTarget, insValue, instruction, j, len;\n      if (target != null) {\n        target = target.valueOf();\n      }\n      if (value != null) {\n        value = value.valueOf();\n      }\n      if (Array.isArray(target)) {\n        for (j = 0, len = target.length; j < len; j++) {\n          insTarget = target[j];\n          this.instruction(insTarget);\n        }\n      } else if (isObject(target)) {\n        for (insTarget in target) {\n          if (!hasProp.call(target, insTarget)) continue;\n          insValue = target[insTarget];\n          this.instruction(insTarget, insValue);\n        }\n      } else {\n        if (isFunction(value)) {\n          value = value.apply();\n        }\n        instruction = new XMLProcessingInstruction(this, target, value);\n        this.children.push(instruction);\n      }\n      return this;\n    };\n\n    XMLNode.prototype.instructionBefore = function(target, value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i);\n      child = this.parent.instruction(target, value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.instructionAfter = function(target, value) {\n      var child, i, removed;\n      i = this.parent.children.indexOf(this);\n      removed = this.parent.children.splice(i + 1);\n      child = this.parent.instruction(target, value);\n      Array.prototype.push.apply(this.parent.children, removed);\n      return this;\n    };\n\n    XMLNode.prototype.declaration = function(version, encoding, standalone) {\n      var doc, xmldec;\n      doc = this.document();\n      xmldec = new XMLDeclaration(doc, version, encoding, standalone);\n      if (doc.children[0] instanceof XMLDeclaration) {\n        doc.children[0] = xmldec;\n      } else {\n        doc.children.unshift(xmldec);\n      }\n      return doc.root() || doc;\n    };\n\n    XMLNode.prototype.doctype = function(pubID, sysID) {\n      var child, doc, doctype, i, j, k, len, len1, ref1, ref2;\n      doc = this.document();\n      doctype = new XMLDocType(doc, pubID, sysID);\n      ref1 = doc.children;\n      for (i = j = 0, len = ref1.length; j < len; i = ++j) {\n        child = ref1[i];\n        if (child instanceof XMLDocType) {\n          doc.children[i] = doctype;\n          return doctype;\n        }\n      }\n      ref2 = doc.children;\n      for (i = k = 0, len1 = ref2.length; k < len1; i = ++k) {\n        child = ref2[i];\n        if (child.isRoot) {\n          doc.children.splice(i, 0, doctype);\n          return doctype;\n        }\n      }\n      doc.children.push(doctype);\n      return doctype;\n    };\n\n    XMLNode.prototype.up = function() {\n      if (this.isRoot) {\n        throw new Error(\"The root node has no parent. Use doc() if you need to get the document object.\");\n      }\n      return this.parent;\n    };\n\n    XMLNode.prototype.root = function() {\n      var node;\n      node = this;\n      while (node) {\n        if (node.isDocument) {\n          return node.rootObject;\n        } else if (node.isRoot) {\n          return node;\n        } else {\n          node = node.parent;\n        }\n      }\n    };\n\n    XMLNode.prototype.document = function() {\n      var node;\n      node = this;\n      while (node) {\n        if (node.isDocument) {\n          return node;\n        } else {\n          node = node.parent;\n        }\n      }\n    };\n\n    XMLNode.prototype.end = function(options) {\n      return this.document().end(options);\n    };\n\n    XMLNode.prototype.prev = function() {\n      var i;\n      i = this.parent.children.indexOf(this);\n      if (i < 1) {\n        throw new Error(\"Already at the first node\");\n      }\n      return this.parent.children[i - 1];\n    };\n\n    XMLNode.prototype.next = function() {\n      var i;\n      i = this.parent.children.indexOf(this);\n      if (i === -1 || i === this.parent.children.length - 1) {\n        throw new Error(\"Already at the last node\");\n      }\n      return this.parent.children[i + 1];\n    };\n\n    XMLNode.prototype.importDocument = function(doc) {\n      var clonedRoot;\n      clonedRoot = doc.root().clone();\n      clonedRoot.parent = this;\n      clonedRoot.isRoot = false;\n      this.children.push(clonedRoot);\n      return this;\n    };\n\n    XMLNode.prototype.ele = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLNode.prototype.nod = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLNode.prototype.txt = function(value) {\n      return this.text(value);\n    };\n\n    XMLNode.prototype.dat = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLNode.prototype.com = function(value) {\n      return this.comment(value);\n    };\n\n    XMLNode.prototype.ins = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLNode.prototype.doc = function() {\n      return this.document();\n    };\n\n    XMLNode.prototype.dec = function(version, encoding, standalone) {\n      return this.declaration(version, encoding, standalone);\n    };\n\n    XMLNode.prototype.dtd = function(pubID, sysID) {\n      return this.doctype(pubID, sysID);\n    };\n\n    XMLNode.prototype.e = function(name, attributes, text) {\n      return this.element(name, attributes, text);\n    };\n\n    XMLNode.prototype.n = function(name, attributes, text) {\n      return this.node(name, attributes, text);\n    };\n\n    XMLNode.prototype.t = function(value) {\n      return this.text(value);\n    };\n\n    XMLNode.prototype.d = function(value) {\n      return this.cdata(value);\n    };\n\n    XMLNode.prototype.c = function(value) {\n      return this.comment(value);\n    };\n\n    XMLNode.prototype.r = function(value) {\n      return this.raw(value);\n    };\n\n    XMLNode.prototype.i = function(target, value) {\n      return this.instruction(target, value);\n    };\n\n    XMLNode.prototype.u = function() {\n      return this.up();\n    };\n\n    XMLNode.prototype.importXMLBuilder = function(doc) {\n      return this.importDocument(doc);\n    };\n\n    return XMLNode;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLNode, XMLProcessingInstruction,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLProcessingInstruction = (function(superClass) {\n    extend(XMLProcessingInstruction, superClass);\n\n    function XMLProcessingInstruction(parent, target, value) {\n      XMLProcessingInstruction.__super__.constructor.call(this, parent);\n      if (target == null) {\n        throw new Error(\"Missing instruction target\");\n      }\n      this.target = this.stringify.insTarget(target);\n      if (value) {\n        this.value = this.stringify.insValue(value);\n      }\n    }\n\n    XMLProcessingInstruction.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLProcessingInstruction.prototype.toString = function(options) {\n      return this.options.writer.set(options).processingInstruction(this);\n    };\n\n    return XMLProcessingInstruction;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLNode, XMLRaw,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLRaw = (function(superClass) {\n    extend(XMLRaw, superClass);\n\n    function XMLRaw(parent, text) {\n      XMLRaw.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing raw text\");\n      }\n      this.value = this.stringify.raw(text);\n    }\n\n    XMLRaw.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLRaw.prototype.toString = function(options) {\n      return this.options.writer.set(options).raw(this);\n    };\n\n    return XMLRaw;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLElement, XMLProcessingInstruction, XMLRaw, XMLStreamWriter, XMLText, XMLWriterBase,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLDeclaration = require('./XMLDeclaration');\n\n  XMLDocType = require('./XMLDocType');\n\n  XMLCData = require('./XMLCData');\n\n  XMLComment = require('./XMLComment');\n\n  XMLElement = require('./XMLElement');\n\n  XMLRaw = require('./XMLRaw');\n\n  XMLText = require('./XMLText');\n\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  XMLWriterBase = require('./XMLWriterBase');\n\n  module.exports = XMLStreamWriter = (function(superClass) {\n    extend(XMLStreamWriter, superClass);\n\n    function XMLStreamWriter(stream, options) {\n      XMLStreamWriter.__super__.constructor.call(this, options);\n      this.stream = stream;\n    }\n\n    XMLStreamWriter.prototype.document = function(doc) {\n      var child, i, j, len, len1, ref, ref1, results;\n      ref = doc.children;\n      for (i = 0, len = ref.length; i < len; i++) {\n        child = ref[i];\n        child.isLastRootNode = false;\n      }\n      doc.children[doc.children.length - 1].isLastRootNode = true;\n      ref1 = doc.children;\n      results = [];\n      for (j = 0, len1 = ref1.length; j < len1; j++) {\n        child = ref1[j];\n        switch (false) {\n          case !(child instanceof XMLDeclaration):\n            results.push(this.declaration(child));\n            break;\n          case !(child instanceof XMLDocType):\n            results.push(this.docType(child));\n            break;\n          case !(child instanceof XMLComment):\n            results.push(this.comment(child));\n            break;\n          case !(child instanceof XMLProcessingInstruction):\n            results.push(this.processingInstruction(child));\n            break;\n          default:\n            results.push(this.element(child));\n        }\n      }\n      return results;\n    };\n\n    XMLStreamWriter.prototype.attribute = function(att) {\n      return this.stream.write(' ' + att.name + '=\"' + att.value + '\"');\n    };\n\n    XMLStreamWriter.prototype.cdata = function(node, level) {\n      return this.stream.write(this.space(level) + '<![CDATA[' + node.text + ']]>' + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.comment = function(node, level) {\n      return this.stream.write(this.space(level) + '<!-- ' + node.text + ' -->' + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.declaration = function(node, level) {\n      this.stream.write(this.space(level));\n      this.stream.write('<?xml version=\"' + node.version + '\"');\n      if (node.encoding != null) {\n        this.stream.write(' encoding=\"' + node.encoding + '\"');\n      }\n      if (node.standalone != null) {\n        this.stream.write(' standalone=\"' + node.standalone + '\"');\n      }\n      this.stream.write(this.spacebeforeslash + '?>');\n      return this.stream.write(this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.docType = function(node, level) {\n      var child, i, len, ref;\n      level || (level = 0);\n      this.stream.write(this.space(level));\n      this.stream.write('<!DOCTYPE ' + node.root().name);\n      if (node.pubID && node.sysID) {\n        this.stream.write(' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"');\n      } else if (node.sysID) {\n        this.stream.write(' SYSTEM \"' + node.sysID + '\"');\n      }\n      if (node.children.length > 0) {\n        this.stream.write(' [');\n        this.stream.write(this.endline(node));\n        ref = node.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          switch (false) {\n            case !(child instanceof XMLDTDAttList):\n              this.dtdAttList(child, level + 1);\n              break;\n            case !(child instanceof XMLDTDElement):\n              this.dtdElement(child, level + 1);\n              break;\n            case !(child instanceof XMLDTDEntity):\n              this.dtdEntity(child, level + 1);\n              break;\n            case !(child instanceof XMLDTDNotation):\n              this.dtdNotation(child, level + 1);\n              break;\n            case !(child instanceof XMLCData):\n              this.cdata(child, level + 1);\n              break;\n            case !(child instanceof XMLComment):\n              this.comment(child, level + 1);\n              break;\n            case !(child instanceof XMLProcessingInstruction):\n              this.processingInstruction(child, level + 1);\n              break;\n            default:\n              throw new Error(\"Unknown DTD node type: \" + child.constructor.name);\n          }\n        }\n        this.stream.write(']');\n      }\n      this.stream.write(this.spacebeforeslash + '>');\n      return this.stream.write(this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.element = function(node, level) {\n      var att, child, i, len, name, ref, ref1, space;\n      level || (level = 0);\n      space = this.space(level);\n      this.stream.write(space + '<' + node.name);\n      ref = node.attributes;\n      for (name in ref) {\n        if (!hasProp.call(ref, name)) continue;\n        att = ref[name];\n        this.attribute(att);\n      }\n      if (node.children.length === 0 || node.children.every(function(e) {\n        return e.value === '';\n      })) {\n        if (this.allowEmpty) {\n          this.stream.write('></' + node.name + '>');\n        } else {\n          this.stream.write(this.spacebeforeslash + '/>');\n        }\n      } else if (this.pretty && node.children.length === 1 && (node.children[0].value != null)) {\n        this.stream.write('>');\n        this.stream.write(node.children[0].value);\n        this.stream.write('</' + node.name + '>');\n      } else {\n        this.stream.write('>' + this.newline);\n        ref1 = node.children;\n        for (i = 0, len = ref1.length; i < len; i++) {\n          child = ref1[i];\n          switch (false) {\n            case !(child instanceof XMLCData):\n              this.cdata(child, level + 1);\n              break;\n            case !(child instanceof XMLComment):\n              this.comment(child, level + 1);\n              break;\n            case !(child instanceof XMLElement):\n              this.element(child, level + 1);\n              break;\n            case !(child instanceof XMLRaw):\n              this.raw(child, level + 1);\n              break;\n            case !(child instanceof XMLText):\n              this.text(child, level + 1);\n              break;\n            case !(child instanceof XMLProcessingInstruction):\n              this.processingInstruction(child, level + 1);\n              break;\n            default:\n              throw new Error(\"Unknown XML node type: \" + child.constructor.name);\n          }\n        }\n        this.stream.write(space + '</' + node.name + '>');\n      }\n      return this.stream.write(this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.processingInstruction = function(node, level) {\n      this.stream.write(this.space(level) + '<?' + node.target);\n      if (node.value) {\n        this.stream.write(' ' + node.value);\n      }\n      return this.stream.write(this.spacebeforeslash + '?>' + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.raw = function(node, level) {\n      return this.stream.write(this.space(level) + node.value + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.text = function(node, level) {\n      return this.stream.write(this.space(level) + node.value + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.dtdAttList = function(node, level) {\n      this.stream.write(this.space(level) + '<!ATTLIST ' + node.elementName + ' ' + node.attributeName + ' ' + node.attributeType);\n      if (node.defaultValueType !== '#DEFAULT') {\n        this.stream.write(' ' + node.defaultValueType);\n      }\n      if (node.defaultValue) {\n        this.stream.write(' \"' + node.defaultValue + '\"');\n      }\n      return this.stream.write(this.spacebeforeslash + '>' + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.dtdElement = function(node, level) {\n      this.stream.write(this.space(level) + '<!ELEMENT ' + node.name + ' ' + node.value);\n      return this.stream.write(this.spacebeforeslash + '>' + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.dtdEntity = function(node, level) {\n      this.stream.write(this.space(level) + '<!ENTITY');\n      if (node.pe) {\n        this.stream.write(' %');\n      }\n      this.stream.write(' ' + node.name);\n      if (node.value) {\n        this.stream.write(' \"' + node.value + '\"');\n      } else {\n        if (node.pubID && node.sysID) {\n          this.stream.write(' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"');\n        } else if (node.sysID) {\n          this.stream.write(' SYSTEM \"' + node.sysID + '\"');\n        }\n        if (node.nData) {\n          this.stream.write(' NDATA ' + node.nData);\n        }\n      }\n      return this.stream.write(this.spacebeforeslash + '>' + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.dtdNotation = function(node, level) {\n      this.stream.write(this.space(level) + '<!NOTATION ' + node.name);\n      if (node.pubID && node.sysID) {\n        this.stream.write(' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"');\n      } else if (node.pubID) {\n        this.stream.write(' PUBLIC \"' + node.pubID + '\"');\n      } else if (node.sysID) {\n        this.stream.write(' SYSTEM \"' + node.sysID + '\"');\n      }\n      return this.stream.write(this.spacebeforeslash + '>' + this.endline(node));\n    };\n\n    XMLStreamWriter.prototype.endline = function(node) {\n      if (!node.isLastRootNode) {\n        return this.newline;\n      } else {\n        return '';\n      }\n    };\n\n    return XMLStreamWriter;\n\n  })(XMLWriterBase);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLCData, XMLComment, XMLDTDAttList, XMLDTDElement, XMLDTDEntity, XMLDTDNotation, XMLDeclaration, XMLDocType, XMLElement, XMLProcessingInstruction, XMLRaw, XMLStringWriter, XMLText, XMLWriterBase,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLDeclaration = require('./XMLDeclaration');\n\n  XMLDocType = require('./XMLDocType');\n\n  XMLCData = require('./XMLCData');\n\n  XMLComment = require('./XMLComment');\n\n  XMLElement = require('./XMLElement');\n\n  XMLRaw = require('./XMLRaw');\n\n  XMLText = require('./XMLText');\n\n  XMLProcessingInstruction = require('./XMLProcessingInstruction');\n\n  XMLDTDAttList = require('./XMLDTDAttList');\n\n  XMLDTDElement = require('./XMLDTDElement');\n\n  XMLDTDEntity = require('./XMLDTDEntity');\n\n  XMLDTDNotation = require('./XMLDTDNotation');\n\n  XMLWriterBase = require('./XMLWriterBase');\n\n  module.exports = XMLStringWriter = (function(superClass) {\n    extend(XMLStringWriter, superClass);\n\n    function XMLStringWriter(options) {\n      XMLStringWriter.__super__.constructor.call(this, options);\n    }\n\n    XMLStringWriter.prototype.document = function(doc) {\n      var child, i, len, r, ref;\n      this.textispresent = false;\n      r = '';\n      ref = doc.children;\n      for (i = 0, len = ref.length; i < len; i++) {\n        child = ref[i];\n        r += (function() {\n          switch (false) {\n            case !(child instanceof XMLDeclaration):\n              return this.declaration(child);\n            case !(child instanceof XMLDocType):\n              return this.docType(child);\n            case !(child instanceof XMLComment):\n              return this.comment(child);\n            case !(child instanceof XMLProcessingInstruction):\n              return this.processingInstruction(child);\n            default:\n              return this.element(child, 0);\n          }\n        }).call(this);\n      }\n      if (this.pretty && r.slice(-this.newline.length) === this.newline) {\n        r = r.slice(0, -this.newline.length);\n      }\n      return r;\n    };\n\n    XMLStringWriter.prototype.attribute = function(att) {\n      return ' ' + att.name + '=\"' + att.value + '\"';\n    };\n\n    XMLStringWriter.prototype.cdata = function(node, level) {\n      return this.space(level) + '<![CDATA[' + node.text + ']]>' + this.newline;\n    };\n\n    XMLStringWriter.prototype.comment = function(node, level) {\n      return this.space(level) + '<!-- ' + node.text + ' -->' + this.newline;\n    };\n\n    XMLStringWriter.prototype.declaration = function(node, level) {\n      var r;\n      r = this.space(level);\n      r += '<?xml version=\"' + node.version + '\"';\n      if (node.encoding != null) {\n        r += ' encoding=\"' + node.encoding + '\"';\n      }\n      if (node.standalone != null) {\n        r += ' standalone=\"' + node.standalone + '\"';\n      }\n      r += this.spacebeforeslash + '?>';\n      r += this.newline;\n      return r;\n    };\n\n    XMLStringWriter.prototype.docType = function(node, level) {\n      var child, i, len, r, ref;\n      level || (level = 0);\n      r = this.space(level);\n      r += '<!DOCTYPE ' + node.root().name;\n      if (node.pubID && node.sysID) {\n        r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n      } else if (node.sysID) {\n        r += ' SYSTEM \"' + node.sysID + '\"';\n      }\n      if (node.children.length > 0) {\n        r += ' [';\n        r += this.newline;\n        ref = node.children;\n        for (i = 0, len = ref.length; i < len; i++) {\n          child = ref[i];\n          r += (function() {\n            switch (false) {\n              case !(child instanceof XMLDTDAttList):\n                return this.dtdAttList(child, level + 1);\n              case !(child instanceof XMLDTDElement):\n                return this.dtdElement(child, level + 1);\n              case !(child instanceof XMLDTDEntity):\n                return this.dtdEntity(child, level + 1);\n              case !(child instanceof XMLDTDNotation):\n                return this.dtdNotation(child, level + 1);\n              case !(child instanceof XMLCData):\n                return this.cdata(child, level + 1);\n              case !(child instanceof XMLComment):\n                return this.comment(child, level + 1);\n              case !(child instanceof XMLProcessingInstruction):\n                return this.processingInstruction(child, level + 1);\n              default:\n                throw new Error(\"Unknown DTD node type: \" + child.constructor.name);\n            }\n          }).call(this);\n        }\n        r += ']';\n      }\n      r += this.spacebeforeslash + '>';\n      r += this.newline;\n      return r;\n    };\n\n    XMLStringWriter.prototype.element = function(node, level) {\n      var att, child, i, j, len, len1, name, r, ref, ref1, ref2, space, textispresentwasset;\n      level || (level = 0);\n      textispresentwasset = false;\n      if (this.textispresent) {\n        this.newline = '';\n        this.pretty = false;\n      } else {\n        this.newline = this.newlinedefault;\n        this.pretty = this.prettydefault;\n      }\n      space = this.space(level);\n      r = '';\n      r += space + '<' + node.name;\n      ref = node.attributes;\n      for (name in ref) {\n        if (!hasProp.call(ref, name)) continue;\n        att = ref[name];\n        r += this.attribute(att);\n      }\n      if (node.children.length === 0 || node.children.every(function(e) {\n        return e.value === '';\n      })) {\n        if (this.allowEmpty) {\n          r += '></' + node.name + '>' + this.newline;\n        } else {\n          r += this.spacebeforeslash + '/>' + this.newline;\n        }\n      } else if (this.pretty && node.children.length === 1 && (node.children[0].value != null)) {\n        r += '>';\n        r += node.children[0].value;\n        r += '</' + node.name + '>' + this.newline;\n      } else {\n        if (this.dontprettytextnodes) {\n          ref1 = node.children;\n          for (i = 0, len = ref1.length; i < len; i++) {\n            child = ref1[i];\n            if (child.value != null) {\n              this.textispresent++;\n              textispresentwasset = true;\n              break;\n            }\n          }\n        }\n        if (this.textispresent) {\n          this.newline = '';\n          this.pretty = false;\n          space = this.space(level);\n        }\n        r += '>' + this.newline;\n        ref2 = node.children;\n        for (j = 0, len1 = ref2.length; j < len1; j++) {\n          child = ref2[j];\n          r += (function() {\n            switch (false) {\n              case !(child instanceof XMLCData):\n                return this.cdata(child, level + 1);\n              case !(child instanceof XMLComment):\n                return this.comment(child, level + 1);\n              case !(child instanceof XMLElement):\n                return this.element(child, level + 1);\n              case !(child instanceof XMLRaw):\n                return this.raw(child, level + 1);\n              case !(child instanceof XMLText):\n                return this.text(child, level + 1);\n              case !(child instanceof XMLProcessingInstruction):\n                return this.processingInstruction(child, level + 1);\n              default:\n                throw new Error(\"Unknown XML node type: \" + child.constructor.name);\n            }\n          }).call(this);\n        }\n        if (textispresentwasset) {\n          this.textispresent--;\n        }\n        if (!this.textispresent) {\n          this.newline = this.newlinedefault;\n          this.pretty = this.prettydefault;\n        }\n        r += space + '</' + node.name + '>' + this.newline;\n      }\n      return r;\n    };\n\n    XMLStringWriter.prototype.processingInstruction = function(node, level) {\n      var r;\n      r = this.space(level) + '<?' + node.target;\n      if (node.value) {\n        r += ' ' + node.value;\n      }\n      r += this.spacebeforeslash + '?>' + this.newline;\n      return r;\n    };\n\n    XMLStringWriter.prototype.raw = function(node, level) {\n      return this.space(level) + node.value + this.newline;\n    };\n\n    XMLStringWriter.prototype.text = function(node, level) {\n      return this.space(level) + node.value + this.newline;\n    };\n\n    XMLStringWriter.prototype.dtdAttList = function(node, level) {\n      var r;\n      r = this.space(level) + '<!ATTLIST ' + node.elementName + ' ' + node.attributeName + ' ' + node.attributeType;\n      if (node.defaultValueType !== '#DEFAULT') {\n        r += ' ' + node.defaultValueType;\n      }\n      if (node.defaultValue) {\n        r += ' \"' + node.defaultValue + '\"';\n      }\n      r += this.spacebeforeslash + '>' + this.newline;\n      return r;\n    };\n\n    XMLStringWriter.prototype.dtdElement = function(node, level) {\n      return this.space(level) + '<!ELEMENT ' + node.name + ' ' + node.value + this.spacebeforeslash + '>' + this.newline;\n    };\n\n    XMLStringWriter.prototype.dtdEntity = function(node, level) {\n      var r;\n      r = this.space(level) + '<!ENTITY';\n      if (node.pe) {\n        r += ' %';\n      }\n      r += ' ' + node.name;\n      if (node.value) {\n        r += ' \"' + node.value + '\"';\n      } else {\n        if (node.pubID && node.sysID) {\n          r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n        } else if (node.sysID) {\n          r += ' SYSTEM \"' + node.sysID + '\"';\n        }\n        if (node.nData) {\n          r += ' NDATA ' + node.nData;\n        }\n      }\n      r += this.spacebeforeslash + '>' + this.newline;\n      return r;\n    };\n\n    XMLStringWriter.prototype.dtdNotation = function(node, level) {\n      var r;\n      r = this.space(level) + '<!NOTATION ' + node.name;\n      if (node.pubID && node.sysID) {\n        r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n      } else if (node.pubID) {\n        r += ' PUBLIC \"' + node.pubID + '\"';\n      } else if (node.sysID) {\n        r += ' SYSTEM \"' + node.sysID + '\"';\n      }\n      r += this.spacebeforeslash + '>' + this.newline;\n      return r;\n    };\n\n    XMLStringWriter.prototype.openNode = function(node, level) {\n      var att, name, r, ref;\n      level || (level = 0);\n      if (node instanceof XMLElement) {\n        r = this.space(level) + '<' + node.name;\n        ref = node.attributes;\n        for (name in ref) {\n          if (!hasProp.call(ref, name)) continue;\n          att = ref[name];\n          r += this.attribute(att);\n        }\n        r += (node.children ? '>' : '/>') + this.newline;\n        return r;\n      } else {\n        r = this.space(level) + '<!DOCTYPE ' + node.rootNodeName;\n        if (node.pubID && node.sysID) {\n          r += ' PUBLIC \"' + node.pubID + '\" \"' + node.sysID + '\"';\n        } else if (node.sysID) {\n          r += ' SYSTEM \"' + node.sysID + '\"';\n        }\n        r += (node.children ? ' [' : '>') + this.newline;\n        return r;\n      }\n    };\n\n    XMLStringWriter.prototype.closeNode = function(node, level) {\n      level || (level = 0);\n      switch (false) {\n        case !(node instanceof XMLElement):\n          return this.space(level) + '</' + node.name + '>' + this.newline;\n        case !(node instanceof XMLDocType):\n          return this.space(level) + ']>' + this.newline;\n      }\n    };\n\n    return XMLStringWriter;\n\n  })(XMLWriterBase);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLStringifier,\n    bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    hasProp = {}.hasOwnProperty;\n\n  module.exports = XMLStringifier = (function() {\n    function XMLStringifier(options) {\n      this.assertLegalChar = bind(this.assertLegalChar, this);\n      var key, ref, value;\n      options || (options = {});\n      this.noDoubleEncoding = options.noDoubleEncoding;\n      ref = options.stringify || {};\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this[key] = value;\n      }\n    }\n\n    XMLStringifier.prototype.eleName = function(val) {\n      val = '' + val || '';\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.eleText = function(val) {\n      val = '' + val || '';\n      return this.assertLegalChar(this.elEscape(val));\n    };\n\n    XMLStringifier.prototype.cdata = function(val) {\n      val = '' + val || '';\n      val = val.replace(']]>', ']]]]><![CDATA[>');\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.comment = function(val) {\n      val = '' + val || '';\n      if (val.match(/--/)) {\n        throw new Error(\"Comment text cannot contain double-hypen: \" + val);\n      }\n      return this.assertLegalChar(val);\n    };\n\n    XMLStringifier.prototype.raw = function(val) {\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.attName = function(val) {\n      return val = '' + val || '';\n    };\n\n    XMLStringifier.prototype.attValue = function(val) {\n      val = '' + val || '';\n      return this.attEscape(val);\n    };\n\n    XMLStringifier.prototype.insTarget = function(val) {\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.insValue = function(val) {\n      val = '' + val || '';\n      if (val.match(/\\?>/)) {\n        throw new Error(\"Invalid processing instruction value: \" + val);\n      }\n      return val;\n    };\n\n    XMLStringifier.prototype.xmlVersion = function(val) {\n      val = '' + val || '';\n      if (!val.match(/1\\.[0-9]+/)) {\n        throw new Error(\"Invalid version number: \" + val);\n      }\n      return val;\n    };\n\n    XMLStringifier.prototype.xmlEncoding = function(val) {\n      val = '' + val || '';\n      if (!val.match(/^[A-Za-z](?:[A-Za-z0-9._-])*$/)) {\n        throw new Error(\"Invalid encoding: \" + val);\n      }\n      return val;\n    };\n\n    XMLStringifier.prototype.xmlStandalone = function(val) {\n      if (val) {\n        return \"yes\";\n      } else {\n        return \"no\";\n      }\n    };\n\n    XMLStringifier.prototype.dtdPubID = function(val) {\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.dtdSysID = function(val) {\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.dtdElementValue = function(val) {\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.dtdAttType = function(val) {\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.dtdAttDefault = function(val) {\n      if (val != null) {\n        return '' + val || '';\n      } else {\n        return val;\n      }\n    };\n\n    XMLStringifier.prototype.dtdEntityValue = function(val) {\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.dtdNData = function(val) {\n      return '' + val || '';\n    };\n\n    XMLStringifier.prototype.convertAttKey = '@';\n\n    XMLStringifier.prototype.convertPIKey = '?';\n\n    XMLStringifier.prototype.convertTextKey = '#text';\n\n    XMLStringifier.prototype.convertCDataKey = '#cdata';\n\n    XMLStringifier.prototype.convertCommentKey = '#comment';\n\n    XMLStringifier.prototype.convertRawKey = '#raw';\n\n    XMLStringifier.prototype.assertLegalChar = function(str) {\n      var res;\n      res = str.match(/[\\0\\uFFFE\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]/);\n      if (res) {\n        throw new Error(\"Invalid character in string: \" + str + \" at index \" + res.index);\n      }\n      return str;\n    };\n\n    XMLStringifier.prototype.elEscape = function(str) {\n      var ampregex;\n      ampregex = this.noDoubleEncoding ? /(?!&\\S+;)&/g : /&/g;\n      return str.replace(ampregex, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\\r/g, '&#xD;');\n    };\n\n    XMLStringifier.prototype.attEscape = function(str) {\n      var ampregex;\n      ampregex = this.noDoubleEncoding ? /(?!&\\S+;)&/g : /&/g;\n      return str.replace(ampregex, '&amp;').replace(/</g, '&lt;').replace(/\"/g, '&quot;').replace(/\\t/g, '&#x9;').replace(/\\n/g, '&#xA;').replace(/\\r/g, '&#xD;');\n    };\n\n    return XMLStringifier;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLNode, XMLText,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  XMLNode = require('./XMLNode');\n\n  module.exports = XMLText = (function(superClass) {\n    extend(XMLText, superClass);\n\n    function XMLText(parent, text) {\n      XMLText.__super__.constructor.call(this, parent);\n      if (text == null) {\n        throw new Error(\"Missing element text\");\n      }\n      this.value = this.stringify.eleText(text);\n    }\n\n    XMLText.prototype.clone = function() {\n      return Object.create(this);\n    };\n\n    XMLText.prototype.toString = function(options) {\n      return this.options.writer.set(options).text(this);\n    };\n\n    return XMLText;\n\n  })(XMLNode);\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLWriterBase,\n    hasProp = {}.hasOwnProperty;\n\n  module.exports = XMLWriterBase = (function() {\n    function XMLWriterBase(options) {\n      var key, ref, ref1, ref2, ref3, ref4, ref5, ref6, value;\n      options || (options = {});\n      this.pretty = options.pretty || false;\n      this.allowEmpty = (ref = options.allowEmpty) != null ? ref : false;\n      if (this.pretty) {\n        this.indent = (ref1 = options.indent) != null ? ref1 : '  ';\n        this.newline = (ref2 = options.newline) != null ? ref2 : '\\n';\n        this.offset = (ref3 = options.offset) != null ? ref3 : 0;\n        this.dontprettytextnodes = (ref4 = options.dontprettytextnodes) != null ? ref4 : 0;\n      } else {\n        this.indent = '';\n        this.newline = '';\n        this.offset = 0;\n        this.dontprettytextnodes = 0;\n      }\n      this.spacebeforeslash = (ref5 = options.spacebeforeslash) != null ? ref5 : '';\n      if (this.spacebeforeslash === true) {\n        this.spacebeforeslash = ' ';\n      }\n      this.newlinedefault = this.newline;\n      this.prettydefault = this.pretty;\n      ref6 = options.writer || {};\n      for (key in ref6) {\n        if (!hasProp.call(ref6, key)) continue;\n        value = ref6[key];\n        this[key] = value;\n      }\n    }\n\n    XMLWriterBase.prototype.set = function(options) {\n      var key, ref, value;\n      options || (options = {});\n      if (\"pretty\" in options) {\n        this.pretty = options.pretty;\n      }\n      if (\"allowEmpty\" in options) {\n        this.allowEmpty = options.allowEmpty;\n      }\n      if (this.pretty) {\n        this.indent = \"indent\" in options ? options.indent : '  ';\n        this.newline = \"newline\" in options ? options.newline : '\\n';\n        this.offset = \"offset\" in options ? options.offset : 0;\n        this.dontprettytextnodes = \"dontprettytextnodes\" in options ? options.dontprettytextnodes : 0;\n      } else {\n        this.indent = '';\n        this.newline = '';\n        this.offset = 0;\n        this.dontprettytextnodes = 0;\n      }\n      this.spacebeforeslash = \"spacebeforeslash\" in options ? options.spacebeforeslash : '';\n      if (this.spacebeforeslash === true) {\n        this.spacebeforeslash = ' ';\n      }\n      this.newlinedefault = this.newline;\n      this.prettydefault = this.pretty;\n      ref = options.writer || {};\n      for (key in ref) {\n        if (!hasProp.call(ref, key)) continue;\n        value = ref[key];\n        this[key] = value;\n      }\n      return this;\n    };\n\n    XMLWriterBase.prototype.space = function(level) {\n      var indent;\n      if (this.pretty) {\n        indent = (level || 0) + this.offset + 1;\n        if (indent > 0) {\n          return new Array(indent).join(this.indent);\n        } else {\n          return '';\n        }\n      } else {\n        return '';\n      }\n    };\n\n    return XMLWriterBase;\n\n  })();\n\n}).call(this);\n","// Generated by CoffeeScript 1.12.7\n(function() {\n  var XMLDocument, XMLDocumentCB, XMLStreamWriter, XMLStringWriter, assign, isFunction, ref;\n\n  ref = require('./Utility'), assign = ref.assign, isFunction = ref.isFunction;\n\n  XMLDocument = require('./XMLDocument');\n\n  XMLDocumentCB = require('./XMLDocumentCB');\n\n  XMLStringWriter = require('./XMLStringWriter');\n\n  XMLStreamWriter = require('./XMLStreamWriter');\n\n  module.exports.create = function(name, xmldec, doctype, options) {\n    var doc, root;\n    if (name == null) {\n      throw new Error(\"Root element needs a name\");\n    }\n    options = assign({}, xmldec, doctype, options);\n    doc = new XMLDocument(options);\n    root = doc.element(name);\n    if (!options.headless) {\n      doc.declaration(options);\n      if ((options.pubID != null) || (options.sysID != null)) {\n        doc.doctype(options);\n      }\n    }\n    return root;\n  };\n\n  module.exports.begin = function(options, onData, onEnd) {\n    var ref1;\n    if (isFunction(options)) {\n      ref1 = [options, onData], onData = ref1[0], onEnd = ref1[1];\n      options = {};\n    }\n    if (onData) {\n      return new XMLDocumentCB(options, onData, onEnd);\n    } else {\n      return new XMLDocument(options);\n    }\n  };\n\n  module.exports.stringWriter = function(options) {\n    return new XMLStringWriter(options);\n  };\n\n  module.exports.streamWriter = function(stream, options) {\n    return new XMLStreamWriter(stream, options);\n  };\n\n}).call(this);\n","module.exports = require(\"buffer\");;","module.exports = require(\"child_process\");;","module.exports = require(\"crypto\");;","module.exports = require(\"dgram\");;","module.exports = require(\"domain\");;","module.exports = require(\"events\");;","module.exports = require(\"fs\");;","module.exports = require(\"http\");;","module.exports = require(\"https\");;","module.exports = require(\"os\");;","module.exports = require(\"path\");;","module.exports = require(\"querystring\");;","module.exports = require(\"stream\");;","module.exports = require(\"string_decoder\");;","module.exports = require(\"timers\");;","module.exports = require(\"url\");;","module.exports = require(\"util\");;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(6366);\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}